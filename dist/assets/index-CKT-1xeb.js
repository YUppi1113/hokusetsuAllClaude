function hx(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Qu={exports:{}},si={},Yu={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var An=Symbol.for("react.element"),fx=Symbol.for("react.portal"),px=Symbol.for("react.fragment"),xx=Symbol.for("react.strict_mode"),gx=Symbol.for("react.profiler"),yx=Symbol.for("react.provider"),vx=Symbol.for("react.context"),wx=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),jx=Symbol.for("react.memo"),bx=Symbol.for("react.lazy"),id=Symbol.iterator;function Nx(e){return e===null||typeof e!="object"?null:(e=id&&e[id]||e["@@iterator"],typeof e=="function"?e:null)}var Xu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zu=Object.assign,eh={};function Ts(e,t,r){this.props=e,this.context=t,this.refs=eh,this.updater=r||Xu}Ts.prototype.isReactComponent={};Ts.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ts.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function th(){}th.prototype=Ts.prototype;function Uo(e,t,r){this.props=e,this.context=t,this.refs=eh,this.updater=r||Xu}var Fo=Uo.prototype=new th;Fo.constructor=Uo;Zu(Fo,Ts.prototype);Fo.isPureReactComponent=!0;var ld=Array.isArray,rh=Object.prototype.hasOwnProperty,zo={current:null},sh={key:!0,ref:!0,__self:!0,__source:!0};function nh(e,t,r){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)rh.call(t,n)&&!sh.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:An,type:e,key:i,ref:l,props:a,_owner:zo.current}}function kx(e,t){return{$$typeof:An,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bo(e){return typeof e=="object"&&e!==null&&e.$$typeof===An}function Sx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var od=/\/+/g;function Ii(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sx(""+e.key):t.toString(36)}function pa(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case An:case fx:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+Ii(l,0):n,ld(a)?(r="",e!=null&&(r=e.replace(od,"$&/")+"/"),pa(a,t,r,"",function(c){return c})):a!=null&&(Bo(a)&&(a=kx(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(od,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",ld(e))for(var o=0;o<e.length;o++){i=e[o];var d=n+Ii(i,o);l+=pa(i,t,r,d,a)}else if(d=Nx(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=n+Ii(i,o++),l+=pa(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Hn(e,t,r){if(e==null)return e;var n=[],a=0;return pa(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Cx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Me={current:null},xa={transition:null},Ex={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:xa,ReactCurrentOwner:zo};function ah(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Hn,forEach:function(e,t,r){Hn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Hn(e,function(){t++}),t},toArray:function(e){return Hn(e,function(t){return t})||[]},only:function(e){if(!Bo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Ts;J.Fragment=px;J.Profiler=gx;J.PureComponent=Uo;J.StrictMode=xx;J.Suspense=_x;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ex;J.act=ah;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Zu({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=zo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)rh.call(t,d)&&!sh.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:An,type:e.type,key:a,ref:i,props:n,_owner:l}};J.createContext=function(e){return e={$$typeof:vx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yx,_context:e},e.Consumer=e};J.createElement=nh;J.createFactory=function(e){var t=nh.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:wx,render:e}};J.isValidElement=Bo;J.lazy=function(e){return{$$typeof:bx,_payload:{_status:-1,_result:e},_init:Cx}};J.memo=function(e,t){return{$$typeof:jx,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};J.unstable_act=ah;J.useCallback=function(e,t){return Me.current.useCallback(e,t)};J.useContext=function(e){return Me.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Me.current.useDeferredValue(e)};J.useEffect=function(e,t){return Me.current.useEffect(e,t)};J.useId=function(){return Me.current.useId()};J.useImperativeHandle=function(e,t,r){return Me.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return Me.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Me.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Me.current.useMemo(e,t)};J.useReducer=function(e,t,r){return Me.current.useReducer(e,t,r)};J.useRef=function(e){return Me.current.useRef(e)};J.useState=function(e){return Me.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return Me.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return Me.current.useTransition()};J.version="18.3.1";Yu.exports=J;var y=Yu.exports;const Lt=Ju(y),ih=hx({__proto__:null,default:Lt},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=y,Px=Symbol.for("react.element"),Lx=Symbol.for("react.fragment"),Rx=Object.prototype.hasOwnProperty,Dx=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ix={key:!0,ref:!0,__self:!0,__source:!0};function lh(e,t,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Rx.call(t,n)&&!Ix.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Px,type:e,key:i,ref:l,props:a,_owner:Dx.current}}si.Fragment=Lx;si.jsx=lh;si.jsxs=lh;Qu.exports=si;var s=Qu.exports,jl={},oh={exports:{}},Ze={},ch={exports:{}},dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,T){var R=k.length;k.push(T);e:for(;0<R;){var O=R-1>>>1,z=k[O];if(0<a(z,T))k[O]=T,k[R]=z,R=O;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var T=k[0],R=k.pop();if(R!==T){k[0]=R;e:for(var O=0,z=k.length,Q=z>>>1;O<Q;){var Z=2*(O+1)-1,we=k[Z],fe=Z+1,tt=k[fe];if(0>a(we,R))fe<z&&0>a(tt,we)?(k[O]=tt,k[fe]=R,O=fe):(k[O]=we,k[Z]=R,O=Z);else if(fe<z&&0>a(tt,R))k[O]=tt,k[fe]=R,O=fe;else break e}}return T}function a(k,T){var R=k.sortIndex-T.sortIndex;return R!==0?R:k.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],h=1,f=null,u=3,g=!1,w=!1,m=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var T=r(c);T!==null;){if(T.callback===null)n(c);else if(T.startTime<=k)n(c),T.sortIndex=T.expirationTime,t(d,T);else break;T=r(c)}}function j(k){if(m=!1,_(k),!w)if(r(d)!==null)w=!0,V(S);else{var T=r(c);T!==null&&H(j,T.startTime-k)}}function S(k,T){w=!1,m&&(m=!1,v(C),C=-1),g=!0;var R=u;try{for(_(T),f=r(d);f!==null&&(!(f.expirationTime>T)||k&&!$());){var O=f.callback;if(typeof O=="function"){f.callback=null,u=f.priorityLevel;var z=O(f.expirationTime<=T);T=e.unstable_now(),typeof z=="function"?f.callback=z:f===r(d)&&n(d),_(T)}else n(d);f=r(d)}if(f!==null)var Q=!0;else{var Z=r(c);Z!==null&&H(j,Z.startTime-T),Q=!1}return Q}finally{f=null,u=R,g=!1}}var b=!1,N=null,C=-1,P=5,L=-1;function $(){return!(e.unstable_now()-L<P)}function I(){if(N!==null){var k=e.unstable_now();L=k;var T=!0;try{T=N(!0,k)}finally{T?F():(b=!1,N=null)}}else b=!1}var F;if(typeof x=="function")F=function(){x(I)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=I,F=function(){q.postMessage(null)}}else F=function(){p(I,0)};function V(k){N=k,b||(b=!0,F())}function H(k,T){C=p(function(){k(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,V(S))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(k){switch(u){case 1:case 2:case 3:var T=3;break;default:T=u}var R=u;u=T;try{return k()}finally{u=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,T){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var R=u;u=k;try{return T()}finally{u=R}},e.unstable_scheduleCallback=function(k,T,R){var O=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?O+R:O):R=O,k){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=R+z,k={id:h++,callback:T,priorityLevel:k,startTime:R,expirationTime:z,sortIndex:-1},R>O?(k.sortIndex=R,t(c,k),r(d)===null&&k===r(c)&&(m?(v(C),C=-1):m=!0,H(j,R-O))):(k.sortIndex=z,t(d,k),w||g||(w=!0,V(S))),k},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(k){var T=u;return function(){var R=u;u=T;try{return k.apply(this,arguments)}finally{u=R}}}})(dh);ch.exports=dh;var Ox=ch.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=y,Xe=Ox;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uh=new Set,pn={};function Fr(e,t){ys(e,t),ys(e+"Capture",t)}function ys(e,t){for(pn[e]=t,e=0;e<t.length;e++)uh.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bl=Object.prototype.hasOwnProperty,Ax=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cd={},dd={};function Mx(e){return bl.call(dd,e)?!0:bl.call(cd,e)?!1:Ax.test(e)?dd[e]=!0:(cd[e]=!0,!1)}function Ux(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fx(e,t,r,n){if(t===null||typeof t>"u"||Ux(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ue(e,t,r,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new Ue(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new Ue(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new Ue(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new Ue(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new Ue(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new Ue(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new Ue(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new Ue(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new Ue(e,5,!1,e.toLowerCase(),null,!1,!1)});var qo=/[\-:]([a-z])/g;function Vo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qo,Vo);Pe[t]=new Ue(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qo,Vo);Pe[t]=new Ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qo,Vo);Pe[t]=new Ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new Ue(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new Ue(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wo(e,t,r,n){var a=Pe.hasOwnProperty(t)?Pe[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fx(t,r,a,n)&&(r=null),n||a===null?Mx(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Vt=$x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kn=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Ho=Symbol.for("react.strict_mode"),Nl=Symbol.for("react.profiler"),hh=Symbol.for("react.provider"),mh=Symbol.for("react.context"),Ko=Symbol.for("react.forward_ref"),kl=Symbol.for("react.suspense"),Sl=Symbol.for("react.suspense_list"),Go=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),fh=Symbol.for("react.offscreen"),ud=Symbol.iterator;function Us(e){return e===null||typeof e!="object"?null:(e=ud&&e[ud]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,Oi;function Qs(e){if(Oi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Oi=t&&t[1]||""}return`
`+Oi+e}var $i=!1;function Ai(e,t){if(!e||$i)return"";$i=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{$i=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qs(e):""}function zx(e){switch(e.tag){case 5:return Qs(e.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return e=Ai(e.type,!1),e;case 11:return e=Ai(e.type.render,!1),e;case 1:return e=Ai(e.type,!0),e;default:return""}}function Cl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xr:return"Fragment";case Yr:return"Portal";case Nl:return"Profiler";case Ho:return"StrictMode";case kl:return"Suspense";case Sl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mh:return(e.displayName||"Context")+".Consumer";case hh:return(e._context.displayName||"Context")+".Provider";case Ko:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Go:return t=e.displayName||null,t!==null?t:Cl(e.type)||"Memo";case Yt:t=e._payload,e=e._init;try{return Cl(e(t))}catch{}}return null}function Bx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cl(t);case 8:return t===Ho?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ph(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qx(e){var t=ph(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gn(e){e._valueTracker||(e._valueTracker=qx(e))}function xh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ph(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function El(e,t){var r=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function hd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=pr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gh(e,t){t=t.checked,t!=null&&Wo(e,"checked",t,!1)}function Tl(e,t){gh(e,t);var r=pr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Pl(e,t.type,pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function md(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Pl(e,t,r){(t!=="number"||Pa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ys=Array.isArray;function cs(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ll(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(Ys(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pr(r)}}function yh(e,t){var r=pr(t.value),n=pr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function pd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jn,wh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vx=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(e){Vx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tn[t]=tn[e]})});function _h(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||tn.hasOwnProperty(e)&&tn[e]?(""+t).trim():t+"px"}function jh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=_h(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Wx=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dl(e,t){if(t){if(Wx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Il(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ol=null;function Jo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $l=null,ds=null,us=null;function xd(e){if(e=Fn(e)){if(typeof $l!="function")throw Error(D(280));var t=e.stateNode;t&&(t=oi(t),$l(e.stateNode,e.type,t))}}function bh(e){ds?us?us.push(e):us=[e]:ds=e}function Nh(){if(ds){var e=ds,t=us;if(us=ds=null,xd(e),t)for(e=0;e<t.length;e++)xd(t[e])}}function kh(e,t){return e(t)}function Sh(){}var Mi=!1;function Ch(e,t,r){if(Mi)return e(t,r);Mi=!0;try{return kh(e,t,r)}finally{Mi=!1,(ds!==null||us!==null)&&(Sh(),Nh())}}function gn(e,t){var r=e.stateNode;if(r===null)return null;var n=oi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var Al=!1;if(Ft)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Al=!1}function Hx(e,t,r,n,a,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var rn=!1,La=null,Ra=!1,Ml=null,Kx={onError:function(e){rn=!0,La=e}};function Gx(e,t,r,n,a,i,l,o,d){rn=!1,La=null,Hx.apply(Kx,arguments)}function Jx(e,t,r,n,a,i,l,o,d){if(Gx.apply(this,arguments),rn){if(rn){var c=La;rn=!1,La=null}else throw Error(D(198));Ra||(Ra=!0,Ml=c)}}function zr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Eh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gd(e){if(zr(e)!==e)throw Error(D(188))}function Qx(e){var t=e.alternate;if(!t){if(t=zr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return gd(a),e;if(i===n)return gd(a),t;i=i.sibling}throw Error(D(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function Th(e){return e=Qx(e),e!==null?Ph(e):null}function Ph(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ph(e);if(t!==null)return t;e=e.sibling}return null}var Lh=Xe.unstable_scheduleCallback,yd=Xe.unstable_cancelCallback,Yx=Xe.unstable_shouldYield,Xx=Xe.unstable_requestPaint,pe=Xe.unstable_now,Zx=Xe.unstable_getCurrentPriorityLevel,Qo=Xe.unstable_ImmediatePriority,Rh=Xe.unstable_UserBlockingPriority,Da=Xe.unstable_NormalPriority,eg=Xe.unstable_LowPriority,Dh=Xe.unstable_IdlePriority,ni=null,St=null;function tg(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(ni,e,void 0,(e.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:ng,rg=Math.log,sg=Math.LN2;function ng(e){return e>>>=0,e===0?32:31-(rg(e)/sg|0)|0}var Qn=64,Yn=4194304;function Xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ia(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=Xs(o):(i&=l,i!==0&&(n=Xs(i)))}else l=r&~a,l!==0?n=Xs(l):i!==0&&(n=Xs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-gt(t),a=1<<r,n|=e[r],t&=~a;return n}function ag(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ig(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-gt(i),o=1<<l,d=a[l];d===-1?(!(o&r)||o&n)&&(a[l]=ag(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function Ul(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ih(){var e=Qn;return Qn<<=1,!(Qn&4194240)&&(Qn=64),e}function Ui(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Mn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gt(t),e[t]=r}function lg(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-gt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Yo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-gt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var re=0;function Oh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $h,Xo,Ah,Mh,Uh,Fl=!1,Xn=[],ir=null,lr=null,or=null,yn=new Map,vn=new Map,er=[],og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(t.pointerId)}}function zs(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Fn(t),t!==null&&Xo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function cg(e,t,r,n,a){switch(t){case"focusin":return ir=zs(ir,e,t,r,n,a),!0;case"dragenter":return lr=zs(lr,e,t,r,n,a),!0;case"mouseover":return or=zs(or,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return yn.set(i,zs(yn.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,vn.set(i,zs(vn.get(i)||null,e,t,r,n,a)),!0}return!1}function Fh(e){var t=Er(e.target);if(t!==null){var r=zr(t);if(r!==null){if(t=r.tag,t===13){if(t=Eh(r),t!==null){e.blockedOn=t,Uh(e.priority,function(){Ah(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=zl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ol=n,r.target.dispatchEvent(n),Ol=null}else return t=Fn(r),t!==null&&Xo(t),e.blockedOn=r,!1;t.shift()}return!0}function wd(e,t,r){ga(e)&&r.delete(t)}function dg(){Fl=!1,ir!==null&&ga(ir)&&(ir=null),lr!==null&&ga(lr)&&(lr=null),or!==null&&ga(or)&&(or=null),yn.forEach(wd),vn.forEach(wd)}function Bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Fl||(Fl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,dg)))}function wn(e){function t(a){return Bs(a,e)}if(0<Xn.length){Bs(Xn[0],e);for(var r=1;r<Xn.length;r++){var n=Xn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ir!==null&&Bs(ir,e),lr!==null&&Bs(lr,e),or!==null&&Bs(or,e),yn.forEach(t),vn.forEach(t),r=0;r<er.length;r++)n=er[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<er.length&&(r=er[0],r.blockedOn===null);)Fh(r),r.blockedOn===null&&er.shift()}var hs=Vt.ReactCurrentBatchConfig,Oa=!0;function ug(e,t,r,n){var a=re,i=hs.transition;hs.transition=null;try{re=1,Zo(e,t,r,n)}finally{re=a,hs.transition=i}}function hg(e,t,r,n){var a=re,i=hs.transition;hs.transition=null;try{re=4,Zo(e,t,r,n)}finally{re=a,hs.transition=i}}function Zo(e,t,r,n){if(Oa){var a=zl(e,t,r,n);if(a===null)Ji(e,t,n,$a,r),vd(e,n);else if(cg(a,e,t,r,n))n.stopPropagation();else if(vd(e,n),t&4&&-1<og.indexOf(e)){for(;a!==null;){var i=Fn(a);if(i!==null&&$h(i),i=zl(e,t,r,n),i===null&&Ji(e,t,n,$a,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Ji(e,t,n,null,r)}}var $a=null;function zl(e,t,r,n){if($a=null,e=Jo(n),e=Er(e),e!==null)if(t=zr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Eh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $a=e,null}function zh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zx()){case Qo:return 1;case Rh:return 4;case Da:case eg:return 16;case Dh:return 536870912;default:return 16}default:return 16}}var sr=null,ec=null,ya=null;function Bh(){if(ya)return ya;var e,t=ec,r=t.length,n,a="value"in sr?sr.value:sr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[i-n];n++);return ya=a.slice(e,1<n?1-n:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function _d(){return!1}function et(e){function t(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zn:_d,this.isPropagationStopped=_d,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=et(Ps),Un=ue({},Ps,{view:0,detail:0}),mg=et(Un),Fi,zi,qs,ai=ue({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qs&&(qs&&e.type==="mousemove"?(Fi=e.screenX-qs.screenX,zi=e.screenY-qs.screenY):zi=Fi=0,qs=e),Fi)},movementY:function(e){return"movementY"in e?e.movementY:zi}}),jd=et(ai),fg=ue({},ai,{dataTransfer:0}),pg=et(fg),xg=ue({},Un,{relatedTarget:0}),Bi=et(xg),gg=ue({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),yg=et(gg),vg=ue({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wg=et(vg),_g=ue({},Ps,{data:0}),bd=et(_g),jg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ng[e])?!!t[e]:!1}function rc(){return kg}var Sg=ue({},Un,{key:function(e){if(e.key){var t=jg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cg=et(Sg),Eg=ue({},ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nd=et(Eg),Tg=ue({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),Pg=et(Tg),Lg=ue({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=et(Lg),Dg=ue({},ai,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ig=et(Dg),Og=[9,13,27,32],sc=Ft&&"CompositionEvent"in window,sn=null;Ft&&"documentMode"in document&&(sn=document.documentMode);var $g=Ft&&"TextEvent"in window&&!sn,qh=Ft&&(!sc||sn&&8<sn&&11>=sn),kd=" ",Sd=!1;function Vh(e,t){switch(e){case"keyup":return Og.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function Ag(e,t){switch(e){case"compositionend":return Wh(t);case"keypress":return t.which!==32?null:(Sd=!0,kd);case"textInput":return e=t.data,e===kd&&Sd?null:e;default:return null}}function Mg(e,t){if(Zr)return e==="compositionend"||!sc&&Vh(e,t)?(e=Bh(),ya=ec=sr=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qh&&t.locale!=="ko"?null:t.data;default:return null}}var Ug={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ug[e.type]:t==="textarea"}function Hh(e,t,r,n){bh(n),t=Aa(t,"onChange"),0<t.length&&(r=new tc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var nn=null,_n=null;function Fg(e){sm(e,0)}function ii(e){var t=rs(e);if(xh(t))return e}function zg(e,t){if(e==="change")return t}var Kh=!1;if(Ft){var qi;if(Ft){var Vi="oninput"in document;if(!Vi){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),Vi=typeof Ed.oninput=="function"}qi=Vi}else qi=!1;Kh=qi&&(!document.documentMode||9<document.documentMode)}function Td(){nn&&(nn.detachEvent("onpropertychange",Gh),_n=nn=null)}function Gh(e){if(e.propertyName==="value"&&ii(_n)){var t=[];Hh(t,_n,e,Jo(e)),Ch(Fg,t)}}function Bg(e,t,r){e==="focusin"?(Td(),nn=t,_n=r,nn.attachEvent("onpropertychange",Gh)):e==="focusout"&&Td()}function qg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(_n)}function Vg(e,t){if(e==="click")return ii(t)}function Wg(e,t){if(e==="input"||e==="change")return ii(t)}function Hg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Hg;function jn(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!bl.call(t,a)||!wt(e[a],t[a]))return!1}return!0}function Pd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ld(e,t){var r=Pd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pd(r)}}function Jh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qh(){for(var e=window,t=Pa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pa(e.document)}return t}function nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kg(e){var t=Qh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Jh(r.ownerDocument.documentElement,r)){if(n!==null&&nc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Ld(r,i);var l=Ld(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gg=Ft&&"documentMode"in document&&11>=document.documentMode,es=null,Bl=null,an=null,ql=!1;function Rd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ql||es==null||es!==Pa(n)||(n=es,"selectionStart"in n&&nc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),an&&jn(an,n)||(an=n,n=Aa(Bl,"onSelect"),0<n.length&&(t=new tc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=es)))}function ea(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ts={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Wi={},Yh={};Ft&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function li(e){if(Wi[e])return Wi[e];if(!ts[e])return e;var t=ts[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Yh)return Wi[e]=t[r];return e}var Xh=li("animationend"),Zh=li("animationiteration"),em=li("animationstart"),tm=li("transitionend"),rm=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){rm.set(e,t),Fr(t,[e])}for(var Hi=0;Hi<Dd.length;Hi++){var Ki=Dd[Hi],Jg=Ki.toLowerCase(),Qg=Ki[0].toUpperCase()+Ki.slice(1);yr(Jg,"on"+Qg)}yr(Xh,"onAnimationEnd");yr(Zh,"onAnimationIteration");yr(em,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(tm,"onTransitionEnd");ys("onMouseEnter",["mouseout","mouseover"]);ys("onMouseLeave",["mouseout","mouseover"]);ys("onPointerEnter",["pointerout","pointerover"]);ys("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function Id(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Jx(n,t,void 0,e),e.currentTarget=null}function sm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&a.isPropagationStopped())break e;Id(a,o,c),i=d}else for(l=0;l<n.length;l++){if(o=n[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&a.isPropagationStopped())break e;Id(a,o,c),i=d}}}if(Ra)throw e=Ml,Ra=!1,Ml=null,e}function ie(e,t){var r=t[Gl];r===void 0&&(r=t[Gl]=new Set);var n=e+"__bubble";r.has(n)||(nm(t,e,2,!1),r.add(n))}function Gi(e,t,r){var n=0;t&&(n|=4),nm(r,e,n,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function bn(e){if(!e[ta]){e[ta]=!0,uh.forEach(function(r){r!=="selectionchange"&&(Yg.has(r)||Gi(r,!1,e),Gi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,Gi("selectionchange",!1,t))}}function nm(e,t,r,n){switch(zh(t)){case 1:var a=ug;break;case 4:a=hg;break;default:a=Zo}r=a.bind(null,t,r,e),a=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ji(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Er(o),l===null)return;if(d=l.tag,d===5||d===6){n=i=l;continue e}o=o.parentNode}}n=n.return}Ch(function(){var c=i,h=Jo(r),f=[];e:{var u=rm.get(e);if(u!==void 0){var g=tc,w=e;switch(e){case"keypress":if(va(r)===0)break e;case"keydown":case"keyup":g=Cg;break;case"focusin":w="focus",g=Bi;break;case"focusout":w="blur",g=Bi;break;case"beforeblur":case"afterblur":g=Bi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Pg;break;case Xh:case Zh:case em:g=yg;break;case tm:g=Rg;break;case"scroll":g=mg;break;case"wheel":g=Ig;break;case"copy":case"cut":case"paste":g=wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Nd}var m=(t&4)!==0,p=!m&&e==="scroll",v=m?u!==null?u+"Capture":null:u;m=[];for(var x=c,_;x!==null;){_=x;var j=_.stateNode;if(_.tag===5&&j!==null&&(_=j,v!==null&&(j=gn(x,v),j!=null&&m.push(Nn(x,j,_)))),p)break;x=x.return}0<m.length&&(u=new g(u,w,null,r,h),f.push({event:u,listeners:m}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",u&&r!==Ol&&(w=r.relatedTarget||r.fromElement)&&(Er(w)||w[zt]))break e;if((g||u)&&(u=h.window===h?h:(u=h.ownerDocument)?u.defaultView||u.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=c,w=w?Er(w):null,w!==null&&(p=zr(w),w!==p||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(m=jd,j="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(m=Nd,j="onPointerLeave",v="onPointerEnter",x="pointer"),p=g==null?u:rs(g),_=w==null?u:rs(w),u=new m(j,x+"leave",g,r,h),u.target=p,u.relatedTarget=_,j=null,Er(h)===c&&(m=new m(v,x+"enter",w,r,h),m.target=_,m.relatedTarget=p,j=m),p=j,g&&w)t:{for(m=g,v=w,x=0,_=m;_;_=Wr(_))x++;for(_=0,j=v;j;j=Wr(j))_++;for(;0<x-_;)m=Wr(m),x--;for(;0<_-x;)v=Wr(v),_--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Wr(m),v=Wr(v)}m=null}else m=null;g!==null&&Od(f,u,g,m,!1),w!==null&&p!==null&&Od(f,p,w,m,!0)}}e:{if(u=c?rs(c):window,g=u.nodeName&&u.nodeName.toLowerCase(),g==="select"||g==="input"&&u.type==="file")var S=zg;else if(Cd(u))if(Kh)S=Wg;else{S=qg;var b=Bg}else(g=u.nodeName)&&g.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(S=Vg);if(S&&(S=S(e,c))){Hh(f,S,r,h);break e}b&&b(e,u,c),e==="focusout"&&(b=u._wrapperState)&&b.controlled&&u.type==="number"&&Pl(u,"number",u.value)}switch(b=c?rs(c):window,e){case"focusin":(Cd(b)||b.contentEditable==="true")&&(es=b,Bl=c,an=null);break;case"focusout":an=Bl=es=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Rd(f,r,h);break;case"selectionchange":if(Gg)break;case"keydown":case"keyup":Rd(f,r,h)}var N;if(sc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Zr?Vh(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(qh&&r.locale!=="ko"&&(Zr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Zr&&(N=Bh()):(sr=h,ec="value"in sr?sr.value:sr.textContent,Zr=!0)),b=Aa(c,C),0<b.length&&(C=new bd(C,e,null,r,h),f.push({event:C,listeners:b}),N?C.data=N:(N=Wh(r),N!==null&&(C.data=N)))),(N=$g?Ag(e,r):Mg(e,r))&&(c=Aa(c,"onBeforeInput"),0<c.length&&(h=new bd("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=N))}sm(f,t)})}function Nn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Aa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gn(e,r),i!=null&&n.unshift(Nn(e,i,a)),i=gn(e,t),i!=null&&n.push(Nn(e,i,a))),e=e.return}return n}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Od(e,t,r,n,a){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===n)break;o.tag===5&&c!==null&&(o=c,a?(d=gn(r,i),d!=null&&l.unshift(Nn(r,d,o))):a||(d=gn(r,i),d!=null&&l.push(Nn(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Xg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function $d(e){return(typeof e=="string"?e:""+e).replace(Xg,`
`).replace(Zg,"")}function ra(e,t,r){if(t=$d(t),$d(e)!==t&&r)throw Error(D(425))}function Ma(){}var Vl=null,Wl=null;function Hl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(e){return Ad.resolve(null).then(e).catch(r0)}:Kl;function r0(e){setTimeout(function(){throw e})}function Qi(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),wn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);wn(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Md(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),kt="__reactFiber$"+Ls,kn="__reactProps$"+Ls,zt="__reactContainer$"+Ls,Gl="__reactEvents$"+Ls,s0="__reactListeners$"+Ls,n0="__reactHandles$"+Ls;function Er(e){var t=e[kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zt]||r[kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Md(e);e!==null;){if(r=e[kt])return r;e=Md(e)}return t}e=r,r=e.parentNode}return null}function Fn(e){return e=e[kt]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function oi(e){return e[kn]||null}var Jl=[],ss=-1;function vr(e){return{current:e}}function le(e){0>ss||(e.current=Jl[ss],Jl[ss]=null,ss--)}function ne(e,t){ss++,Jl[ss]=e.current,e.current=t}var xr={},Ie=vr(xr),We=vr(!1),Ir=xr;function vs(e,t){var r=e.type.contextTypes;if(!r)return xr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function He(e){return e=e.childContextTypes,e!=null}function Ua(){le(We),le(Ie)}function Ud(e,t,r){if(Ie.current!==xr)throw Error(D(168));ne(Ie,t),ne(We,r)}function am(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(D(108,Bx(e)||"Unknown",a));return ue({},r,n)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xr,Ir=Ie.current,ne(Ie,e),ne(We,We.current),!0}function Fd(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=am(e,t,Ir),n.__reactInternalMemoizedMergedChildContext=e,le(We),le(Ie),ne(Ie,e)):le(We),ne(We,r)}var It=null,ci=!1,Yi=!1;function im(e){It===null?It=[e]:It.push(e)}function a0(e){ci=!0,im(e)}function wr(){if(!Yi&&It!==null){Yi=!0;var e=0,t=re;try{var r=It;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}It=null,ci=!1}catch(a){throw It!==null&&(It=It.slice(e+1)),Lh(Qo,wr),a}finally{re=t,Yi=!1}}return null}var ns=[],as=0,za=null,Ba=0,nt=[],at=0,Or=null,Ot=1,$t="";function br(e,t){ns[as++]=Ba,ns[as++]=za,za=e,Ba=t}function lm(e,t,r){nt[at++]=Ot,nt[at++]=$t,nt[at++]=Or,Or=e;var n=Ot;e=$t;var a=32-gt(n)-1;n&=~(1<<a),r+=1;var i=32-gt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Ot=1<<32-gt(t)+a|r<<a|n,$t=i+e}else Ot=1<<i|r<<a|n,$t=e}function ac(e){e.return!==null&&(br(e,1),lm(e,1,0))}function ic(e){for(;e===za;)za=ns[--as],ns[as]=null,Ba=ns[--as],ns[as]=null;for(;e===Or;)Or=nt[--at],nt[at]=null,$t=nt[--at],nt[at]=null,Ot=nt[--at],nt[at]=null}var Ye=null,Qe=null,oe=!1,xt=null;function om(e,t){var r=it(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Or!==null?{id:Ot,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=it(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ye=e,Qe=null,!0):!1;default:return!1}}function Ql(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yl(e){if(oe){var t=Qe;if(t){var r=t;if(!zd(e,t)){if(Ql(e))throw Error(D(418));t=cr(r.nextSibling);var n=Ye;t&&zd(e,t)?om(n,r):(e.flags=e.flags&-4097|2,oe=!1,Ye=e)}}else{if(Ql(e))throw Error(D(418));e.flags=e.flags&-4097|2,oe=!1,Ye=e}}}function Bd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function sa(e){if(e!==Ye)return!1;if(!oe)return Bd(e),oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hl(e.type,e.memoizedProps)),t&&(t=Qe)){if(Ql(e))throw cm(),Error(D(418));for(;t;)om(e,t),t=cr(t.nextSibling)}if(Bd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qe=cr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Ye?cr(e.stateNode.nextSibling):null;return!0}function cm(){for(var e=Qe;e;)e=cr(e.nextSibling)}function ws(){Qe=Ye=null,oe=!1}function lc(e){xt===null?xt=[e]:xt.push(e)}var i0=Vt.ReactCurrentBatchConfig;function Vs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function na(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qd(e){var t=e._init;return t(e._payload)}function dm(e){function t(v,x){if(e){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=mr(v,x),v.index=0,v.sibling=null,v}function i(v,x,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,x,_,j){return x===null||x.tag!==6?(x=nl(_,v.mode,j),x.return=v,x):(x=a(x,_),x.return=v,x)}function d(v,x,_,j){var S=_.type;return S===Xr?h(v,x,_.props.children,j,_.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yt&&qd(S)===x.type)?(j=a(x,_.props),j.ref=Vs(v,x,_),j.return=v,j):(j=Sa(_.type,_.key,_.props,null,v.mode,j),j.ref=Vs(v,x,_),j.return=v,j)}function c(v,x,_,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=al(_,v.mode,j),x.return=v,x):(x=a(x,_.children||[]),x.return=v,x)}function h(v,x,_,j,S){return x===null||x.tag!==7?(x=Dr(_,v.mode,j,S),x.return=v,x):(x=a(x,_),x.return=v,x)}function f(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nl(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kn:return _=Sa(x.type,x.key,x.props,null,v.mode,_),_.ref=Vs(v,null,x),_.return=v,_;case Yr:return x=al(x,v.mode,_),x.return=v,x;case Yt:var j=x._init;return f(v,j(x._payload),_)}if(Ys(x)||Us(x))return x=Dr(x,v.mode,_,null),x.return=v,x;na(v,x)}return null}function u(v,x,_,j){var S=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:o(v,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Kn:return _.key===S?d(v,x,_,j):null;case Yr:return _.key===S?c(v,x,_,j):null;case Yt:return S=_._init,u(v,x,S(_._payload),j)}if(Ys(_)||Us(_))return S!==null?null:h(v,x,_,j,null);na(v,_)}return null}function g(v,x,_,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(_)||null,o(x,v,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kn:return v=v.get(j.key===null?_:j.key)||null,d(x,v,j,S);case Yr:return v=v.get(j.key===null?_:j.key)||null,c(x,v,j,S);case Yt:var b=j._init;return g(v,x,_,b(j._payload),S)}if(Ys(j)||Us(j))return v=v.get(_)||null,h(x,v,j,S,null);na(x,j)}return null}function w(v,x,_,j){for(var S=null,b=null,N=x,C=x=0,P=null;N!==null&&C<_.length;C++){N.index>C?(P=N,N=null):P=N.sibling;var L=u(v,N,_[C],j);if(L===null){N===null&&(N=P);break}e&&N&&L.alternate===null&&t(v,N),x=i(L,x,C),b===null?S=L:b.sibling=L,b=L,N=P}if(C===_.length)return r(v,N),oe&&br(v,C),S;if(N===null){for(;C<_.length;C++)N=f(v,_[C],j),N!==null&&(x=i(N,x,C),b===null?S=N:b.sibling=N,b=N);return oe&&br(v,C),S}for(N=n(v,N);C<_.length;C++)P=g(N,v,C,_[C],j),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?C:P.key),x=i(P,x,C),b===null?S=P:b.sibling=P,b=P);return e&&N.forEach(function($){return t(v,$)}),oe&&br(v,C),S}function m(v,x,_,j){var S=Us(_);if(typeof S!="function")throw Error(D(150));if(_=S.call(_),_==null)throw Error(D(151));for(var b=S=null,N=x,C=x=0,P=null,L=_.next();N!==null&&!L.done;C++,L=_.next()){N.index>C?(P=N,N=null):P=N.sibling;var $=u(v,N,L.value,j);if($===null){N===null&&(N=P);break}e&&N&&$.alternate===null&&t(v,N),x=i($,x,C),b===null?S=$:b.sibling=$,b=$,N=P}if(L.done)return r(v,N),oe&&br(v,C),S;if(N===null){for(;!L.done;C++,L=_.next())L=f(v,L.value,j),L!==null&&(x=i(L,x,C),b===null?S=L:b.sibling=L,b=L);return oe&&br(v,C),S}for(N=n(v,N);!L.done;C++,L=_.next())L=g(N,v,C,L.value,j),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?C:L.key),x=i(L,x,C),b===null?S=L:b.sibling=L,b=L);return e&&N.forEach(function(I){return t(v,I)}),oe&&br(v,C),S}function p(v,x,_,j){if(typeof _=="object"&&_!==null&&_.type===Xr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Kn:e:{for(var S=_.key,b=x;b!==null;){if(b.key===S){if(S=_.type,S===Xr){if(b.tag===7){r(v,b.sibling),x=a(b,_.props.children),x.return=v,v=x;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yt&&qd(S)===b.type){r(v,b.sibling),x=a(b,_.props),x.ref=Vs(v,b,_),x.return=v,v=x;break e}r(v,b);break}else t(v,b);b=b.sibling}_.type===Xr?(x=Dr(_.props.children,v.mode,j,_.key),x.return=v,v=x):(j=Sa(_.type,_.key,_.props,null,v.mode,j),j.ref=Vs(v,x,_),j.return=v,v=j)}return l(v);case Yr:e:{for(b=_.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(v,x.sibling),x=a(x,_.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=al(_,v.mode,j),x.return=v,v=x}return l(v);case Yt:return b=_._init,p(v,x,b(_._payload),j)}if(Ys(_))return w(v,x,_,j);if(Us(_))return m(v,x,_,j);na(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,_),x.return=v,v=x):(r(v,x),x=nl(_,v.mode,j),x.return=v,v=x),l(v)):r(v,x)}return p}var _s=dm(!0),um=dm(!1),qa=vr(null),Va=null,is=null,oc=null;function cc(){oc=is=Va=null}function dc(e){var t=qa.current;le(qa),e._currentValue=t}function Xl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ms(e,t){Va=e,oc=is=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ve=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(oc!==e)if(e={context:e,memoizedValue:t,next:null},is===null){if(Va===null)throw Error(D(308));is=e,Va.dependencies={lanes:0,firstContext:e}}else is=is.next=e;return t}var Tr=null;function uc(e){Tr===null?Tr=[e]:Tr.push(e)}function hm(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,uc(t)):(r.next=a.next,a.next=r),t.interleaved=r,Bt(e,n)}function Bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xt=!1;function hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,X&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Bt(e,r)}return a=n.interleaved,a===null?(t.next=t,uc(n)):(t.next=a.next,a.next=t),n.interleaved=t,Bt(e,r)}function wa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yo(e,r)}}function Vd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wa(e,t,r,n){var a=e.updateQueue;Xt=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=d))}if(i!==null){var f=a.baseState;l=0,h=c=d=null,o=i;do{var u=o.lane,g=o.eventTime;if((n&u)===u){h!==null&&(h=h.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,m=o;switch(u=t,g=r,m.tag){case 1:if(w=m.payload,typeof w=="function"){f=w.call(g,f,u);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,u=typeof w=="function"?w.call(g,f,u):w,u==null)break e;f=ue({},f,u);break e;case 2:Xt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,u=a.effects,u===null?a.effects=[o]:u.push(o))}else g={eventTime:g,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,d=f):h=h.next=g,l|=u;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;u=o,o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}while(!0);if(h===null&&(d=f),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ar|=l,e.lanes=l,e.memoizedState=f}}function Wd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(D(191,a));a.call(n)}}}var zn={},Ct=vr(zn),Sn=vr(zn),Cn=vr(zn);function Pr(e){if(e===zn)throw Error(D(174));return e}function mc(e,t){switch(ne(Cn,t),ne(Sn,e),ne(Ct,zn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rl(t,e)}le(Ct),ne(Ct,t)}function js(){le(Ct),le(Sn),le(Cn)}function fm(e){Pr(Cn.current);var t=Pr(Ct.current),r=Rl(t,e.type);t!==r&&(ne(Sn,e),ne(Ct,r))}function fc(e){Sn.current===e&&(le(Ct),le(Sn))}var ce=vr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xi=[];function pc(){for(var e=0;e<Xi.length;e++)Xi[e]._workInProgressVersionPrimary=null;Xi.length=0}var _a=Vt.ReactCurrentDispatcher,Zi=Vt.ReactCurrentBatchConfig,$r=0,de=null,ye=null,je=null,Ka=!1,ln=!1,En=0,l0=0;function Le(){throw Error(D(321))}function xc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wt(e[r],t[r]))return!1;return!0}function gc(e,t,r,n,a,i){if($r=i,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_a.current=e===null||e.memoizedState===null?u0:h0,e=r(n,a),ln){i=0;do{if(ln=!1,En=0,25<=i)throw Error(D(301));i+=1,je=ye=null,t.updateQueue=null,_a.current=m0,e=r(n,a)}while(ln)}if(_a.current=Ga,t=ye!==null&&ye.next!==null,$r=0,je=ye=de=null,Ka=!1,t)throw Error(D(300));return e}function yc(){var e=En!==0;return En=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?de.memoizedState=je=e:je=je.next=e,je}function dt(){if(ye===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=je===null?de.memoizedState:je.next;if(t!==null)je=t,ye=e;else{if(e===null)throw Error(D(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},je===null?de.memoizedState=je=e:je=je.next=e}return je}function Tn(e,t){return typeof t=="function"?t(e):t}function el(e){var t=dt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=ye,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,d=null,c=i;do{var h=c.lane;if(($r&h)===h)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=f,l=n):d=d.next=f,de.lanes|=h,Ar|=h}c=c.next}while(c!==null&&c!==i);d===null?l=n:d.next=o,wt(n,t.memoizedState)||(Ve=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,de.lanes|=i,Ar|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tl(e){var t=dt(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);wt(i,t.memoizedState)||(Ve=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function pm(){}function xm(e,t){var r=de,n=dt(),a=t(),i=!wt(n.memoizedState,a);if(i&&(n.memoizedState=a,Ve=!0),n=n.queue,vc(vm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,Pn(9,ym.bind(null,r,n,a,t),void 0,null),Se===null)throw Error(D(349));$r&30||gm(r,t,a)}return a}function gm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ym(e,t,r,n){t.value=r,t.getSnapshot=n,wm(t)&&_m(e)}function vm(e,t,r){return r(function(){wm(t)&&_m(e)})}function wm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wt(e,r)}catch{return!0}}function _m(e){var t=Bt(e,1);t!==null&&yt(t,e,1,-1)}function Hd(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:e},t.queue=e,e=e.dispatch=d0.bind(null,de,e),[t.memoizedState,e]}function Pn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function jm(){return dt().memoizedState}function ja(e,t,r,n){var a=bt();de.flags|=e,a.memoizedState=Pn(1|t,r,void 0,n===void 0?null:n)}function di(e,t,r,n){var a=dt();n=n===void 0?null:n;var i=void 0;if(ye!==null){var l=ye.memoizedState;if(i=l.destroy,n!==null&&xc(n,l.deps)){a.memoizedState=Pn(t,r,i,n);return}}de.flags|=e,a.memoizedState=Pn(1|t,r,i,n)}function Kd(e,t){return ja(8390656,8,e,t)}function vc(e,t){return di(2048,8,e,t)}function bm(e,t){return di(4,2,e,t)}function Nm(e,t){return di(4,4,e,t)}function km(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sm(e,t,r){return r=r!=null?r.concat([e]):null,di(4,4,km.bind(null,t,e),r)}function wc(){}function Cm(e,t){var r=dt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Em(e,t){var r=dt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Tm(e,t,r){return $r&21?(wt(r,t)||(r=Ih(),de.lanes|=r,Ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=r)}function o0(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=Zi.transition;Zi.transition={};try{e(!1),t()}finally{re=r,Zi.transition=n}}function Pm(){return dt().memoizedState}function c0(e,t,r){var n=hr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lm(e))Rm(t,r);else if(r=hm(e,t,r,n),r!==null){var a=Ae();yt(r,e,n,a),Dm(r,t,n)}}function d0(e,t,r){var n=hr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lm(e))Rm(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,wt(o,l)){var d=t.interleaved;d===null?(a.next=a,uc(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=hm(e,t,a,n),r!==null&&(a=Ae(),yt(r,e,n,a),Dm(r,t,n))}}function Lm(e){var t=e.alternate;return e===de||t!==null&&t===de}function Rm(e,t){ln=Ka=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Dm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yo(e,r)}}var Ga={readContext:ct,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},u0={readContext:ct,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Kd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ja(4194308,4,km.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var r=bt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=bt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=c0.bind(null,de,e),[n.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Hd,useDebugValue:wc,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Hd(!1),t=e[0];return e=o0.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=de,a=bt();if(oe){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),Se===null)throw Error(D(349));$r&30||gm(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Kd(vm.bind(null,n,i,e),[e]),n.flags|=2048,Pn(9,ym.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=bt(),t=Se.identifierPrefix;if(oe){var r=$t,n=Ot;r=(n&~(1<<32-gt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=En++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=l0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h0={readContext:ct,useCallback:Cm,useContext:ct,useEffect:vc,useImperativeHandle:Sm,useInsertionEffect:bm,useLayoutEffect:Nm,useMemo:Em,useReducer:el,useRef:jm,useState:function(){return el(Tn)},useDebugValue:wc,useDeferredValue:function(e){var t=dt();return Tm(t,ye.memoizedState,e)},useTransition:function(){var e=el(Tn)[0],t=dt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:xm,useId:Pm,unstable_isNewReconciler:!1},m0={readContext:ct,useCallback:Cm,useContext:ct,useEffect:vc,useImperativeHandle:Sm,useInsertionEffect:bm,useLayoutEffect:Nm,useMemo:Em,useReducer:tl,useRef:jm,useState:function(){return tl(Tn)},useDebugValue:wc,useDeferredValue:function(e){var t=dt();return ye===null?t.memoizedState=e:Tm(t,ye.memoizedState,e)},useTransition:function(){var e=tl(Tn)[0],t=dt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:xm,useId:Pm,unstable_isNewReconciler:!1};function mt(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ui={isMounted:function(e){return(e=e._reactInternals)?zr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ae(),a=hr(e),i=Ut(n,a);i.payload=t,r!=null&&(i.callback=r),t=dr(e,i,a),t!==null&&(yt(t,e,a,n),wa(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ae(),a=hr(e),i=Ut(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=dr(e,i,a),t!==null&&(yt(t,e,a,n),wa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ae(),n=hr(e),a=Ut(r,n);a.tag=2,t!=null&&(a.callback=t),t=dr(e,a,n),t!==null&&(yt(t,e,n,r),wa(t,e,n))}};function Gd(e,t,r,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!jn(r,n)||!jn(a,i):!0}function Im(e,t,r){var n=!1,a=xr,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(a=He(t)?Ir:Ie.current,n=t.contextTypes,i=(n=n!=null)?vs(e,a):xr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ui,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ui.enqueueReplaceState(t,t.state,null)}function eo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},hc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ct(i):(i=He(t)?Ir:Ie.current,a.context=vs(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zl(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ui.enqueueReplaceState(a,a.state,null),Wa(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function bs(e,t){try{var r="",n=t;do r+=zx(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function rl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function to(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function Om(e,t,r){r=Ut(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qa||(Qa=!0,ho=n),to(e,t)},r}function $m(e,t,r){r=Ut(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){to(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){to(e,t),typeof n!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Qd(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new f0;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=E0.bind(null,e,t,r),t.then(e,e))}function Yd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xd(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ut(-1,1),t.tag=2,dr(r,t,1))),r.lanes|=1),e)}var p0=Vt.ReactCurrentOwner,Ve=!1;function $e(e,t,r,n){t.child=e===null?um(t,null,r,n):_s(t,e.child,r,n)}function Zd(e,t,r,n,a){r=r.render;var i=t.ref;return ms(t,a),n=gc(e,t,r,n,i,a),r=yc(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qt(e,t,a)):(oe&&r&&ac(t),t.flags|=1,$e(e,t,n,a),t.child)}function eu(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Ec(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Am(e,t,i,n,a)):(e=Sa(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:jn,r(l,n)&&e.ref===t.ref)return qt(e,t,a)}return t.flags|=1,e=mr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Am(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(jn(i,n)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ve=!0);else return t.lanes=e.lanes,qt(e,t,a)}return ro(e,t,r,n,a)}function Mm(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(os,Je),Je|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(os,Je),Je|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ne(os,Je),Je|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ne(os,Je),Je|=n;return $e(e,t,a,r),t.child}function Um(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ro(e,t,r,n,a){var i=He(r)?Ir:Ie.current;return i=vs(t,i),ms(t,a),r=gc(e,t,r,n,i,a),n=yc(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qt(e,t,a)):(oe&&n&&ac(t),t.flags|=1,$e(e,t,r,a),t.child)}function tu(e,t,r,n,a){if(He(r)){var i=!0;Fa(t)}else i=!1;if(ms(t,a),t.stateNode===null)ba(e,t),Im(t,r,n),eo(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=ct(c):(c=He(r)?Ir:Ie.current,c=vs(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||d!==c)&&Jd(t,l,n,c),Xt=!1;var u=t.memoizedState;l.state=u,Wa(t,n,l,a),d=t.memoizedState,o!==n||u!==d||We.current||Xt?(typeof h=="function"&&(Zl(t,r,h,n),d=t.memoizedState),(o=Xt||Gd(t,r,o,n,u,d,c))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),l.props=n,l.state=d,l.context=c,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,mm(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:mt(t.type,o),l.props=c,f=t.pendingProps,u=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=ct(d):(d=He(r)?Ir:Ie.current,d=vs(t,d));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||u!==d)&&Jd(t,l,n,d),Xt=!1,u=t.memoizedState,l.state=u,Wa(t,n,l,a);var w=t.memoizedState;o!==f||u!==w||We.current||Xt?(typeof g=="function"&&(Zl(t,r,g,n),w=t.memoizedState),(c=Xt||Gd(t,r,c,n,u,w,d)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),l.props=n,l.state=w,l.context=d,n=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return so(e,t,r,n,i,a)}function so(e,t,r,n,a,i){Um(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&Fd(t,r,!1),qt(e,t,i);n=t.stateNode,p0.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=_s(t,e.child,null,i),t.child=_s(t,null,o,i)):$e(e,t,o,i),t.memoizedState=n.state,a&&Fd(t,r,!0),t.child}function Fm(e){var t=e.stateNode;t.pendingContext?Ud(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ud(e,t.context,!1),mc(e,t.containerInfo)}function ru(e,t,r,n,a){return ws(),lc(a),t.flags|=256,$e(e,t,r,n),t.child}var no={dehydrated:null,treeContext:null,retryLane:0};function ao(e){return{baseLanes:e,cachePool:null,transitions:null}}function zm(e,t,r){var n=t.pendingProps,a=ce.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ne(ce,a&1),e===null)return Yl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=fi(l,n,0,null),e=Dr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ao(r),t.memoizedState=no,e):_c(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return x0(e,t,l,n,o,a,r);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=mr(a,d),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=mr(o,i):(i=Dr(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?ao(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=no,n}return i=e.child,e=i.sibling,n=mr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function _c(e,t){return t=fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aa(e,t,r,n){return n!==null&&lc(n),_s(t,e.child,null,r),e=_c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x0(e,t,r,n,a,i,l){if(r)return t.flags&256?(t.flags&=-257,n=rl(Error(D(422))),aa(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=fi({mode:"visible",children:n.children},a,0,null),i=Dr(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&_s(t,e.child,null,l),t.child.memoizedState=ao(l),t.memoizedState=no,i);if(!(t.mode&1))return aa(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(D(419)),n=rl(i,n,void 0),aa(e,t,l,n)}if(o=(l&e.childLanes)!==0,Ve||o){if(n=Se,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bt(e,a),yt(n,e,a,-1))}return Cc(),n=rl(Error(D(421))),aa(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=T0.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qe=cr(a.nextSibling),Ye=t,oe=!0,xt=null,e!==null&&(nt[at++]=Ot,nt[at++]=$t,nt[at++]=Or,Ot=e.id,$t=e.overflow,Or=t),t=_c(t,n.children),t.flags|=4096,t)}function su(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Xl(e.return,t,r)}function sl(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Bm(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if($e(e,t,n.children,r),n=ce.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&su(e,r,t);else if(e.tag===19)su(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ne(ce,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ha(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),sl(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}sl(t,!0,r,null,i);break;case"together":sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function g0(e,t,r){switch(t.tag){case 3:Fm(t),ws();break;case 5:fm(t);break;case 1:He(t.type)&&Fa(t);break;case 4:mc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ne(qa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ne(ce,ce.current&1),t.flags|=128,null):r&t.child.childLanes?zm(e,t,r):(ne(ce,ce.current&1),e=qt(e,t,r),e!==null?e.sibling:null);ne(ce,ce.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Bm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ne(ce,ce.current),n)break;return null;case 22:case 23:return t.lanes=0,Mm(e,t,r)}return qt(e,t,r)}var qm,io,Vm,Wm;qm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};io=function(){};Vm=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Pr(Ct.current);var i=null;switch(r){case"input":a=El(e,a),n=El(e,n),i=[];break;case"select":a=ue({},a,{value:void 0}),n=ue({},n,{value:void 0}),i=[];break;case"textarea":a=Ll(e,a),n=Ll(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ma)}Dl(r,n);var l;r=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var d=n[c];if(o=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pn.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&ie("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Wm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ws(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function y0(e,t,r){var n=t.pendingProps;switch(ic(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return He(t.type)&&Ua(),Re(t),null;case 3:return n=t.stateNode,js(),le(We),le(Ie),pc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(po(xt),xt=null))),io(e,t),Re(t),null;case 5:fc(t);var a=Pr(Cn.current);if(r=t.type,e!==null&&t.stateNode!=null)Vm(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return Re(t),null}if(e=Pr(Ct.current),sa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[kt]=t,n[kn]=i,e=(t.mode&1)!==0,r){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(a=0;a<Zs.length;a++)ie(Zs[a],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":hd(n,i),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ie("invalid",n);break;case"textarea":fd(n,i),ie("invalid",n)}Dl(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&ra(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ra(n.textContent,o,e),a=["children",""+o]):pn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ie("scroll",n)}switch(r){case"input":Gn(n),md(n,i,!0);break;case"textarea":Gn(n),pd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ma)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[kt]=t,e[kn]=n,qm(e,t,!1,!1),t.stateNode=e;e:{switch(l=Il(r,n),r){case"dialog":ie("cancel",e),ie("close",e),a=n;break;case"iframe":case"object":case"embed":ie("load",e),a=n;break;case"video":case"audio":for(a=0;a<Zs.length;a++)ie(Zs[a],e);a=n;break;case"source":ie("error",e),a=n;break;case"img":case"image":case"link":ie("error",e),ie("load",e),a=n;break;case"details":ie("toggle",e),a=n;break;case"input":hd(e,n),a=El(e,n),ie("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ue({},n,{value:void 0}),ie("invalid",e);break;case"textarea":fd(e,n),a=Ll(e,n),ie("invalid",e);break;default:a=n}Dl(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?jh(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&wh(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&xn(e,d):typeof d=="number"&&xn(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pn.hasOwnProperty(i)?d!=null&&i==="onScroll"&&ie("scroll",e):d!=null&&Wo(e,i,d,l))}switch(r){case"input":Gn(e),md(e,n,!1);break;case"textarea":Gn(e),pd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+pr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?cs(e,!!n.multiple,i,!1):n.defaultValue!=null&&cs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ma)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)Wm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=Pr(Cn.current),Pr(Ct.current),sa(t)){if(n=t.stateNode,r=t.memoizedProps,n[kt]=t,(i=n.nodeValue!==r)&&(e=Ye,e!==null))switch(e.tag){case 3:ra(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ra(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[kt]=t,t.stateNode=n}return Re(t),null;case 13:if(le(ce),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oe&&Qe!==null&&t.mode&1&&!(t.flags&128))cm(),ws(),t.flags|=98560,i=!1;else if(i=sa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[kt]=t}else ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),i=!1}else xt!==null&&(po(xt),xt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?ve===0&&(ve=3):Cc())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return js(),io(e,t),e===null&&bn(t.stateNode.containerInfo),Re(t),null;case 10:return dc(t.type._context),Re(t),null;case 17:return He(t.type)&&Ua(),Re(t),null;case 19:if(le(ce),i=t.memoizedState,i===null)return Re(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Ws(i,!1);else{if(ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ha(e),l!==null){for(t.flags|=128,Ws(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ne(ce,ce.current&1|2),t.child}e=e.sibling}i.tail!==null&&pe()>Ns&&(t.flags|=128,n=!0,Ws(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ha(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ws(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!oe)return Re(t),null}else 2*pe()-i.renderingStartTime>Ns&&r!==1073741824&&(t.flags|=128,n=!0,Ws(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=pe(),t.sibling=null,r=ce.current,ne(ce,n?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return Sc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Je&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function v0(e,t){switch(ic(t),t.tag){case 1:return He(t.type)&&Ua(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return js(),le(We),le(Ie),pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fc(t),null;case 13:if(le(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(ce),null;case 4:return js(),null;case 10:return dc(t.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var ia=!1,De=!1,w0=typeof WeakSet=="function"?WeakSet:Set,U=null;function ls(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){he(e,t,n)}else r.current=null}function lo(e,t,r){try{r()}catch(n){he(e,t,n)}}var nu=!1;function _0(e,t){if(Vl=Oa,e=Qh(),nc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,h=0,f=e,u=null;t:for(;;){for(var g;f!==r||a!==0&&f.nodeType!==3||(o=l+a),f!==i||n!==0&&f.nodeType!==3||(d=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(g=f.firstChild)!==null;)u=f,f=g;for(;;){if(f===e)break t;if(u===r&&++c===a&&(o=l),u===i&&++h===n&&(d=l),(g=f.nextSibling)!==null)break;f=u,u=f.parentNode}f=g}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wl={focusedElem:e,selectionRange:r},Oa=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,p=w.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:mt(t.type,m),p);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(j){he(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return w=nu,nu=!1,w}function on(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&lo(t,r,i)}a=a.next}while(a!==n)}}function hi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function oo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Hm(e){var t=e.alternate;t!==null&&(e.alternate=null,Hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kt],delete t[kn],delete t[Gl],delete t[s0],delete t[n0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Km(e){return e.tag===5||e.tag===3||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Km(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function co(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ma));else if(n!==4&&(e=e.child,e!==null))for(co(e,t,r),e=e.sibling;e!==null;)co(e,t,r),e=e.sibling}function uo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(uo(e,t,r),e=e.sibling;e!==null;)uo(e,t,r),e=e.sibling}var Ee=null,ft=!1;function Ht(e,t,r){for(r=r.child;r!==null;)Gm(e,t,r),r=r.sibling}function Gm(e,t,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(ni,r)}catch{}switch(r.tag){case 5:De||ls(r,t);case 6:var n=Ee,a=ft;Ee=null,Ht(e,t,r),Ee=n,ft=a,Ee!==null&&(ft?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(ft?(e=Ee,r=r.stateNode,e.nodeType===8?Qi(e.parentNode,r):e.nodeType===1&&Qi(e,r),wn(e)):Qi(Ee,r.stateNode));break;case 4:n=Ee,a=ft,Ee=r.stateNode.containerInfo,ft=!0,Ht(e,t,r),Ee=n,ft=a;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&lo(r,t,l),a=a.next}while(a!==n)}Ht(e,t,r);break;case 1:if(!De&&(ls(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){he(r,t,o)}Ht(e,t,r);break;case 21:Ht(e,t,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,Ht(e,t,r),De=n):Ht(e,t,r);break;default:Ht(e,t,r)}}function iu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new w0),t.forEach(function(n){var a=P0.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ht(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,ft=!1;break e;case 3:Ee=o.stateNode.containerInfo,ft=!0;break e;case 4:Ee=o.stateNode.containerInfo,ft=!0;break e}o=o.return}if(Ee===null)throw Error(D(160));Gm(i,l,a),Ee=null,ft=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){he(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jm(t,e),t=t.sibling}function Jm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),_t(e),n&4){try{on(3,e,e.return),hi(3,e)}catch(m){he(e,e.return,m)}try{on(5,e,e.return)}catch(m){he(e,e.return,m)}}break;case 1:ht(t,e),_t(e),n&512&&r!==null&&ls(r,r.return);break;case 5:if(ht(t,e),_t(e),n&512&&r!==null&&ls(r,r.return),e.flags&32){var a=e.stateNode;try{xn(a,"")}catch(m){he(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&gh(a,i),Il(o,l);var c=Il(o,i);for(l=0;l<d.length;l+=2){var h=d[l],f=d[l+1];h==="style"?jh(a,f):h==="dangerouslySetInnerHTML"?wh(a,f):h==="children"?xn(a,f):Wo(a,h,f,c)}switch(o){case"input":Tl(a,i);break;case"textarea":yh(a,i);break;case"select":var u=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?cs(a,!!i.multiple,g,!1):u!==!!i.multiple&&(i.defaultValue!=null?cs(a,!!i.multiple,i.defaultValue,!0):cs(a,!!i.multiple,i.multiple?[]:"",!1))}a[kn]=i}catch(m){he(e,e.return,m)}}break;case 6:if(ht(t,e),_t(e),n&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){he(e,e.return,m)}}break;case 3:if(ht(t,e),_t(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wn(t.containerInfo)}catch(m){he(e,e.return,m)}break;case 4:ht(t,e),_t(e);break;case 13:ht(t,e),_t(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Nc=pe())),n&4&&iu(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(De=(c=De)||h,ht(t,e),De=c):ht(t,e),_t(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(U=e,h=e.child;h!==null;){for(f=U=h;U!==null;){switch(u=U,g=u.child,u.tag){case 0:case 11:case 14:case 15:on(4,u,u.return);break;case 1:ls(u,u.return);var w=u.stateNode;if(typeof w.componentWillUnmount=="function"){n=u,r=u.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(m){he(n,r,m)}}break;case 5:ls(u,u.return);break;case 22:if(u.memoizedState!==null){ou(f);continue}}g!==null?(g.return=u,U=g):ou(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{a=f.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,d=f.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=_h("display",l))}catch(m){he(e,e.return,m)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){he(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ht(t,e),_t(e),n&4&&iu(e);break;case 21:break;default:ht(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Km(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(xn(a,""),n.flags&=-33);var i=au(e);uo(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=au(e);co(e,o,l);break;default:throw Error(D(161))}}catch(d){he(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function j0(e,t,r){U=e,Qm(e)}function Qm(e,t,r){for(var n=(e.mode&1)!==0;U!==null;){var a=U,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||ia;if(!l){var o=a.alternate,d=o!==null&&o.memoizedState!==null||De;o=ia;var c=De;if(ia=l,(De=d)&&!c)for(U=a;U!==null;)l=U,d=l.child,l.tag===22&&l.memoizedState!==null?cu(a):d!==null?(d.return=l,U=d):cu(a);for(;i!==null;)U=i,Qm(i),i=i.sibling;U=a,ia=o,De=c}lu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,U=i):lu(e)}}function lu(e){for(;U!==null;){var t=U;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||hi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!De)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:mt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wd(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wd(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&wn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}De||t.flags&512&&oo(t)}catch(u){he(t,t.return,u)}}if(t===e){U=null;break}if(r=t.sibling,r!==null){r.return=t.return,U=r;break}U=t.return}}function ou(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var r=t.sibling;if(r!==null){r.return=t.return,U=r;break}U=t.return}}function cu(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hi(4,t)}catch(d){he(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){he(t,a,d)}}var i=t.return;try{oo(t)}catch(d){he(t,i,d)}break;case 5:var l=t.return;try{oo(t)}catch(d){he(t,l,d)}}}catch(d){he(t,t.return,d)}if(t===e){U=null;break}var o=t.sibling;if(o!==null){o.return=t.return,U=o;break}U=t.return}}var b0=Math.ceil,Ja=Vt.ReactCurrentDispatcher,jc=Vt.ReactCurrentOwner,lt=Vt.ReactCurrentBatchConfig,X=0,Se=null,ge=null,Te=0,Je=0,os=vr(0),ve=0,Ln=null,Ar=0,mi=0,bc=0,cn=null,ze=null,Nc=0,Ns=1/0,Rt=null,Qa=!1,ho=null,ur=null,la=!1,nr=null,Ya=0,dn=0,mo=null,Na=-1,ka=0;function Ae(){return X&6?pe():Na!==-1?Na:Na=pe()}function hr(e){return e.mode&1?X&2&&Te!==0?Te&-Te:i0.transition!==null?(ka===0&&(ka=Ih()),ka):(e=re,e!==0||(e=window.event,e=e===void 0?16:zh(e.type)),e):1}function yt(e,t,r,n){if(50<dn)throw dn=0,mo=null,Error(D(185));Mn(e,r,n),(!(X&2)||e!==Se)&&(e===Se&&(!(X&2)&&(mi|=r),ve===4&&tr(e,Te)),Ke(e,n),r===1&&X===0&&!(t.mode&1)&&(Ns=pe()+500,ci&&wr()))}function Ke(e,t){var r=e.callbackNode;ig(e,t);var n=Ia(e,e===Se?Te:0);if(n===0)r!==null&&yd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&yd(r),t===1)e.tag===0?a0(du.bind(null,e)):im(du.bind(null,e)),t0(function(){!(X&6)&&wr()}),r=null;else{switch(Oh(n)){case 1:r=Qo;break;case 4:r=Rh;break;case 16:r=Da;break;case 536870912:r=Dh;break;default:r=Da}r=nf(r,Ym.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ym(e,t){if(Na=-1,ka=0,X&6)throw Error(D(327));var r=e.callbackNode;if(fs()&&e.callbackNode!==r)return null;var n=Ia(e,e===Se?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Xa(e,n);else{t=n;var a=X;X|=2;var i=Zm();(Se!==e||Te!==t)&&(Rt=null,Ns=pe()+500,Rr(e,t));do try{S0();break}catch(o){Xm(e,o)}while(!0);cc(),Ja.current=i,X=a,ge!==null?t=0:(Se=null,Te=0,t=ve)}if(t!==0){if(t===2&&(a=Ul(e),a!==0&&(n=a,t=fo(e,a))),t===1)throw r=Ln,Rr(e,0),tr(e,n),Ke(e,pe()),r;if(t===6)tr(e,n);else{if(a=e.current.alternate,!(n&30)&&!N0(a)&&(t=Xa(e,n),t===2&&(i=Ul(e),i!==0&&(n=i,t=fo(e,i))),t===1))throw r=Ln,Rr(e,0),tr(e,n),Ke(e,pe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:Nr(e,ze,Rt);break;case 3:if(tr(e,n),(n&130023424)===n&&(t=Nc+500-pe(),10<t)){if(Ia(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ae(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Kl(Nr.bind(null,e,ze,Rt),t);break}Nr(e,ze,Rt);break;case 4:if(tr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-gt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*b0(n/1960))-n,10<n){e.timeoutHandle=Kl(Nr.bind(null,e,ze,Rt),n);break}Nr(e,ze,Rt);break;case 5:Nr(e,ze,Rt);break;default:throw Error(D(329))}}}return Ke(e,pe()),e.callbackNode===r?Ym.bind(null,e):null}function fo(e,t){var r=cn;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=Xa(e,t),e!==2&&(t=ze,ze=r,t!==null&&po(t)),e}function po(e){ze===null?ze=e:ze.push.apply(ze,e)}function N0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!wt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tr(e,t){for(t&=~bc,t&=~mi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-gt(t),n=1<<r;e[r]=-1,t&=~n}}function du(e){if(X&6)throw Error(D(327));fs();var t=Ia(e,0);if(!(t&1))return Ke(e,pe()),null;var r=Xa(e,t);if(e.tag!==0&&r===2){var n=Ul(e);n!==0&&(t=n,r=fo(e,n))}if(r===1)throw r=Ln,Rr(e,0),tr(e,t),Ke(e,pe()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,ze,Rt),Ke(e,pe()),null}function kc(e,t){var r=X;X|=1;try{return e(t)}finally{X=r,X===0&&(Ns=pe()+500,ci&&wr())}}function Mr(e){nr!==null&&nr.tag===0&&!(X&6)&&fs();var t=X;X|=1;var r=lt.transition,n=re;try{if(lt.transition=null,re=1,e)return e()}finally{re=n,lt.transition=r,X=t,!(X&6)&&wr()}}function Sc(){Je=os.current,le(os)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,e0(r)),ge!==null)for(r=ge.return;r!==null;){var n=r;switch(ic(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ua();break;case 3:js(),le(We),le(Ie),pc();break;case 5:fc(n);break;case 4:js();break;case 13:le(ce);break;case 19:le(ce);break;case 10:dc(n.type._context);break;case 22:case 23:Sc()}r=r.return}if(Se=e,ge=e=mr(e.current,null),Te=Je=t,ve=0,Ln=null,bc=mi=Ar=0,ze=cn=null,Tr!==null){for(t=0;t<Tr.length;t++)if(r=Tr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}Tr=null}return e}function Xm(e,t){do{var r=ge;try{if(cc(),_a.current=Ga,Ka){for(var n=de.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ka=!1}if($r=0,je=ye=de=null,ln=!1,En=0,jc.current=null,r===null||r.return===null){ve=1,Ln=t,ge=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=Te,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var u=h.alternate;u?(h.updateQueue=u.updateQueue,h.memoizedState=u.memoizedState,h.lanes=u.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Yd(l);if(g!==null){g.flags&=-257,Xd(g,l,o,i,t),g.mode&1&&Qd(i,c,t),t=g,d=c;var w=t.updateQueue;if(w===null){var m=new Set;m.add(d),t.updateQueue=m}else w.add(d);break e}else{if(!(t&1)){Qd(i,c,t),Cc();break e}d=Error(D(426))}}else if(oe&&o.mode&1){var p=Yd(l);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Xd(p,l,o,i,t),lc(bs(d,o));break e}}i=d=bs(d,o),ve!==4&&(ve=2),cn===null?cn=[i]:cn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Om(i,d,t);Vd(i,v);break e;case 1:o=d;var x=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ur===null||!ur.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=$m(i,o,t);Vd(i,j);break e}}i=i.return}while(i!==null)}tf(r)}catch(S){t=S,ge===r&&r!==null&&(ge=r=r.return);continue}break}while(!0)}function Zm(){var e=Ja.current;return Ja.current=Ga,e===null?Ga:e}function Cc(){(ve===0||ve===3||ve===2)&&(ve=4),Se===null||!(Ar&268435455)&&!(mi&268435455)||tr(Se,Te)}function Xa(e,t){var r=X;X|=2;var n=Zm();(Se!==e||Te!==t)&&(Rt=null,Rr(e,t));do try{k0();break}catch(a){Xm(e,a)}while(!0);if(cc(),X=r,Ja.current=n,ge!==null)throw Error(D(261));return Se=null,Te=0,ve}function k0(){for(;ge!==null;)ef(ge)}function S0(){for(;ge!==null&&!Yx();)ef(ge)}function ef(e){var t=sf(e.alternate,e,Je);e.memoizedProps=e.pendingProps,t===null?tf(e):ge=t,jc.current=null}function tf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=v0(r,t),r!==null){r.flags&=32767,ge=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ve=6,ge=null;return}}else if(r=y0(r,t,Je),r!==null){ge=r;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);ve===0&&(ve=5)}function Nr(e,t,r){var n=re,a=lt.transition;try{lt.transition=null,re=1,C0(e,t,r,n)}finally{lt.transition=a,re=n}return null}function C0(e,t,r,n){do fs();while(nr!==null);if(X&6)throw Error(D(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lg(e,i),e===Se&&(ge=Se=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||la||(la=!0,nf(Da,function(){return fs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var l=re;re=1;var o=X;X|=4,jc.current=null,_0(e,r),Jm(r,e),Kg(Wl),Oa=!!Vl,Wl=Vl=null,e.current=r,j0(r),Xx(),X=o,re=l,lt.transition=i}else e.current=r;if(la&&(la=!1,nr=e,Ya=a),i=e.pendingLanes,i===0&&(ur=null),tg(r.stateNode),Ke(e,pe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Qa)throw Qa=!1,e=ho,ho=null,e;return Ya&1&&e.tag!==0&&fs(),i=e.pendingLanes,i&1?e===mo?dn++:(dn=0,mo=e):dn=0,wr(),null}function fs(){if(nr!==null){var e=Oh(Ya),t=lt.transition,r=re;try{if(lt.transition=null,re=16>e?16:e,nr===null)var n=!1;else{if(e=nr,nr=null,Ya=0,X&6)throw Error(D(331));var a=X;for(X|=4,U=e.current;U!==null;){var i=U,l=i.child;if(U.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(U=c;U!==null;){var h=U;switch(h.tag){case 0:case 11:case 15:on(8,h,i)}var f=h.child;if(f!==null)f.return=h,U=f;else for(;U!==null;){h=U;var u=h.sibling,g=h.return;if(Hm(h),h===c){U=null;break}if(u!==null){u.return=g,U=u;break}U=g}}}var w=i.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var p=m.sibling;m.sibling=null,m=p}while(m!==null)}}U=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,U=l;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:on(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,U=v;break e}U=i.return}}var x=e.current;for(U=x;U!==null;){l=U;var _=l.child;if(l.subtreeFlags&2064&&_!==null)_.return=l,U=_;else e:for(l=x;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hi(9,o)}}catch(S){he(o,o.return,S)}if(o===l){U=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,U=j;break e}U=o.return}}if(X=a,wr(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(ni,e)}catch{}n=!0}return n}finally{re=r,lt.transition=t}}return!1}function uu(e,t,r){t=bs(r,t),t=Om(e,t,1),e=dr(e,t,1),t=Ae(),e!==null&&(Mn(e,1,t),Ke(e,t))}function he(e,t,r){if(e.tag===3)uu(e,e,r);else for(;t!==null;){if(t.tag===3){uu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ur===null||!ur.has(n))){e=bs(r,e),e=$m(t,e,1),t=dr(t,e,1),e=Ae(),t!==null&&(Mn(t,1,e),Ke(t,e));break}}t=t.return}}function E0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(Te&r)===r&&(ve===4||ve===3&&(Te&130023424)===Te&&500>pe()-Nc?Rr(e,0):bc|=r),Ke(e,t)}function rf(e,t){t===0&&(e.mode&1?(t=Yn,Yn<<=1,!(Yn&130023424)&&(Yn=4194304)):t=1);var r=Ae();e=Bt(e,t),e!==null&&(Mn(e,t,r),Ke(e,r))}function T0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),rf(e,r)}function P0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),rf(e,r)}var sf;sf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)Ve=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ve=!1,g0(e,t,r);Ve=!!(e.flags&131072)}else Ve=!1,oe&&t.flags&1048576&&lm(t,Ba,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ba(e,t),e=t.pendingProps;var a=vs(t,Ie.current);ms(t,r),a=gc(null,t,n,e,a,r);var i=yc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(n)?(i=!0,Fa(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,hc(t),a.updater=ui,t.stateNode=a,a._reactInternals=t,eo(t,n,e,r),t=so(null,t,n,!0,i,r)):(t.tag=0,oe&&i&&ac(t),$e(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ba(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=R0(n),e=mt(n,e),a){case 0:t=ro(null,t,n,e,r);break e;case 1:t=tu(null,t,n,e,r);break e;case 11:t=Zd(null,t,n,e,r);break e;case 14:t=eu(null,t,n,mt(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mt(n,a),ro(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mt(n,a),tu(e,t,n,a,r);case 3:e:{if(Fm(t),e===null)throw Error(D(387));n=t.pendingProps,i=t.memoizedState,a=i.element,mm(e,t),Wa(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=bs(Error(D(423)),t),t=ru(e,t,n,r,a);break e}else if(n!==a){a=bs(Error(D(424)),t),t=ru(e,t,n,r,a);break e}else for(Qe=cr(t.stateNode.containerInfo.firstChild),Ye=t,oe=!0,xt=null,r=um(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ws(),n===a){t=qt(e,t,r);break e}$e(e,t,n,r)}t=t.child}return t;case 5:return fm(t),e===null&&Yl(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Hl(n,a)?l=null:i!==null&&Hl(n,i)&&(t.flags|=32),Um(e,t),$e(e,t,l,r),t.child;case 6:return e===null&&Yl(t),null;case 13:return zm(e,t,r);case 4:return mc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=_s(t,null,n,r):$e(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mt(n,a),Zd(e,t,n,a,r);case 7:return $e(e,t,t.pendingProps,r),t.child;case 8:return $e(e,t,t.pendingProps.children,r),t.child;case 12:return $e(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ne(qa,n._currentValue),n._currentValue=l,i!==null)if(wt(i.value,l)){if(i.children===a.children&&!We.current){t=qt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=Ut(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?d.next=d:(d.next=h.next,h.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Xl(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Xl(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}$e(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ms(t,r),a=ct(a),n=n(a),t.flags|=1,$e(e,t,n,r),t.child;case 14:return n=t.type,a=mt(n,t.pendingProps),a=mt(n.type,a),eu(e,t,n,a,r);case 15:return Am(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mt(n,a),ba(e,t),t.tag=1,He(n)?(e=!0,Fa(t)):e=!1,ms(t,r),Im(t,n,a),eo(t,n,a,r),so(null,t,n,!0,e,r);case 19:return Bm(e,t,r);case 22:return Mm(e,t,r)}throw Error(D(156,t.tag))};function nf(e,t){return Lh(e,t)}function L0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,r,n){return new L0(e,t,r,n)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function R0(e){if(typeof e=="function")return Ec(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ko)return 11;if(e===Go)return 14}return 2}function mr(e,t){var r=e.alternate;return r===null?(r=it(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sa(e,t,r,n,a,i){var l=2;if(n=e,typeof e=="function")Ec(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Xr:return Dr(r.children,a,i,t);case Ho:l=8,a|=8;break;case Nl:return e=it(12,r,t,a|2),e.elementType=Nl,e.lanes=i,e;case kl:return e=it(13,r,t,a),e.elementType=kl,e.lanes=i,e;case Sl:return e=it(19,r,t,a),e.elementType=Sl,e.lanes=i,e;case fh:return fi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hh:l=10;break e;case mh:l=9;break e;case Ko:l=11;break e;case Go:l=14;break e;case Yt:l=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=it(l,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Dr(e,t,r,n){return e=it(7,e,n,t),e.lanes=r,e}function fi(e,t,r,n){return e=it(22,e,n,t),e.elementType=fh,e.lanes=r,e.stateNode={isHidden:!1},e}function nl(e,t,r){return e=it(6,e,null,t),e.lanes=r,e}function al(e,t,r){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D0(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Tc(e,t,r,n,a,i,l,o,d){return e=new D0(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hc(i),e}function I0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function af(e){if(!e)return xr;e=e._reactInternals;e:{if(zr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(He(r))return am(e,r,t)}return t}function lf(e,t,r,n,a,i,l,o,d){return e=Tc(r,n,!0,e,a,i,l,o,d),e.context=af(null),r=e.current,n=Ae(),a=hr(r),i=Ut(n,a),i.callback=t??null,dr(r,i,a),e.current.lanes=a,Mn(e,a,n),Ke(e,n),e}function pi(e,t,r,n){var a=t.current,i=Ae(),l=hr(a);return r=af(r),t.context===null?t.context=r:t.pendingContext=r,t=Ut(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=dr(a,t,l),e!==null&&(yt(e,a,l,i),wa(e,a,l)),l}function Za(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Pc(e,t){hu(e,t),(e=e.alternate)&&hu(e,t)}function O0(){return null}var of=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lc(e){this._internalRoot=e}xi.prototype.render=Lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));pi(e,t,null,null)};xi.prototype.unmount=Lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mr(function(){pi(null,e,null,null)}),t[zt]=null}};function xi(e){this._internalRoot=e}xi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<er.length&&t!==0&&t<er[r].priority;r++);er.splice(r,0,e),r===0&&Fh(e)}};function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mu(){}function $0(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=Za(l);i.call(c)}}var l=lf(t,n,e,0,null,!1,!1,"",mu);return e._reactRootContainer=l,e[zt]=l.current,bn(e.nodeType===8?e.parentNode:e),Mr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var c=Za(d);o.call(c)}}var d=Tc(e,0,!1,null,null,!1,!1,"",mu);return e._reactRootContainer=d,e[zt]=d.current,bn(e.nodeType===8?e.parentNode:e),Mr(function(){pi(t,d,r,n)}),d}function yi(e,t,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var d=Za(l);o.call(d)}}pi(t,l,e,a)}else l=$0(r,t,e,a,n);return Za(l)}$h=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xs(t.pendingLanes);r!==0&&(Yo(t,r|1),Ke(t,pe()),!(X&6)&&(Ns=pe()+500,wr()))}break;case 13:Mr(function(){var n=Bt(e,1);if(n!==null){var a=Ae();yt(n,e,1,a)}}),Pc(e,1)}};Xo=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var r=Ae();yt(t,e,134217728,r)}Pc(e,134217728)}};Ah=function(e){if(e.tag===13){var t=hr(e),r=Bt(e,t);if(r!==null){var n=Ae();yt(r,e,t,n)}Pc(e,t)}};Mh=function(){return re};Uh=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};$l=function(e,t,r){switch(t){case"input":if(Tl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=oi(n);if(!a)throw Error(D(90));xh(n),Tl(n,a)}}}break;case"textarea":yh(e,r);break;case"select":t=r.value,t!=null&&cs(e,!!r.multiple,t,!1)}};kh=kc;Sh=Mr;var A0={usingClientEntryPoint:!1,Events:[Fn,rs,oi,bh,Nh,kc]},Hs={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Th(e),e===null?null:e.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||O0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{ni=oa.inject(M0),St=oa}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A0;Ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(t))throw Error(D(200));return I0(e,t,null,r)};Ze.createRoot=function(e,t){if(!Rc(e))throw Error(D(299));var r=!1,n="",a=of;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Tc(e,1,!1,null,null,r,!1,n,a),e[zt]=t.current,bn(e.nodeType===8?e.parentNode:e),new Lc(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Th(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Mr(e)};Ze.hydrate=function(e,t,r){if(!gi(t))throw Error(D(200));return yi(null,e,t,!0,r)};Ze.hydrateRoot=function(e,t,r){if(!Rc(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=of;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=lf(t,null,e,1,r??null,a,!1,i,l),e[zt]=t.current,bn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new xi(t)};Ze.render=function(e,t,r){if(!gi(t))throw Error(D(200));return yi(null,e,t,!1,r)};Ze.unmountComponentAtNode=function(e){if(!gi(e))throw Error(D(40));return e._reactRootContainer?(Mr(function(){yi(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};Ze.unstable_batchedUpdates=kc;Ze.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gi(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return yi(e,t,r,!1,n)};Ze.version="18.3.1-next-f1338f8080-20240426";function cf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cf)}catch(e){console.error(e)}}cf(),oh.exports=Ze;var vi=oh.exports;const U0=Ju(vi);var fu=vi;jl.createRoot=fu.createRoot,jl.hydrateRoot=fu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rn.apply(this,arguments)}var ar;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ar||(ar={}));const pu="popstate";function F0(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:l,hash:o}=n.location;return xo("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:ei(a)}return B0(t,r,null,e)}function xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function df(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function z0(){return Math.random().toString(36).substr(2,8)}function xu(e,t){return{usr:e.state,key:e.key,idx:t}}function xo(e,t,r,n){return r===void 0&&(r=null),Rn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rs(t):t,{state:r,key:t&&t.key||n||z0()})}function ei(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function B0(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=ar.Pop,d=null,c=h();c==null&&(c=0,l.replaceState(Rn({},l.state,{idx:c}),""));function h(){return(l.state||{idx:null}).idx}function f(){o=ar.Pop;let p=h(),v=p==null?null:p-c;c=p,d&&d({action:o,location:m.location,delta:v})}function u(p,v){o=ar.Push;let x=xo(m.location,p,v);c=h()+1;let _=xu(x,c),j=m.createHref(x);try{l.pushState(_,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}i&&d&&d({action:o,location:m.location,delta:1})}function g(p,v){o=ar.Replace;let x=xo(m.location,p,v);c=h();let _=xu(x,c),j=m.createHref(x);l.replaceState(_,"",j),i&&d&&d({action:o,location:m.location,delta:0})}function w(p){let v=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof p=="string"?p:ei(p);return x=x.replace(/ $/,"%20"),xe(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return o},get location(){return e(a,l)},listen(p){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(pu,f),d=p,()=>{a.removeEventListener(pu,f),d=null}},createHref(p){return t(a,p)},createURL:w,encodeLocation(p){let v=w(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:u,replace:g,go(p){return l.go(p)}};return m}var gu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gu||(gu={}));function q0(e,t,r){return r===void 0&&(r="/"),V0(e,t,r)}function V0(e,t,r,n){let a=typeof t=="string"?Rs(t):t,i=Dc(a.pathname||"/",r);if(i==null)return null;let l=uf(e);W0(l);let o=null;for(let d=0;o==null&&d<l.length;++d){let c=sy(i);o=ey(l[d],c)}return o}function uf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,l,o)=>{let d={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(xe(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let c=fr([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uf(i.children,t,h,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:X0(c,i.index),routesMeta:h})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let d of hf(i.path))a(i,l,d)}),t}function hf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=hf(n.join("/")),o=[];return o.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&o.push(...l),o.map(d=>e.startsWith("/")&&d===""?"/":d)}function W0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Z0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const H0=/^:[\w-]+$/,K0=3,G0=2,J0=1,Q0=10,Y0=-2,yu=e=>e==="*";function X0(e,t){let r=e.split("/"),n=r.length;return r.some(yu)&&(n+=Y0),t&&(n+=G0),r.filter(a=>!yu(a)).reduce((a,i)=>a+(H0.test(i)?K0:i===""?J0:Q0),n)}function Z0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function ey(e,t,r){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let d=n[o],c=o===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=ty({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},h),u=d.route;if(!f)return null;Object.assign(a,f.params),l.push({params:a,pathname:fr([i,f.pathname]),pathnameBase:ly(fr([i,f.pathnameBase])),route:u}),f.pathnameBase!=="/"&&(i=fr([i,f.pathnameBase]))}return l}function ty(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ry(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((c,h,f)=>{let{paramName:u,isOptional:g}=h;if(u==="*"){let m=o[f]||"";l=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const w=o[f];return g&&!w?c[u]=void 0:c[u]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:l,pattern:e}}function ry(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),df(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,d)=>(n.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function sy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return df(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Dc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ny(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Rs(e):e;return{pathname:r?r.startsWith("/")?r:ay(r,t):t,search:oy(n),hash:cy(a)}}function ay(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function il(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iy(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ic(e,t){let r=iy(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Oc(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Rs(e):(a=Rn({},e),xe(!a.pathname||!a.pathname.includes("?"),il("?","pathname","search",a)),xe(!a.pathname||!a.pathname.includes("#"),il("#","pathname","hash",a)),xe(!a.search||!a.search.includes("#"),il("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let f=t.length-1;if(!n&&l.startsWith("..")){let u=l.split("/");for(;u[0]==="..";)u.shift(),f-=1;a.pathname=u.join("/")}o=f>=0?t[f]:"/"}let d=ny(a,o),c=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(c||h)&&(d.pathname+="/"),d}const fr=e=>e.join("/").replace(/\/\/+/g,"/"),ly=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mf=["post","put","patch","delete"];new Set(mf);const uy=["get",...mf];new Set(uy);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dn.apply(this,arguments)}const $c=y.createContext(null),hy=y.createContext(null),_r=y.createContext(null),wi=y.createContext(null),Tt=y.createContext({outlet:null,matches:[],isDataRoute:!1}),ff=y.createContext(null);function my(e,t){let{relative:r}=t===void 0?{}:t;Ds()||xe(!1);let{basename:n,navigator:a}=y.useContext(_r),{hash:i,pathname:l,search:o}=xf(e,{relative:r}),d=l;return n!=="/"&&(d=l==="/"?n:fr([n,l])),a.createHref({pathname:d,search:o,hash:i})}function Ds(){return y.useContext(wi)!=null}function Br(){return Ds()||xe(!1),y.useContext(wi).location}function pf(e){y.useContext(_r).static||y.useLayoutEffect(e)}function ut(){let{isDataRoute:e}=y.useContext(Tt);return e?Ey():fy()}function fy(){Ds()||xe(!1);let e=y.useContext($c),{basename:t,future:r,navigator:n}=y.useContext(_r),{matches:a}=y.useContext(Tt),{pathname:i}=Br(),l=JSON.stringify(Ic(a,r.v7_relativeSplatPath)),o=y.useRef(!1);return pf(()=>{o.current=!0}),y.useCallback(function(c,h){if(h===void 0&&(h={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=Oc(c,JSON.parse(l),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fr([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,l,i,e])}const py=y.createContext(null);function xy(e){let t=y.useContext(Tt).outlet;return t&&y.createElement(py.Provider,{value:e},t)}function Bn(){let{matches:e}=y.useContext(Tt),t=e[e.length-1];return t?t.params:{}}function xf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=y.useContext(_r),{matches:a}=y.useContext(Tt),{pathname:i}=Br(),l=JSON.stringify(Ic(a,n.v7_relativeSplatPath));return y.useMemo(()=>Oc(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function gy(e,t){return yy(e,t)}function yy(e,t,r,n){Ds()||xe(!1);let{navigator:a,static:i}=y.useContext(_r),{matches:l}=y.useContext(Tt),o=l[l.length-1],d=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Br(),f;if(t){var u;let v=typeof t=="string"?Rs(t):t;c==="/"||(u=v.pathname)!=null&&u.startsWith(c)||xe(!1),f=v}else f=h;let g=f.pathname||"/",w=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=q0(e,{pathname:w}),p=by(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},d,v.params),pathname:fr([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:fr([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,r,n);return t&&p?y.createElement(wi.Provider,{value:{location:Dn({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ar.Pop}},p):p}function vy(){let e=Cy(),t=dy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,null)}const wy=y.createElement(vy,null);class _y extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(Tt.Provider,{value:this.props.routeContext},y.createElement(ff.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jy(e){let{routeContext:t,match:r,children:n}=e,a=y.useContext($c);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(Tt.Provider,{value:t},n)}function by(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let h=l.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||xe(!1),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<l.length;h++){let f=l[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:u,errors:g}=r,w=f.route.loader&&u[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){d=!0,c>=0?l=l.slice(0,c+1):l=[l[0]];break}}}return l.reduceRight((h,f,u)=>{let g,w=!1,m=null,p=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||wy,d&&(c<0&&u===0?(Ty("route-fallback"),w=!0,p=null):c===u&&(w=!0,p=f.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,u+1)),x=()=>{let _;return g?_=m:w?_=p:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,y.createElement(jy,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:r!=null},children:_})};return r&&(f.route.ErrorBoundary||f.route.errorElement||u===0)?y.createElement(_y,{location:r.location,revalidation:r.revalidation,component:m,error:g,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var gf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gf||{}),yf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yf||{});function Ny(e){let t=y.useContext($c);return t||xe(!1),t}function ky(e){let t=y.useContext(hy);return t||xe(!1),t}function Sy(e){let t=y.useContext(Tt);return t||xe(!1),t}function vf(e){let t=Sy(),r=t.matches[t.matches.length-1];return r.route.id||xe(!1),r.route.id}function Cy(){var e;let t=y.useContext(ff),r=ky(),n=vf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Ey(){let{router:e}=Ny(gf.UseNavigateStable),t=vf(yf.UseNavigateStable),r=y.useRef(!1);return pf(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Dn({fromRouteId:t},i)))},[e,t])}const vu={};function Ty(e,t,r){vu[e]||(vu[e]=!0)}function Py(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Lr(e){let{to:t,replace:r,state:n,relative:a}=e;Ds()||xe(!1);let{future:i,static:l}=y.useContext(_r),{matches:o}=y.useContext(Tt),{pathname:d}=Br(),c=ut(),h=Oc(t,Ic(o,i.v7_relativeSplatPath),d,a==="path"),f=JSON.stringify(h);return y.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:a}),[c,f,a,r,n]),null}function wf(e){return xy(e.context)}function te(e){xe(!1)}function Ly(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ar.Pop,navigator:i,static:l=!1,future:o}=e;Ds()&&xe(!1);let d=t.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:d,navigator:i,static:l,future:Dn({v7_relativeSplatPath:!1},o)}),[d,o,i,l]);typeof n=="string"&&(n=Rs(n));let{pathname:h="/",search:f="",hash:u="",state:g=null,key:w="default"}=n,m=y.useMemo(()=>{let p=Dc(h,d);return p==null?null:{location:{pathname:p,search:f,hash:u,state:g,key:w},navigationType:a}},[d,h,f,u,g,w,a]);return m==null?null:y.createElement(_r.Provider,{value:c},y.createElement(wi.Provider,{children:r,value:m}))}function Ry(e){let{children:t,location:r}=e;return gy(go(t),r)}new Promise(()=>{});function go(e,t){t===void 0&&(t=[]);let r=[];return y.Children.forEach(e,(n,a)=>{if(!y.isValidElement(n))return;let i=[...t,a];if(n.type===y.Fragment){r.push.apply(r,go(n.props.children,i));return}n.type!==te&&xe(!1),!n.props.index||!n.props.children||xe(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=go(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(this,arguments)}function Dy(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Iy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Oy(e,t){return e.button===0&&(!t||t==="_self")&&!Iy(e)}const $y=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ay="6";try{window.__reactRouterVersion=Ay}catch{}const My="startTransition",wu=ih[My];function Uy(e){let{basename:t,children:r,future:n,window:a}=e,i=y.useRef();i.current==null&&(i.current=F0({window:a,v5Compat:!0}));let l=i.current,[o,d]=y.useState({action:l.action,location:l.location}),{v7_startTransition:c}=n||{},h=y.useCallback(f=>{c&&wu?wu(()=>d(f)):d(f)},[d,c]);return y.useLayoutEffect(()=>l.listen(h),[l,h]),y.useEffect(()=>Py(n),[n]),y.createElement(Ly,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:n})}const Fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M=y.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:d,to:c,preventScrollReset:h,viewTransition:f}=t,u=Dy(t,$y),{basename:g}=y.useContext(_r),w,m=!1;if(typeof c=="string"&&zy.test(c)&&(w=c,Fy))try{let _=new URL(window.location.href),j=c.startsWith("//")?new URL(_.protocol+c):new URL(c),S=Dc(j.pathname,g);j.origin===_.origin&&S!=null?c=S+j.search+j.hash:m=!0}catch{}let p=my(c,{relative:a}),v=By(c,{replace:l,state:o,target:d,preventScrollReset:h,relative:a,viewTransition:f});function x(_){n&&n(_),_.defaultPrevented||v(_)}return y.createElement("a",yo({},u,{href:w||p,onClick:m||i?n:x,ref:r,target:d}))});var _u;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_u||(_u={}));var ju;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ju||(ju={}));function By(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,d=ut(),c=Br(),h=xf(e,{relative:l});return y.useCallback(f=>{if(Oy(f,r)){f.preventDefault();let u=n!==void 0?n:ei(c)===ei(h);d(e,{replace:u,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[c,d,h,n,a,r,e,i,l,o])}function me(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function bu(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _f(...e){return t=>{let r=!1;const n=e.map(a=>{const i=bu(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():bu(e[a],null)}}}}function gr(...e){return y.useCallback(_f(...e),e)}function _i(e,t=[]){let r=[];function n(i,l){const o=y.createContext(l),d=r.length;r=[...r,l];const c=f=>{var v;const{scope:u,children:g,...w}=f,m=((v=u==null?void 0:u[e])==null?void 0:v[d])||o,p=y.useMemo(()=>w,Object.values(w));return s.jsx(m.Provider,{value:p,children:g})};c.displayName=i+"Provider";function h(f,u){var m;const g=((m=u==null?void 0:u[e])==null?void 0:m[d])||o,w=y.useContext(g);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,h]}const a=()=>{const i=r.map(l=>y.createContext(l));return function(o){const d=(o==null?void 0:o[e])||i;return y.useMemo(()=>({[`__scope${e}`]:{...o,[e]:d}}),[o,d])}};return a.scopeName=e,[n,qy(a,...t)]}function qy(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:d,scopeName:c})=>{const f=d(i)[`__scope${c}`];return{...o,...f}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}var In=y.forwardRef((e,t)=>{const{children:r,...n}=e,a=y.Children.toArray(r),i=a.find(Wy);if(i){const l=i.props.children,o=a.map(d=>d===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:d);return s.jsx(vo,{...n,ref:t,children:y.isValidElement(l)?y.cloneElement(l,void 0,o):null})}return s.jsx(vo,{...n,ref:t,children:r})});In.displayName="Slot";var vo=y.forwardRef((e,t)=>{const{children:r,...n}=e;if(y.isValidElement(r)){const a=Ky(r),i=Hy(n,r.props);return r.type!==y.Fragment&&(i.ref=t?_f(t,a):a),y.cloneElement(r,i)}return y.Children.count(r)>1?y.Children.only(null):null});vo.displayName="SlotClone";var Vy=({children:e})=>s.jsx(s.Fragment,{children:e});function Wy(e){return y.isValidElement(e)&&e.type===Vy}function Hy(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Ky(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function jf(e){const t=e+"CollectionProvider",[r,n]=_i(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=g=>{const{scope:w,children:m}=g,p=Lt.useRef(null),v=Lt.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:v,collectionRef:p,children:m})};l.displayName=t;const o=e+"CollectionSlot",d=Lt.forwardRef((g,w)=>{const{scope:m,children:p}=g,v=i(o,m),x=gr(w,v.collectionRef);return s.jsx(In,{ref:x,children:p})});d.displayName=o;const c=e+"CollectionItemSlot",h="data-radix-collection-item",f=Lt.forwardRef((g,w)=>{const{scope:m,children:p,...v}=g,x=Lt.useRef(null),_=gr(w,x),j=i(c,m);return Lt.useEffect(()=>(j.itemMap.set(x,{ref:x,...v}),()=>void j.itemMap.delete(x))),s.jsx(In,{[h]:"",ref:_,children:p})});f.displayName=c;function u(g){const w=i(e+"CollectionConsumer",g);return Lt.useCallback(()=>{const p=w.collectionRef.current;if(!p)return[];const v=Array.from(p.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((j,S)=>v.indexOf(j.ref.current)-v.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:d,ItemSlot:f},u,n]}var Gy=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Oe=Gy.reduce((e,t)=>{const r=y.forwardRef((n,a)=>{const{asChild:i,...l}=n,o=i?In:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(o,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function bf(e,t){e&&vi.flushSync(()=>e.dispatchEvent(t))}function Et(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Jy(e,t=globalThis==null?void 0:globalThis.document){const r=Et(e);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Qy="DismissableLayer",wo="dismissableLayer.update",Yy="dismissableLayer.pointerDownOutside",Xy="dismissableLayer.focusOutside",Nu,Nf=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kf=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...d}=e,c=y.useContext(Nf),[h,f]=y.useState(null),u=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=y.useState({}),w=gr(t,N=>f(N)),m=Array.from(c.layers),[p]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(p),x=h?m.indexOf(h):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,j=x>=v,S=ev(N=>{const C=N.target,P=[...c.branches].some(L=>L.contains(C));!j||P||(a==null||a(N),l==null||l(N),N.defaultPrevented||o==null||o())},u),b=tv(N=>{const C=N.target;[...c.branches].some(L=>L.contains(C))||(i==null||i(N),l==null||l(N),N.defaultPrevented||o==null||o())},u);return Jy(N=>{x===c.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&o&&(N.preventDefault(),o()))},u),y.useEffect(()=>{if(h)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Nu=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),ku(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=Nu)}},[h,u,r,c]),y.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),ku())},[h,c]),y.useEffect(()=>{const N=()=>g({});return document.addEventListener(wo,N),()=>document.removeEventListener(wo,N)},[]),s.jsx(Oe.div,{...d,ref:w,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:me(e.onFocusCapture,b.onFocusCapture),onBlurCapture:me(e.onBlurCapture,b.onBlurCapture),onPointerDownCapture:me(e.onPointerDownCapture,S.onPointerDownCapture)})});kf.displayName=Qy;var Zy="DismissableLayerBranch",Sf=y.forwardRef((e,t)=>{const r=y.useContext(Nf),n=y.useRef(null),a=gr(t,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Oe.div,{...e,ref:a})});Sf.displayName=Zy;function ev(e,t=globalThis==null?void 0:globalThis.document){const r=Et(e),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let d=function(){Cf(Yy,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function tv(e,t=globalThis==null?void 0:globalThis.document){const r=Et(e),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&Cf(Xy,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ku(){const e=new CustomEvent(wo);document.dispatchEvent(e)}function Cf(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?bf(a,i):a.dispatchEvent(i)}var rv=kf,sv=Sf,On=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},nv="Portal",Ef=y.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[a,i]=y.useState(!1);On(()=>i(!0),[]);const l=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?U0.createPortal(s.jsx(Oe.div,{...n,ref:t}),l):null});Ef.displayName=nv;function av(e,t){return y.useReducer((r,n)=>t[r][n]??r,e)}var Ac=e=>{const{present:t,children:r}=e,n=iv(t),a=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=gr(n.ref,lv(a));return typeof r=="function"||n.isPresent?y.cloneElement(a,{ref:i}):null};Ac.displayName="Presence";function iv(e){const[t,r]=y.useState(),n=y.useRef({}),a=y.useRef(e),i=y.useRef("none"),l=e?"mounted":"unmounted",[o,d]=av(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=ca(n.current);i.current=o==="mounted"?c:"none"},[o]),On(()=>{const c=n.current,h=a.current;if(h!==e){const u=i.current,g=ca(c);e?d("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(h&&u!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),On(()=>{if(t){let c;const h=t.ownerDocument.defaultView??window,f=g=>{const m=ca(n.current).includes(g.animationName);if(g.target===t&&m&&(d("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",c=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},u=g=>{g.target===t&&(i.current=ca(n.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(c),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function ca(e){return(e==null?void 0:e.animationName)||"none"}function lv(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Mc({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=ov({defaultProp:t,onChange:r}),i=e!==void 0,l=i?e:n,o=Et(r),d=y.useCallback(c=>{if(i){const f=typeof c=="function"?c(e):c;f!==e&&o(f)}else a(c)},[i,e,a,o]);return[l,d]}function ov({defaultProp:e,onChange:t}){const r=y.useState(e),[n]=r,a=y.useRef(n),i=Et(t);return y.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var cv="VisuallyHidden",Uc=y.forwardRef((e,t)=>s.jsx(Oe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Uc.displayName=cv;var Fc="ToastProvider",[zc,dv,uv]=jf("Toast"),[Tf,Uj]=_i("Toast",[uv]),[hv,ji]=Tf(Fc),Pf=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=e,[o,d]=y.useState(null),[c,h]=y.useState(0),f=y.useRef(!1),u=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fc}\`. Expected non-empty \`string\`.`),s.jsx(zc.Provider,{scope:t,children:s.jsx(hv,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:d,onToastAdd:y.useCallback(()=>h(g=>g+1),[]),onToastRemove:y.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:u,children:l})})};Pf.displayName=Fc;var Lf="ToastViewport",mv=["F8"],_o="toast.viewportPause",jo="toast.viewportResume",Rf=y.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=mv,label:a="Notifications ({hotkey})",...i}=e,l=ji(Lf,r),o=dv(r),d=y.useRef(null),c=y.useRef(null),h=y.useRef(null),f=y.useRef(null),u=gr(t,f,l.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;y.useEffect(()=>{const p=v=>{var _;n.length!==0&&n.every(j=>v[j]||v.code===j)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n]),y.useEffect(()=>{const p=d.current,v=f.current;if(w&&p&&v){const x=()=>{if(!l.isClosePausedRef.current){const b=new CustomEvent(_o);v.dispatchEvent(b),l.isClosePausedRef.current=!0}},_=()=>{if(l.isClosePausedRef.current){const b=new CustomEvent(jo);v.dispatchEvent(b),l.isClosePausedRef.current=!1}},j=b=>{!p.contains(b.relatedTarget)&&_()},S=()=>{p.contains(document.activeElement)||_()};return p.addEventListener("focusin",x),p.addEventListener("focusout",j),p.addEventListener("pointermove",x),p.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{p.removeEventListener("focusin",x),p.removeEventListener("focusout",j),p.removeEventListener("pointermove",x),p.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[w,l.isClosePausedRef]);const m=y.useCallback(({tabbingDirection:p})=>{const x=o().map(_=>{const j=_.ref.current,S=[j,...Sv(j)];return p==="forwards"?S:S.reverse()});return(p==="forwards"?x.reverse():x).flat()},[o]);return y.useEffect(()=>{const p=f.current;if(p){const v=x=>{var S,b,N;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const C=document.activeElement,P=x.shiftKey;if(x.target===p&&P){(S=c.current)==null||S.focus();return}const I=m({tabbingDirection:P?"backwards":"forwards"}),F=I.findIndex(A=>A===C);ll(I.slice(F+1))?x.preventDefault():P?(b=c.current)==null||b.focus():(N=h.current)==null||N.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[o,m]),s.jsxs(sv,{ref:d,role:"region","aria-label":a.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&s.jsx(bo,{ref:c,onFocusFromOutsideViewport:()=>{const p=m({tabbingDirection:"forwards"});ll(p)}}),s.jsx(zc.Slot,{scope:r,children:s.jsx(Oe.ol,{tabIndex:-1,...i,ref:u})}),w&&s.jsx(bo,{ref:h,onFocusFromOutsideViewport:()=>{const p=m({tabbingDirection:"backwards"});ll(p)}})]})});Rf.displayName=Lf;var Df="ToastFocusProxy",bo=y.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=ji(Df,r);return s.jsx(Uc,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:l=>{var c;const o=l.relatedTarget;!((c=i.viewport)!=null&&c.contains(o))&&n()}})});bo.displayName=Df;var bi="Toast",fv="toast.swipeStart",pv="toast.swipeMove",xv="toast.swipeCancel",gv="toast.swipeEnd",If=y.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...l}=e,[o=!0,d]=Mc({prop:n,defaultProp:a,onChange:i});return s.jsx(Ac,{present:r||o,children:s.jsx(wv,{open:o,...l,ref:t,onClose:()=>d(!1),onPause:Et(e.onPause),onResume:Et(e.onResume),onSwipeStart:me(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(e.onSwipeMove,c=>{const{x:h,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(e.onSwipeEnd,c=>{const{x:h,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),d(!1)})})})});If.displayName=bi;var[yv,vv]=Tf(bi,{onClose(){}}),wv=y.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:d,onResume:c,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:u,onSwipeEnd:g,...w}=e,m=ji(bi,r),[p,v]=y.useState(null),x=gr(t,A=>v(A)),_=y.useRef(null),j=y.useRef(null),S=a||m.duration,b=y.useRef(0),N=y.useRef(S),C=y.useRef(0),{onToastAdd:P,onToastRemove:L}=m,$=Et(()=>{var q;(p==null?void 0:p.contains(document.activeElement))&&((q=m.viewport)==null||q.focus()),l()}),I=y.useCallback(A=>{!A||A===1/0||(window.clearTimeout(C.current),b.current=new Date().getTime(),C.current=window.setTimeout($,A))},[$]);y.useEffect(()=>{const A=m.viewport;if(A){const q=()=>{I(N.current),c==null||c()},V=()=>{const H=new Date().getTime()-b.current;N.current=N.current-H,window.clearTimeout(C.current),d==null||d()};return A.addEventListener(_o,V),A.addEventListener(jo,q),()=>{A.removeEventListener(_o,V),A.removeEventListener(jo,q)}}},[m.viewport,S,d,c,I]),y.useEffect(()=>{i&&!m.isClosePausedRef.current&&I(S)},[i,S,m.isClosePausedRef,I]),y.useEffect(()=>(P(),()=>L()),[P,L]);const F=y.useMemo(()=>p?zf(p):null,[p]);return m.viewport?s.jsxs(s.Fragment,{children:[F&&s.jsx(_v,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),s.jsx(yv,{scope:r,onClose:$,children:vi.createPortal(s.jsx(zc.ItemSlot,{scope:r,children:s.jsx(rv,{asChild:!0,onEscapeKeyDown:me(o,()=>{m.isFocusedToastEscapeKeyDownRef.current||$(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:me(e.onKeyDown,A=>{A.key==="Escape"&&(o==null||o(A.nativeEvent),A.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:me(e.onPointerDown,A=>{A.button===0&&(_.current={x:A.clientX,y:A.clientY})}),onPointerMove:me(e.onPointerMove,A=>{if(!_.current)return;const q=A.clientX-_.current.x,V=A.clientY-_.current.y,H=!!j.current,k=["left","right"].includes(m.swipeDirection),T=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,R=k?T(0,q):0,O=k?0:T(0,V),z=A.pointerType==="touch"?10:2,Q={x:R,y:O},Z={originalEvent:A,delta:Q};H?(j.current=Q,da(pv,f,Z,{discrete:!1})):Su(Q,m.swipeDirection,z)?(j.current=Q,da(fv,h,Z,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(q)>z||Math.abs(V)>z)&&(_.current=null)}),onPointerUp:me(e.onPointerUp,A=>{const q=j.current,V=A.target;if(V.hasPointerCapture(A.pointerId)&&V.releasePointerCapture(A.pointerId),j.current=null,_.current=null,q){const H=A.currentTarget,k={originalEvent:A,delta:q};Su(q,m.swipeDirection,m.swipeThreshold)?da(gv,g,k,{discrete:!0}):da(xv,u,k,{discrete:!0}),H.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),_v=e=>{const{__scopeToast:t,children:r,...n}=e,a=ji(bi,t),[i,l]=y.useState(!1),[o,d]=y.useState(!1);return Nv(()=>l(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:s.jsx(Ef,{asChild:!0,children:s.jsx(Uc,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},jv="ToastTitle",Of=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Oe.div,{...n,ref:t})});Of.displayName=jv;var bv="ToastDescription",$f=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Oe.div,{...n,ref:t})});$f.displayName=bv;var Af="ToastAction",Mf=y.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Ff,{altText:r,asChild:!0,children:s.jsx(Bc,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Af}\`. Expected non-empty \`string\`.`),null)});Mf.displayName=Af;var Uf="ToastClose",Bc=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=vv(Uf,r);return s.jsx(Ff,{asChild:!0,children:s.jsx(Oe.button,{type:"button",...n,ref:t,onClick:me(e.onClick,a.onClose)})})});Bc.displayName=Uf;var Ff=y.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function zf(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),kv(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...zf(n))}}),t}function da(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?bf(a,i):a.dispatchEvent(i)}var Su=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function Nv(e=()=>{}){const t=Et(e);On(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function kv(e){return e.nodeType===e.ELEMENT_NODE}function Sv(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ll(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Cv=Pf,Bf=Rf,qf=If,Vf=Of,Wf=$f,Hf=Mf,Kf=Bc;function Gf(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Gf(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Jf(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Gf(e))&&(n&&(n+=" "),n+=t);return n}const Cu=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Eu=Jf,Qf=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Eu(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(c=>{const h=r==null?void 0:r[c],f=i==null?void 0:i[c];if(h===null)return null;const u=Cu(h)||Cu(f);return a[c][u]}),o=r&&Object.entries(r).reduce((c,h)=>{let[f,u]=h;return u===void 0||(c[f]=u),c},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,h)=>{let{class:f,className:u,...g}=h;return Object.entries(g).every(w=>{let[m,p]=w;return Array.isArray(p)?p.includes({...i,...o}[m]):{...i,...o}[m]===p})?[...c,f,u]:c},[]);return Eu(e,l,d,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ev={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),W=(e,t)=>{const r=y.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},h)=>y.createElement("svg",{ref:h,...Ev,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Tv(e)}`,o].join(" "),...c},[...t.map(([f,u])=>y.createElement(f,u)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=W("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=W("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=W("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=W("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=W("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=W("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=W("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=W("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=W("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=W("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=W("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=W("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=W("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=W("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=W("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=W("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=W("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=W("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=W("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=W("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=W("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=W("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=W("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=W("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=W("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=W("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=W("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=W("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=W("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=W("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=W("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gc="-",Fv=e=>{const t=Bv(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:l=>{const o=l.split(Gc);return o[0]===""&&o.length!==1&&o.shift(),lp(o,t)||zv(l)},getConflictingClassGroupIds:(l,o)=>{const d=r[l]||[];return o&&n[l]?[...d,...n[l]]:d}}},lp=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?lp(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Gc);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},Ru=/^\[(.+)\]$/,zv=e=>{if(Ru.test(e)){const t=Ru.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Bv=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Vv(Object.entries(e.classGroups),r).forEach(([i,l])=>{So(l,n,i,t)}),n},So=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Du(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(qv(a)){So(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{So(l,Du(t,i),r,n)})})},Du=(e,t)=>{let r=e;return t.split(Gc).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},qv=e=>e.isThemeGetter,Vv=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[r,a]}):e,Wv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,l)=>{r.set(i,l),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},op="!",Hv=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,l=o=>{const d=[];let c=0,h=0,f;for(let p=0;p<o.length;p++){let v=o[p];if(c===0){if(v===a&&(n||o.slice(p,p+i)===t)){d.push(o.slice(h,p)),h=p+i;continue}if(v==="/"){f=p;continue}}v==="["?c++:v==="]"&&c--}const u=d.length===0?o:o.substring(h),g=u.startsWith(op),w=g?u.substring(1):u,m=f&&f>h?f-h:void 0;return{modifiers:d,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:m}};return r?o=>r({className:o,parseClassName:l}):l},Kv=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Gv=e=>({cache:Wv(e.cacheSize),parseClassName:Hv(e),...Fv(e)}),Jv=/\s+/,Qv=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],l=e.trim().split(Jv);let o="";for(let d=l.length-1;d>=0;d-=1){const c=l[d],{modifiers:h,hasImportantModifier:f,baseClassName:u,maybePostfixModifierPosition:g}=r(c);let w=!!g,m=n(w?u.substring(0,g):u);if(!m){if(!w){o=c+(o.length>0?" "+o:o);continue}if(m=n(u),!m){o=c+(o.length>0?" "+o:o);continue}w=!1}const p=Kv(h).join(":"),v=f?p+op:p,x=v+m;if(i.includes(x))continue;i.push(x);const _=a(m,w);for(let j=0;j<_.length;++j){const S=_[j];i.push(v+S)}o=c+(o.length>0?" "+o:o)}return o};function Yv(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=cp(t))&&(n&&(n+=" "),n+=r);return n}const cp=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=cp(e[n]))&&(r&&(r+=" "),r+=t);return r};function Xv(e,...t){let r,n,a,i=l;function l(d){const c=t.reduce((h,f)=>f(h),e());return r=Gv(c),n=r.cache.get,a=r.cache.set,i=o,o(d)}function o(d){const c=n(d);if(c)return c;const h=Qv(d,r);return a(d,h),h}return function(){return i(Yv.apply(null,arguments))}}const ae=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},dp=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zv=/^\d+\/\d+$/,ew=new Set(["px","full","screen"]),tw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pt=e=>xs(e)||ew.has(e)||Zv.test(e),Kt=e=>Is(e,"length",mw),xs=e=>!!e&&!Number.isNaN(Number(e)),ul=e=>Is(e,"number",xs),Ks=e=>!!e&&Number.isInteger(Number(e)),iw=e=>e.endsWith("%")&&xs(e.slice(0,-1)),K=e=>dp.test(e),Gt=e=>tw.test(e),lw=new Set(["length","size","percentage"]),ow=e=>Is(e,lw,up),cw=e=>Is(e,"position",up),dw=new Set(["image","url"]),uw=e=>Is(e,dw,pw),hw=e=>Is(e,"",fw),Gs=()=>!0,Is=(e,t,r)=>{const n=dp.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},mw=e=>rw.test(e)&&!sw.test(e),up=()=>!1,fw=e=>nw.test(e),pw=e=>aw.test(e),xw=()=>{const e=ae("colors"),t=ae("spacing"),r=ae("blur"),n=ae("brightness"),a=ae("borderColor"),i=ae("borderRadius"),l=ae("borderSpacing"),o=ae("borderWidth"),d=ae("contrast"),c=ae("grayscale"),h=ae("hueRotate"),f=ae("invert"),u=ae("gap"),g=ae("gradientColorStops"),w=ae("gradientColorStopPositions"),m=ae("inset"),p=ae("margin"),v=ae("opacity"),x=ae("padding"),_=ae("saturate"),j=ae("scale"),S=ae("sepia"),b=ae("skew"),N=ae("space"),C=ae("translate"),P=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",K,t],I=()=>[K,t],F=()=>["",Pt,Kt],A=()=>["auto",xs,K],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",K],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[xs,K];return{cacheSize:500,separator:":",theme:{colors:[Gs],spacing:[Pt,Kt],blur:["none","",Gt,K],brightness:O(),borderColor:[e],borderRadius:["none","","full",Gt,K],borderSpacing:I(),borderWidth:F(),contrast:O(),grayscale:T(),hueRotate:O(),invert:T(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[iw,Kt],inset:$(),margin:$(),opacity:O(),padding:I(),saturate:O(),scale:O(),sepia:T(),skew:O(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",K]}],container:["container"],columns:[{columns:[Gt]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),K]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ks,K]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",K]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Ks,K]}],"grid-cols":[{"grid-cols":[Gs]}],"col-start-end":[{col:["auto",{span:["full",Ks,K]},K]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Gs]}],"row-start-end":[{row:["auto",{span:[Ks,K]},K]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",K]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",K]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",K,t]}],"min-w":[{"min-w":[K,t,"min","max","fit"]}],"max-w":[{"max-w":[K,t,"none","full","min","max","fit","prose",{screen:[Gt]},Gt]}],h:[{h:[K,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[K,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gt,Kt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ul]}],"font-family":[{font:[Gs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",K]}],"line-clamp":[{"line-clamp":["none",xs,ul]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pt,K]}],"list-image":[{"list-image":["none",K]}],"list-style-type":[{list:["none","disc","decimal",K]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pt,Kt]}],"underline-offset":[{"underline-offset":["auto",Pt,K]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),cw]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ow]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},uw]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Pt,K]}],"outline-w":[{outline:[Pt,Kt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Pt,Kt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gt,hw]}],"shadow-color":[{shadow:[Gs]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Gt,K]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",K]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",K]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",K]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Ks,K]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[b]}],"skew-y":[{"skew-y":[b]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",K]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",K]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",K]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Pt,Kt,ul]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gw=Xv(xw);function ee(...e){return gw(Jf(e))}function Be(e){return new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}function Co(e){return new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY"}).format(e)}const yw=Cv,hp=y.forwardRef(({className:e,...t},r)=>s.jsx(Bf,{ref:r,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));hp.displayName=Bf.displayName;const vw=Qf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mp=y.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(qf,{ref:n,className:ee(vw({variant:t}),e),...r}));mp.displayName=qf.displayName;const ww=y.forwardRef(({className:e,...t},r)=>s.jsx(Hf,{ref:r,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));ww.displayName=Hf.displayName;const fp=y.forwardRef(({className:e,...t},r)=>s.jsx(Kf,{ref:r,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(ip,{className:"h-4 w-4"})}));fp.displayName=Kf.displayName;const pp=y.forwardRef(({className:e,...t},r)=>s.jsx(Vf,{ref:r,className:ee("text-sm font-semibold",e),...t}));pp.displayName=Vf.displayName;const xp=y.forwardRef(({className:e,...t},r)=>s.jsx(Wf,{ref:r,className:ee("text-sm opacity-90",e),...t}));xp.displayName=Wf.displayName;const _w=5,jw=1e6,Mt={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let hl=0;function bw(){return hl=(hl+1)%Number.MAX_VALUE,hl.toString()}const ml=new Map,Nw=(e,t)=>{switch(t.type){case Mt.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,_w)};case Mt.UPDATE_TOAST:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case Mt.DISMISS_TOAST:{const{toastId:r}=t;return r?Iu(r):e.toasts.forEach(n=>{Iu(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case Mt.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Ea=[];let Ta={toasts:[]};function hn(e){Ta=Nw(Ta,e),Ea.forEach(t=>{t(Ta)})}function Nt({...e}){const t=bw(),r=a=>hn({type:Mt.UPDATE_TOAST,toast:{...a,id:t}}),n=()=>hn({type:Mt.DISMISS_TOAST,toastId:t});return hn({type:Mt.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Wt(){const[e,t]=y.useState(Ta);return y.useEffect(()=>(Ea.push(t),()=>{const r=Ea.indexOf(t);r>-1&&Ea.splice(r,1)}),[e]),{...e,toast:Nt,dismiss:r=>hn({type:Mt.DISMISS_TOAST,toastId:r})}}function Iu(e){if(ml.has(e))return;const t=setTimeout(()=>{ml.delete(e),hn({type:Mt.REMOVE_TOAST,toastId:e})},jw);ml.set(e,t)}function Jc(){const{toasts:e}=Wt();return s.jsxs(yw,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(mp,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(pp,{children:r}),n&&s.jsx(xp,{children:n})]}),a,s.jsx(fp,{})]},t)}),s.jsx(hp,{})]})}const kw="modulepreload",Sw=function(e){return"/"+e},Ou={},Cs=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=Sw(d),d in Ou)return;Ou[d]=!0;const c=d.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":kw,c||(f.as="script"),f.crossOrigin="",f.href=d,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((u,g)=>{f.addEventListener("load",u),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Cw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Cs(async()=>{const{default:n}=await Promise.resolve().then(()=>Os);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Qc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Ew extends Qc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tw extends Qc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pw extends Qc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Eo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Eo||(Eo={}));var Lw=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class Rw{constructor(t,{headers:r={},customFetch:n,region:a=Eo.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Cw(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Lw(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region),d&&d!=="any"&&(o["x-region"]=d);let c;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=l):typeof l=="string"?(o["Content-Type"]="text/plain",c=l):typeof FormData<"u"&&l instanceof FormData?c=l:(o["Content-Type"]="application/json",c=JSON.stringify(l)));const h=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:c}).catch(w=>{throw new Ew(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Tw(h);if(!h.ok)throw new Pw(h);let u=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return u==="application/json"?g=yield h.json():u==="application/octet-stream"?g=yield h.blob():u==="text/event-stream"?g=h:u==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null}}catch(a){return{data:null,error:a}}})}}var qe={},Yc={},ki={},qn={},Si={},Ci={},Dw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Es=Dw();const Iw=Es.fetch,gp=Es.fetch.bind(Es),yp=Es.Headers,Ow=Es.Request,$w=Es.Response,Os=Object.freeze(Object.defineProperty({__proto__:null,Headers:yp,Request:Ow,Response:$w,default:gp,fetch:Iw},Symbol.toStringTag,{value:"Module"})),Aw=mx(Os);var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});let Mw=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ei.default=Mw;var vp=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ci,"__esModule",{value:!0});const Uw=vp(Aw),Fw=vp(Ei);let zw=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Uw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,h=null,f=null,u=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=v:h=JSON.parse(v))}const m=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,u=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(h=[],c=null,u=200,g="OK")}catch{i.status===404&&m===""?(u=204,g="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,u=200,g="OK"),c&&this.shouldThrowOnError)throw new Fw.default(c)}return{error:c,data:h,count:f,status:u,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Ci.default=zw;var Bw=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Si,"__esModule",{value:!0});const qw=Bw(Ci);let Vw=class extends qw.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Si.default=Vw;var Ww=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qn,"__esModule",{value:!0});const Hw=Ww(Si);let Kw=class extends Hw.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};qn.default=Kw;var Gw=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ki,"__esModule",{value:!0});const Js=Gw(qn);let Jw=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Js.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new Js.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(d.length>0){const c=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Js.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Js.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Js.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ki.default=Jw;var Ti={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.version=void 0;Pi.version="0.0.0-automated";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DEFAULT_HEADERS=void 0;const Qw=Pi;Ti.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qw.version}`};var wp=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yc,"__esModule",{value:!0});const Yw=wp(ki),Xw=wp(qn),Zw=Ti;let e1=class _p{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},Zw.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Yw.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _p(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{o.searchParams.append(h,f)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Xw.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Yc.default=e1;var $s=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const jp=$s(Yc);qe.PostgrestClient=jp.default;const bp=$s(ki);qe.PostgrestQueryBuilder=bp.default;const Np=$s(qn);qe.PostgrestFilterBuilder=Np.default;const kp=$s(Si);qe.PostgrestTransformBuilder=kp.default;const Sp=$s(Ci);qe.PostgrestBuilder=Sp.default;const Cp=$s(Ei);qe.PostgrestError=Cp.default;var t1=qe.default={PostgrestClient:jp.default,PostgrestQueryBuilder:bp.default,PostgrestFilterBuilder:Np.default,PostgrestTransformBuilder:kp.default,PostgrestBuilder:Sp.default,PostgrestError:Cp.default};const{PostgrestClient:r1,PostgrestQueryBuilder:Wj,PostgrestFilterBuilder:Hj,PostgrestTransformBuilder:Kj,PostgrestBuilder:Gj,PostgrestError:Jj}=t1,s1="2.11.2",n1={"X-Client-Info":`realtime-js/${s1}`},a1="1.0.0",Ep=1e4,i1=1e3;var gs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(gs||(gs={}));var Ge;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ge||(Ge={}));var pt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pt||(pt={}));var To;(function(e){e.websocket="websocket"})(To||(To={}));var Sr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Sr||(Sr={}));class l1{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+a));l=l+a;const d=n.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class Tp{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(se||(se={}));const $u=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=o1(l,e,t,a),i),{})},o1=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=r[e];return i&&!n.includes(i)?Pp(i,l):Po(l)},Pp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return h1(t,r)}switch(e){case se.bool:return c1(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return d1(t);case se.json:case se.jsonb:return u1(t);case se.timestamp:return m1(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Po(t);default:return Po(t)}},Po=e=>e,c1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},d1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},u1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},h1=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Pp(t,o))}return e},m1=e=>typeof e=="string"?e.replace(" ","T"):e,Lp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class fl{constructor(t,r,n={},a=Ep){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Au;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Au||(Au={}));class mn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=mn.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=mn.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,h)=>{l[c]||(d[c]=h)}),this.map(l,(c,h)=>{const f=i[c];if(f){const u=h.map(p=>p.presence_ref),g=f.map(p=>p.presence_ref),w=h.filter(p=>g.indexOf(p.presence_ref)<0),m=f.filter(p=>u.indexOf(p.presence_ref)<0);w.length>0&&(o[c]=w),m.length>0&&(d[c]=m)}else o[c]=h}),this.syncDiff(i,{joins:o,leaves:d},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,d)=>{var c;const h=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),h.length>0){const f=t[o].map(g=>g.presence_ref),u=h.filter(g=>f.indexOf(g.presence_ref)<0);t[o].unshift(...u)}n(o,h,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const h=d.map(f=>f.presence_ref);c=c.filter(f=>h.indexOf(f.presence_ref)<0),t[o]=c,a(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Mu||(Mu={}));var Uu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Uu||(Uu={}));var Dt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class Xc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fl(this,pt.join,this.params,this.timeout),this.rejoinTimer=new Tp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new mn(this),this.broadcastEndpointURL=Lp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(h=>t==null?void 0:t(Dt.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Dt.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){t==null||t(Dt.SUBSCRIBED);return}else{const u=this.bindings.postgres_changes,g=(f=u==null?void 0:u.length)!==null&&f!==void 0?f:0,w=[];for(let m=0;m<g;m++){const p=u[m],{filter:{event:v,schema:x,table:_,filter:j}}=p,S=h&&h[m];if(S&&S.event===v&&S.schema===x&&S.table===_&&S.filter===j)w.push(Object.assign(Object.assign({},p),{id:S.id}));else{this.unsubscribe(),t==null||t(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Dt.SUBSCRIBED);return}}).receive("error",h=>{t==null||t(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new fl(this,pt.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new fl(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:h}=pt;if(n&&[o,d,c,h].indexOf(l)>=0&&n!==this._joinRef())return;let u=this._onMessage(l,r,n);if(r&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var w,m,p;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((p=(m=g.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===l}).map(g=>g.callback(u,n)):(i=this.bindings[l])===null||i===void 0||i.filter(g=>{var w,m,p,v,x,_;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const j=g.id,S=(w=g.filter)===null||w===void 0?void 0:w.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const j=(x=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof u=="object"&&"ids"in u){const w=u.data,{schema:m,table:p,commit_timestamp:v,type:x,errors:_}=w;u=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:v,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(w))}g.callback(u,n)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xc.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pt.close,{},t)}_onError(t){this._on(pt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=$u(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=$u(t.columns,t.old_record)),r}}const f1=()=>{},p1=typeof WebSocket<"u",x1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g1{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=n1,this.params={},this.timeout=Ep,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=f1,this.conn=null,this.sendBuffer=[],this.serializer=new l1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>Cs(async()=>{const{default:d}=await Promise.resolve().then(()=>Os);return{default:d}},void 0).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${To.websocket}`,this.httpEndpoint=Lp(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Tp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(p1){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new y1(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Cs(async()=>{const{default:t}=await import("./browser-DeiV5nuD.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a1}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return Sr.Connecting;case gs.open:return Sr.Open;case gs.closing:return Sr.Closing;default:return Sr.Closed}}isConnected(){return this.connectionState()===Sr.Open}channel(t,r={config:{}}){const n=new Xc(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(pt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(i1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:l}=r;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${l&&"("+l+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(pt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([x1],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class y1{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gs.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Zc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function _e(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class v1 extends Zc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lo extends Zc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var w1=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const Rp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Cs(async()=>{const{default:n}=await Promise.resolve().then(()=>Os);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_1=()=>w1(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cs(()=>Promise.resolve().then(()=>Os),void 0)).Response:Response}),Ro=e=>{if(Array.isArray(e))return e.map(r=>Ro(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Ro(n)}),t};var qr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const pl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),j1=(e,t,r)=>qr(void 0,void 0,void 0,function*(){const n=yield _1();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new v1(pl(a),e.status||500))}).catch(a=>{t(new Lo(pl(a),a))}):t(new Lo(pl(e),e))}),b1=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Vn(e,t,r,n,a,i){return qr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,b1(t,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>j1(d,o,n))})})}function ri(e,t,r,n){return qr(this,void 0,void 0,function*(){return Vn(e,"GET",t,r,n)})}function Zt(e,t,r,n,a){return qr(this,void 0,void 0,function*(){return Vn(e,"POST",t,n,a,r)})}function N1(e,t,r,n,a){return qr(this,void 0,void 0,function*(){return Vn(e,"PUT",t,n,a,r)})}function k1(e,t,r,n){return qr(this,void 0,void 0,function*(){return Vn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Dp(e,t,r,n,a){return qr(this,void 0,void 0,function*(){return Vn(e,"DELETE",t,n,a,r)})}var Fe=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const S1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C1{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Rp(a)}uploadOrUpdate(t,r,n,a){return Fe(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Fu),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(r),h=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),u=yield f.json();return f.ok?{data:{path:c,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(i){if(_e(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Fu.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:h}),u=yield f.json();return f.ok?{data:{path:i,fullPath:u.Key},error:null}:{data:null,error:u}}catch(d){if(_e(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Zt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Zc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}update(t,r,n){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Zt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Fe(this,void 0,void 0,function*(){try{const a=yield Zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}download(t,r){return Fe(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ri(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(_e(o))return{data:null,error:o};throw o}})}info(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ri(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ro(n),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}exists(t){return Fe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield k1(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(_e(n)&&n instanceof Lo){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}list(t,r,n){return Fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},S1),r),{prefix:t||""});return{data:yield Zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const E1="2.7.1",T1={"X-Client-Info":`storage-js/${E1}`};var Kr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class P1{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},T1),r),this.fetch=Rp(n)}listBuckets(){return Kr(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}})}getBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Kr(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Kr(this,void 0,void 0,function*(){try{return{data:yield N1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Kr(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}}class L1 extends P1{constructor(t,r={},n){super(t,r,n)}from(t){return new C1(this.url,this.headers,t,this.fetch)}}const R1="2.49.1";let en="";typeof Deno<"u"?en="deno":typeof document<"u"?en="web":typeof navigator<"u"&&navigator.product==="ReactNative"?en="react-native":en="node";const D1={"X-Client-Info":`supabase-js-${en}/${R1}`},I1={headers:D1},O1={schema:"public"},$1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A1={};var M1=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const U1=e=>{let t;return e?t=e:typeof fetch>"u"?t=gp:t=fetch,(...r)=>t(...r)},F1=()=>typeof Headers>"u"?yp:Headers,z1=(e,t,r)=>{const n=U1(r),a=F1();return(i,l)=>M1(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new a(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:c}))})};var B1=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};function q1(e){return e.replace(/\/$/,"")}function V1(e,t){const{db:r,auth:n,realtime:a,global:i}=e,{db:l,auth:o,realtime:d,global:c}=t,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign({},c),i),accessToken:()=>B1(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Ip="2.68.0",Qr=30*1e3,Do=3,xl=Do*Qr,W1="http://localhost:9999",H1="supabase.auth.token",K1={"X-Client-Info":`gotrue-js/${Ip}`},Io="X-Supabase-Api-Version",Op={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function G1(e){return Math.round(Date.now()/1e3)+e}function J1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const jt=()=>typeof window<"u"&&typeof document<"u",jr={tested:!1,writable:!1},fn=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jr.tested)return jr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),jr.tested=!0,jr.writable=!0}catch{jr.tested=!0,jr.writable=!1}return jr.writable};function Q1(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const $p=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Cs(async()=>{const{default:n}=await Promise.resolve().then(()=>Os);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Y1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ap=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ua=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ha=async(e,t)=>{await e.removeItem(t)};function X1(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,a,i,l,o,d,c,h=0;for(e=e.replace("-","+").replace("_","/");h<e.length;)l=t.indexOf(e.charAt(h++)),o=t.indexOf(e.charAt(h++)),d=t.indexOf(e.charAt(h++)),c=t.indexOf(e.charAt(h++)),n=l<<2|o>>4,a=(o&15)<<4|d>>2,i=(d&3)<<6|c,r=r+String.fromCharCode(n),d!=64&&a!=0&&(r=r+String.fromCharCode(a)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class Li{constructor(){this.promise=new Li.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Li.promiseConstructor=Promise;function zu(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=e.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(X1(n))}async function Z1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function e_(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function t_(e){return("0"+e.toString(16)).substr(-2)}function r_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,t_).join("")}async function s_(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function n_(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function a_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await s_(e);return n_(r)}async function Gr(e,t,r=!1){const n=r_();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Ap(e,`${t}-code-verifier`,a);const i=await a_(n);return[i,n===i?"plain":"s256"]}const i_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function l_(e){const t=e.headers.get(Io);if(!t||!t.match(i_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class ed extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function G(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class o_ extends ed{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function c_(e){return G(e)&&e.name==="AuthApiError"}class Mp extends ed{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Vr extends ed{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Jt extends Vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d_(e){return G(e)&&e.name==="AuthSessionMissingError"}class gl extends Vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ma extends Vr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fa extends Vr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u_(e){return G(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bu extends Vr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oo extends Vr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function yl(e){return G(e)&&e.name==="AuthRetryableFetchError"}class qu extends Vr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var h_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const kr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m_=[502,503,504];async function Vu(e){var t;if(!Y1(e))throw new Oo(kr(e),0);if(m_.includes(e.status))throw new Oo(kr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Mp(kr(i),i)}let n;const a=l_(e);if(a&&a.getTime()>=Op["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new qu(kr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Jt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new qu(kr(r),e.status,r.weak_password.reasons);throw new o_(kr(r),e.status||500,n)}const f_=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Y(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Io]||(i[Io]=Op["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await p_(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function p_(e,t,r,n,a,i){const l=f_(t,n,a,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Oo(kr(d),0)}if(o.ok||await Vu(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(d){await Vu(d)}}function Qt(e){var t;let r=null;v_(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=G1(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Wu(e){const t=Qt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function x_(e){return{data:e,error:null}}function g_(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,l=h_(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function y_(e){return e}function v_(e){return e.access_token&&e.refresh_token&&e.expires_in}var w_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class __{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=$p(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:rr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=w_(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:g_,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rr})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},h=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:y_});if(h.error)throw h.error;const f=await h.json(),u=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(d=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(w=>{const m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(w.split(";")[1].split("=")[1]);c[`${p}Page`]=m}),c.total=parseInt(u)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(G(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rr})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:rr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:rr})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await Y(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}}const j_={getItem:e=>fn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{fn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{fn()&&globalThis.localStorage.removeItem(e)}};function Hu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function b_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Jr={debug:!!(globalThis&&fn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Up extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class N_ extends Up{}async function k_(e,t,r){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new N_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}b_();const S_={url:W1,storageKey:H1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ku(e,t,r){return await r()}class $n{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$n.nextInstanceID,$n.nextInstanceID+=1,this.instanceID>0&&jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},S_),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new __({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=$p(a.fetch),this.lock=a.lock||Ku,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:jt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=k_:this.lock=Ku,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:fn()?this.storage=j_:(this.memoryStorage={},this.storage=Hu(this.memoryStorage)):(this.memoryStorage={},this.storage=Hu(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ip}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Q1(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),jt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),u_(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?{error:r}:{error:new Mp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Qt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:h,password:f,options:u}=t;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Gr(this.storage,this.storageKey)),i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u==null?void 0:u.emailRedirectTo,body:{email:h,password:f,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:g,code_challenge_method:w},xform:Qt})}else if("phone"in t){const{phone:h,password:f,options:u}=t;i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Qt})}else throw new ma("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Wu})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Wu})}else throw new ma("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new gl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await ua(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:l}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Qt});if(await ha(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(G(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:l}=t,o=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Qt}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new gl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Gr(this.storage,this.storageKey));const{error:f}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:h}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new ma("You must provide either an email or phone number.")}catch(o){if(G(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Qt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(G(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Gr(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:x_})}catch(i){if(G(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Jt;const{error:a}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:o}=await Y(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new ma("You must provide either an email or phone number and a type")}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,h)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,h))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rr}):await this._useSession(async r=>{var n,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jt}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:rr})})}catch(r){if(G(r))return d_(r)&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Jt;const l=a.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await Gr(this.storage,this.storageKey));const{data:c,error:h}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:rr});if(h)throw h;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return zu(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Jt;const r=Date.now()/1e3;let n=r,a=!0,i=null;const l=zu(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(G(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Jt;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!jt())throw new fa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bu("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new fa("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(o);let u=h+f;d&&(u=parseInt(d));const g=u-h;g*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const w=u-f;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,u,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,u,h);const{data:m,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:u,refresh_token:l,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(G(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(c_(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=J1(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Gr(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(G(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,d,c,h;const{data:f,error:u}=i;if(u)throw u;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return jt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(G(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)throw l;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await e_(async a=>(a>0&&await Z1(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&yl(i)&&Date.now()+l-n<Qr})}catch(n){if(this._debug(r,"error",n),G(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),jt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ua(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<xl;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xl}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),yl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Li;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Jt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),G(i)){const l={session:null,error:i};return yl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ap(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ha(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qr}ms, refresh threshold is ${Do} ticks`),a<=Do&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Up)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Gr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Y(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Y(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(a.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:h},error:null}}))}}$n.nextInstanceID=0;const C_=$n;class E_ extends C_{constructor(t){super(t)}}var T_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(h){try{c(n.next(h))}catch(f){l(f)}}function d(h){try{c(n.throw(h))}catch(f){l(f)}}function c(h){h.done?i(h.value):a(h.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class P_{constructor(t,r,n){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=q1(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:O1,realtime:A1,auth:Object.assign(Object.assign({},$1),{storageKey:d}),global:I1},h=V1(n??{},c);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,u)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(u)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=z1(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new r1(`${o}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Rw(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new L1(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return T_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:l,lock:o,debug:d},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E_({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:l,lock:o,debug:d,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new g1(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const L_=(e,t,r)=>new P_(e,t,r),R_="https://dypxnlgeyjcyklccszqa.supabase.co",D_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cHhubGdleWpjeWtsY2NzenFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExODk4MjYsImV4cCI6MjA1Njc2NTgyNn0.q_S3OAdN_04ChF2TM2fAllRyCH652UnPaU_ByWDKFm0",E=L_(R_,D_),I_=Qf("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-button hover:shadow-button-hover",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-button hover:shadow-button-hover",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:from-primary/90 hover:to-secondary/90 shadow-button hover:shadow-button-hover",subtle:"bg-primary/10 text-primary hover:bg-primary/20",glass:"backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border border-white/20 dark:border-gray-800/20 text-foreground shadow-button hover:shadow-button-hover hover:bg-white/90 dark:hover:bg-gray-900/90"},size:{default:"h-10 px-5 py-2.5",sm:"h-9 rounded-md px-3 py-2 text-xs",lg:"h-12 rounded-md px-8 py-3 text-base",xl:"h-14 rounded-md px-10 py-4 text-lg",icon:"h-10 w-10","icon-sm":"h-8 w-8 rounded-md","icon-lg":"h-12 w-12 rounded-md"},rounded:{default:"rounded-md",none:"rounded-none",sm:"rounded-sm",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full"},withIcon:{true:"inline-flex items-center justify-center gap-2"}},defaultVariants:{variant:"default",size:"default",rounded:"default"}}),B=y.forwardRef(({className:e,variant:t,size:r,rounded:n,withIcon:a,asChild:i=!1,isLoading:l=!1,children:o,...d},c)=>{const h=i?In:"button";return s.jsx(h,{className:ee(I_({variant:t,size:r,rounded:n,withIcon:a,className:e})),ref:c,disabled:l||d.disabled,...d,children:l?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"読込中..."})]}):o})});B.displayName="Button";const O_=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,i]=y.useState(!1),l=ut(),{toast:o}=Wt(),d=async c=>{if(c.preventDefault(),!e||!r){o({title:"エラー",description:"メールアドレスとパスワードを入力してください",variant:"destructive"});return}try{i(!0);const{data:h,error:f}=await E.auth.signInWithPassword({email:e,password:r});if(f)throw f;const{data:u}=await E.from("user_profiles").select("is_profile_completed").eq("id",h.user.id).maybeSingle(),{data:g}=await E.from("instructor_profiles").select("is_profile_completed").eq("id",h.user.id).maybeSingle(),w={user_type:u?"user":"instructor",is_profile_completed:u?u.is_profile_completed:g==null?void 0:g.is_profile_completed};o({title:"ログイン成功",description:"ようこそ北摂でまなぼへ"}),w!=null&&w.is_profile_completed?l(`/${w.user_type}`):l(`/${w.user_type}/profile`)}catch(h){o({title:"ログインエラー",description:h.message||"ログインできませんでした",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:[s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:"北摂でまなぼ"}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:"北摂地域での習いごと・レッスンマッチングサービス"})]}),s.jsxs("div",{className:"w-full max-w-md space-y-4",children:[s.jsxs("div",{className:"flex items-center p-4 bg-white/20 backdrop-blur-sm rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center mr-4 flex-shrink-0",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"8",r:"6"}),s.jsx("path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"})]})}),s.jsx("p",{className:"text-sm",children:"多種多様なレッスンやワークショップを見つけて、新しいスキルを身につけましょう"})]}),s.jsxs("div",{className:"flex items-center p-4 bg-white/20 backdrop-blur-sm rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center mr-4 flex-shrink-0",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),s.jsx("p",{className:"text-sm",children:"地元の優れた講師から学び、あなたのスキルを向上させてください"})]})]})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:"北"})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"アカウントにログイン"}),s.jsxs("p",{className:"text-center text-sm text-gray-600",children:["または"," ",s.jsx(M,{to:"/register",className:"font-medium text-primary hover:text-primary/80 underline underline-offset-4",children:"新規登録"})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:c=>t(c.target.value),className:"form-input",placeholder:"example@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:c=>n(c.target.value),className:"form-input",placeholder:"••••••••"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),s.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"ログイン情報を保存"})]}),s.jsx("div",{className:"text-sm",children:s.jsx(M,{to:"/reset-password",className:"font-medium text-primary hover:text-primary/80",children:"パスワードを忘れた場合"})})]}),s.jsx(B,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:a,isLoading:a,children:"ログイン"})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"© 2025 北摂でまなぼ. All rights reserved."})})]})]})})]})},$_=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState("user"),[d,c]=y.useState(!1),h=ut(),{toast:f}=Wt(),u=async g=>{if(g.preventDefault(),!e||!r||!a){f({title:"エラー",description:"すべての項目を入力してください",variant:"destructive"});return}if(r!==a){f({title:"パスワードエラー",description:"パスワードが一致しません",variant:"destructive"});return}try{c(!0);const{data:w,error:m}=await E.auth.signUp({email:e,password:r,options:{data:{user_type:l}}});if(m)throw m;if(w.user){if(l==="user"){const{error:p}=await E.from("user_profiles").insert([{id:w.user.id,name:e.split("@")[0],email:e,username:e.split("@")[0],is_profile_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(p)throw p}else{const{error:p}=await E.from("instructor_profiles").insert([{id:w.user.id,name:e.split("@")[0],email:e,username:e.split("@")[0],is_profile_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(p)throw p}f({title:"登録成功",description:"アカウントが作成されました。メールを確認して登録を完了してください。"}),h(`/${l}/profile`)}}catch(w){f({title:"登録エラー",description:w.message||"登録できませんでした",variant:"destructive"})}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-center text-3xl font-bold text-primary",children:"北摂でまなぼ"}),s.jsx("h2",{className:"mt-6 text-center text-2xl font-extrabold text-gray-900",children:"新規アカウント登録"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["既にアカウントをお持ちの方は"," ",s.jsx(M,{to:"/login",className:"font-medium text-primary hover:text-primary/80",children:"ログイン"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"メールアドレス"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:g=>t(g.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"メールアドレス"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"パスワード"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:g=>n(g.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"パスワード"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"パスワード（確認）"}),s.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:g=>i(g.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"パスワード（確認）"})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"user-type-user",name:"user-type",type:"radio",checked:l==="user",onChange:()=>o("user"),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300"}),s.jsx("label",{htmlFor:"user-type-user",className:"ml-2 mr-6 block text-sm text-gray-900",children:"生徒として登録"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"user-type-instructor",name:"user-type",type:"radio",checked:l==="instructor",onChange:()=>o("instructor"),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300"}),s.jsx("label",{htmlFor:"user-type-instructor",className:"ml-2 block text-sm text-gray-900",children:"講師として登録"})]})]})}),s.jsx("div",{children:s.jsx(B,{type:"submit",className:"w-full py-6",disabled:d,children:d?"登録中...":"登録する"})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("p",{className:"text-gray-600",children:"利用規約とプライバシーポリシーに同意の上、登録してください。"})})]})]})})},A_=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(!1),[a,i]=y.useState(!1),{toast:l}=Wt(),o=async d=>{if(d.preventDefault(),!e){l({title:"エラー",description:"メールアドレスを入力してください",variant:"destructive"});return}try{n(!0);const{error:c}=await E.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/update-password`});if(c)throw c;i(!0),l({title:"パスワードリセットメール送信",description:"パスワードリセット用のリンクをメールで送信しました。メールをご確認ください。"})}catch(c){l({title:"エラー",description:c.message||"パスワードリセットメールの送信に失敗しました",variant:"destructive"})}finally{n(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:"北摂でまなぼ"}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:"北摂地域での習いごと・レッスンマッチングサービス"})]})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:"北"})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"パスワードをリセット"}),s.jsxs("p",{className:"text-center text-sm text-gray-600",children:["または"," ",s.jsx(M,{to:"/login",className:"font-medium text-primary hover:text-primary/80 underline underline-offset-4",children:"ログインへ戻る"})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:a?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-primary",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"メールを送信しました"}),s.jsx("p",{className:"mt-2 text-gray-500",children:"パスワードリセット用のリンクを記載したメールをお送りしました。 メールをご確認の上、リンクをクリックしてパスワードを再設定してください。"}),s.jsx("div",{className:"mt-6",children:s.jsx(M,{to:"/login",className:"text-sm font-medium text-primary hover:text-primary/80",children:"ログインページに戻る"})})]}):s.jsxs("form",{className:"space-y-6",onSubmit:o,children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"パスワードリセット用のリンクをメールでお送りします。 アカウント登録時に使用したメールアドレスを入力してください。"}),s.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:d=>t(d.target.value),className:"form-input",placeholder:"example@email.com"})]}),s.jsx(B,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:r,isLoading:r,children:"パスワードリセットを要求"})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"© 2025 北摂でまなぼ. All rights reserved."})})]})]})})]})},M_=()=>{const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,i]=y.useState(!1),[l,o]=y.useState(!1),d=ut(),{toast:c}=Wt();y.useEffect(()=>{(async()=>{const{data:u}=await E.auth.getSession();u.session||(c({title:"エラー",description:"セッションが見つかりません。リンクが無効か期限切れです。",variant:"destructive"}),d("/login"))})()},[d,c]);const h=async f=>{if(f.preventDefault(),!e||!r){c({title:"エラー",description:"すべてのフィールドを入力してください",variant:"destructive"});return}if(e!==r){c({title:"エラー",description:"パスワードが一致しません",variant:"destructive"});return}if(e.length<8){c({title:"エラー",description:"パスワードは8文字以上である必要があります",variant:"destructive"});return}try{i(!0);const{error:u}=await E.auth.updateUser({password:e});if(u)throw u;o(!0),c({title:"パスワードを更新しました",description:"新しいパスワードでログインできます"}),setTimeout(()=>{d("/login")},3e3)}catch(u){c({title:"エラー",description:u.message||"パスワードの更新に失敗しました",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:"北摂でまなぼ"}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:"北摂地域での習いごと・レッスンマッチングサービス"})]})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:"北"})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"新しいパスワードを設定"}),s.jsx("p",{className:"text-center text-sm text-gray-600",children:"安全なパスワードを設定して、アカウントを保護してください"})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:l?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-primary",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"パスワードを更新しました"}),s.jsx("p",{className:"mt-2 text-gray-500",children:"パスワードが正常に更新されました。ログインページに移動しています..."})]}):s.jsxs("form",{className:"space-y-6",onSubmit:h,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"新しいパスワード"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:e,onChange:f=>t(f.target.value),className:"form-input",placeholder:"••••••••",minLength:8}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"8文字以上で設定してください"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワードの確認"}),s.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:r,onChange:f=>n(f.target.value),className:"form-input",placeholder:"••••••••"})]})]}),s.jsx(B,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:a,isLoading:a,children:"パスワードを更新"})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"© 2025 北摂でまなぼ. All rights reserved."})})]})]})})]})},st=({children:e,user:t,userType:r,requireProfileCompletion:n=!1,allowIncompleteProfile:a=!1})=>{const[i,l]=y.useState(!0),[,o]=y.useState(null),[,d]=y.useState(null),[c,h]=y.useState(null),[f,u]=y.useState(!1);if(y.useEffect(()=>{if(!t){l(!1);return}(async()=>{try{const{data:w,error:m}=await E.from("user_profiles").select("*").eq("id",t.id).single();m||(o(w),h("user"));const{data:p,error:v}=await E.from("instructor_profiles").select("*").eq("id",t.id).single();v?r==="instructor"&&u(!1):(d(p),r==="instructor"&&u((p==null?void 0:p.is_profile_completed)||!1),(r==="instructor"||!m&&!r)&&h("instructor")),r==="user"&&!m&&u((w==null?void 0:w.is_profile_completed)||!1)}catch(w){console.error("Error fetching profiles:",w)}finally{l(!1)}})()},[t,r]),i)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx(Lr,{to:"/login",replace:!0});if(r&&c&&r!==c)return s.jsx(Lr,{to:`/${c}`,replace:!0});if(n&&!f&&!a){if(r==="instructor")return s.jsx(Lr,{to:"/instructor/profile",replace:!0});if(r==="user")return s.jsx(Lr,{to:"/user/profile",replace:!0})}return s.jsx(s.Fragment,{children:e})},Fp=({userType:e,navItems:t,profileHref:r,notificationsHref:n,user:a,isPremium:i=!1})=>{const[l,o]=y.useState(!1),[d,c]=y.useState(0),[h,f]=y.useState(0),[u,g]=y.useState(!1),[w,m]=y.useState(""),p=ut(),v=Br(),{toast:x}=Wt();y.useEffect(()=>{const b=()=>{g(window.scrollY>10)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]),y.useEffect(()=>{const b=async()=>{if(a){const{count:C}=await E.from("notifications").select("count",{count:"exact"}).eq("user_id",a.id).eq("is_read",!1);c(C||0);const P=e==="instructor"?{instructor_id:a.id}:{user_id:a.id},{data:L}=await E.from("chat_rooms").select("id").match(P),$=(L==null?void 0:L.map(F=>F.id))||[];let I=0;if($.length>0){const{count:F}=await E.from("chat_messages").select("count",{count:"exact"}).eq("is_read",!1).neq("sender_id",a.id).in("chat_room_id",$);I=F||0}f(I)}};b();const N=E.channel("unread-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},()=>{b()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:"is_read=eq.true"},()=>{b()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},()=>{b()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:"is_read=eq.true"},()=>{b()}).subscribe();return()=>{E.removeChannel(N)}},[a,e]);const _=async()=>{await E.auth.signOut(),x({title:"ログアウトしました",description:"またのご利用をお待ちしております。"}),p("/login")},j=()=>{o(!l)},S=b=>{switch(b.toLowerCase()){case"ホーム":return s.jsx(Wc,{className:"w-5 h-5"});case"予約":case"レッスン":return s.jsx(ke,{className:"w-5 h-5"});case"お気に入り":return s.jsx(Ni,{className:"w-5 h-5"});case"メッセージ":case"チャット":return s.jsx(Kc,{className:"w-5 h-5"});case"プロフィール":case"設定":return s.jsx(ko,{className:"w-5 h-5"});case"ブックマーク":return s.jsx(Dv,{className:"w-5 h-5"});default:return null}};return s.jsxs("nav",{className:ee("sticky top-0 z-50 transition-all duration-300",u?"bg-white/90 backdrop-blur-md shadow-lg border-b border-primary/10":"bg-white shadow-sm"),children:[s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsxs(M,{to:`/${e}`,className:"flex items-center space-x-2 group",children:[s.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-lg group-hover:bg-primary/30 transition-colors duration-300"}),s.jsx("span",{className:"relative text-xl font-bold text-primary",children:"北"})]}),s.jsx("span",{className:"gradient-heading text-xl tracking-tight",children:"北摂でまなぼ"})]})}),s.jsx("div",{className:"hidden sm:ml-10 sm:flex sm:items-center sm:space-x-1",children:t.map((b,N)=>{const C=v.pathname===b.href,P=b.label==="チャット"||b.label==="メッセージ";return s.jsxs(M,{to:b.href,className:ee("nav-link relative overflow-hidden",C?"nav-link-active":"hover:text-primary"),children:[C&&s.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"}),s.jsxs("span",{className:"flex items-center space-x-1.5",children:[b.icon||S(b.label),b.isPremium&&s.jsx(At,{className:"w-4 h-4 text-yellow-500 animate-pulse"}),s.jsx("span",{children:b.label}),P&&h>0&&s.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full shadow-sm animate-pulse",children:h>9?"9+":h})]})]},N)})})]}),s.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-3",children:[s.jsxs("form",{className:"relative",onSubmit:b=>{b.preventDefault(),w.trim()&&p(`/${e}/lessons?search=${encodeURIComponent(w)}`)},children:[s.jsx("input",{type:"text",placeholder:"レッスンを検索...",className:"px-4 py-2 pl-10 pr-4 rounded-full text-sm border border-input focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary w-[200px] bg-background",value:w,onChange:b=>m(b.target.value)}),s.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),s.jsxs(M,{to:n,className:"nav-link relative overflow-hidden flex items-center space-x-1.5","aria-label":"通知",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"通知"}),d>0&&s.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-primary rounded-full shadow-sm animate-pulse",children:d>9?"9+":d})]}),s.jsxs("div",{className:"relative flex items-center",children:[i&&s.jsxs("div",{className:"flex items-center mr-3 px-2.5 py-1 rounded-full bg-gradient-to-r from-yellow-400 to-amber-500 text-white shadow-sm",children:[s.jsx(At,{className:"h-3.5 w-3.5 mr-1 animate-pulse-soft"}),s.jsx("span",{className:"text-xs font-medium",children:"プレミアム"})]}),s.jsxs(M,{to:r,className:"flex items-center space-x-2 p-1.5 rounded-full text-foreground/80 hover:text-foreground transition-colors hover:bg-accent/50",children:[s.jsx("div",{className:"relative w-9 h-9 overflow-hidden rounded-full ring-2 ring-primary/30 bg-muted flex items-center justify-center shadow-sm",children:a!=null&&a.profile_image_url?s.jsx("img",{className:"h-full w-full object-cover",src:a.profile_image_url,alt:(a==null?void 0:a.name)||"プロフィール"}):s.jsx(ti,{className:"h-5 w-5 text-foreground/60"})}),s.jsx("span",{className:"text-sm font-medium max-w-[120px] truncate",children:(a==null?void 0:a.name)||"プロフィール"})]}),s.jsx("div",{className:"ml-2 flex items-center space-x-2",children:s.jsx(B,{variant:"outline",size:"icon-sm",rounded:"full",onClick:_,className:"text-foreground/70 hover:text-destructive hover:border-destructive/50","aria-label":"ログアウト",children:s.jsx(Lu,{className:"h-4 w-4"})})})]})]}),s.jsxs("div",{className:"flex items-center sm:hidden",children:[s.jsxs("form",{className:"relative mr-1",onSubmit:b=>{b.preventDefault(),w.trim()&&(p(`/${e}/lessons?search=${encodeURIComponent(w)}`),o(!1))},children:[s.jsx("input",{type:"text",placeholder:"検索...",className:"px-3 py-1.5 pl-8 pr-2 rounded-full text-xs border border-input focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary w-[120px] bg-background",value:w,onChange:b=>m(b.target.value)}),s.jsx(Ur,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"})]}),s.jsxs(M,{to:n,className:"flex items-center mr-2 p-2 text-foreground/70 hover:text-primary transition-colors","aria-label":"通知",children:[s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"h-5 w-5"}),d>0&&s.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 h-4 w-4 text-xs font-bold text-white bg-primary rounded-full shadow-sm",children:d>9?"9+":d})]}),s.jsx("span",{className:"ml-1 text-sm",children:"通知"})]}),s.jsx("button",{onClick:j,className:"inline-flex items-center justify-center p-2 rounded-md text-foreground/70 hover:text-primary hover:bg-accent/50 transition-colors","aria-label":l?"メニューを閉じる":"メニューを開く",children:l?s.jsx(ip,{className:"block h-5 w-5"}):s.jsx($v,{className:"block h-5 w-5"})})]})]})}),l&&s.jsxs("div",{className:"sm:hidden bg-white/95 backdrop-blur-md border-t border-primary/10 shadow-xl fixed inset-x-0 top-16 bottom-0 z-50 overflow-y-auto",children:[s.jsx("div",{className:"pt-4 pb-3 space-y-1 px-2",children:t.map((b,N)=>{const C=v.pathname===b.href;return s.jsxs(M,{to:b.href,className:ee("flex items-center space-x-3 py-3 px-4 rounded-xl text-base font-medium transition-all duration-200",C?"bg-primary/10 text-primary shadow-sm":"text-foreground/70 hover:bg-accent hover:text-foreground hover:shadow-sm"),onClick:()=>o(!1),children:[s.jsx("div",{className:ee("flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg",C?"bg-primary/20":"bg-muted"),children:b.icon||S(b.label)}),s.jsxs("div",{className:"flex-1 flex items-center",children:[s.jsx("span",{children:b.label}),b.isPremium&&s.jsxs("span",{className:"ml-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium text-yellow-700 bg-yellow-100 rounded-full",children:[s.jsx(At,{className:"w-3 h-3 mr-0.5 text-yellow-500"}),"プレミアム"]}),(b.label==="チャット"||b.label==="メッセージ")&&h>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full",children:h>9?"9+":h})]})]},N)})}),s.jsxs("div",{className:"mt-4 pt-4 pb-5 border-t border-border/30",children:[s.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-xl mx-2 p-4 mb-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"relative flex-shrink-0 w-12 h-12 overflow-hidden rounded-xl ring-2 ring-primary/30 bg-muted flex items-center justify-center shadow-sm",children:a!=null&&a.profile_image_url?s.jsx("img",{className:"h-full w-full object-cover",src:a.profile_image_url,alt:(a==null?void 0:a.name)||"ユーザー"}):s.jsx(ti,{className:"h-6 w-6 text-foreground/60"})}),s.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[s.jsx("div",{className:"text-lg font-bold text-foreground truncate",children:(a==null?void 0:a.name)||"ユーザー"}),s.jsx("div",{className:"text-sm text-foreground/60 truncate",children:(a==null?void 0:a.email)||""})]}),i&&s.jsx("div",{className:"ml-auto flex-shrink-0 px-2.5 py-1.5 rounded-full bg-gradient-to-r from-yellow-400 to-amber-500 text-white shadow-sm",children:s.jsx(At,{className:"h-5 w-5 animate-pulse-soft"})})]})}),s.jsxs("div",{className:"space-y-2 px-2",children:[s.jsxs(M,{to:r,className:"flex items-center space-x-3 px-4 py-3 rounded-xl text-base font-medium text-foreground/80 hover:text-foreground hover:bg-accent/70 hover:shadow-sm transition-all duration-200",onClick:()=>o(!1),children:[s.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-lg bg-muted",children:s.jsx(ko,{className:"h-5 w-5"})}),s.jsx("span",{children:"プロフィール設定"})]}),s.jsx("div",{className:"px-2 pt-2",children:s.jsxs("button",{onClick:()=>{_(),o(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 rounded-xl text-base font-medium bg-destructive/10 text-destructive hover:bg-destructive/20 hover:shadow-sm transition-all duration-200",children:[s.jsx(Lu,{className:"h-5 w-5"}),s.jsx("span",{children:"ログアウト"})]})})]})]})]})]})},U_=()=>{const[e,t]=y.useState(null),[r,n]=y.useState(!0),[a,i]=y.useState(!1);y.useEffect(()=>{(async()=>{const{data:{user:h}}=await E.auth.getUser();if(h){const{data:f}=await E.from("user_profiles").select("*").eq("id",h.id).single();t(f)}n(!1)})();const c=()=>{i(window.scrollY>500)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const l=()=>{window.scrollTo({top:0,behavior:"smooth"})},o=[{label:"ホーム",href:"/user",icon:s.jsx(Wc,{className:"w-5 h-5"})},{label:"レッスン一覧",href:"/user/lessons",icon:s.jsx(Yf,{className:"w-5 h-5"})},{label:"予約管理",href:"/user/bookings",icon:s.jsx(ke,{className:"w-5 h-5"})},{label:"チャット",href:"/user/chat",icon:s.jsx(Kc,{className:"w-5 h-5"})},{label:"お気に入り",href:"/user/favorites",icon:s.jsx(Ni,{className:"w-5 h-5"})},{label:"受講履歴",href:"/user/history",icon:s.jsx(Ov,{className:"w-5 h-5"})}];return r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg text-foreground/70 animate-pulse",children:"読み込み中..."})]}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsx(Fp,{userType:"user",navItems:o,profileHref:"/user/profile",notificationsHref:"/user/notifications",user:e}),s.jsx("main",{className:"flex-1",children:s.jsx("div",{className:"page-container pb-16",children:s.jsx(wf,{})})}),a&&s.jsx(B,{variant:"default",size:"icon",rounded:"full",className:"fixed bottom-6 right-6 z-50 shadow-lg",onClick:l,"aria-label":"ページトップへ",children:s.jsx(ep,{className:"h-5 w-5"})}),s.jsx("footer",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white py-12 border-t border-gray-700/50",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 gradient-heading",children:"北摂でまなぼ"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"北摂エリアの講師と生徒をつなぐオンライン学習プラットフォーム"}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Instagram",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"サイトマップ"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("a",{href:"/user",className:"text-gray-300 hover:text-primary transition-colors",children:"ホーム"}),s.jsx("a",{href:"/user/lessons",className:"text-gray-300 hover:text-primary transition-colors",children:"レッスン一覧"}),s.jsx("a",{href:"/user/bookings",className:"text-gray-300 hover:text-primary transition-colors",children:"予約管理"}),s.jsx("a",{href:"/user/profile",className:"text-gray-300 hover:text-primary transition-colors",children:"プロフィール"}),s.jsx("a",{href:"/user/favorites",className:"text-gray-300 hover:text-primary transition-colors",children:"お気に入り"}),s.jsx("a",{href:"/user/history",className:"text-gray-300 hover:text-primary transition-colors",children:"受講履歴"}),s.jsx("a",{href:"/user/chat",className:"text-gray-300 hover:text-primary transition-colors",children:"チャット"}),s.jsx("a",{href:"/instructor",className:"text-gray-300 hover:text-primary transition-colors",children:"講師として利用"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"お問い合わせ"}),s.jsx("p",{className:"text-gray-300 mb-2",children:"お問い合わせはこちらからお願いします。"}),s.jsx("a",{href:"mailto:info@kitasetsu-manabu.jp",className:"text-primary hover:text-primary/80 transition-colors font-medium",children:"info@kitasetsu-manabu.jp"}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:"運営会社"}),s.jsxs("p",{className:"text-gray-300",children:["株式会社北摂エデュケーション",s.jsx("br",{}),"大阪府北摂地域",s.jsx("br",{}),"〒000-0000"]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-700/50 mt-10 pt-8 text-center text-gray-400",children:[s.jsxs("p",{children:["© ",new Date().getFullYear()," 北摂でまなぼ All rights reserved."]}),s.jsxs("div",{className:"mt-2 text-sm space-x-4",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"利用規約"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"プライバシーポリシー"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"特定商取引法に基づく表記"})]})]})]})}),s.jsx(Jc,{})]})};function vl({title:e,description:t,icon:r,className:n,titleClassName:a,descriptionClassName:i,align:l="left",withLine:o=!0,isGradient:d=!1}){return s.jsxs("div",{className:ee("mb-8",l==="center"&&"text-center",l==="right"&&"text-right",n),children:[s.jsxs("div",{className:ee("flex items-center gap-3 mb-2",l==="center"&&"justify-center",l==="right"&&"justify-end"),children:[r&&s.jsx("span",{className:"text-primary",children:r}),s.jsx("h2",{className:ee("text-2xl font-bold tracking-tight",d&&"gradient-heading",a),children:e})]}),t&&s.jsx("p",{className:ee("text-muted-foreground mt-1 max-w-3xl",l==="center"&&"mx-auto",l==="right"&&"ml-auto",i),children:t}),o&&s.jsx("div",{className:ee("mt-4 relative",l==="center"&&"flex justify-center",l==="right"&&"flex justify-end"),children:s.jsx("div",{className:ee(d?"h-1 bg-gradient-to-r from-primary to-secondary rounded-full":"h-1 bg-primary rounded-full","w-16")})})]})}function F_({title:e,description:t,children:r,className:n}){return s.jsxs("div",{className:ee("flex flex-col md:flex-row md:items-center md:justify-between pb-6 mb-6 border-b",n),children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e}),t&&s.jsx("p",{className:"text-muted-foreground mt-1",children:t})]}),r&&s.jsx("div",{className:"mt-4 md:mt-0 flex-shrink-0",children:r})]})}const $o=y.forwardRef(({className:e,variant:t="default",...r},n)=>{const a={default:"rounded-lg border border-border bg-card text-card-foreground shadow-card transition-all duration-300 hover:shadow-card-hover",glass:"rounded-lg border border-white/20 bg-white/80 backdrop-blur-sm text-card-foreground shadow-lg transition-all duration-300 hover:shadow-xl",gradient:"rounded-lg border-0 bg-gradient-to-br from-primary/10 to-secondary/10 text-card-foreground shadow-card transition-all duration-300 hover:shadow-card-hover",outline:"rounded-lg border-2 border-primary/20 bg-transparent text-card-foreground transition-all duration-300 hover:border-primary/50 hover:shadow-card-hover",subtle:"rounded-lg border border-border/50 bg-card/50 text-card-foreground shadow-sm transition-all duration-300 hover:shadow-card"};return s.jsx("div",{ref:n,className:ee(a[t],e),...r})});$o.displayName="Card";const z_=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("flex flex-col space-y-1.5 p-6",e),...t}));z_.displayName="CardHeader";const B_=y.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));B_.displayName="CardTitle";const q_=y.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ee("text-sm text-muted-foreground",e),...t}));q_.displayName="CardDescription";const Ao=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("p-6 pt-0",e),...t}));Ao.displayName="CardContent";const V_=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("flex items-center p-6 pt-0",e),...t}));V_.displayName="CardFooter";const td=y.forwardRef(({className:e,imageUrl:t="https://placehold.jp/FF7F50/ffffff/400x250.png?text=レッスン画像",title:r,subtitle:n,price:a,instructorName:i,instructorImageUrl:l,instructorSpecialties:o,instructorVerified:d=!1,instructorRating:c,date:h,capacity:f,currentParticipants:u,location:g,category:w,lessonType:m="one_time",isFeatured:p=!1,isLiked:v=!1,onLikeClick:x,variant:_="default",...j},S)=>{const b={default:"bg-card",glass:"bg-white/80 backdrop-blur-sm border-white/20",gradient:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",outline:"bg-transparent border-2 border-primary/30",subtle:"bg-card/50 border-border/50"},N={monthly:"月額制",one_time:"単発講座",course:"コース講座"},C={monthly:"bg-blue-100 text-blue-800",one_time:"bg-purple-100 text-purple-800",course:"bg-green-100 text-green-800"};return s.jsxs("div",{ref:S,className:ee("group relative overflow-hidden rounded-xl border shadow-card transition-all duration-300 hover:shadow-card-hover text-card-foreground card-hover",b[_],p&&"ring-2 ring-yellow-400/80 shadow-lg",e),...j,children:[p&&s.jsx("div",{className:"absolute top-3 left-0 z-10 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-r-md shadow-md",children:"おすすめ"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"overflow-hidden aspect-video w-full",children:[s.jsx("img",{src:t,alt:r,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),s.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2",children:[m&&s.jsx("div",{className:ee("px-2.5 py-1 rounded-full text-xs font-medium shadow-sm",C[m]),children:N[m]}),w&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm text-white text-xs font-medium px-2.5 py-1 rounded-full shadow-sm",children:typeof w=="string"?w:(w==null?void 0:w.name)||w})]}),s.jsx("button",{onClick:x,className:ee("absolute bottom-3 right-3 p-2 rounded-full transition-all duration-300 shadow-sm",v?"bg-primary text-white scale-110":"bg-white/80 text-gray-600 hover:bg-white hover:scale-105"),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:v?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})})]}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h&&s.jsxs("div",{className:"badge-outline flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),s.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),s.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),h]}),g&&s.jsxs("div",{className:"badge-outline flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),g]})]}),s.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:r}),n&&s.jsx("p",{className:"text-sm text-foreground/70 mb-3 line-clamp-2",children:n}),s.jsx("div",{className:"divider my-3 opacity-30"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative w-8 h-8 rounded-full overflow-hidden ring-2 ring-primary/30 bg-muted",children:[l?s.jsx("img",{src:l,alt:i,className:"w-full h-full object-cover"}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-muted-foreground absolute inset-1/2 -translate-x-1/2 -translate-y-1/2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),d&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white rounded-full p-0.5 border border-white",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:i}),c!==void 0&&s.jsxs("div",{className:"flex items-center ml-2 text-xs",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-yellow-500 mr-0.5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),s.jsx("span",{children:c.toFixed(1)})]})]}),o&&o.length>0&&s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5 truncate w-24",children:[o[0],o.length>1?"...":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-foreground/70",children:m==="monthly"?"月額":m==="course"?"コース料金":"受講料"}),s.jsxs("div",{className:"font-bold text-primary",children:[typeof a=="number"?`¥${a.toLocaleString()}`:a,m==="monthly"&&"/月"]})]})]}),m!=="monthly"&&f!==void 0&&u!==void 0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-foreground/70 mb-1.5",children:[s.jsxs("span",{children:["定員 ",f,"名"]}),s.jsxs("span",{children:[u,"名参加中"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:`h-2 rounded-full ${u/f>.8?"bg-yellow-500":u/f>.5?"bg-primary":"bg-secondary"}`,style:{width:`${Math.min(100,u/f*100)}%`}})})]})]})]})});td.displayName="LessonCard";const W_=[{id:"sports",name:"スポーツ",icon:"🏃‍♂️"},{id:"music",name:"音楽",icon:"🎵"},{id:"art",name:"芸術",icon:"🎨"},{id:"language",name:"語学",icon:"🗣️"},{id:"cooking",name:"料理",icon:"🍳"},{id:"technology",name:"テクノロジー",icon:"💻"},{id:"academics",name:"学問",icon:"📚"},{id:"hobby",name:"趣味",icon:"✨"}],H_=()=>{const[e,t]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState(!0),[d,c]=y.useState(""),[h,f]=y.useState([]),u=ut();y.useEffect(()=>{(async()=>{o(!0);try{const p=new Date().toISOString(),{data:v}=await E.from("lessons").select(`
            *,
            instructor:instructor_profiles(name, profile_image_url)
          `).eq("status","published").eq("is_featured",!0).gt("booking_deadline",p).order("created_at",{ascending:!1}).limit(8);v&&t(v);const{data:x}=await E.from("lessons").select(`
            *,
            instructor:instructor_profiles(name, profile_image_url)
          `).eq("status","published").gt("date_time_start",p).lt("date_time_start",new Date(Date.now()+7*24*60*60*1e3).toISOString()).order("date_time_start",{ascending:!0}).limit(4);x&&n(x);const{data:_}=await E.from("instructor_profiles").select(`
            id,
            name,
            profile_image_url,
            instructor_bio,
            instructor_specialties
          `).eq("is_profile_completed",!0).limit(4);_&&i(_);const{data:{user:j}}=await E.auth.getUser();if(j){const{data:S}=await E.from("favorites").select("lesson_id").eq("user_id",j.id);S&&f(S.map(b=>b.lesson_id))}}catch(p){console.error("Error fetching home data:",p)}finally{o(!1)}})()},[]);const g=m=>{m.preventDefault(),d.trim()&&u(`/user/lessons?search=${encodeURIComponent(d)}`)},w=async m=>{try{const{data:{user:p}}=await E.auth.getUser();if(!p){u("/login");return}h.includes(m)?(await E.from("favorites").delete().eq("user_id",p.id).eq("lesson_id",m),f(h.filter(x=>x!==m))):(await E.from("favorites").insert({user_id:p.id,lesson_id:m,created_at:new Date().toISOString()}),f([...h,m]))}catch(p){console.error("Error updating favorites:",p)}};return l?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"text-lg text-foreground/70 animate-pulse",children:"読み込み中..."})]}):s.jsxs("div",{className:"space-y-16",children:[s.jsx("section",{className:"relative bg-hero-pattern rounded-3xl overflow-hidden border border-primary/10",children:s.jsxs("div",{className:"relative max-w-7xl mx-auto py-20 px-6 sm:py-24 lg:px-8 flex flex-col items-center text-center",children:[s.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold gradient-heading mb-6",children:"北摂エリアで新しいことを学ぼう"}),s.jsx("p",{className:"text-xl text-foreground/80 max-w-2xl mb-10",children:"地元の優れた講師から学ぶ、オンラインと対面のレッスンが見つかります。 あなたの好奇心や情熱を育てる機会がここにあります。"}),s.jsx("div",{className:"w-full max-w-3xl",children:s.jsxs("form",{onSubmit:g,className:"flex shadow-lg rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ur,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-4 border-0 rounded-l-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"学びたいこと、趣味、スキルなどを入力...",value:d,onChange:m=>c(m.target.value)})]}),s.jsx(B,{type:"submit",size:"lg",className:"rounded-l-none px-8",children:"検索"})]})}),s.jsx("div",{className:"mt-10 grid grid-cols-2 sm:grid-cols-4 gap-4 max-w-2xl w-full",children:W_.slice(0,4).map(m=>s.jsx(B,{variant:"glass",asChild:!0,className:"p-4 text-center flex-col h-auto",children:s.jsxs(M,{to:`/user/lessons?category=${m.id}`,children:[s.jsx("span",{className:"text-3xl mb-2 block",children:m.icon}),s.jsx("span",{className:"text-sm font-medium",children:m.name})]})},m.id))}),s.jsx(B,{variant:"link",size:"sm",asChild:!0,className:"mt-2",children:s.jsxs(M,{to:"/user/lessons",className:"flex items-center",children:["すべてのカテゴリーを見る",s.jsx(ks,{className:"h-4 w-4 ml-1"})]})})]})}),e.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx(vl,{title:"おすすめレッスン",description:"プレミアム講師によるおすすめのレッスン",withLine:!0,isGradient:!0,icon:s.jsx(Mv,{className:"h-6 w-6"})}),s.jsx(B,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(M,{to:"/user/lessons",className:"flex items-center",children:["すべて見る",s.jsx(Lv,{className:"h-4 w-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.slice(0,4).map(m=>{var p;return s.jsx(td,{imageUrl:(p=m.lesson_image_url)==null?void 0:p[0],title:m.lesson_title,subtitle:"",price:m.price,instructorName:m.instructor.name,instructorImageUrl:m.instructor.profile_image_url,date:new Date(m.date_time_start).toLocaleDateString(),location:m.location_type==="online"?"オンライン":m.location_name,category:m.category,capacity:m.capacity,currentParticipants:m.current_participants_count,isFeatured:m.is_featured,isLiked:h.includes(m.id),onLikeClick:v=>{v.stopPropagation(),w(m.id)},onClick:()=>u(`/user/lessons/${m.id}`)},m.id)})})]}),r.length>0&&s.jsxs("section",{children:[s.jsx(vl,{title:"近日開催のレッスン",description:"今週開催予定のレッスン",withLine:!0,icon:s.jsx(ke,{className:"h-6 w-6"})}),s.jsx($o,{className:"overflow-hidden",children:r.map((m,p)=>{var v;return s.jsx("div",{className:`${p!==r.length-1?"border-b border-border/50":""}`,children:s.jsx(Ao,{className:"p-0 cursor-pointer",onClick:()=>u(`/user/lessons/${m.id}`),children:s.jsxs("div",{className:"flex flex-col sm:flex-row transition-colors hover:bg-accent/30",children:[s.jsx("div",{className:"sm:w-1/4 lg:w-1/5",children:s.jsxs("div",{className:"relative h-48 sm:h-full",children:[s.jsx("img",{src:(v=m.lesson_image_url)==null?void 0:v[0],alt:m.lesson_title,className:"w-full h-full object-cover"}),m.is_featured&&s.jsx("div",{className:"absolute top-2 left-0 z-10 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-r-md shadow-md",children:"おすすめ"}),s.jsx("button",{onClick:x=>{x.stopPropagation(),w(m.id)},className:`absolute bottom-2 right-2 p-2 rounded-full shadow-sm transition-colors ${h.includes(m.id)?"bg-primary text-white":"bg-white/80 text-gray-600 hover:bg-white"}`,children:s.jsx(rp,{className:"h-5 w-5",fill:h.includes(m.id)?"currentColor":"none"})})]})}),s.jsxs("div",{className:"p-6 sm:w-3/4 lg:w-4/5",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-primary transition-colors",children:m.lesson_title}),s.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[s.jsx("div",{className:"relative w-6 h-6 rounded-full overflow-hidden ring-2 ring-primary/20 bg-muted flex items-center justify-center",children:m.instructor.profile_image_url?s.jsx("img",{src:m.instructor.profile_image_url,alt:m.instructor.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-xs",children:"👨‍🏫"})}),s.jsx("span",{className:"text-sm font-medium text-foreground/80",children:m.instructor.name})]})]}),s.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4 flex flex-col items-start sm:items-end",children:[s.jsx("div",{className:"text-xs text-foreground/60",children:"受講料"}),s.jsx("div",{className:"font-bold text-primary text-lg",children:Co(m.price)}),s.jsxs("div",{className:"text-xs text-foreground/70 flex items-center mt-1",children:[s.jsx(Ss,{className:"h-3.5 w-3.5 mr-1"}),m.current_participants_count,"/",m.capacity,"名"]})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(ke,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:new Date(m.date_time_start).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(vt,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:new Date(m.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(Hc,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:m.location_type==="online"?"オンライン":m.location_name})]})]}),s.jsx("p",{className:"mt-3 text-sm text-foreground/80 line-clamp-2",children:m.lesson_description}),s.jsxs(B,{variant:"link",size:"sm",className:"mt-2 px-0",onClick:x=>{x.stopPropagation(),u(`/user/lessons/${m.id}`)},children:["詳細を見る ",s.jsx(ks,{className:"h-4 w-4 ml-1"})]})]})]})})},m.id)})})]}),a.length>0&&s.jsxs("section",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/50 dark:to-gray-800/30 -mx-8 px-8 py-12 rounded-xl",children:[s.jsx(vl,{title:"人気の講師",description:"経験豊富な講師陣からお好みの講師を見つけましょう",align:"center",withLine:!0,icon:s.jsx(Rv,{className:"h-6 w-6"})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:a.map(m=>s.jsxs($o,{className:"overflow-hidden card-hover",children:[s.jsx("div",{className:"aspect-square w-full relative overflow-hidden",children:s.jsx("img",{src:m.profile_image_url||"https://placehold.jp/FF7F50/ffffff/400x400.png?text=講師",alt:m.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105"})}),s.jsxs(Ao,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:m.name}),s.jsx("p",{className:"text-sm text-primary font-medium mt-1",children:m.category||"マルチカテゴリー"}),s.jsx("p",{className:"mt-3 text-sm text-foreground/70 line-clamp-2",children:m.instructor_pr_message||"プロフィールをご覧ください"}),s.jsx(B,{className:"w-full mt-4",variant:"outline",size:"sm",children:"プロフィールを見る"})]})]},m.id))})]}),s.jsxs("section",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-10 text-center",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold gradient-heading mb-4",children:"あなたも講師になってみませんか？"}),s.jsx("p",{className:"text-lg text-foreground/80 mb-6 max-w-2xl mx-auto",children:"あなたのスキルや知識を共有して、地域のコミュニティに貢献しましょう。 講師として登録すると、自分のペースでレッスンを提供できます。"}),s.jsx(B,{asChild:!0,size:"lg",variant:"gradient",className:"px-8",children:s.jsx(M,{to:"/instructor",children:"講師として始める"})})]})]})},rd=[{id:"music",name:"音楽",icon:"🎵"},{id:"cooking",name:"料理",icon:"🍳"},{id:"language",name:"語学",icon:"🗣️"},{id:"craft",name:"クラフト",icon:"🧶"},{id:"dance",name:"ダンス",icon:"💃"},{id:"technology",name:"テクノロジー",icon:"💻"},{id:"art",name:"芸術",icon:"🎨"},{id:"sports",name:"スポーツ",icon:"🏃‍♂️"},{id:"business",name:"ビジネス",icon:"💼"},{id:"academics",name:"教養",icon:"📚"},{id:"outdoor",name:"アウトドア",icon:"🏕️"},{id:"wellness",name:"ウェルネス",icon:"🧘‍♀️"}],Cr={music:[{id:"piano",name:"ピアノ"},{id:"guitar",name:"ギター"},{id:"violin",name:"バイオリン"},{id:"drums",name:"ドラム"},{id:"vocals",name:"ボーカル"},{id:"composition",name:"作曲"},{id:"music_theory",name:"音楽理論"},{id:"other_music",name:"その他"}],cooking:[{id:"japanese",name:"和食"},{id:"italian",name:"イタリアン"},{id:"french",name:"フレンチ"},{id:"chinese",name:"中華"},{id:"dessert",name:"デザート"},{id:"bread",name:"パン作り"},{id:"other_cooking",name:"その他"}],language:[{id:"english",name:"英語"},{id:"japanese",name:"日本語"},{id:"chinese",name:"中国語"},{id:"french",name:"フランス語"},{id:"spanish",name:"スペイン語"},{id:"other_language",name:"その他"}],craft:[{id:"knitting",name:"編み物"},{id:"pottery",name:"陶芸"},{id:"jewelry",name:"ジュエリー作り"},{id:"woodworking",name:"木工"},{id:"sewing",name:"裁縫"},{id:"other_craft",name:"その他"}],dance:[{id:"ballet",name:"バレエ"},{id:"contemporary",name:"コンテンポラリー"},{id:"hiphop",name:"ヒップホップ"},{id:"ballroom",name:"社交ダンス"},{id:"other_dance",name:"その他"}],technology:[{id:"programming",name:"プログラミング"},{id:"web_design",name:"ウェブデザイン"},{id:"data_science",name:"データサイエンス"},{id:"ai",name:"AI/機械学習"},{id:"other_tech",name:"その他"}],art:[{id:"painting",name:"絵画"},{id:"drawing",name:"デッサン"},{id:"sculpture",name:"彫刻"},{id:"photography",name:"写真"},{id:"other_art",name:"その他"}],sports:[{id:"yoga",name:"ヨガ"},{id:"running",name:"ランニング"},{id:"swimming",name:"水泳"},{id:"martial_arts",name:"武道"},{id:"tennis",name:"テニス"},{id:"golf",name:"ゴルフ"},{id:"other_sports",name:"その他"}],business:[{id:"marketing",name:"マーケティング"},{id:"finance",name:"ファイナンス"},{id:"entrepreneurship",name:"起業"},{id:"management",name:"経営"},{id:"other_business",name:"その他"}],academics:[{id:"math",name:"数学"},{id:"science",name:"科学"},{id:"history",name:"歴史"},{id:"literature",name:"文学"},{id:"other_academics",name:"その他"}],outdoor:[{id:"hiking",name:"ハイキング"},{id:"camping",name:"キャンプ"},{id:"fishing",name:"釣り"},{id:"gardening",name:"ガーデニング"},{id:"other_outdoor",name:"その他"}],wellness:[{id:"meditation",name:"瞑想"},{id:"nutrition",name:"栄養学"},{id:"fitness",name:"フィットネス"},{id:"mental_health",name:"メンタルヘルス"},{id:"other_wellness",name:"その他"}]},K_=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState(null),[d,c]=y.useState({monthly:!0,one_time:!0,course:!0}),[h,f]=y.useState([]),u=ut();y.useEffect(()=>{(async()=>{try{n(!0);const p=new Date().toISOString(),{data:v,error:x}=await E.from("lessons").select(`
            *,
            instructor_profiles(
              id, 
              name, 
              profile_image_url, 
              instructor_specialties,
              is_verified,
              average_rating,
              instructor_bio
            )
          `).eq("status","published").gte("date_time_start",p).or(`booking_deadline.gt.${p}, booking_deadline.is.null`);if(x)throw console.error("Error fetching lessons:",x),x;console.log("Fetched published lessons:",(v==null?void 0:v.length)||0);const{data:{user:_}}=await E.auth.getUser();if(_){const{data:j,error:S}=await E.from("favorites").select("lesson_id").eq("user_id",_.id);S&&console.error("Error fetching favorites:",S),j&&f(j.map(b=>b.lesson_id))}t(v||[])}catch(p){console.error("Error fetching lessons:",p)}finally{n(!1)}})()},[]);const g=async m=>{try{const{data:{user:p}}=await E.auth.getUser();if(!p){u("/login");return}h.includes(m)?(await E.from("favorites").delete().eq("user_id",p.id).eq("lesson_id",m),f(h.filter(x=>x!==m))):(await E.from("favorites").insert({user_id:p.id,lesson_id:m,created_at:new Date().toISOString()}),f([...h,m]))}catch(p){console.error("Error updating favorites:",p)}},w=e.filter(m=>{if(l&&m.category!==l||!d[m.lesson_type])return!1;if(a){const p=a.toLowerCase();return m.lesson_title.toLowerCase().includes(p)||m.category&&m.category.toLowerCase().includes(p)||m.sub_category&&m.sub_category.toLowerCase().includes(p)||m.lesson_description&&m.lesson_description.toLowerCase().includes(p)}return!0});return s.jsxs("div",{children:[s.jsx(F_,{title:"レッスン一覧",description:"北摂エリアで開催されるさまざまなレッスンを探してみましょう",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(B,{variant:"outline",size:"sm",children:[s.jsx(tp,{className:"h-4 w-4 mr-1"}),"フィルター"]}),s.jsxs(B,{variant:"outline",size:"sm",children:[s.jsx(ke,{className:"h-4 w-4 mr-1"}),"日付"]})]})}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-2",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 sticky top-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-800",children:"絞り込み"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"キーワード"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{id:"search",type:"text",className:"block w-full pl-10 pr-3 py-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"レッスンを検索...",value:a,onChange:m=>i(m.target.value)})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリー"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",id:"all-categories",name:"category",checked:l===null,onChange:()=>o(null),className:"h-4 w-4 text-primary border-gray-300 focus:ring-primary"}),s.jsx("label",{htmlFor:"all-categories",className:"ml-2 text-sm text-gray-700",children:"すべて"})]}),rd.map(m=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",id:`category-${m.id}`,name:"category",checked:l===m.id,onChange:()=>o(m.id),className:"h-4 w-4 text-primary border-gray-300 focus:ring-primary"}),s.jsxs("label",{htmlFor:`category-${m.id}`,className:"ml-2 text-sm text-gray-700 flex items-center",children:[s.jsx("span",{className:"mr-1",children:m.icon}),m.name]})]},m.id))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"レッスンタイプ"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"type-monthly",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:d.monthly,onChange:m=>c({...d,monthly:m.target.checked})}),s.jsx("label",{htmlFor:"type-monthly",className:"ml-2 text-sm text-gray-700",children:"月額制"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"type-oneTime",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:d.one_time,onChange:m=>c({...d,one_time:m.target.checked})}),s.jsx("label",{htmlFor:"type-oneTime",className:"ml-2 text-sm text-gray-700",children:"単発講座"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"type-course",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:d.course,onChange:m=>c({...d,course:m.target.checked})}),s.jsx("label",{htmlFor:"type-course",className:"ml-2 text-sm text-gray-700",children:"コース講座"})]})]})]}),s.jsx(B,{variant:"outline",size:"sm",onClick:()=>{i(""),o(null),c({monthly:!0,one_time:!0,course:!0})},className:"w-full",children:"絞り込みをリセット"})]})}),s.jsx("div",{className:"col-span-12 md:col-span-9 lg:col-span-10",children:r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"text-lg text-foreground/70 animate-pulse",children:"レッスン読込中..."})]}):w.length>0?s.jsx("div",{className:"space-y-6",children:w.map(m=>{var p,v,x,_,j,S;return s.jsx(td,{imageUrl:(p=m.lesson_image_url)==null?void 0:p[0],title:m.lesson_title,subtitle:m.lesson_catchphrase||"",price:m.price,instructorName:((v=m.instructor_profiles)==null?void 0:v.name)||"Instructor",instructorImageUrl:(x=m.instructor_profiles)==null?void 0:x.profile_image_url,instructorSpecialties:(_=m.instructor_profiles)==null?void 0:_.instructor_specialties,instructorVerified:(j=m.instructor_profiles)==null?void 0:j.is_verified,instructorRating:(S=m.instructor_profiles)==null?void 0:S.average_rating,date:new Date(m.date_time_start).toLocaleDateString(),location:m.location_type==="online"?"オンライン":m.location_name,category:m.category_name||m.category,lessonType:m.lesson_type,capacity:m.capacity,currentParticipants:m.current_participants_count,isFeatured:m.is_featured,isLiked:h.includes(m.id),onLikeClick:b=>{b.stopPropagation(),g(m.id)},onClick:()=>u(`/user/lessons/${m.id}`),className:"w-full transition-transform hover:translate-y-[-4px]"},m.id)})}):s.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-50 rounded-lg py-12 px-4 mt-8",children:[s.jsx(No,{className:"h-12 w-12 text-gray-300 mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"レッスンが見つかりませんでした"}),s.jsx("p",{className:"text-gray-500 text-center mt-2 mb-6",children:"検索条件を変更するか、別のカテゴリーをお試しください"}),s.jsx(B,{variant:"outline",onClick:()=>{i(""),o(null)},children:"全てのレッスンを表示"})]})})]})]})},G_=()=>{var j;const{id:e}=Bn(),[t,r]=y.useState(null),[n,a]=y.useState(null),[i,l]=y.useState(!0),[o,d]=y.useState(!1),[c,h]=y.useState(null),[f,u]=y.useState(null),[g,w]=y.useState(0);y.useEffect(()=>{(async()=>{try{l(!0);const{data:{user:b}}=await E.auth.getUser();if(h(b),!e)return;const{data:N,error:C}=await E.from("lessons").select("*").eq("id",e).single();if(C)throw C;if(r(N),N!=null&&N.instructor_id){const{data:P,error:L}=await E.from("instructor_profiles").select("*").eq("id",N.instructor_id).single();if(L)throw L;const{count:$,error:I}=await E.from("reviews").select("*",{count:"exact",head:!0}).eq("instructor_id",N.instructor_id);I&&console.error("Error fetching review count:",I),a({...P,review_count:$||0})}if(b){const{data:P}=await E.from("favorites").select("*").eq("user_id",b.id).eq("lesson_id",e).single();d(!!P);const{data:L}=await E.from("bookings").select("status").eq("user_id",b.id).eq("lesson_id",e).single();u((L==null?void 0:L.status)||null)}}catch(b){console.error("Error fetching lesson data:",b)}finally{l(!1)}})()},[e]);const m=async()=>{if(!(!c||!e))try{o?await E.from("favorites").delete().eq("user_id",c.id).eq("lesson_id",e):await E.from("favorites").insert([{user_id:c.id,lesson_id:e}]),d(!o)}catch(S){console.error("Error updating favorites:",S)}},p=async()=>{var S,b,N;if(!(!c||!e))try{console.log("予約処理開始:",c.id,e);const{data:C,error:P}=await E.from("bookings").select("id, status").eq("user_id",c.id).eq("lesson_id",e).maybeSingle();if(P)throw console.error("既存予約の確認エラー:",P),P;if(C)if(console.log("既に予約が存在します:",C),C.status==="cancelled"||C.status==="canceled"){console.log("キャンセル済みの予約を再予約します:",C.id);const{error:H}=await E.from("bookings").update({status:"pending",payment_status:"pending",booking_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",C.id);if(H)throw console.error("予約更新エラー:",H),H;u("pending"),console.log("予約の再予約が完了しました"),alert("レッスンを再予約しました。予約管理画面に移動します。"),window.location.href="/user/bookings";return}else{u(C.status),alert("このレッスンは既に予約済みです。");return}const{data:L,error:$}=await E.from("user_profiles").select("id").eq("id",c.id).maybeSingle();if($)throw console.error("ユーザープロファイル確認エラー:",$),$;if(!L){console.log("ユーザープロファイルが存在しないため作成します");const{error:H}=await E.from("user_profiles").insert([{id:c.id,email:c.email||"",name:((S=c.user_metadata)==null?void 0:S.name)||"ゲスト",username:((b=c.user_metadata)==null?void 0:b.username)||((N=c.email)==null?void 0:N.split("@")[0])||"user"}]);if(H)throw console.error("ユーザープロファイル作成エラー:",H),H}console.log("予約レコードを作成します");const{error:I}=await E.from("bookings").insert([{user_id:c.id,lesson_id:e,booking_date:new Date().toISOString(),status:"pending",payment_status:"pending"}]);if(I)throw console.error("予約作成エラー:",I),I;console.log("チャットルームを作成します");const{data:F,error:A}=await E.from("chat_rooms").select("id").eq("user_id",c.id).eq("lesson_id",e).maybeSingle();if(A&&console.error("チャットルーム確認エラー:",A),F)console.log("チャットルームは既に存在します:",F.id);else{const{error:H}=await E.from("chat_rooms").insert([{lesson_id:e,instructor_id:t.instructor_id,user_id:c.id}]);H&&console.error("チャットルーム作成エラー:",H)}u("pending"),console.log("予約処理が完了しました");const{data:q,error:V}=await E.from("user_profiles").select("is_profile_completed").eq("id",c.id).single();if(!V&&q&&!q.is_profile_completed&&confirm("予約が完了しました。続けてプロフィールを設定しますか？")){window.location.href="/user/profile";return}alert("予約が完了しました。予約管理画面に移動します。"),window.location.href="/user/bookings"}catch(C){console.error("Error creating booking:",C),alert("予約処理中にエラーが発生しました。もう一度お試しください。")}},v=async()=>{if(!(!c||!e||!(t!=null&&t.instructor_id)))try{const{data:S,error:b}=await E.from("chat_rooms").select("id").eq("user_id",c.id).eq("lesson_id",e).maybeSingle();if(b)throw console.error("チャットルーム確認エラー:",b),b;if(S){window.location.href=`/user/chat/${S.id}`;return}const{data:N,error:C}=await E.from("chat_rooms").insert([{lesson_id:e,instructor_id:t.instructor_id,user_id:c.id}]).select().single();if(C)throw console.error("チャットルーム作成エラー:",C),C;window.location.href=`/user/chat/${N.id}`}catch(S){console.error("Error handling chat:",S),alert("チャットの準備中にエラーが発生しました。もう一度お試しください。")}};if(i)return s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"レッスンが見つかりません"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"お探しのレッスンは存在しないか、削除された可能性があります。"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"レッスン一覧に戻る"})]})});const x={monthly:"月額制",one_time:"単発講座",course:"コース講座"},_={monthly:"bg-blue-100 text-blue-800",one_time:"bg-purple-100 text-purple-800",course:"bg-green-100 text-green-800"};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(M,{to:"/user/lessons",className:"text-primary hover:underline flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"レッスン一覧に戻る"]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border",children:[s.jsxs("div",{className:"relative h-[400px] bg-gray-200",children:[t.lesson_image_url&&t.lesson_image_url.length>0?s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("img",{src:t.lesson_image_url[g],alt:`${t.lesson_title} - 画像 ${g+1}`,className:"w-full h-full object-cover"}),t.lesson_image_url.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>w(S=>S===0?t.lesson_image_url.length-1:S-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/30 text-white p-2 rounded-full hover:bg-black/50 focus:outline-none transition-colors","aria-label":"前の画像",children:s.jsx(Zf,{size:24})}),s.jsx("button",{onClick:()=>w(S=>S===t.lesson_image_url.length-1?0:S+1),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/30 text-white p-2 rounded-full hover:bg-black/50 focus:outline-none transition-colors","aria-label":"次の画像",children:s.jsx(ks,{size:24})}),s.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-bold",children:[g+1,"/",t.lesson_image_url.length]}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center items-center bg-black/30 py-2 px-4",children:s.jsx("div",{className:"flex space-x-2 items-center overflow-x-auto max-w-full",children:t.lesson_image_url.map((S,b)=>s.jsx("button",{onClick:()=>w(b),className:`flex-shrink-0 transition-all duration-200 ${b===g?"border-2 border-white scale-110 z-10":"border border-white/50 opacity-70 hover:opacity-100"}`,"aria-label":`画像 ${b+1} に移動`,children:s.jsxs("div",{className:"relative w-16 h-12 overflow-hidden rounded",children:[s.jsx("img",{src:S,alt:`サムネイル ${b+1}`,className:"w-full h-full object-cover"}),b===g&&s.jsx("div",{className:"absolute inset-0 bg-primary/20"})]})},b))})})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400 text-2xl",children:"画像なし"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent pointer-events-none"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-6 text-white",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.lesson_type&&s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium shadow-sm ${_[t.lesson_type]||"bg-gray-100 text-gray-800"}`,children:x[t.lesson_type]||t.lesson_type}),s.jsx("span",{className:"bg-primary/10 text-white px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm",children:t.category}),t.sub_category&&s.jsx("span",{className:"bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm",children:t.sub_category})]}),s.jsx("h1",{className:"text-3xl font-bold mb-2 text-shadow",children:t.lesson_title}),t.lesson_catchphrase&&s.jsx("p",{className:"text-lg text-white/90 mb-2",children:t.lesson_catchphrase})]}),s.jsx("div",{className:"absolute top-4 right-4 flex space-x-2",children:s.jsx("button",{onClick:m,className:"p-3 bg-white/90 backdrop-blur-sm rounded-full shadow-md hover:bg-white transition-colors",children:s.jsx("svg",{className:`w-6 h-6 ${o?"text-red-500 fill-current":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})})]}),s.jsxs("div",{className:"p-8",children:[n&&s.jsxs("div",{className:"border-b pb-6 mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 overflow-hidden border-2 border-primary/20",children:n.profile_image_url?s.jsx("img",{src:n.profile_image_url,alt:n.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((j=n.name)==null?void 0:j.charAt(0))||"I"})}),n.is_verified&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white rounded-full p-1 border border-white",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"講師"}),s.jsxs("p",{className:"font-bold text-lg flex items-center",children:[n.name,n.average_rating>0&&s.jsxs("span",{className:"ml-2 flex items-center text-sm font-normal",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-0.5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),n.average_rating.toFixed(1),s.jsxs("span",{className:"text-gray-500 ml-1",children:["(",n.review_count||0,"件)"]})]})]}),n.business_name&&s.jsx("p",{className:"text-sm text-gray-600",children:n.business_name})]}),s.jsxs(M,{to:`/user/instructors/${n.id}`,className:"bg-primary/10 text-primary hover:bg-primary/20 px-4 py-2 rounded-md text-sm font-medium flex items-center transition-colors",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"プロフィールを見る"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row md:ml-auto gap-2 mt-2 md:mt-0",children:[n.instructor_specialties&&n.instructor_specialties.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.instructor_specialties.slice(0,3).map((S,b)=>s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium",children:S},b)),n.instructor_specialties.length>3&&s.jsxs("span",{className:"text-xs text-gray-500 px-1 py-1",children:["他",n.instructor_specialties.length-3,"つ"]})]}),s.jsxs("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm whitespace-nowrap",children:["レベル: ",t.difficulty_level==="beginner"?"初級":t.difficulty_level==="intermediate"?"中級":t.difficulty_level==="advanced"?"上級":"全レベル"]})]})]}),n.instructor_bio&&s.jsx("div",{className:"mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.jsx("p",{className:"line-clamp-2",children:n.instructor_bio})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),s.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),"レッスン内容"]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_description})})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"m9 12 2 2 4-4"})]}),"学習目標"]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_goals})})]}),t.lesson_outline&&s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),s.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),s.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),s.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),s.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),s.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),"レッスンの流れ"]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_outline})})]}),t.materials_needed&&s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"})}),"持ち物・準備"]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.materials_needed})})]}),s.jsxs("section",{className:"mb-8 border-t pt-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"講師紹介"]}),n&&s.jsxs("div",{className:"bg-white p-5 rounded-lg border mb-6",children:[n.instructor_bio&&s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:n.instructor_bio})}),n.instructor_specialties&&n.instructor_specialties.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"専門分野"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:n.instructor_specialties.map((S,b)=>s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium",children:S},b))})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs(M,{to:`/user/instructors/${n.id}`,className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:[s.jsx("span",{children:"講師の詳細プロフィールを見る"}),s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5l7 7-7 7"})]})]})})]})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white p-6 rounded-xl border shadow-sm sticky top-6",children:[s.jsx("div",{className:"mb-6",children:t.lesson_type==="monthly"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),"円",s.jsx("span",{className:"text-lg font-normal",children:"/月"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"月額料金"})]}):t.lesson_type==="course"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),"円"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["コース料金（全",t.course_sessions||"?","回）"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),"円"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"1回あたり"})]})}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"レッスン日時"}),s.jsxs("p",{className:"text-gray-700",children:[new Date(t.date_time_start).toLocaleDateString()," ",new Date(t.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," 〜 ",new Date(t.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.duration,"分間"]})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"レッスン場所"}),s.jsx("p",{className:"text-gray-700",children:t.location_type==="online"?"オンライン":t.location_type==="offline"?"対面":"ハイブリッド"}),s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:t.location_name})]})]}),t.lesson_type!=="monthly"&&s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"定員"}),s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("p",{className:"text-gray-700",children:[t.current_participants_count," / ",t.capacity,"人"]}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.current_participants_count>=t.capacity?"bg-red-100 text-red-800":t.current_participants_count>=t.capacity*.8?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.current_participants_count>=t.capacity?"満席":t.current_participants_count>=t.capacity*.8?"残りわずか":"予約可能"})]}),t.lesson_type!=="monthly"&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:s.jsx("div",{className:`h-2 rounded-full ${t.current_participants_count/t.capacity>.8?"bg-yellow-500":"bg-primary"}`,style:{width:`${Math.min(100,t.current_participants_count/t.capacity*100)}%`}})}),t.booking_deadline&&s.jsxs("p",{className:"text-sm text-gray-500",children:["予約締切: ",new Date(t.booking_deadline).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:"mt-6",children:[f?f==="canceled"||f==="cancelled"?s.jsxs("div",{children:[s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg text-center mb-4 border border-yellow-200",children:s.jsx("p",{className:"font-medium mb-1 text-yellow-700",children:"予約はキャンセルされています"})}),s.jsx("button",{onClick:p,disabled:t.current_participants_count>=t.capacity,className:`w-full py-3 rounded-md font-medium transition-colors mb-3 ${t.current_participants_count>=t.capacity?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:t.current_participants_count>=t.capacity?"満席です":"レッスンを予約する"}),s.jsxs("button",{onClick:v,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"講師にチャットで質問する"]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center mb-4 border border-blue-200",children:[s.jsx("p",{className:"font-medium mb-1 text-blue-700",children:f==="pending"?"予約申請中":f==="confirmed"?"予約確定済み":"予約完了"}),s.jsxs("p",{className:"text-sm text-blue-600",children:["予約状況の確認は",s.jsx(M,{to:"/user/bookings",className:"text-primary font-medium hover:underline",children:"こちら"})]})]}),s.jsxs("button",{onClick:v,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"講師にチャットで質問する"]})]}):s.jsxs("div",{children:[s.jsx("button",{onClick:p,disabled:t.current_participants_count>=t.capacity,className:`w-full py-3 rounded-md font-medium transition-colors mb-3 ${t.current_participants_count>=t.capacity?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:t.current_participants_count>=t.capacity?"満席です":"レッスンを予約する"}),s.jsxs("button",{onClick:v,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"講師にチャットで質問する"]})]}),t.current_participants_count>=t.capacity&&!f&&s.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"このレッスンは満席です。他のレッスンをご検討ください。"})]})]})})]})]})]})]})},J_=()=>{var f;const{id:e}=Bn(),[t,r]=y.useState(null),[n,a]=y.useState([]),[i,l]=y.useState([]),[o,d]=y.useState(!0);if(y.useEffect(()=>{(async()=>{try{if(d(!0),!e)return;const{data:g,error:w}=await E.from("instructor_profiles").select("*").eq("id",e).single();if(w)throw w;const{count:m,error:p}=await E.from("reviews").select("*",{count:"exact",head:!0}).eq("instructor_id",e);if(p)throw p;const{data:v,error:x}=await E.from("reviews").select("rating").eq("instructor_id",e);if(x)throw x;const _=v.length>0?v.reduce((P,L)=>P+L.rating,0)/v.length:0;r({...g,review_count:m||0,average_rating:_});const{data:j,error:S}=await E.from("reviews").select(`
            *,
            user:user_profiles!reviews_user_id_fkey(name, profile_image_url)
          `).eq("instructor_id",e).order("created_at",{ascending:!1}).limit(10);if(S)throw S;a(j||[]);const b=new Date,{data:N,error:C}=await E.from("lessons").select("*").eq("instructor_id",e).eq("status","published").gte("date_time_start",b.toISOString()).order("date_time_start",{ascending:!0}).limit(6);if(C)throw C;l(N||[])}catch(g){console.error("Error fetching instructor data:",g)}finally{d(!1)}})()},[e]),o)return s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"講師が見つかりません"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"お探しの講師は存在しないか、削除された可能性があります。"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"レッスン一覧に戻る"})]})});const c=n.reduce((u,g)=>(g.rating>=1&&g.rating<=5&&u[Math.floor(g.rating)-1]++,u),[0,0,0,0,0]),h=n.length;return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>window.history.back(),className:"text-primary hover:underline flex items-center",children:[s.jsx(Zf,{className:"w-5 h-5 mr-1"}),"戻る"]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:[s.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[t.background_image_url?s.jsx("img",{src:t.background_image_url,alt:"プロフィール背景",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary/10 to-primary/30"}),s.jsx("div",{className:"absolute bottom-0 left-8 transform translate-y-1/2",children:s.jsx("div",{className:"w-32 h-32 rounded-full bg-white p-1 shadow-md",children:s.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 overflow-hidden",children:t.profile_image_url?s.jsx("img",{src:t.profile_image_url,alt:t.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-4xl",children:((f=t.name)==null?void 0:f.charAt(0))||"I"})})})})]}),s.jsxs("div",{className:"pt-20 pb-8 px-8",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mr-2",children:t.name}),t.is_verified&&s.jsxs("span",{className:"inline-flex items-center bg-blue-500 text-white rounded-full px-2 py-0.5 text-xs",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),"認証済み講師"]})]}),t.business_name&&s.jsx("p",{className:"text-gray-600 mb-4",children:t.business_name}),t.average_rating>0&&s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(u=>s.jsx("svg",{className:`w-5 h-5 ${u<=Math.round(t.average_rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},u))}),s.jsx("p",{className:"ml-2 text-sm font-medium text-gray-900",children:t.average_rating.toFixed(1)}),s.jsx("span",{className:"w-1 h-1 mx-2 bg-gray-500 rounded-full"}),s.jsxs("p",{className:"text-sm font-medium text-gray-500",children:[t.review_count,"件の評価"]})]}),t.instructor_bio&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"自己紹介"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_bio})]}),t.instructor_specialties&&t.instructor_specialties.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"専門分野"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.instructor_specialties.map((u,g)=>s.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:u},g))})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6 border-b pb-2",children:"経歴と資格"}),t.instructor_experience&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:"経験"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_experience})]}),t.instructor_education&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:"学歴"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_education})]}),t.instructor_certifications&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:"保有資格"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_certifications})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6 border-b pb-2",children:"受講者の評価とレビュー"}),t.review_count>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-8",children:[s.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-center",children:[s.jsx("p",{className:"text-5xl font-bold text-gray-900",children:t.average_rating.toFixed(1)}),s.jsx("div",{className:"flex items-center mt-2",children:[1,2,3,4,5].map(u=>s.jsx("svg",{className:`w-5 h-5 ${u<=Math.round(t.average_rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},u))}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.review_count,"件のレビュー"]})]}),s.jsx("div",{className:"flex-1",children:[5,4,3,2,1].map(u=>{const g=c[u-1],w=h>0?g/h*100:0;return s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 w-4",children:u}),s.jsx("svg",{className:"w-4 h-4 text-yellow-400 ml-1 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),s.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-2 bg-primary rounded-full",style:{width:`${w}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 ml-2 w-10",children:g})]},u)})})]}),s.jsx("div",{className:"space-y-6",children:n.map(u=>{var g,w,m,p;return s.jsx("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mr-3",children:s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden",children:(g=u.user)!=null&&g.profile_image_url?s.jsx("img",{src:u.user.profile_image_url,alt:u.user.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((m=(w=u.user)==null?void 0:w.name)==null?void 0:m.charAt(0))||"U"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("h3",{className:"text-sm font-medium",children:((p=u.user)==null?void 0:p.name)||"匿名ユーザー"}),s.jsx("span",{className:"mx-2 text-gray-300",children:"•"}),s.jsx("time",{className:"text-xs text-gray-500",children:new Date(u.created_at).toLocaleDateString("ja-JP")})]}),s.jsx("div",{className:"flex items-center mb-2",children:[1,2,3,4,5].map(v=>s.jsx("svg",{className:`w-4 h-4 ${v<=u.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},v))}),s.jsx("p",{className:"text-gray-700",children:u.comment})]})]})},u.id)})})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"まだレビューがありません"})})]})})]}),s.jsx("div",{children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border sticky top-8",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"開催予定のレッスン"}),i.length>0?s.jsxs("div",{className:"space-y-4",children:[i.map(u=>{var g;return s.jsx(M,{to:`/user/lessons/${u.id}`,className:"block",children:s.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"h-32 bg-gray-200 relative",children:[(g=u.lesson_image_url)!=null&&g[0]?s.jsx("img",{src:u.lesson_image_url[0],alt:u.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"画像なし"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:s.jsx("p",{className:"text-white font-medium truncate",children:u.lesson_title})})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[s.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs",children:u.category}),u.difficulty_level&&s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-full text-xs",children:u.difficulty_level==="beginner"?"初級":u.difficulty_level==="intermediate"?"中級":u.difficulty_level==="advanced"?"上級":"すべてのレベル"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-gray-500",children:new Date(u.date_time_start).toLocaleDateString("ja-JP")}),s.jsxs("p",{className:"font-medium text-primary",children:[u.price.toLocaleString(),"円"]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[s.jsxs("span",{children:[u.current_participants_count,"/",u.capacity,"人"]}),s.jsx("div",{className:"ml-2 flex-1 h-1.5 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-1.5 bg-primary rounded-full",style:{width:`${u.current_participants_count/u.capacity*100}%`}})})]})]})]})},u.id)}),s.jsx(M,{to:`/user/lessons?instructor=${e}`,className:"block text-center text-primary font-medium hover:underline py-2",children:"すべてのレッスンを見る"})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"現在予定されているレッスンはありません"}),s.jsx(M,{to:"/user/lessons",className:"block mt-4 text-primary hover:underline font-medium",children:"レッスン一覧に戻る"})]})]})})})]})]})},Q_=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState("upcoming");y.useEffect(()=>{(async()=>{try{n(!0),console.log("🔍 開始: 予約情報の取得処理");const{data:{user:g}}=await E.auth.getUser();if(console.log("👤 ユーザー情報:",g?`ID: ${g.id}`:"ユーザー情報なし"),!g){console.error("❌ エラー: ユーザー情報が取得できませんでした");return}console.log("📊 予約情報のクエリを実行中...");const{data:w,error:m}=await E.from("bookings").select(`
            *,
            lesson:lessons!lesson_id(
              id, 
              lesson_title, 
              date_time_start, 
              date_time_end, 
              price, 
              category, 
              lesson_image_url,
              instructor_id
            )
          `).eq("user_id",g.id).order("created_at",{ascending:!1});if(console.log("📊 レッスン情報の取得が完了しました:",w),!w||w.length===0){console.log("📭 予約データがありません"),t([]),n(!1);return}const p=w.map(b=>{var N;return(N=b.lesson)==null?void 0:N.instructor_id}).filter(b=>b);console.log("👨‍🏫 検索対象のインストラクターID:",p);const{data:v,error:x}=await E.from("instructor_profiles").select("id, name, profile_image_url").in("id",p);if(x&&console.error("❌ インストラクター情報取得エラー:",x),console.log("👨‍🏫 取得したインストラクター情報:",v),m)throw console.error("❌ 予約データ取得エラー:",m),m;console.log("✅ 予約データ取得成功:",w?`${w.length}件の予約が見つかりました`:"予約データなし");let _=w.map(b=>{const N=v==null?void 0:v.find(P=>{var L;return P.id===((L=b.lesson)==null?void 0:L.instructor_id)});console.log(`🔄 予約ID:${b.id} のインストラクター情報マッピング:`,N?`${N.name}(ID:${N.id})`:"対応するインストラクターが見つかりません");const C=b.status==="cancelled"?"canceled":b.status;return console.log(`🔄 予約ID:${b.id} のステータス変換: ${b.status} → ${C}`),{...b,status:C,instructor:N||null,chat_room:null}});console.log("📋 変換後の予約データ:",_),console.log("💬 チャットルーム情報取得中...");const{data:j,error:S}=await E.from("chat_rooms").select("*").eq("user_id",g.id);S?console.error("❌ チャットルーム取得エラー:",S):j&&(console.log("✅ チャットルーム取得成功:",j?`${j.length}件のチャットルームが見つかりました`:"チャットルームなし"),_=_.map(b=>{const N=j.find(C=>C.lesson_id===b.lesson_id);return console.log(`🔄 予約(${b.id})にチャットルームをマッピング:`,N?`チャットルームID: ${N.id}`:"マッチするチャットルームなし"),{...b,chat_room:N||null}})),console.log("🏁 最終的な予約データ:",_),t(_)}catch(g){console.error("❌ 予約取得処理中の重大エラー:",g)}finally{n(!1),console.log("🔍 終了: 予約情報の取得処理")}})()},[]);const l=u=>{switch(u){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"canceled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},o=u=>{switch(u){case"pending":return"bg-yellow-50 text-yellow-600";case"paid":return"bg-green-50 text-green-600";case"refunded":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},d=async u=>{try{console.log("🔄 予約キャンセル処理開始:",u);const{error:g}=await E.from("bookings").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",u);if(g)throw console.error("❌ 予約キャンセルエラー:",g),g;console.log("✅ 予約キャンセル成功:",u),alert("予約をキャンセルしました。"),await h()}catch(g){console.error("Error canceling booking:",g),alert("予約のキャンセルに失敗しました。もう一度お試しください。")}},c=u=>{const g=new Date(u),w=new Date;return console.log(`⏱️ 日時比較: レッスン日時=${g.toISOString()}, 現在日時=${w.toISOString()}, 結果=${g>w}`),g>w},h=async()=>{try{n(!0),console.log("🔍 開始: 予約情報の取得処理");const{data:{user:u}}=await E.auth.getUser();if(console.log("👤 ユーザー情報:",u?`ID: ${u.id}`:"ユーザー情報なし"),!u){console.error("❌ エラー: ユーザー情報が取得できませんでした");return}console.log("📊 予約情報のクエリを実行中...");const{data:g,error:w}=await E.from("bookings").select(`
          *,
          lesson:lessons!lesson_id(
            id, 
            lesson_title, 
            date_time_start, 
            date_time_end, 
            price, 
            category, 
            lesson_image_url,
            instructor_id
          )
        `).eq("user_id",u.id).order("created_at",{ascending:!1});if(console.log("📊 レッスン情報の取得が完了しました:",g),!g||g.length===0){console.log("📭 予約データがありません"),t([]),n(!1);return}const m=g.map(S=>{var b;return(b=S.lesson)==null?void 0:b.instructor_id}).filter(S=>S);console.log("👨‍🏫 検索対象のインストラクターID:",m);const{data:p,error:v}=await E.from("instructor_profiles").select("id, name, profile_image_url").in("id",m);if(v&&console.error("❌ インストラクター情報取得エラー:",v),console.log("👨‍🏫 取得したインストラクター情報:",p),w)throw console.error("❌ 予約データ取得エラー:",w),w;console.log("✅ 予約データ取得成功:",g?`${g.length}件の予約が見つかりました`:"予約データなし");let x=g.map(S=>{const b=p==null?void 0:p.find(C=>{var P;return C.id===((P=S.lesson)==null?void 0:P.instructor_id)});console.log(`🔄 予約ID:${S.id} のインストラクター情報マッピング:`,b?`${b.name}(ID:${b.id})`:"対応するインストラクターが見つかりません");const N=S.status==="cancelled"?"canceled":S.status;return console.log(`🔄 予約ID:${S.id} のステータス変換: ${S.status} → ${N}`),{...S,status:N,instructor:b||null,chat_room:null}});console.log("📋 変換後の予約データ:",x),console.log("💬 チャットルーム情報取得中...");const{data:_,error:j}=await E.from("chat_rooms").select("*").eq("user_id",u.id);j?console.error("❌ チャットルーム取得エラー:",j):_&&(console.log("✅ チャットルーム取得成功:",_?`${_.length}件のチャットルームが見つかりました`:"チャットルームなし"),x=x.map(S=>{const b=_.find(N=>N.lesson_id===S.lesson_id);return console.log(`🔄 予約(${S.id})にチャットルームをマッピング:`,b?`チャットルームID: ${b.id}`:"マッチするチャットルームなし"),{...S,chat_room:b||null}})),console.log("🏁 最終的な予約データ:",x),t(x)}catch(u){console.error("❌ 予約取得処理中の重大エラー:",u)}finally{n(!1),console.log("🔍 終了: 予約情報の取得処理")}};y.useEffect(()=>{h()},[]),y.useEffect(()=>{console.log("🔄 タブ切り替え検知 - 再フィルタリング:",a)},[a]),console.log("🔍 予約フィルタリング開始 - アクティブタブ:",a),console.log("📋 フィルタリング前の予約データ:",e);const f=e.filter(u=>{if(!u.lesson||!u.lesson.date_time_start)return console.error("❌ 予約データにlesson情報がありません:",u),!1;const g=c(u.lesson.date_time_start),w=u.status==="canceled";if(console.log(`🔄 予約ID: ${u.id} - ${u.lesson.lesson_title}:`),console.log(`   ⏱️ レッスン日時: ${new Date(u.lesson.date_time_start).toLocaleString()}`),console.log(`   📊 ステータス: ${u.status}, 今後のレッスン?: ${g}, キャンセル済み?: ${w}`),a==="upcoming"){const m=g;return console.log(`   👉 「今後のレッスン」タブに表示: ${m}`),m}else{const m=!g;return console.log(`   👉 「過去のレッスン」タブに表示: ${m}`),m}});return console.log(`✅ フィルタリング結果: ${f.length}件の予約が表示されます`),r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"予約管理"}),s.jsxs("div",{className:"flex border-b mb-6",children:[s.jsxs("button",{className:`pb-2 px-4 font-medium ${a==="upcoming"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{console.log("🔄 タブ切り替え: 今後のレッスン"),i("upcoming")},children:["今後のレッスン",e.filter(u=>u.lesson&&u.lesson.date_time_start&&c(u.lesson.date_time_start)).length>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full",children:e.filter(u=>u.lesson&&u.lesson.date_time_start&&c(u.lesson.date_time_start)).length})]}),s.jsxs("button",{className:`pb-2 px-4 font-medium ${a==="past"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{console.log("🔄 タブ切り替え: 過去のレッスン"),i("past")},children:["過去のレッスン",e.filter(u=>u.lesson&&u.lesson.date_time_start&&!c(u.lesson.date_time_start)).length>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.filter(u=>u.lesson&&u.lesson.date_time_start&&!c(u.lesson.date_time_start)).length})]})]}),f.length>0?s.jsx("div",{className:"space-y-6",children:f.map(u=>{var g,w,m,p;return s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"md:flex",children:[s.jsxs("div",{className:"md:w-1/4 h-48 md:h-auto bg-gray-200 relative",children:[u.lesson.lesson_image_url&&u.lesson.lesson_image_url[0]?s.jsx("img",{src:u.lesson.lesson_image_url[0],alt:u.lesson.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:"画像なし"})}),s.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white px-2 py-1 rounded text-xs",children:u.lesson.category})]}),s.jsxs("div",{className:"p-6 md:w-3/4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-3",children:u.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2",children:(g=u.instructor)!=null&&g.profile_image_url?s.jsx("img",{src:u.instructor.profile_image_url,alt:u.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((m=(w=u.instructor)==null?void 0:w.name)==null?void 0:m.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:((p=u.instructor)==null?void 0:p.name)||"インストラクター情報がありません"})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("div",{className:"flex space-x-2 mb-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${l(u.status)}`,children:u.status==="pending"?"予約申請中":u.status==="confirmed"?"予約確定":u.status==="canceled"?"キャンセル済み":u.status==="completed"?"完了":u.status}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o(u.payment_status)}`,children:u.payment_status==="pending"?"支払い待ち":u.payment_status==="paid"?"支払い済み":"返金済み"})]}),s.jsxs("p",{className:"text-lg font-semibold mb-2",children:[u.lesson.price.toLocaleString(),"円"]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"レッスン日時"}),s.jsxs("p",{className:"text-gray-700",children:[new Date(u.lesson.date_time_start).toLocaleDateString()," ",new Date(u.lesson.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," 〜 ",new Date(u.lesson.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"予約日"}),s.jsx("p",{className:"text-gray-700",children:new Date(u.booking_date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex flex-wrap justify-between mt-4",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(M,{to:`/user/lessons/${u.lesson_id}`,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors text-sm",children:"レッスン詳細"}),u.chat_room&&s.jsx(M,{to:`/user/chat/${u.chat_room.id}`,className:"bg-primary/10 text-primary px-4 py-2 rounded-md hover:bg-primary/20 transition-colors text-sm",children:"講師とチャット"})]}),a==="upcoming"&&(u.status==="canceled"?s.jsx(M,{to:`/user/lessons/${u.lesson_id}`,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-colors text-sm",children:"再予約する"}):u.status==="pending"||u.status==="confirmed"?s.jsx("button",{onClick:()=>d(u.id),className:"text-red-600 hover:text-red-800 hover:underline text-sm",children:"予約をキャンセル"}):null)]})]})]})]})},u.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:a==="upcoming"?"今後の予約はありません":"過去の予約はありません"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:"レッスンを探す"})]})]})},Y_=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{(async()=>{try{const{data:{user:d}}=await E.auth.getUser();i(d)}catch(d){console.error("Error fetching current user:",d)}})()},[]),y.useEffect(()=>{if(!a)return;(async()=>{try{n(!0);const{data:c,error:h}=await E.from("chat_rooms").select(`
            *,
            lesson:lesson_id(lesson_title),
            instructor:instructor_id(
              id,
              profile_image_url,
              name
            )
          `).eq("user_id",a.id).order("created_at",{ascending:!1});if(h)throw h;const f=await Promise.all(c.map(async u=>{const{data:g,error:w}=await E.from("chat_messages").select("*").eq("chat_room_id",u.id).order("created_at",{ascending:!1}).limit(1);if(w)throw w;const{count:m,error:p}=await E.from("chat_messages").select("*",{count:"exact",head:!0}).eq("chat_room_id",u.id).eq("is_read",!1).neq("sender_id",a.id);if(p)throw p;return{...u,last_message:g[0]||null,unread_count:m||0}}));f.sort((u,g)=>{const w=u.last_message?new Date(u.last_message.created_at).getTime():new Date(u.created_at).getTime();return(g.last_message?new Date(g.last_message.created_at).getTime():new Date(g.created_at).getTime())-w}),t(f)}catch(c){console.error("Error fetching chat rooms:",c)}finally{n(!1)}})();const d=E.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},c=>{t(h=>h.map(f=>{if(f.id===c.new.chat_room_id){const u={message:c.new.message||"",created_at:c.new.created_at||"",is_read:!!c.new.is_read,sender_id:c.new.sender_id||""};return{...f,last_message:u,unread_count:c.new.sender_id!==(a==null?void 0:a.id)?f.unread_count+1:f.unread_count}}return f}))}).subscribe();return()=>{E.removeChannel(d)}},[a==null?void 0:a.id]);const l=o=>{const d=new Date(o),c=new Date,h=new Date(d.getFullYear(),d.getMonth(),d.getDate()),f=new Date(c.getFullYear(),c.getMonth(),c.getDate()),u=Math.floor((f.getTime()-h.getTime())/(24*60*60*1e3));return u===0?d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u===1?"昨日 "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u===2?"一昨日 "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u<7?["日","月","火","水","木","金","土"][d.getDay()]+"曜日":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(d)};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"メッセージ"}),e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(o=>{var d,c,h,f,u,g;return s.jsx("li",{children:s.jsx(M,{to:`/user/chat/${o.id}`,className:"block hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex p-4",children:[s.jsx("div",{className:"mr-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden",children:(d=o.instructor)!=null&&d.profile_image_url?s.jsx("img",{src:o.instructor.profile_image_url,alt:o.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((h=(c=o.instructor)==null?void 0:c.name)==null?void 0:h.charAt(0))||"I"})}),o.unread_count>0&&s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs",children:o.unread_count})})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:(f=o.instructor)==null?void 0:f.name}),o.last_message&&s.jsx("p",{className:"text-xs text-gray-500",children:l(o.last_message.created_at)})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-1 truncate",children:(u=o.lesson)==null?void 0:u.lesson_title}),s.jsx("p",{className:`text-sm truncate ${o.unread_count>0&&((g=o.last_message)==null?void 0:g.sender_id)!==(a==null?void 0:a.id)?"font-medium text-gray-900":"text-gray-500"}`,children:o.last_message?(o.last_message.sender_id===(a==null?void 0:a.id)?"あなた: ":"")+o.last_message.message:"メッセージはまだありません"})]})]})})},o.id)})})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"メッセージはまだありません"}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"レッスン詳細ページから講師とチャットができます"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:"レッスンを探す"})]})]})},X_=()=>{var x,_,j,S,b;const{id:e}=Bn(),[t,r]=y.useState([]),[n,a]=y.useState(""),[i,l]=y.useState(!0),[o,d]=y.useState(!1),[c,h]=y.useState(null),[f,u]=y.useState(null),g=y.useRef(null);y.useEffect(()=>{(async()=>{try{const{data:{user:C}}=await E.auth.getUser();u(C)}catch(C){console.error("Error fetching current user:",C)}})()},[]),y.useEffect(()=>{if(!e||!f)return;(async()=>{try{l(!0);const{data:L,error:$}=await E.from("chat_rooms").select(`
            *,
            lesson:lesson_id(id, lesson_title),
            instructor:instructor_profiles!instructor_id(id, name, profile_image_url)
          `).eq("id",e).eq("user_id",f.id).single();if($)throw $;h(L);const{data:I,error:F}=await E.from("chat_messages").select("*").eq("chat_room_id",e).order("created_at",{ascending:!0});if(F)throw F;if(r(I||[]),I&&I.length>0){const A=I.filter(q=>!q.is_read&&q.sender_id!==f.id);if(A.length>0){console.log(`Marking ${A.length} messages as read in room ${e}`);const q=A.map(H=>H.id),{error:V}=await E.from("chat_messages").update({is_read:!0}).in("id",q);V?console.error("Error marking messages as read:",V):console.log("Messages marked as read successfully")}}}catch(L){console.error("Error fetching chat room:",L)}finally{l(!1),setTimeout(()=>w(),100)}})();const C=`chat_room_${e}_${Date.now()}`,P=E.channel(C).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`chat_room_id=eq.${e}`},async L=>{const $=L.new;r(I=>[...I.filter(A=>!(A.id.startsWith("temp-")&&A.sender_id===$.sender_id)),$]),$.sender_id!==f.id&&await E.from("chat_messages").update({is_read:!0}).eq("id",$.id)}).subscribe();return()=>{E.removeChannel(P)}},[e,f==null?void 0:f.id]);const w=()=>{var N;(N=g.current)==null||N.scrollIntoView({behavior:"smooth"})},m=async N=>{if(N.preventDefault(),!(!n.trim()||!e||!f))try{d(!0);const C=n.trim(),P={id:`temp-${Date.now()}`,chat_room_id:e,sender_id:f.id,message:C,is_read:!1,created_at:new Date().toISOString()};r($=>[...$,P]),a(""),setTimeout(()=>w(),100);const{error:L}=await E.from("chat_messages").insert({chat_room_id:e,sender_id:f.id,message:C,is_read:!1});if(L)throw L;window.location.reload()}catch(C){console.error("Error sending message:",C),r(P=>P.filter(L=>!L.id.startsWith("temp-")))}finally{d(!1)}},p=N=>{const C=new Date(N),P=new Date;if(C.toDateString()===P.toDateString())return`今日 ${C.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`;{const $=new Date(P);return $.setDate(P.getDate()-1),C.toDateString()===$.toDateString()?`昨日 ${C.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`:`${C.toLocaleDateString("ja-JP")} ${C.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}},v=()=>{const N=[];let C="";return t.forEach(P=>{const L=new Date(P.created_at).toDateString();L!==C?(C=L,N.push({date:L,messages:[P]})):N[N.length-1].messages.push(P)}),N};return i?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):c?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs(M,{to:"/user/chat",className:"text-primary hover:underline flex items-center mb-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"メッセージ一覧に戻る"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden mr-4",children:(x=c.instructor)!=null&&x.profile_image_url?s.jsx("img",{src:c.instructor.profile_image_url,alt:c.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((j=(_=c.instructor)==null?void 0:_.name)==null?void 0:j.charAt(0))||"I"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold",children:(S=c.instructor)==null?void 0:S.name}),s.jsx("p",{className:"text-sm text-gray-600",children:(b=c.lesson)==null?void 0:b.lesson_title})]}),s.jsx("div",{className:"ml-auto",children:s.jsx(M,{to:`/user/lessons/${c.lesson_id}`,className:"text-sm text-primary hover:underline",children:"レッスン詳細を見る"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"h-[60vh] overflow-y-auto p-4 bg-gray-50",children:[v().map((N,C)=>s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-gray-200 px-3 py-1 rounded-full text-xs text-gray-600",children:new Date(N.date).toLocaleDateString()})}),N.messages.map(P=>{var $,I,F;const L=P.sender_id===(f==null?void 0:f.id);return s.jsxs("div",{className:`mb-4 flex ${L?"justify-end":"justify-start"}`,children:[!L&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2 flex-shrink-0",children:($=c.instructor)!=null&&$.profile_image_url?s.jsx("img",{src:c.instructor.profile_image_url,alt:c.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((F=(I=c.instructor)==null?void 0:I.name)==null?void 0:F.charAt(0))||"I"})}),s.jsxs("div",{className:`max-w-[70%] ${L?"order-1":"order-2"}`,children:[s.jsx("div",{className:`px-4 py-2 rounded-lg ${L?"bg-primary text-white rounded-tr-none":"bg-gray-200 text-gray-800 rounded-tl-none"}`,children:s.jsx("p",{className:"whitespace-pre-wrap break-words",children:P.message})}),s.jsxs("p",{className:`text-xs text-gray-500 mt-1 ${L?"text-right":"text-left"}`,children:[p(P.created_at),L&&s.jsx("span",{className:"ml-1",children:P.is_read?" • 既読":""})]})]})]},P.id)})]},C)),s.jsx("div",{ref:g})]}),s.jsx("div",{className:"p-4 border-t",children:s.jsxs("form",{onSubmit:m,className:"flex",children:[s.jsx("input",{type:"text",value:n,onChange:N=>a(N.target.value),placeholder:"メッセージを入力...",className:"flex-1 border rounded-l-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50",disabled:o}),s.jsx("button",{type:"submit",disabled:!n.trim()||o,className:`px-4 py-2 bg-primary text-white rounded-r-md ${!n.trim()||o?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:o?"送信中...":"送信"})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"チャットが見つかりません"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"お探しのチャットは存在しないか、アクセス権がありません。"}),s.jsx(M,{to:"/user/chat",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"メッセージ一覧に戻る"})]})})},Z_=()=>{const{toast:e}=Wt(),[t,r]=y.useState(null),[n,a]=y.useState(!0),[i,l]=y.useState(!1),[o,d]=y.useState({name:"",email:"",username:"",birth_date:"",gender:"",phone_number:"",user_interests:[],user_goals:"",user_skill_level:"beginner",profile_image_url:""}),[c,h]=y.useState(""),[f,u]=y.useState("");y.useEffect(()=>{(async()=>{try{a(!0);const{data:{user:j}}=await E.auth.getUser();if(!j)return;const{data:S,error:b}=await E.from("user_profiles").select("*").eq("id",j.id).single();if(b)throw b;r(S),d({name:S.name||"",email:S.email||"",username:S.username||"",birth_date:S.birth_date||"",gender:S.gender||"",phone_number:S.phone_number||"",user_interests:S.user_interests||[],user_goals:S.user_goals||"",user_skill_level:S.user_skill_level||"beginner",profile_image_url:S.profile_image_url||""})}catch(j){console.error("Error fetching profile:",j)}finally{a(!1)}})(),localStorage.getItem("profileUpdated")==="true"&&(e({title:"プロフィール更新完了",description:"プロフィール情報が正常に更新されました",variant:"default"}),localStorage.removeItem("profileUpdated"))},[e]);const g=x=>{const{name:_,value:j}=x.target;d(S=>({...S,[_]:j}))},w=x=>{const{value:_,checked:j}=x.target;d(S=>({...S,user_interests:j?[...S.user_interests,_]:S.user_interests.filter(b=>b!==_)}))},m=async x=>{x.preventDefault();try{l(!0),h(""),u("");const{data:{user:_}}=await E.auth.getUser();if(!_)throw new Error("ユーザーが認証されていません");const{error:j}=await E.from("user_profiles").update({name:o.name,birth_date:o.birth_date,gender:o.gender,phone_number:o.phone_number,user_interests:o.user_interests,user_goals:o.user_goals,user_skill_level:o.user_skill_level,is_profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",_.id);if(j)throw j;r(S=>({...S,...o,is_profile_completed:!0,updated_at:new Date().toISOString()})),h("プロフィールが更新されました"),localStorage.setItem("profileUpdated","true"),window.location.reload()}catch(_){console.error("Error updating profile:",_),u(_.message||"プロフィールの更新に失敗しました")}finally{l(!1)}},p=async x=>{const _=x.target.files;if(!(!_||_.length===0))try{l(!0);const{data:{user:j}}=await E.auth.getUser();if(!j)throw new Error("ユーザーが認証されていません");const S=_[0],b=S.name.split(".").pop(),C=`profile_images/${`${j.id}_${Date.now()}.${b}`}`,{error:P}=await E.storage.from("user_uploads").upload(C,S);if(P)throw P;const{data:{publicUrl:L}}=E.storage.from("user_uploads").getPublicUrl(C),{error:$}=await E.from("user_profiles").update({profile_image_url:L,updated_at:new Date().toISOString()}).eq("id",j.id);if($)throw $;d(I=>({...I,profile_image_url:L})),r(I=>({...I,profile_image_url:L,updated_at:new Date().toISOString()})),h("プロフィール画像がアップロードされました"),e({title:"画像アップロード完了",description:"プロフィール画像が正常に更新されました",variant:"default"})}catch(j){console.error("Error uploading image:",j),u(j.message||"画像アップロードに失敗しました")}finally{l(!1)}},v=async()=>{try{const{error:x}=await E.auth.signOut();if(x)throw x;window.location.href="/login"}catch(x){console.error("Error signing out:",x)}};return n?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"プロフィール設定"}),c&&s.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:c}),f&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:f}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:gap-12",children:[s.jsx("div",{className:"md:w-1/3 mb-8 md:mb-0",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4 relative w-32 h-32 mx-auto",children:[o.profile_image_url?s.jsx("img",{src:o.profile_image_url,alt:"プロフィール画像",className:"w-full h-full object-cover rounded-full"}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-5xl",children:o.name?o.name.charAt(0).toUpperCase():"U"})}),s.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full cursor-pointer",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("input",{type:"file",id:"profile-image",className:"hidden",accept:"image/*",onChange:p,disabled:i})]})]}),s.jsx("h2",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)||"ユーザー"}),s.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email}),s.jsx("button",{onClick:v,className:"mt-6 text-red-600 hover:text-red-800 text-sm hover:underline",type:"button",children:"ログアウト"})]})}),s.jsx("div",{className:"md:w-2/3",children:s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["お名前 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:o.name,onChange:g,required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{type:"email",name:"email",value:o.email,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"メールアドレスの変更はできません"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"電話番号"}),s.jsx("input",{type:"tel",name:"phone_number",value:o.phone_number,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"生年月日"}),s.jsx("input",{type:"date",name:"birth_date",value:o.birth_date,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"性別"}),s.jsxs("select",{name:"gender",value:o.gender,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"",children:"選択してください"}),s.jsx("option",{value:"male",children:"男性"}),s.jsx("option",{value:"female",children:"女性"}),s.jsx("option",{value:"other",children:"その他"}),s.jsx("option",{value:"prefer_not_to_say",children:"回答しない"})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"スキルレベル"}),s.jsxs("select",{name:"user_skill_level",value:o.user_skill_level,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:"初級者"}),s.jsx("option",{value:"intermediate",children:"中級者"}),s.jsx("option",{value:"advanced",children:"上級者"})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"学習目標"}),s.jsx("textarea",{name:"user_goals",value:o.user_goals,onChange:g,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：日常会話ができるようになりたい、資格取得を目指している、趣味を広げたい"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"興味のある分野（複数選択可）"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["音楽","料理","語学","クラフト","ダンス","テクノロジー","アート","スポーツ","ビジネス","教養","アウトドア","ウェルネス"].map(x=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`interest-${x}`,value:x,checked:o.user_interests.includes(x),onChange:w,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),s.jsx("label",{htmlFor:`interest-${x}`,className:"ml-2 text-sm text-gray-700",children:x})]},x))})]})]}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{type:"submit",disabled:i,className:`w-full md:w-auto px-6 py-3 bg-primary text-white rounded-md font-medium ${i?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:i?"更新中...":"プロフィールを更新する"})})]})})]})})})]})},ej=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0);y.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:l}}=await E.auth.getUser();if(!l)return;const{data:o,error:d}=await E.from("favorites").select(`
            *,
            lesson:lesson_id(
              id, 
              lesson_title,  
              date_time_start, 
              date_time_end, 
              price, 
              category, 
              sub_category, 
              lesson_image_url,
              instructor_id,
              status
            )
          `).eq("user_id",l.id).order("created_at",{ascending:!1});if(d)throw d;if(!o||o.length===0){t([]);return}const c=o.map(w=>w.lesson.instructor_id),{data:h,error:f}=await E.from("instructor_profiles").select("id, name, profile_image_url").in("id",c);if(f)throw console.error("Error fetching instructor profiles:",f),f;const u=(h||[]).reduce((w,m)=>(w[m.id]=m,w),{}),g=o.map(w=>{const m=w.lesson.instructor_id;return{...w,instructor:u[m]||null}});t(g)}catch(l){console.error("Error fetching favorites:",l)}finally{n(!1)}})()},[]);const a=async i=>{try{const{error:l}=await E.from("favorites").delete().eq("id",i);if(l)throw l;t(e.filter(o=>o.id!==i))}catch(l){console.error("Error removing favorite:",l)}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"お気に入り"}),e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>{var l,o,d,c;return s.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[i.lesson.lesson_image_url&&i.lesson.lesson_image_url[0]?s.jsx("img",{src:i.lesson.lesson_image_url[0],alt:i.lesson.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:"画像なし"})}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[s.jsx("div",{className:"bg-primary text-white px-2 py-1 rounded text-xs",children:i.lesson.category}),i.lesson.status!=="published"&&s.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:i.lesson.status==="draft"?"下書き":i.lesson.status==="canceled"?"キャンセル":"完了"})]}),s.jsx("button",{onClick:()=>a(i.id),className:"absolute top-2 left-2 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors",children:s.jsx("svg",{className:"w-4 h-4 text-red-500 fill-current",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:i.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 overflow-hidden mr-2",children:(l=i.instructor)!=null&&l.profile_image_url?s.jsx("img",{src:i.instructor.profile_image_url,alt:i.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((d=(o=i.instructor)==null?void 0:o.name)==null?void 0:d.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:(c=i.instructor)==null?void 0:c.name})]}),s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"text-sm text-gray-500",children:new Date(i.lesson.date_time_start).toLocaleDateString()}),s.jsxs("span",{className:"text-sm font-semibold",children:[i.lesson.price.toLocaleString(),"円"]})]}),s.jsx(M,{to:`/user/lessons/${i.lesson.id}`,className:"block w-full bg-primary text-white py-2 rounded-md hover:bg-primary/90 transition-colors text-center",children:"詳細を見る"})]})]},i.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"お気に入りのレッスンはまだありません"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:"レッスンを探す"})]})]})},tj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState({bookingId:"",lessonId:"",instructorId:"",rating:5,comment:""}),[l,o]=y.useState(!1),[d,c]=y.useState(!1);y.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:g}}=await E.auth.getUser();if(!g)return;const{data:w,error:m}=await E.from("bookings").select(`
            *,
            lesson:lesson_id(
              id, 
              lesson_title, 
              date_time_start, 
              date_time_end, 
              price, 
              category, 
              lesson_image_url,
              instructor_id
            ),
            instructor_profiles!inner(id, name, profile_image_url),
            reviews!left(id, rating, comment)
          `).eq("user_id",g.id).eq("status","completed").order("created_at",{ascending:!1});if(m)throw m;const p=w.map(v=>{var x;return{...v,instructor:v.instructor_profiles||null,review:((x=v.reviews)==null?void 0:x[0])||null}});t(p)}catch(g){console.error("Error fetching history:",g)}finally{n(!1)}})()},[]);const h=u=>{var g,w;i({bookingId:u.id,lessonId:u.lesson_id,instructorId:u.lesson.instructor_id,rating:((g=u.review)==null?void 0:g.rating)||5,comment:((w=u.review)==null?void 0:w.comment)||""}),o(!0)},f=async u=>{var g;u.preventDefault();try{c(!0);const{data:{user:w}}=await E.auth.getUser();if(!w)throw new Error("ユーザーが認証されていません");const m=(g=e.find(p=>p.id===a.bookingId))==null?void 0:g.review;if(m){const{error:p}=await E.from("reviews").update({rating:a.rating,comment:a.comment,updated_at:new Date().toISOString()}).eq("id",m.id);if(p)throw p}else{const{error:p}=await E.from("reviews").insert({lesson_id:a.lessonId,user_id:w.id,instructor_id:a.instructorId,rating:a.rating,comment:a.comment});if(p)throw p}t(e.map(p=>{var v;return p.id===a.bookingId?{...p,review:{id:((v=p.review)==null?void 0:v.id)||"temp-id",rating:a.rating,comment:a.comment}}:p})),o(!1)}catch(w){console.error("Error submitting review:",w)}finally{c(!1)}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"受講履歴"}),e.length>0?s.jsx("div",{className:"space-y-6",children:e.map(u=>{var g,w,m,p;return s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"md:flex",children:[s.jsxs("div",{className:"md:w-1/4 h-48 md:h-auto bg-gray-200 relative",children:[u.lesson.lesson_image_url&&u.lesson.lesson_image_url[0]?s.jsx("img",{src:u.lesson.lesson_image_url[0],alt:u.lesson.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:"画像なし"})}),s.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white px-2 py-1 rounded text-xs",children:u.lesson.category})]}),s.jsxs("div",{className:"p-6 md:w-3/4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-3",children:u.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2",children:(g=u.instructor)!=null&&g.profile_image_url?s.jsx("img",{src:u.instructor.profile_image_url,alt:u.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((m=(w=u.instructor)==null?void 0:w.name)==null?void 0:m.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:(p=u.instructor)==null?void 0:p.name})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium mb-2",children:"受講済み"}),s.jsxs("p",{className:"text-lg font-semibold mb-2",children:[u.lesson.price.toLocaleString(),"円"]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"受講日時"}),s.jsxs("p",{className:"text-gray-700",children:[new Date(u.lesson.date_time_start).toLocaleDateString()," ",new Date(u.lesson.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," 〜 ",new Date(u.lesson.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"予約日"}),s.jsx("p",{className:"text-gray-700",children:new Date(u.booking_date).toLocaleDateString()})]})]}),u.review?s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("p",{className:"font-medium text-gray-800 mr-2",children:"あなたのレビュー"}),s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(v=>s.jsx("svg",{className:`w-4 h-4 ${v<=u.review.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},v))})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:u.review.comment}),s.jsx("button",{onClick:()=>h(u),className:"text-primary hover:text-primary/80 text-sm mt-2",children:"レビューを編集する"})]}):s.jsx("button",{onClick:()=>h(u),className:"bg-primary/10 text-primary px-4 py-2 rounded-md hover:bg-primary/20 transition-colors text-sm mb-4",children:"レビューを書く"}),s.jsx("div",{className:"flex",children:s.jsx(M,{to:`/user/lessons/${u.lesson_id}`,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors text-sm",children:"レッスン詳細"})})]})]})]})},u.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"受講履歴はまだありません"}),s.jsx(M,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:"レッスンを探す"})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 mx-4",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"レビューを投稿"}),s.jsxs("form",{onSubmit:f,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"評価"}),s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(u=>s.jsx("button",{type:"button",onClick:()=>i({...a,rating:u}),className:"focus:outline-none",children:s.jsx("svg",{className:`w-8 h-8 ${u<=a.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},u))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"コメント"}),s.jsx("textarea",{value:a.comment,onChange:u=>i({...a,comment:u.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"レッスンの感想をお書きください...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:d,children:"キャンセル"}),s.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 bg-primary text-white rounded-md ${d?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:d?"送信中...":"送信する"})]})]})]})})]})},rj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),a=ut();y.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:d}}=await E.auth.getUser();if(!d)return;const{data:c,error:h}=await E.from("notifications").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(h)throw h;t(c||[]);const f=c.filter(u=>!u.is_read).map(u=>u.id);f.length>0&&(await E.from("notifications").update({is_read:!0}).in("id",f),t(c.map(u=>({...u,is_read:!0}))))}catch(d){console.error("Error fetching notifications:",d)}finally{n(!1)}})()},[]);const i=o=>{const d=new Date(o),c=new Date,h=new Date(d.getFullYear(),d.getMonth(),d.getDate()),f=new Date(c.getFullYear(),c.getMonth(),c.getDate()),u=Math.floor((f.getTime()-h.getTime())/(24*60*60*1e3));return u===0?d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u===1?"昨日 "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u===2?"一昨日 "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):u<7?["日","月","火","水","木","金","土"][d.getDay()]+"曜日":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(d)},l=o=>{if(o.notification_type&&o.target_id)switch(o.notification_type){case"booking":case"booking_confirmation":case"booking_cancellation":a("/user/bookings");break;case"chat_message":a(`/user/chat/${o.target_id}`);break;case"lesson_update":a(`/user/lessons/${o.target_id}`);break;case"favorite":a("/user/favorites");break;case"profile":a("/user/profile");break}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"お知らせ"}),e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(o=>s.jsx("li",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>l(o),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 pt-1",children:s.jsx("div",{className:`w-3 h-3 rounded-full ${o.is_read?"bg-gray-300":"bg-primary"}`})}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("p",{className:`font-medium ${o.is_read?"text-gray-700":"text-gray-900"}`,children:o.title}),s.jsx("p",{className:"text-sm text-gray-500",children:i(o.created_at)})]}),s.jsx("p",{className:`mt-1 ${o.is_read?"text-gray-500":"text-gray-700"}`,children:o.message}),o.notification_type&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:o.notification_type==="booking"?"予約":o.notification_type==="booking_confirmation"?"予約確定":o.notification_type==="booking_cancellation"?"予約キャンセル":o.notification_type==="chat_message"?"メッセージ":o.notification_type==="lesson_update"?"レッスン更新":o.notification_type==="favorite"?"お気に入り":o.notification_type==="profile"?"プロフィール":"お知らせ"})})]})]})},o.id))})}):s.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-500",children:"お知らせはありません"})})]})},sj=()=>{const[e,t]=y.useState(null),[r,n]=y.useState(!0),[a,i]=y.useState(!1),[l,o]=y.useState(!1),[d,c]=y.useState(!0);y.useEffect(()=>{(async()=>{const{data:{user:w}}=await E.auth.getUser();if(w){const{data:m}=await E.from("instructor_profiles").select("*").eq("id",w.id).single();t(m),c((m==null?void 0:m.is_profile_completed)||!1);const p=new Date().toISOString(),{data:v}=await E.from("premium_subscriptions").select("*").eq("instructor_id",w.id).eq("status","active").lt("start_date",p).gt("end_date",p).maybeSingle();i(!!v)}n(!1)})();const g=()=>{o(window.scrollY>500)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const h=()=>{window.scrollTo({top:0,behavior:"smooth"})},f=[{label:"ホーム",href:"/instructor",icon:s.jsx(Wc,{className:"w-5 h-5"})},{label:"レッスン管理",href:"/instructor/lessons",icon:s.jsx(Yf,{className:"w-5 h-5"})},{label:"予約管理",href:"/instructor/bookings",icon:s.jsx(ke,{className:"w-5 h-5"})},{label:"チャット",href:"/instructor/chat",icon:s.jsx(Kc,{className:"w-5 h-5"})},{label:"プレミアムプラン",href:"/instructor/premium",isPremium:a,icon:s.jsx(At,{className:"w-5 h-5"})}];return r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg text-foreground/70 animate-pulse",children:"読み込み中..."})]}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsx(Fp,{userType:"instructor",navItems:f,profileHref:"/instructor/profile",notificationsHref:"/instructor/notifications",user:e,isPremium:a}),a&&s.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-amber-50 dark:from-amber-900/20 dark:to-amber-800/10 border-b border-amber-200 dark:border-amber-800/30",children:s.jsxs("div",{className:"container mx-auto px-4 py-2 text-sm text-amber-800 dark:text-amber-300 flex items-center justify-center",children:[s.jsx(At,{className:"h-4 w-4 mr-2 text-amber-500"}),s.jsx("span",{children:"プレミアム会員：講師向け特別機能がご利用いただけます"})]})}),!d&&s.jsx("div",{className:"bg-gradient-to-r from-red-100 to-red-50 dark:from-red-900/20 dark:to-red-800/10 border-b border-red-200 dark:border-red-800/30",children:s.jsxs("div",{className:"container mx-auto px-4 py-3 text-sm text-red-800 dark:text-red-300 flex items-center justify-center",children:[s.jsx(ko,{className:"h-4 w-4 mr-2 text-red-500"}),s.jsx("span",{children:"プロフィール設定が完了していないため、一部機能が制限されています。"}),s.jsx("a",{href:"/instructor/profile",className:"ml-2 font-medium underline hover:text-red-600",children:"今すぐプロフィールを設定する"})]})}),s.jsx("main",{className:"flex-1",children:s.jsx("div",{className:"page-container pb-16",children:s.jsx(wf,{})})}),l&&s.jsx(B,{variant:"default",size:"icon",rounded:"full",className:"fixed bottom-6 right-6 z-50 shadow-lg",onClick:h,"aria-label":"ページトップへ",children:s.jsx(ep,{className:"h-5 w-5"})}),s.jsx("footer",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white py-12 border-t border-gray-700/50",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 gradient-heading",children:"北摂でまなぼ"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"北摂エリアの講師と生徒をつなぐオンライン学習プラットフォーム"}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Instagram",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"講師向けリンク"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("a",{href:"/instructor",className:"text-gray-300 hover:text-primary transition-colors",children:"ホーム"}),s.jsx("a",{href:"/instructor/lessons",className:"text-gray-300 hover:text-primary transition-colors",children:"レッスン管理"}),s.jsx("a",{href:"/instructor/bookings",className:"text-gray-300 hover:text-primary transition-colors",children:"予約管理"}),s.jsx("a",{href:"/instructor/profile",className:"text-gray-300 hover:text-primary transition-colors",children:"プロフィール"}),s.jsx("a",{href:"/instructor/chat",className:"text-gray-300 hover:text-primary transition-colors",children:"チャット"}),s.jsx("a",{href:"/instructor/premium",className:"text-gray-300 hover:text-primary transition-colors",children:"プレミアムプラン"}),s.jsx("a",{href:"/user",className:"text-gray-300 hover:text-primary transition-colors",children:"生徒として利用"}),s.jsx("a",{href:"/instructor/notifications",className:"text-gray-300 hover:text-primary transition-colors",children:"通知"})]}),s.jsxs("div",{className:"mt-6 bg-gradient-to-r from-primary/20 to-secondary/20 p-3 rounded-md",children:[s.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"講師特典"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"プレミアム会員になると、掲載順位の向上やより多くの予約を獲得できる特典があります。"}),s.jsx(B,{size:"sm",variant:"subtle",asChild:!0,className:"mt-2 text-xs",children:s.jsx("a",{href:"/instructor/premium",children:"詳細を見る"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"サポート"}),s.jsx("p",{className:"text-gray-300 mb-2",children:"お問い合わせやサポートはこちらからお願いします。"}),s.jsx("a",{href:"mailto:instructor-support@kitasetsu-manabu.jp",className:"text-primary hover:text-primary/80 transition-colors font-medium",children:"instructor-support@kitasetsu-manabu.jp"}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:"運営会社"}),s.jsxs("p",{className:"text-gray-300",children:["株式会社北摂エデュケーション",s.jsx("br",{}),"大阪府北摂地域",s.jsx("br",{}),"〒000-0000"]})]}),s.jsx(B,{variant:"outline",size:"sm",className:"mt-6 text-xs bg-white/10 hover:bg-white/20 border-white/20",asChild:!0,children:s.jsx("a",{href:"/instructor/faq",children:"講師向けよくある質問"})})]})]}),s.jsxs("div",{className:"border-t border-gray-700/50 mt-10 pt-8 text-center text-gray-400",children:[s.jsxs("p",{children:["© ",new Date().getFullYear()," 北摂でまなぼ All rights reserved."]}),s.jsxs("div",{className:"mt-2 text-sm space-x-4",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"利用規約"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"プライバシーポリシー"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"特定商取引法に基づく表記"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:"講師規約"})]})]})]})}),s.jsx(Jc,{})]})},nj=()=>{const[e,t]=y.useState(null),[r,n]=y.useState({totalLessons:0,totalBookings:0,upcomingLessons:0,totalRating:0,reviewCount:0,pendingMessages:0}),[a,i]=y.useState([]),[l,o]=y.useState([]),[d,c]=y.useState(!0),[h,f]=y.useState(!1);return y.useEffect(()=>{(async()=>{c(!0);try{const{data:{user:g}}=await E.auth.getUser();if(!g)return;const{data:w}=await E.from("instructor_profiles").select("*").eq("id",g.id).single();w&&t(w);const m=new Date().toISOString(),{data:p}=await E.from("premium_subscriptions").select("*").eq("instructor_id",g.id).eq("status","active").lt("start_date",m).gt("end_date",m).maybeSingle();f(!!p);const{data:v}=await E.from("lessons").select("*").eq("instructor_id",g.id).eq("status","published").gt("date_time_start",m).order("date_time_start",{ascending:!0}).limit(5);v&&i(v);const{data:x}=await E.from("bookings").select(`
            *,
            lesson:lessons(lesson_title, date_time_start),
            user:user_profiles(name, profile_image_url)
          `).eq("lesson.instructor_id",g.id).order("created_at",{ascending:!1}).limit(5);x&&o(x);const{count:_}=await E.from("lessons").select("*",{count:"exact"}).eq("instructor_id",g.id),{count:j}=await E.from("bookings").select("bookings.id",{count:"exact"}).eq("lesson.instructor_id",g.id).not("status","eq","canceled"),{count:S}=await E.from("lessons").select("*",{count:"exact"}).eq("instructor_id",g.id).eq("status","published").gt("date_time_start",m),{data:b}=await E.from("reviews").select("rating").eq("instructor_id",g.id);let N=0,C=0;b&&b.length>0&&(C=b.length,N=b.reduce((L,$)=>L+$.rating,0)/C);const{count:P}=await E.from("chat_messages").select("*",{count:"exact"}).eq("chat_room.instructor_id",g.id).neq("sender_id",g.id).eq("is_read",!1);n({totalLessons:_||0,totalBookings:j||0,upcomingLessons:S||0,totalRating:N,reviewCount:C,pendingMessages:P||0})}catch(g){console.error("Error fetching instructor data:",g)}finally{c(!1)}})()},[]),d?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("section",{className:"bg-gradient-to-r from-primary/90 to-primary rounded-xl p-8 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold",children:["ようこそ、",(e==null?void 0:e.name)||"講師"," さん"]}),s.jsx("p",{className:"mt-2 text-white/90",children:"レッスンの管理やスケジュールの確認を行えます。"})]}),s.jsxs("div",{className:"hidden sm:flex space-x-3",children:[s.jsx(B,{asChild:!0,variant:"outline",className:"bg-white/10 text-white border-white/20 hover:bg-white/20",children:s.jsx(M,{to:"/instructor/lessons",children:"レッスン一覧"})}),s.jsx(B,{asChild:!0,className:"bg-white text-primary hover:bg-white/90",children:s.jsxs(M,{to:"/instructor/lessons/create",children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"新しいレッスンを作成"]})})]})]})}),!h&&s.jsx("section",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(At,{className:"w-8 h-8 text-yellow-500 mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"プレミアムプランへアップグレード"}),s.jsx("p",{className:"text-gray-600",children:"検索結果の上位表示や仲介手数料0円などの特典が得られます。"})]})]}),s.jsx(B,{asChild:!0,children:s.jsx(M,{to:"/instructor/premium",children:"詳細を見る"})})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-3 mr-4",children:s.jsx(Xf,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"公開中のレッスン"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.totalLessons})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-3 mr-4",children:s.jsx(Ss,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"これまでの予約数"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.totalBookings})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-blue-100 p-3 mr-4",children:s.jsx(Uv,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"予定レッスン数"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.upcomingLessons})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-yellow-100 p-3 mr-4",children:s.jsx(Ni,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"平均評価"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.reviewCount>0?`${r.totalRating.toFixed(1)} (${r.reviewCount})`:"レビューなし"})]})]})})]}),s.jsxs("div",{className:"flex sm:hidden space-x-3",children:[s.jsx(B,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsx(M,{to:"/instructor/lessons",children:"レッスン一覧"})}),s.jsx(B,{asChild:!0,className:"flex-1",children:s.jsxs(M,{to:"/instructor/lessons/create",children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"新規レッスン"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"近日開催のレッスン"}),s.jsxs(M,{to:"/instructor/lessons",className:"text-primary text-sm flex items-center hover:underline",children:["すべて見る",s.jsx(ks,{className:"h-4 w-4 ml-1"})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:a.length>0?a.map(u=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs(M,{to:`/instructor/lessons/${u.id}/edit`,className:"block",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:u.lesson_title}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),Be(u.date_time_start)]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),new Date(u.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Ss,{className:"h-4 w-4 mr-1 text-gray-400"}),u.current_participants_count,"/",u.capacity]})]})]})},u.id)):s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("p",{children:"予定されているレッスンはありません"}),s.jsx(B,{asChild:!0,className:"mt-4",children:s.jsx(M,{to:"/instructor/lessons/create",children:"レッスンを作成する"})})]})})]}),s.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"最近の予約"}),s.jsxs(M,{to:"/instructor/bookings",className:"text-primary text-sm flex items-center hover:underline",children:["すべて見る",s.jsx(ks,{className:"h-4 w-4 ml-1"})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:l.length>0?l.map(u=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsx(M,{to:"/instructor/bookings",className:"block",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:u.user.profile_image_url||"/placeholder-avatar.jpg",alt:u.user.name,className:"w-10 h-10 rounded-full mr-3 object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:u.user.name}),s.jsx("p",{className:"text-sm text-gray-600",children:u.lesson.lesson_title})]}),s.jsxs("div",{className:"ml-auto text-right",children:[s.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${u.status==="confirmed"?"bg-green-100 text-green-800":u.status==="pending"?"bg-yellow-100 text-yellow-800":u.status==="canceled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:u.status==="confirmed"?"確定":u.status==="pending"?"保留中":u.status==="canceled"?"キャンセル":u.status==="completed"?"完了":u.status}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Be(u.created_at)})]})]})})},u.id)):s.jsx("div",{className:"p-8 text-center text-gray-500",children:s.jsx("p",{children:"予約はまだありません"})})})]})]}),s.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-3 gap-5",children:[s.jsx(M,{to:"/instructor/chat",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-blue-100 p-4 mr-4",children:s.jsx(ps,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"メッセージ"}),r.pendingMessages>0&&s.jsxs("p",{className:"text-sm text-primary",children:[r.pendingMessages,"件の未読メッセージ"]})]})]})}),s.jsx(M,{to:"/instructor/profile",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-4 mr-4",children:s.jsx(ti,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"プロフィール"}),s.jsx("p",{className:"text-sm text-gray-500",children:"プロフィールを編集"})]})]})}),s.jsx(M,{to:"/instructor/lessons/create",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-4 mr-4",children:s.jsx(Ca,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"新規レッスン"}),s.jsx("p",{className:"text-sm text-gray-500",children:"新しいレッスンを作成"})]})]})})]})]})},aj=()=>{const{toast:e}=Wt(),[t,r]=y.useState(null),[n,a]=y.useState(!0),[i,l]=y.useState(!1),[o,d]=y.useState({name:"",email:"",username:"",birth_date:"",gender:"",phone_number:"",instructor_specialties:[],instructor_bio:"",instructor_experience:"",instructor_education:"",instructor_certifications:"",instructor_availability:"",profile_image_url:""}),[c,h]=y.useState(""),[f,u]=y.useState("");y.useEffect(()=>{(async()=>{try{a(!0);const{data:{user:j}}=await E.auth.getUser();if(!j)return;const{data:S,error:b}=await E.from("instructor_profiles").select("*").eq("id",j.id).single();if(b&&b.code!=="PGRST116")throw b;const N=S||{};r(N),d({name:N.name||"",email:N.email||"",username:N.username||"",birth_date:N.birth_date||"",gender:N.gender||"",phone_number:N.phone_number||"",instructor_specialties:N.instructor_specialties||[],instructor_bio:N.instructor_bio||"",instructor_experience:N.instructor_experience||"",instructor_education:N.instructor_education||"",instructor_certifications:N.instructor_certifications||"",instructor_availability:N.instructor_availability||"",profile_image_url:N.profile_image_url||""})}catch(j){console.error("Error fetching profile:",j)}finally{a(!1)}})(),localStorage.getItem("profileUpdated")==="true"&&(e({title:"プロフィール更新完了",description:"プロフィール情報が正常に更新されました",variant:"default"}),localStorage.removeItem("profileUpdated"))},[e]);const g=x=>{const{name:_,value:j}=x.target;d(S=>({...S,[_]:j}))},w=x=>{const{value:_,checked:j}=x.target;d(S=>({...S,instructor_specialties:j?[...S.instructor_specialties,_]:S.instructor_specialties.filter(b=>b!==_)}))},m=async x=>{x.preventDefault();try{l(!0),h(""),u("");const{data:{user:_}}=await E.auth.getUser();if(!_)throw new Error("ユーザーが認証されていません");const{error:j}=await E.from("instructor_profiles").select("id").eq("id",_.id).single();let S;if(j&&j.code==="PGRST116"){const b={id:_.id,name:o.name,email:o.email||_.email,username:o.username,birth_date:o.birth_date,gender:o.gender,phone_number:o.phone_number,instructor_specialties:o.instructor_specialties,instructor_bio:o.instructor_bio,instructor_experience:o.instructor_experience,instructor_education:o.instructor_education,instructor_certifications:o.instructor_certifications,instructor_availability:o.instructor_availability,profile_image_url:o.profile_image_url,is_profile_completed:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:N}=await E.from("instructor_profiles").insert(b);S=N}else{const b={name:o.name,email:o.email||_.email,username:o.username,birth_date:o.birth_date,gender:o.gender,phone_number:o.phone_number,instructor_specialties:o.instructor_specialties,instructor_bio:o.instructor_bio,instructor_experience:o.instructor_experience,instructor_education:o.instructor_education,instructor_certifications:o.instructor_certifications,instructor_availability:o.instructor_availability,is_profile_completed:!0,updated_at:new Date().toISOString()},{error:N}=await E.from("instructor_profiles").update(b).eq("id",_.id);S=N}if(S)throw S;h("プロフィールが更新されました"),localStorage.setItem("profileUpdated","true"),window.location.reload()}catch(_){console.error("Error updating profile:",_),u(_.message||"プロフィールの更新に失敗しました")}finally{l(!1)}},p=async x=>{const _=x.target.files;if(!(!_||_.length===0))try{l(!0);const{data:{user:j}}=await E.auth.getUser();if(!j)throw new Error("ユーザーが認証されていません");const S=_[0],b=S.name.split(".").pop(),C=`instructor_profile_images/${`${j.id}_${Date.now()}.${b}`}`,{error:P}=await E.storage.from("user_uploads").upload(C,S);if(P)throw P;const{data:{publicUrl:L}}=E.storage.from("user_uploads").getPublicUrl(C),{error:$}=await E.from("instructor_profiles").select("id").eq("id",j.id).single();let I;if($&&$.code==="PGRST116"){const F={id:j.id,name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||j.email,profile_image_url:L,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:A}=await E.from("instructor_profiles").insert(F);I=A}else{const F={profile_image_url:L,updated_at:new Date().toISOString()},{error:A}=await E.from("instructor_profiles").update(F).eq("id",j.id);I=A}if(I)throw I;d(F=>({...F,profile_image_url:L})),r(F=>({...F,profile_image_url:L,updated_at:new Date().toISOString()})),h("プロフィール画像がアップロードされました"),e({title:"画像アップロード完了",description:"プロフィール画像が正常に更新されました",variant:"default"})}catch(j){console.error("Error uploading image:",j),u(j.message||"画像アップロードに失敗しました")}finally{l(!1)}},v=async()=>{try{const{error:x}=await E.auth.signOut();if(x)throw x;window.location.href="/login"}catch(x){console.error("Error signing out:",x)}};return n?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"講師プロフィール設定"}),c&&s.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:c}),f&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:f}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:gap-12",children:[s.jsx("div",{className:"md:w-1/3 mb-8 md:mb-0",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4 relative w-32 h-32 mx-auto",children:[o.profile_image_url?s.jsx("img",{src:o.profile_image_url,alt:"プロフィール画像",className:"w-full h-full object-cover rounded-full"}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-5xl",children:o.name?o.name.charAt(0).toUpperCase():"I"})}),s.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full cursor-pointer",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("input",{type:"file",id:"profile-image",className:"hidden",accept:"image/*",onChange:p,disabled:i})]})]}),s.jsx("h2",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)||"講師"}),s.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email}),s.jsx("button",{onClick:v,className:"mt-6 text-red-600 hover:text-red-800 text-sm hover:underline",type:"button",children:"ログアウト"})]})}),s.jsx("div",{className:"md:w-2/3",children:s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["お名前 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:o.name,onChange:g,required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),s.jsx("input",{type:"email",name:"email",value:o.email,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"メールアドレスの変更はできません"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"電話番号"}),s.jsx("input",{type:"tel",name:"phone_number",value:o.phone_number,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"生年月日"}),s.jsx("input",{type:"date",name:"birth_date",value:o.birth_date,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"性別"}),s.jsxs("select",{name:"gender",value:o.gender,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"",children:"選択してください"}),s.jsx("option",{value:"male",children:"男性"}),s.jsx("option",{value:"female",children:"女性"}),s.jsx("option",{value:"other",children:"その他"}),s.jsx("option",{value:"prefer_not_to_say",children:"回答しない"})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["自己紹介 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"instructor_bio",value:o.instructor_bio,onChange:g,required:!0,rows:4,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"生徒に伝わる自己紹介文を書いてください"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"経験"}),s.jsx("textarea",{name:"instructor_experience",value:o.instructor_experience,onChange:g,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"関連する指導経験・実務経験があれば記入してください"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"学歴・経歴"}),s.jsx("textarea",{name:"instructor_education",value:o.instructor_education,onChange:g,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"最終学歴や関連する教育背景を記入してください"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"資格・認定"}),s.jsx("textarea",{name:"instructor_certifications",value:o.instructor_certifications,onChange:g,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"取得している資格や認定があれば記入してください"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"利用可能時間"}),s.jsx("textarea",{name:"instructor_availability",value:o.instructor_availability,onChange:g,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：平日18時以降、土日終日など"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["専門分野（複数選択可） ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["音楽","料理","語学","クラフト","ダンス","テクノロジー","アート","スポーツ","ビジネス","教養","アウトドア","ウェルネス"].map(x=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`specialty-${x}`,value:x,checked:o.instructor_specialties.includes(x),onChange:w,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),s.jsx("label",{htmlFor:`specialty-${x}`,className:"ml-2 text-sm text-gray-700",children:x})]},x))})]})]}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{type:"submit",disabled:i,className:`w-full md:w-auto px-6 py-3 bg-primary text-white rounded-md font-medium ${i?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:i?"更新中...":"プロフィールを更新する"})})]})})]})})})]})};var ij=ih.useId||(()=>{}),lj=0;function zp(e){const[t,r]=y.useState(ij());return On(()=>{r(n=>n??String(lj++))},[e]),t?`radix-${t}`:""}var oj=y.createContext(void 0);function Bp(e){const t=y.useContext(oj);return e||t||"ltr"}var wl="rovingFocusGroup.onEntryFocus",cj={bubbles:!1,cancelable:!0},Ri="RovingFocusGroup",[Mo,qp,dj]=jf(Ri),[uj,Vp]=_i(Ri,[dj]),[hj,mj]=uj(Ri),Wp=y.forwardRef((e,t)=>s.jsx(Mo.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Mo.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(fj,{...e,ref:t})})}));Wp.displayName=Ri;var fj=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:d,onEntryFocus:c,preventScrollOnEntryFocus:h=!1,...f}=e,u=y.useRef(null),g=gr(t,u),w=Bp(i),[m=null,p]=Mc({prop:l,defaultProp:o,onChange:d}),[v,x]=y.useState(!1),_=Et(c),j=qp(r),S=y.useRef(!1),[b,N]=y.useState(0);return y.useEffect(()=>{const C=u.current;if(C)return C.addEventListener(wl,_),()=>C.removeEventListener(wl,_)},[_]),s.jsx(hj,{scope:r,orientation:n,dir:w,loop:a,currentTabStopId:m,onItemFocus:y.useCallback(C=>p(C),[p]),onItemShiftTab:y.useCallback(()=>x(!0),[]),onFocusableItemAdd:y.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:y.useCallback(()=>N(C=>C-1),[]),children:s.jsx(Oe.div,{tabIndex:v||b===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:me(e.onMouseDown,()=>{S.current=!0}),onFocus:me(e.onFocus,C=>{const P=!S.current;if(C.target===C.currentTarget&&P&&!v){const L=new CustomEvent(wl,cj);if(C.currentTarget.dispatchEvent(L),!L.defaultPrevented){const $=j().filter(V=>V.focusable),I=$.find(V=>V.active),F=$.find(V=>V.id===m),q=[I,F,...$].filter(Boolean).map(V=>V.ref.current);Gp(q,h)}}S.current=!1}),onBlur:me(e.onBlur,()=>x(!1))})})}),Hp="RovingFocusGroupItem",Kp=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...l}=e,o=zp(),d=i||o,c=mj(Hp,r),h=c.currentTabStopId===d,f=qp(r),{onFocusableItemAdd:u,onFocusableItemRemove:g}=c;return y.useEffect(()=>{if(n)return u(),()=>g()},[n,u,g]),s.jsx(Mo.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(Oe.span,{tabIndex:h?0:-1,"data-orientation":c.orientation,...l,ref:t,onMouseDown:me(e.onMouseDown,w=>{n?c.onItemFocus(d):w.preventDefault()}),onFocus:me(e.onFocus,()=>c.onItemFocus(d)),onKeyDown:me(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){c.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const m=gj(w,c.orientation,c.dir);if(m!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let v=f().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(w.currentTarget);v=c.loop?yj(v,x+1):v.slice(x+1)}setTimeout(()=>Gp(v))}})})})});Kp.displayName=Hp;var pj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xj(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function gj(e,t,r){const n=xj(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return pj[n]}function Gp(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function yj(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var vj=Wp,wj=Kp,sd="Tabs",[_j,Qj]=_i(sd,[Vp]),Jp=Vp(),[jj,nd]=_j(sd),Qp=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:d="automatic",...c}=e,h=Bp(o),[f,u]=Mc({prop:n,onChange:a,defaultProp:i});return s.jsx(jj,{scope:r,baseId:zp(),value:f,onValueChange:u,orientation:l,dir:h,activationMode:d,children:s.jsx(Oe.div,{dir:h,"data-orientation":l,...c,ref:t})})});Qp.displayName=sd;var Yp="TabsList",Xp=y.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=nd(Yp,r),l=Jp(r);return s.jsx(vj,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Oe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Xp.displayName=Yp;var Zp="TabsTrigger",ex=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,l=nd(Zp,r),o=Jp(r),d=sx(l.baseId,n),c=nx(l.baseId,n),h=n===l.value;return s.jsx(wj,{asChild:!0,...o,focusable:!a,active:h,children:s.jsx(Oe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":c,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:t,onMouseDown:me(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?l.onValueChange(n):f.preventDefault()}),onKeyDown:me(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&l.onValueChange(n)}),onFocus:me(e.onFocus,()=>{const f=l.activationMode!=="manual";!h&&!a&&f&&l.onValueChange(n)})})})});ex.displayName=Zp;var tx="TabsContent",rx=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...l}=e,o=nd(tx,r),d=sx(o.baseId,n),c=nx(o.baseId,n),h=n===o.value,f=y.useRef(h);return y.useEffect(()=>{const u=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(u)},[]),s.jsx(Ac,{present:a||h,children:({present:u})=>s.jsx(Oe.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":d,hidden:!u,id:c,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:u&&i})})});rx.displayName=tx;function sx(e,t){return`${e}-trigger-${t}`}function nx(e,t){return`${e}-content-${t}`}var bj=Qp,ax=Xp,ix=ex,lx=rx;const Di=bj,Wn=y.forwardRef(({className:e,...t},r)=>s.jsx(ax,{ref:r,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Wn.displayName=ax.displayName;const be=y.forwardRef(({className:e,...t},r)=>s.jsx(ix,{ref:r,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));be.displayName=ix.displayName;const Ne=y.forwardRef(({className:e,...t},r)=>s.jsx(lx,{ref:r,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ne.displayName=lx.displayName;const Nj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState("all"),[d,c]=y.useState("all"),[h,f]=y.useState([]),[u,g]=y.useState("upcoming");y.useEffect(()=>{w()},[u,d]);const w=async()=>{n(!0),console.log("Fetching lessons with tab:",u,"and status filter:",d);try{const{data:{user:x}}=await E.auth.getUser();if(!x){n(!1);return}let _=E.from("lessons").select("*").eq("instructor_id",x.id);if(u==="upcoming"){const b=new Date;b.setHours(0,0,0,0),_=_.gte("date_time_start",b.toISOString()).order("date_time_start",{ascending:!0}),d==="all"&&(_=_.not("status","eq","draft"))}else if(u==="past"){const b=new Date;b.setDate(b.getDate()-1),b.setHours(23,59,59,999),_=_.lte("date_time_end",b.toISOString()).order("date_time_start",{ascending:!1}),d==="all"&&(_=_.not("status","eq","draft"))}else u==="drafts"&&(_=_.eq("status","draft").order("updated_at",{ascending:!1}));u!=="drafts"&&d!=="all"&&(_=_.eq("status",d)),console.log("Fetching lessons with active tab:",u);const{data:j,error:S}=await _;if(S){console.error("Error fetching lessons:",S);return}if(j){console.log("Found lessons:",j.length,j),t(j);const b=[...new Set(j.map(N=>N.category))];f(b.filter(Boolean))}}catch(x){console.error("Error:",x)}finally{n(!1)}},m=e.filter(x=>{const _=x.lesson_title.toLowerCase().includes(a.toLowerCase())||x.lesson_description&&x.lesson_description.toLowerCase().includes(a.toLowerCase()),j=l==="all"||x.category===l;return _&&j});console.log("Filtered lessons:",m.length);const p=async(x,_)=>{try{const{data:j,error:S}=await E.from("lessons").select("current_participants_count").eq("id",x).single();if(S){console.error("Error fetching lesson:",S),alert("レッスン情報の取得に失敗しました。");return}if(_==="cancelled"&&j.current_participants_count>0){alert("このレッスンには予約が入っているためキャンセルできません。先に予約者と調整してください。");return}const{error:b}=await E.from("lessons").update({status:_,updated_at:new Date().toISOString()}).eq("id",x);if(b){console.error("Error updating lesson status:",b),alert("レッスンステータスの更新に失敗しました。");return}t(e.map(N=>N.id===x?{...N,status:_}:N)),alert(_==="published"?"レッスンを公開しました。":_==="cancelled"?"レッスンを非表示にしました。":"レッスンを下書きに変更しました。")}catch(j){console.error("Error:",j),alert("エラーが発生しました。")}},v=async(x,_)=>{if(_>0){alert("このレッスンには予約が入っているため削除できません。キャンセル処理をご利用ください。");return}if(window.confirm("このレッスンを削除してもよろしいですか？この操作は元に戻せません。"))try{const{data:j,error:S}=await E.from("bookings").select("id").eq("lesson_id",x);if(S){console.error("Error checking bookings:",S),alert("予約情報の確認中にエラーが発生しました。");return}if(j&&j.length>0){alert("このレッスンには予約が入っているため削除できません。キャンセル処理をご利用ください。");return}const{error:b}=await E.from("lessons").delete().eq("id",x);if(b){console.error("Error deleting lesson:",b),alert("レッスンの削除に失敗しました。");return}t(e.filter(N=>N.id!==x)),alert("レッスンが削除されました。")}catch(j){console.error("Error:",j),alert("予期せぬエラーが発生しました。")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"レッスン管理"}),s.jsx(B,{asChild:!0,children:s.jsxs(M,{to:"/instructor/lessons/create",children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"新しいレッスンを作成"]})})]}),s.jsxs(Di,{defaultValue:"upcoming",onValueChange:g,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsxs(Wn,{children:[s.jsx(be,{value:"upcoming",children:"予定されたレッスン"}),s.jsx(be,{value:"past",children:"過去のレッスン"}),s.jsx(be,{value:"drafts",children:"下書き"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"レッスンを検索...",className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 w-full sm:w-auto",value:a,onChange:x=>i(x.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(tp,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsxs("select",{className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 appearance-none bg-white",value:l,onChange:x=>o(x.target.value),children:[s.jsx("option",{value:"all",children:"すべてのカテゴリ"}),h.map(x=>s.jsx("option",{value:x,children:x},x))]})]}),u!=="drafts"&&s.jsxs("select",{className:"px-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 appearance-none bg-white",value:d,onChange:x=>c(x.target.value),children:[s.jsx("option",{value:"all",children:"すべてのステータス"}),s.jsx("option",{value:"published",children:"公開中"}),s.jsx("option",{value:"cancelled",children:"キャンセル済み"})]})]})]}),s.jsx(Ne,{value:"upcoming",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン名"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"日時"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"予約状況"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"ステータス"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:"font-medium text-gray-900 hover:text-primary",children:x.lesson_title}),s.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:x.category})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(x.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:new Date(x.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ss,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[x.current_participants_count,"/",x.capacity]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2",children:s.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${x.current_participants_count/x.capacity*100}%`}})})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                            ${x.status==="published"?"bg-green-100 text-green-800":x.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:x.status==="published"?"公開中":x.status==="draft"?"下書き":"キャンセル"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:"text-gray-400 hover:text-primary",children:s.jsx(ol,{className:"h-5 w-5"})}),x.status==="published"?s.jsx("button",{onClick:()=>p(x.id,"cancelled"),className:"text-gray-400 hover:text-red-500",disabled:x.current_participants_count>0,title:x.current_participants_count>0?"予約があるため非表示にできません":"レッスンを非表示にする",children:s.jsx(Iv,{className:"h-5 w-5"})}):x.status==="cancelled"||x.status==="draft"?s.jsx("button",{onClick:()=>p(x.id,"published"),className:"text-gray-400 hover:text-green-500",children:s.jsx(Pu,{className:"h-5 w-5"})}):null,s.jsx("button",{onClick:()=>v(x.id,x.current_participants_count),className:`text-gray-400 hover:text-red-500 ${x.current_participants_count>0?"cursor-not-allowed opacity-50":""}`,title:x.current_participants_count>0?"予約があるため削除できません":"レッスンを削除",disabled:x.current_participants_count>0,children:s.jsx(cl,{className:"h-5 w-5"})})]})})]},x.id))})]})})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"予定されているレッスンはありません"}),s.jsx(B,{asChild:!0,children:s.jsx(M,{to:"/instructor/lessons/create",children:"新しいレッスンを作成する"})})]})}),s.jsx(Ne,{value:"past",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン名"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"日時"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"参加者"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"ステータス"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:"font-medium text-gray-900 hover:text-primary",children:x.lesson_title}),s.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:x.category})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(x.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:new Date(x.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ss,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[x.current_participants_count,"/",x.capacity]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                            ${x.status==="published"?"bg-green-100 text-green-800":x.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:x.status==="published"?"公開中":x.status==="draft"?"下書き":x.status==="cancelled"?"キャンセル":"完了"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:`text-gray-400 hover:text-primary ${x.current_participants_count>0?"cursor-not-allowed opacity-50":""}`,title:x.current_participants_count>0?"予約があるため編集できません":"レッスンを編集",children:s.jsx(ol,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>v(x.id,x.current_participants_count),className:`text-gray-400 hover:text-red-500 ${x.current_participants_count>0?"cursor-not-allowed opacity-50":""}`,title:x.current_participants_count>0?"予約があるため削除できません":"レッスンを削除",children:s.jsx(cl,{className:"h-5 w-5"})})]})})]},x.id))})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:"過去のレッスンはありません"})})}),s.jsx(Ne,{value:"drafts",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン名"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"カテゴリ"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"最終更新日"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:"font-medium text-gray-900 hover:text-primary",children:x.lesson_title||"(タイトルなし)"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:x.category||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:Be(x.updated_at)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(M,{to:`/instructor/lessons/${x.id}/edit`,className:"text-gray-400 hover:text-primary",children:s.jsx(ol,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>p(x.id,"published"),className:"text-gray-400 hover:text-green-500",children:s.jsx(Pu,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>v(x.id,0),className:"text-gray-400 hover:text-red-500",title:"レッスンを削除",children:s.jsx(cl,{className:"h-5 w-5"})})]})})]},x.id))})]})})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"下書きのレッスンはありません"}),s.jsx(B,{asChild:!0,children:s.jsx(M,{to:"/instructor/lessons/create",children:"新しいレッスンを作成する"})})]})})]})]})},Ce=[];for(let e=0;e<256;++e)Ce.push((e+256).toString(16).slice(1));function kj(e,t=0){return(Ce[e[t+0]]+Ce[e[t+1]]+Ce[e[t+2]]+Ce[e[t+3]]+"-"+Ce[e[t+4]]+Ce[e[t+5]]+"-"+Ce[e[t+6]]+Ce[e[t+7]]+"-"+Ce[e[t+8]]+Ce[e[t+9]]+"-"+Ce[e[t+10]]+Ce[e[t+11]]+Ce[e[t+12]]+Ce[e[t+13]]+Ce[e[t+14]]+Ce[e[t+15]]).toLowerCase()}let _l;const Sj=new Uint8Array(16);function Cj(){if(!_l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_l=crypto.getRandomValues.bind(crypto)}return _l(Sj)}const Ej=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gu={randomUUID:Ej};function Tj(e,t,r){var a;if(Gu.randomUUID&&!e)return Gu.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??Cj();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,kj(n)}const Pj=()=>{const e=ut(),[t,r]=y.useState("basic"),[n,a]=y.useState(!1),[i,l]=y.useState(!1),[o,d]=y.useState([]),[c,h]=y.useState({lesson_title:"",lesson_catchphrase:"",lesson_description:"",category:"",sub_categories:[],difficulty_level:"beginner",price:"",duration:60,capacity:10,location_name:"",location_type:"online",lesson_type:"one_time",is_free_trial:!1,lesson_image_url:[],date_time_start:"",date_time_end:"",booking_deadline:"",status:"draft",materials_needed:"",lesson_goals:"",lesson_outline:"",monthly_plans:[],course_sessions:1}),[f,u]=y.useState([]),[g,w]=y.useState({});y.useEffect(()=>{if(c.monthly_plans.length===0&&h(N=>({...N,monthly_plans:[{name:"",price:"",frequency:"",lesson_duration:"60",description:""}]})),!c.date_time_start){const N=new Date,C=N.getFullYear(),P=String(N.getMonth()+1).padStart(2,"0"),L=String(N.getDate()).padStart(2,"0"),$=String(N.getHours()).padStart(2,"0"),I=String(N.getMinutes()).padStart(2,"0"),F=`${C}-${P}-${L}T${$}:${I}`;h(A=>({...A,date_time_start:F}))}},[]);const m=N=>{const{name:C,value:P}=N.target;if(C==="date_time_start"&&P){const L=new Date(P),$=c.duration,I=new Date(L.getTime()+$*60*1e3),F=I.getFullYear(),A=String(I.getMonth()+1).padStart(2,"0"),q=String(I.getDate()).padStart(2,"0"),V=String(I.getHours()).padStart(2,"0"),H=String(I.getMinutes()).padStart(2,"0"),k=`${F}-${A}-${q}T${V}:${H}`;h(T=>({...T,[C]:P,date_time_end:k}))}else if(C==="duration"&&c.date_time_start){const L=new Date(c.date_time_start),$=parseInt(P,10),I=new Date(L.getTime()+$*60*1e3),F=I.getFullYear(),A=String(I.getMonth()+1).padStart(2,"0"),q=String(I.getDate()).padStart(2,"0"),V=String(I.getHours()).padStart(2,"0"),H=String(I.getMinutes()).padStart(2,"0"),k=`${F}-${A}-${q}T${V}:${H}`;h(T=>({...T,[C]:parseInt(P,10),date_time_end:k}))}else h({...c,[C]:P});if(C==="category"){h($=>({...$,[C]:P,sub_categories:[]}));const L=P;L&&Cr[L]?u(Cr[L]):u([])}g[C]&&w({...g,[C]:""})},p=N=>{h(C=>{const P=C.sub_categories.includes(N)?C.sub_categories.filter(L=>L!==N):[...C.sub_categories,N];return{...C,sub_categories:P}})},v=async N=>{const C=N.target.files;if(!(!C||C.length===0))try{l(!0);const{data:{user:P}}=await E.auth.getUser();if(!P)throw new Error("ユーザーが認証されていません");await E.storage.createBucket("user_uploads",{public:!0});const L=C[0],$=L.name.split(".").pop(),F=`lesson_images/${`${P.id}_${Date.now()}.${$}`}`,{error:A}=await E.storage.from("user_uploads").upload(F,L);if(A)throw A;const{data:{publicUrl:q}}=E.storage.from("user_uploads").getPublicUrl(F);if(c.lesson_image_url.length>=3)throw new Error("画像は最大3枚までアップロードできます");const V=[...c.lesson_image_url,q];h({...c,lesson_image_url:V});const H=[...o,URL.createObjectURL(L)];d(H)}catch(P){console.error("Error uploading image:",P),alert("画像のアップロードに失敗しました: "+P.message)}finally{l(!1)}},x=N=>{const C=[...c.lesson_image_url];C.splice(N,1);const P=[...o];P.splice(N,1),h({...c,lesson_image_url:C}),d(P)},_=()=>{const N={};return c.lesson_title.trim()?c.lesson_title.length>25&&(N.lesson_title="レッスン名は25文字以内で入力してください"):N.lesson_title="レッスン名を入力してください",c.lesson_catchphrase.trim()?c.lesson_catchphrase.length>50&&(N.lesson_catchphrase="キャッチコピーは50文字以内で入力してください"):N.lesson_catchphrase="キャッチコピーを入力してください",c.lesson_description.trim()||(N.lesson_description="レッスンの説明を入力してください"),c.category.trim()||(N.category="カテゴリを選択してください"),c.lesson_type!=="monthly"?c.price.trim()?(isNaN(Number(c.price))||Number(c.price)<0)&&(N.price="有効な価格を入力してください"):N.price="価格を入力してください":c.monthly_plans.length===0?N.monthly_plans="少なくとも1つのプランを追加してください":c.monthly_plans.some(P=>!P.name.trim()||!P.price.trim()||!P.frequency.trim()||!P.lesson_duration.trim())&&(N.monthly_plans="すべてのプラン情報を入力してください"),c.lesson_type!=="monthly"&&(c.duration<=0&&(N.duration="有効な時間を入力してください"),c.capacity<=0&&(N.capacity="有効な定員数を入力してください")),c.lesson_type==="course"&&c.course_sessions<1&&(N.course_sessions="有効な回数を入力してください"),c.date_time_start.trim()||(N.date_time_start="開始日時を選択してください"),c.date_time_end.trim()?new Date(c.date_time_end)<=new Date(c.date_time_start)&&(N.date_time_end="終了日時は開始日時より後である必要があります"):N.date_time_end="終了日時を選択してください",c.booking_deadline&&c.date_time_start&&new Date(c.booking_deadline)>new Date(c.date_time_start)&&(N.booking_deadline="予約締め切り時間はレッスン開始時間より前である必要があります"),c.location_name.trim()||(N.location_name="場所を入力してください"),w(N),Object.keys(N).length===0},j=async()=>{if(!c.lesson_title.trim()){w({lesson_title:"レッスン名を入力してください"}),r("basic");return}await b("draft")},S=async()=>{if(!_()){g.lesson_title||g.lesson_description||g.category?r("basic"):g.price||g.duration||g.capacity?r("details"):g.date_time_start||g.date_time_end?r("schedule"):g.location_name&&r("location");return}await b("published")},b=async N=>{var C;try{a(!0);const{data:{user:P}}=await E.auth.getUser();if(!P)throw new Error("ユーザーが認証されていません");const L=Tj(),$=new Date().toISOString(),I=c.sub_categories.length>0&&((C=f.find(H=>H.id===c.sub_categories[0]))==null?void 0:C.name)||"";let F=c.date_time_start,A=c.date_time_end;if(N==="published"&&(F||(F=$),!A)){const H=new Date(F);let k=c.duration;if(c.lesson_type==="monthly"&&c.monthly_plans.length>0){const fe=c.monthly_plans[0];k=Number(fe.lesson_duration)||60}const T=new Date(H.getTime()+k*60*1e3),R=T.getFullYear(),O=String(T.getMonth()+1).padStart(2,"0"),z=String(T.getDate()).padStart(2,"0"),Q=String(T.getHours()).padStart(2,"0"),Z=String(T.getMinutes()).padStart(2,"0"),we=String(T.getSeconds()).padStart(2,"0");A=`${R}-${O}-${z}T${Q}:${Z}:${we}`}let q={id:L,instructor_id:P.id,lesson_title:c.lesson_title,lesson_catchphrase:c.lesson_catchphrase,lesson_description:c.lesson_description,category:c.category,sub_category:I,difficulty_level:c.difficulty_level,location_name:c.location_name,location_type:c.location_type,lesson_type:c.lesson_type,is_free_trial:c.is_free_trial,lesson_image_url:c.lesson_image_url,date_time_start:F||null,date_time_end:A||null,booking_deadline:c.booking_deadline||null,status:N,materials_needed:c.materials_needed,lesson_goals:c.lesson_goals,lesson_outline:c.lesson_outline,current_participants_count:0,created_at:$,updated_at:$};c.lesson_type==="monthly"?q={...q,price:0,monthly_plans:c.monthly_plans}:(q={...q,price:Number(c.price)||0,duration:c.duration,capacity:c.capacity,monthly_plans:null},c.lesson_type==="course"&&(q.course_sessions=c.course_sessions));const{error:V}=await E.from("lessons").insert(q);if(V)throw V;e(`/instructor/lessons/${L}/edit`,{state:{message:N==="published"?"レッスンが公開されました":"レッスンが下書き保存されました"}})}catch(P){console.error("Error saving lesson:",P),alert("レッスンの保存に失敗しました: "+P.message)}finally{a(!1)}};return s.jsxs("div",{className:"pb-12",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-gray-500 hover:text-gray-700",children:[s.jsx(qc,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:"戻る"})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"新しいレッスンを作成"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(B,{variant:"outline",onClick:j,disabled:n,children:"下書き保存"}),s.jsx(B,{onClick:S,disabled:n||i,children:n?"保存中...":"公開する"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:s.jsxs(Di,{defaultValue:"basic",value:t,onValueChange:r,children:[s.jsx("div",{className:"border-b",children:s.jsxs(Wn,{className:"w-full justify-start rounded-none bg-transparent border-b",children:[s.jsx(be,{value:"basic",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"基本情報"}),s.jsx(be,{value:"details",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"詳細情報"}),s.jsx(be,{value:"schedule",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"日程"}),s.jsx(be,{value:"location",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"場所"}),s.jsx(be,{value:"media",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"メディア"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx(Ne,{value:"basic",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["レッスン名 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_title",value:c.lesson_title,onChange:m,maxLength:25,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.lesson_title?"border-red-500":""}`,placeholder:"例：初心者向けギターレッスン"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"最大25文字"}),g.lesson_title&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.lesson_title})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["キャッチコピー ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_catchphrase",value:c.lesson_catchphrase,onChange:m,maxLength:50,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.lesson_catchphrase?"border-red-500":""}`,placeholder:"例：3ヶ月で弾き語りができるようになる！"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"最大50文字"}),g.lesson_catchphrase&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.lesson_catchphrase})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["レッスンの説明 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"lesson_description",value:c.lesson_description,onChange:m,rows:5,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.lesson_description?"border-red-500":""}`,placeholder:"レッスンの内容や目的を詳しく説明してください。"}),g.lesson_description&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.lesson_description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["カテゴリ ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:c.category,onChange:m,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.category?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:"カテゴリを選択"}),rd.map(N=>s.jsxs("option",{value:N.id,children:[N.icon," ",N.name]},N.id))]}),g.category&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.category})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"サブカテゴリ（複数選択可）"}),c.category?s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:f.map(N=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`subcategory-${N.id}`,checked:c.sub_categories.includes(N.id),onChange:()=>p(N.id),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsx("label",{htmlFor:`subcategory-${N.id}`,className:"ml-2 text-sm text-gray-700",children:N.name})]},N.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"カテゴリを選択するとサブカテゴリが表示されます"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"難易度"}),s.jsxs("select",{name:"difficulty_level",value:c.difficulty_level,onChange:m,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:"初級者向け"}),s.jsx("option",{value:"intermediate",children:"中級者向け"}),s.jsx("option",{value:"advanced",children:"上級者向け"}),s.jsx("option",{value:"all",children:"全レベル対応"})]})]})]})}),s.jsx(Ne,{value:"details",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["レッスン形態 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="monthly"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,lesson_type:"monthly"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"monthly",checked:c.lesson_type==="monthly",onChange:()=>h({...c,lesson_type:"monthly"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"月謝制"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"定期的に継続するレッスン。月単位で料金を設定します。"}),c.lesson_type==="monthly"&&s.jsx("div",{className:"mt-3 border-t pt-3",children:s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"体験無料設定"}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"checkbox",id:"is_free_trial",checked:c.is_free_trial,onChange:N=>h({...c,is_free_trial:N.target.checked}),className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("label",{htmlFor:"is_free_trial",className:"ml-2 text-sm text-gray-700",children:"体験レッスン無料"})]})]})})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="one_time"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,lesson_type:"one_time"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"one_time",checked:c.lesson_type==="one_time",onChange:()=>h({...c,lesson_type:"one_time"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"単発講座"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"1回で完結するレッスン。1回分の料金を設定します。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="course"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,lesson_type:"course"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"course",checked:c.lesson_type==="course",onChange:()=>h({...c,lesson_type:"course"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"コース講座"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"複数回のレッスンで構成されるコース。コース全体の料金を設定します。"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.lesson_type!=="monthly"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["価格（円） ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:c.price,onChange:m,min:"0",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.price?"border-red-500":""}`,placeholder:"例：3000"})]}),g.price&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.price}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:c.lesson_type==="course"?"コース全体の料金":"1回あたりの料金"})]}),c.lesson_type==="course"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["コース回数 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("input",{type:"number",name:"course_sessions",value:c.course_sessions,onChange:m,min:"1",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.course_sessions?"border-red-500":""}`,placeholder:"例：5"}),s.jsx("span",{className:"ml-2",children:"回"})]}),g.course_sessions&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.course_sessions})]}),c.lesson_type==="monthly"&&s.jsxs("div",{className:"col-span-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["プラン設定 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),c.monthly_plans.length===0&&s.jsx("div",{className:"mb-4 p-4 border rounded-lg bg-yellow-50 text-yellow-800",children:s.jsx("p",{children:"少なくとも1つのプランを追加してください"})}),c.monthly_plans.map((N,C)=>s.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プラン名"}),s.jsx("input",{type:"text",value:N.name,onChange:P=>{const L=[...c.monthly_plans];L[C].name=P.target.value,h({...c,monthly_plans:L})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：スタンダードプラン"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"月額料金（円）"}),s.jsx("input",{type:"number",value:N.price,onChange:P=>{const L=[...c.monthly_plans];L[C].price=P.target.value,h({...c,monthly_plans:L})},min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：10000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"頻度"}),s.jsx("input",{type:"text",value:N.frequency,onChange:P=>{const L=[...c.monthly_plans];L[C].frequency=P.target.value,h({...c,monthly_plans:L})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：週1回"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスン時間（分）"}),s.jsx("input",{type:"number",value:N.lesson_duration,onChange:P=>{const L=[...c.monthly_plans];L[C].lesson_duration=P.target.value,h({...c,monthly_plans:L})},min:"15",step:"15",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：60"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),s.jsx("textarea",{value:N.description,onChange:P=>{const L=[...c.monthly_plans];L[C].description=P.target.value,h({...c,monthly_plans:L})},rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：月4回のグループレッスンが含まれます"})]}),s.jsx("div",{className:"mt-2 flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>{const P=[...c.monthly_plans];P.splice(C,1),h({...c,monthly_plans:P})},className:"px-3 py-2 bg-red-50 text-red-500 rounded-md hover:bg-red-100",children:"削除"})})]},C)),s.jsx("button",{type:"button",onClick:()=>{h({...c,monthly_plans:[...c.monthly_plans,{name:"",price:"",frequency:"",lesson_duration:"",description:""}]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20",children:"プランを追加"}),g.monthly_plans&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:g.monthly_plans})]}),c.lesson_type!=="monthly"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["レッスン時間（分） ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"duration",value:c.duration,onChange:m,min:"15",step:"15",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.duration?"border-red-500":""}`,placeholder:"例：60"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"1回あたりのレッスン時間です"}),g.duration&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.duration})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["定員 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"capacity",value:c.capacity,onChange:m,min:"1",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.capacity?"border-red-500":""}`,placeholder:"例：10"})]}),g.capacity&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.capacity})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"必要な持ち物・準備"}),s.jsx("textarea",{name:"materials_needed",value:c.materials_needed,onChange:m,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：ノートパソコン、筆記用具、カメラなど"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"学習目標"}),s.jsx("textarea",{name:"lesson_goals",value:c.lesson_goals,onChange:m,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：このレッスンが終わると何ができるようになるか"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスンの流れ"}),s.jsx("textarea",{name:"lesson_outline",value:c.lesson_outline,onChange:m,rows:5,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：1. 導入（10分）、2. 基本的な操作の説明（20分）、3. 実践練習（20分）、4. 質疑応答（10分）"})]})]})}),s.jsx(Ne,{value:"schedule",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["開始日時 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"date_time_start",value:c.date_time_start||new Date().toISOString().slice(0,16),onChange:m,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.date_time_start?"border-red-500":""}`})]}),g.date_time_start&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.date_time_start})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["終了日時 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"date_time_end",value:c.date_time_end||(()=>{const N=new Date;return N.setMinutes(N.getMinutes()+c.duration),N.toISOString().slice(0,16)})(),onChange:m,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.date_time_end?"border-red-500":""}`})]}),g.date_time_end&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.date_time_end})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"予約締め切り時間"}),s.jsxs("div",{className:"relative",children:[s.jsx(vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"booking_deadline",value:c.booking_deadline,onChange:m,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.booking_deadline?"border-red-500":""}`})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"空欄の場合、開始直前まで予約可能"}),g.booking_deadline&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.booking_deadline})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsxs("div",{className:"flex",children:[s.jsx(np,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:"スケジュールのヒント"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"開始時間の15分前までに準備を済ませておくことをお勧めします"}),s.jsx("li",{children:"終了時間には質疑応答の時間も含めるようにしましょう"}),s.jsx("li",{children:"後でシリーズレッスンとして複数日程を追加することもできます"})]})]})]})})]})}),s.jsx(Ne,{value:"location",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["レッスンの形式 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="online"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,location_type:"online"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"online",checked:c.location_type==="online",onChange:()=>h({...c,location_type:"online"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"オンライン"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Zoom、Google Meet、Skypeなどのビデオ会議ツールを使用してレッスンを行います。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="in_person"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,location_type:"in_person"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"in_person",checked:c.location_type==="in_person",onChange:()=>h({...c,location_type:"in_person"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"対面"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"特定の場所に集まって対面でレッスンを行います。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="hybrid"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>h({...c,location_type:"hybrid"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"hybrid",checked:c.location_type==="hybrid",onChange:()=>h({...c,location_type:"hybrid"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"ハイブリッド"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"対面とオンラインの両方の選択肢を提供します。"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["場所の詳細 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Hc,{className:"absolute left-3 top-3 text-gray-400 h-4 w-4"}),s.jsx("textarea",{name:"location_name",value:c.location_name,onChange:m,rows:3,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${g.location_name?"border-red-500":""}`,placeholder:c.location_type==="online"?"使用するオンラインツール（Zoom、Google Meet、Skypeなど）と、レッスン前に共有するURLについての情報":c.location_type==="in_person"?"正確な住所、建物名、部屋番号、アクセス方法などの詳細":"対面とオンラインの両方の選択肢に関する詳細情報"})]}),g.location_name&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.location_name})]})]})}),s.jsx(Ne,{value:"media",children:s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスン画像（最大3枚まで）"}),s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.lesson_image_url.length<3&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 w-full flex flex-col items-center justify-center ${i?"opacity-50":"hover:border-primary/50 hover:bg-gray-50"}`,children:s.jsxs("div",{className:"relative cursor-pointer",children:[s.jsx("input",{type:"file",id:"lesson-image",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:v,disabled:i}),s.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(ap,{className:`h-8 w-8 ${i?"text-gray-400":"text-primary"}`}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-700",children:i?"画像をアップロード中...":"画像をアップロード"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF（最大 5MB）"})]})]})})}),c.lesson_image_url.length>0?c.lesson_image_url.map((N,C)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:o[C]||N,alt:`レッスン画像 ${C+1}`,className:"w-full h-48 object-cover rounded-md"}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[s.jsxs("span",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[C+1,"/",c.lesson_image_url.length]}),s.jsx("button",{type:"button",onClick:()=>x(C),className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},C)):s.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 rounded-md border text-gray-400 col-span-3",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(sp,{className:"h-10 w-10"}),s.jsx("p",{className:"mt-2 text-sm",children:"画像が未設定です"})]})})]}),s.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[c.lesson_image_url.length,"/3枚 アップロード済み"]})]})})})]})]})}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsx(B,{variant:"outline",onClick:()=>{const N=["basic","details","schedule","location","media"],C=N.indexOf(t);C>0&&r(N[C-1])},disabled:t==="basic",children:"前へ"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(B,{variant:"outline",onClick:j,disabled:n,children:"下書き保存"}),t==="media"?s.jsx(B,{onClick:S,disabled:n||i,children:n?"保存中...":"公開する"}):s.jsx(B,{onClick:()=>{const N=["basic","details","schedule","location","media"],C=N.indexOf(t);C<N.length-1&&r(N[C+1])},disabled:t==="media",children:"次へ"})]})]})]})},Lj=()=>{var H;const e=ut(),{id:t}=Bn(),n=(H=Br().state)==null?void 0:H.message,[a,i]=y.useState("basic"),[l,o]=y.useState(!0),[d,c]=y.useState(!1),[h,f]=y.useState(!1),[u,g]=y.useState([]),[w,m]=y.useState(null),[p,v]=y.useState({lesson_title:"",lesson_catchphrase:"",lesson_description:"",category:"",sub_category:"",sub_categories:[],difficulty_level:"beginner",price:"",duration:60,capacity:10,location_name:"",location_type:"online",lesson_type:"one_time",is_free_trial:!1,lesson_image_url:[],date_time_start:"",date_time_end:"",booking_deadline:"",status:"draft",materials_needed:"",lesson_goals:"",lesson_outline:"",monthly_plans:[],course_sessions:1}),[x,_]=y.useState([]),[j,S]=y.useState({}),[b,N]=y.useState(!1);y.useEffect(()=>{n&&Nt({description:n}),C()},[t,n]);const C=async()=>{if(t)try{o(!0);const{data:k,error:T}=await E.from("lessons").select("*").eq("id",t).maybeSingle();if(T)throw T;if(k){m(k);const R=k.category||"";let O="";if(R&&Cr[R]){_(Cr[R]);const we=Cr[R].find(fe=>fe.name===k.sub_category);we&&(O=we.id)}let z="",Q="",Z="";k.date_time_start&&(z=new Date(k.date_time_start).toISOString().slice(0,16)),k.date_time_end&&(Q=new Date(k.date_time_end).toISOString().slice(0,16)),k.booking_deadline&&(Z=new Date(k.booking_deadline).toISOString().slice(0,16)),v({lesson_title:k.lesson_title||"",lesson_catchphrase:k.lesson_catchphrase||"",lesson_description:k.lesson_description||"",category:k.category||"",sub_category:k.sub_category||"",sub_categories:O?[O]:[],difficulty_level:k.difficulty_level||"beginner",price:k.price.toString()||"",duration:k.duration||60,capacity:k.capacity||10,location_name:k.location_name||"",location_type:k.location_type||"online",lesson_type:k.lesson_type||"one_time",is_free_trial:k.is_free_trial||!1,lesson_image_url:k.lesson_image_url||[],date_time_start:z,date_time_end:Q,booking_deadline:Z,status:k.status||"draft",materials_needed:k.materials_needed||"",lesson_goals:k.lesson_goals||"",lesson_outline:k.lesson_outline||"",monthly_plans:k.monthly_plans||[],course_sessions:k.course_sessions||1}),N(k.current_participants_count>0)}}catch(k){console.error("Error fetching lesson:",k),Nt({variant:"destructive",title:"エラー",description:"レッスン情報の取得に失敗しました。"})}finally{o(!1)}},P=k=>{const{name:T,value:R}=k.target;if(T==="date_time_start"&&R){const O=new Date(R),z=p.duration,Q=new Date(O.getTime()+z*60*1e3),Z=Q.getFullYear(),we=String(Q.getMonth()+1).padStart(2,"0"),fe=String(Q.getDate()).padStart(2,"0"),tt=String(Q.getHours()).padStart(2,"0"),rt=String(Q.getMinutes()).padStart(2,"0"),As=`${Z}-${we}-${fe}T${tt}:${rt}`;v(Ms=>({...Ms,[T]:R,date_time_end:As}))}else if(T==="duration"&&p.date_time_start){const O=new Date(p.date_time_start),z=parseInt(R,10),Q=new Date(O.getTime()+z*60*1e3),Z=Q.getFullYear(),we=String(Q.getMonth()+1).padStart(2,"0"),fe=String(Q.getDate()).padStart(2,"0"),tt=String(Q.getHours()).padStart(2,"0"),rt=String(Q.getMinutes()).padStart(2,"0"),As=`${Z}-${we}-${fe}T${tt}:${rt}`;v(Ms=>({...Ms,[T]:parseInt(R,10),date_time_end:As}))}else v({...p,[T]:R});if(T==="category"){v(z=>({...z,[T]:R,sub_categories:[]}));const O=R;O&&Cr[O]?_(Cr[O]):_([])}j[T]&&S({...j,[T]:""})},L=k=>{v(T=>{const R=T.sub_categories.includes(k)?T.sub_categories.filter(O=>O!==k):[...T.sub_categories,k];return{...T,sub_categories:R}})},$=async k=>{const T=k.target.files;if(!(!T||T.length===0))try{f(!0);const{data:{user:R}}=await E.auth.getUser();if(!R)throw new Error("ユーザーが認証されていません");const O=T[0],z=O.name.split(".").pop(),Z=`lesson_images/${`${R.id}_${Date.now()}.${z}`}`,{error:we}=await E.storage.from("user_uploads").upload(Z,O);if(we)throw we;const{data:{publicUrl:fe}}=E.storage.from("user_uploads").getPublicUrl(Z);if(p.lesson_image_url.length>=3)throw new Error("画像は最大3枚までアップロードできます");const tt=[...p.lesson_image_url,fe];v({...p,lesson_image_url:tt});const rt=[...u,URL.createObjectURL(O)];g(rt)}catch(R){console.error("Error uploading image:",R),Nt({variant:"destructive",title:"アップロードエラー",description:R.message||"画像のアップロードに失敗しました。"})}finally{f(!1)}},I=k=>{const T=[...p.lesson_image_url];T.splice(k,1);const R=[...u];R.splice(k,1),v({...p,lesson_image_url:T}),g(R)},F=()=>{const k={};return p.lesson_title.trim()?p.lesson_title.length>25&&(k.lesson_title="レッスン名は25文字以内で入力してください"):k.lesson_title="レッスン名を入力してください",p.lesson_catchphrase.trim()?p.lesson_catchphrase.length>50&&(k.lesson_catchphrase="キャッチコピーは50文字以内で入力してください"):k.lesson_catchphrase="キャッチコピーを入力してください",p.lesson_description.trim()||(k.lesson_description="レッスンの説明を入力してください"),p.category.trim()||(k.category="カテゴリを選択してください"),p.lesson_type!=="monthly"?p.price.trim()?(isNaN(Number(p.price))||Number(p.price)<0)&&(k.price="有効な価格を入力してください"):k.price="価格を入力してください":p.monthly_plans.length===0?k.monthly_plans="少なくとも1つのプランを追加してください":p.monthly_plans.some(R=>!R.name.trim()||!R.price.trim()||!R.frequency.trim()||!R.lesson_duration.trim())&&(k.monthly_plans="すべてのプラン情報を入力してください"),p.lesson_type!=="monthly"&&(p.duration<=0&&(k.duration="有効な時間を入力してください"),w!=null&&w.current_participants_count&&p.capacity<w.current_participants_count&&(k.capacity=`定員は現在の参加者数（${w.current_participants_count}人）より少なく設定できません`)),p.lesson_type==="course"&&p.course_sessions<1&&(k.course_sessions="有効な回数を入力してください"),p.date_time_start.trim()||(k.date_time_start="開始日時を選択してください"),p.date_time_end.trim()?new Date(p.date_time_end)<=new Date(p.date_time_start)&&(k.date_time_end="終了日時は開始日時より後である必要があります"):k.date_time_end="終了日時を選択してください",p.booking_deadline&&p.date_time_start&&new Date(p.booking_deadline)>new Date(p.date_time_start)&&(k.booking_deadline="予約締め切り時間はレッスン開始時間より前である必要があります"),p.location_name.trim()||(k.location_name="場所を入力してください"),S(k),Object.keys(k).length===0},A=async()=>{if(!p.lesson_title.trim()){S({lesson_title:"レッスン名を入力してください"}),i("basic");return}await V("draft")},q=async()=>{if(!F()){j.lesson_title||j.lesson_description||j.category?i("basic"):j.price||j.duration||j.capacity?i("details"):j.date_time_start||j.date_time_end?i("schedule"):j.location_name&&i("location");return}await V("published")},V=async k=>{var T;if(t){if(b&&k!=="cancelled"){Nt({title:"予約があるレッスンは変更できません",description:"既に予約が入っているレッスンのステータスは、キャンセルのみ可能です。",variant:"destructive"});return}try{c(!0);const R=new Date().toISOString(),O=p.sub_categories.length>0&&((T=x.find(fe=>fe.id===p.sub_categories[0]))==null?void 0:T.name)||"";let z=p.date_time_start,Q=p.date_time_end;if(k==="published"&&(z||(z=R),!Q)){const fe=new Date(z),tt=p.duration,rt=new Date(fe.getTime()+tt*60*1e3),As=rt.getFullYear(),Ms=String(rt.getMonth()+1).padStart(2,"0"),ox=String(rt.getDate()).padStart(2,"0"),cx=String(rt.getHours()).padStart(2,"0"),dx=String(rt.getMinutes()).padStart(2,"0"),ux=String(rt.getSeconds()).padStart(2,"0");Q=`${As}-${Ms}-${ox}T${cx}:${dx}:${ux}`}let Z={};b?(Z={lesson_description:p.lesson_description,lesson_goals:p.lesson_goals,lesson_outline:p.lesson_outline,materials_needed:p.materials_needed,lesson_image_url:[p.lesson_image_url],status:k,updated_at:R},Nt({title:"限定的な更新",description:"予約があるレッスンは一部の情報のみ更新できます。"})):Z={lesson_title:p.lesson_title,lesson_catchphrase:p.lesson_catchphrase,lesson_description:p.lesson_description,category:p.category,sub_category:O,difficulty_level:p.difficulty_level,price:p.lesson_type==="monthly"?0:Number(p.price)||0,duration:p.duration,capacity:p.capacity,location_name:p.location_name,location_type:p.location_type,lesson_type:p.lesson_type,is_free_trial:p.is_free_trial,monthly_plans:p.lesson_type==="monthly"?p.monthly_plans:null,course_sessions:p.lesson_type==="course"?p.course_sessions:null,lesson_image_url:[p.lesson_image_url],date_time_start:z||null,date_time_end:Q||null,booking_deadline:p.booking_deadline||null,status:k,materials_needed:p.materials_needed,lesson_goals:p.lesson_goals,lesson_outline:p.lesson_outline,updated_at:R};const{error:we}=await E.from("lessons").update(Z).eq("id",t);if(we)throw we;Nt({description:k==="published"?"レッスンが公開されました":k==="draft"?"レッスンが下書き保存されました":"レッスンがキャンセルされました"}),C()}catch(R){console.error("Error saving lesson:",R),Nt({variant:"destructive",title:"エラー",description:R.message||"レッスンの保存に失敗しました。"})}finally{c(!1)}}};return l?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"pb-12",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>e("/instructor/lessons"),className:"flex items-center text-gray-500 hover:text-gray-700",children:[s.jsx(qc,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:"レッスン一覧へ戻る"})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"レッスンを編集"}),s.jsxs("p",{className:"text-gray-500 mt-1",children:["ステータス:",s.jsx("span",{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
              ${p.status==="published"?"bg-green-100 text-green-800":p.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:p.status==="published"?"公開中":p.status==="draft"?"下書き":"キャンセル"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[p.status==="published"&&s.jsx(B,{variant:"outline",onClick:()=>V("cancelled"),disabled:d,className:"text-red-500 border-red-500 hover:bg-red-50",children:"キャンセル"}),s.jsx(B,{variant:"outline",onClick:A,disabled:d,children:"下書き保存"}),s.jsx(B,{onClick:q,disabled:d||h,children:d?"保存中...":"公開する"})]})]}),b&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx(Tu,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"注意"}),s.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["このレッスンは既に",w==null?void 0:w.current_participants_count,"人の参加者がいます。基本情報や日程など重要な情報は変更できません。"]}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"変更可能な項目: レッスンの説明文、レッスン目標、アウトライン、必要な教材、画像"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:s.jsxs(Di,{defaultValue:"basic",value:a,onValueChange:i,children:[s.jsx("div",{className:"border-b",children:s.jsxs(Wn,{className:"w-full justify-start rounded-none bg-transparent border-b",children:[s.jsx(be,{value:"basic",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"基本情報"}),s.jsx(be,{value:"details",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"詳細情報"}),s.jsx(be,{value:"schedule",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"日程"}),s.jsx(be,{value:"location",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"場所"}),s.jsx(be,{value:"media",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:"メディア"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx(Ne,{value:"basic",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["レッスン名 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_title",value:p.lesson_title,onChange:P,maxLength:25,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.lesson_title?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"例：初心者向けギターレッスン",disabled:b,title:b?"予約があるため変更できません":""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"最大25文字"}),j.lesson_title&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.lesson_title})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["キャッチコピー ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_catchphrase",value:p.lesson_catchphrase,onChange:P,maxLength:50,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.lesson_catchphrase?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"例：3ヶ月で弾き語りができるようになる！",disabled:b,title:b?"予約があるため変更できません":""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"最大50文字"}),j.lesson_catchphrase&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.lesson_catchphrase})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["レッスンの説明 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"lesson_description",value:p.lesson_description,onChange:P,rows:5,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.lesson_description?"border-red-500":""}`,placeholder:"レッスンの内容や目的を詳しく説明してください。"}),j.lesson_description&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.lesson_description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["カテゴリ ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:p.category,onChange:P,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.category?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:"カテゴリを選択"}),rd.map(k=>s.jsxs("option",{value:k.id,children:[k.icon," ",k.name]},k.id))]}),j.category&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.category})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"サブカテゴリ（複数選択可）"}),p.category?s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:x.map(k=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`subcategory-${k.id}`,checked:p.sub_categories.includes(k.id),onChange:()=>L(k.id),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsx("label",{htmlFor:`subcategory-${k.id}`,className:"ml-2 text-sm text-gray-700",children:k.name})]},k.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"カテゴリを選択するとサブカテゴリが表示されます"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"難易度"}),s.jsxs("select",{name:"difficulty_level",value:p.difficulty_level,onChange:P,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:"初級者向け"}),s.jsx("option",{value:"intermediate",children:"中級者向け"}),s.jsx("option",{value:"advanced",children:"上級者向け"}),s.jsx("option",{value:"all",children:"全レベル対応"})]})]})]})}),s.jsx(Ne,{value:"details",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["レッスン形態 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.lesson_type==="monthly"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"} ${b?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!b&&v({...p,lesson_type:"monthly"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"monthly",checked:p.lesson_type==="monthly",onChange:()=>!b&&v({...p,lesson_type:"monthly"}),className:"h-4 w-4 text-primary",disabled:b}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"月謝制"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"定期的に継続するレッスン。月単位で料金を設定します。"}),p.lesson_type==="monthly"&&!b&&s.jsx("div",{className:"mt-3 border-t pt-3",children:s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"体験無料設定"}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"checkbox",id:"is_free_trial",checked:p.is_free_trial,onChange:k=>v({...p,is_free_trial:k.target.checked}),className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("label",{htmlFor:"is_free_trial",className:"ml-2 text-sm text-gray-700",children:"体験レッスン無料"})]})]})})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.lesson_type==="one_time"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"} ${b?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!b&&v({...p,lesson_type:"one_time"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"one_time",checked:p.lesson_type==="one_time",onChange:()=>!b&&v({...p,lesson_type:"one_time"}),className:"h-4 w-4 text-primary",disabled:b}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"単発レッスン"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"単発で参加できる1回完結型のレッスンです。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.lesson_type==="course"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"} ${b?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!b&&v({...p,lesson_type:"course"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"course",checked:p.lesson_type==="course",onChange:()=>!b&&v({...p,lesson_type:"course"}),className:"h-4 w-4 text-primary",disabled:b}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"コース講座"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"複数回のレッスンで構成されるコース。コース全体の料金を設定します。"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.lesson_type!=="monthly"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["価格（円） ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:p.price,onChange:P,min:"0",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.price?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"例：3000",disabled:b,title:b?"予約があるため変更できません":""})]}),j.price&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.price}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:p.lesson_type==="course"?"コース全体の料金":"1回あたりの料金"}),b&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"予約があるため変更できません"})]}),p.lesson_type==="course"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["コース回数 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("input",{type:"number",name:"course_sessions",value:p.course_sessions,onChange:P,min:"1",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.course_sessions?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"例：5",disabled:b,title:b?"予約があるため変更できません":""}),s.jsx("span",{className:"ml-2",children:"回"})]}),j.course_sessions&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.course_sessions})]}),p.lesson_type==="monthly"&&!b&&s.jsxs("div",{className:"col-span-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["プラン設定 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),p.monthly_plans.map((k,T)=>s.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"プラン名"}),s.jsx("input",{type:"text",value:k.name,onChange:R=>{const O=[...p.monthly_plans];O[T].name=R.target.value,v({...p,monthly_plans:O})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：スタンダードプラン"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"月額料金（円）"}),s.jsx("input",{type:"number",value:k.price,onChange:R=>{const O=[...p.monthly_plans];O[T].price=R.target.value,v({...p,monthly_plans:O})},min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：10000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"頻度"}),s.jsx("input",{type:"text",value:k.frequency,onChange:R=>{const O=[...p.monthly_plans];O[T].frequency=R.target.value,v({...p,monthly_plans:O})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：週1回"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスン時間（分）"}),s.jsx("input",{type:"number",value:k.lesson_duration,onChange:R=>{const O=[...p.monthly_plans];O[T].lesson_duration=R.target.value,v({...p,monthly_plans:O})},min:"15",step:"15",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：60"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),s.jsx("textarea",{value:k.description,onChange:R=>{const O=[...p.monthly_plans];O[T].description=R.target.value,v({...p,monthly_plans:O})},rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：月4回のグループレッスンが含まれます"})]}),s.jsx("div",{className:"mt-2 flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>{const R=[...p.monthly_plans];R.splice(T,1),v({...p,monthly_plans:R})},className:"px-3 py-2 bg-red-50 text-red-500 rounded-md hover:bg-red-100",children:"削除"})})]},T)),s.jsx("button",{type:"button",onClick:()=>{v({...p,monthly_plans:[...p.monthly_plans,{name:"",price:"",frequency:"",lesson_duration:"60",description:""}]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20",children:"プランを追加"}),j.monthly_plans&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:j.monthly_plans})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"必要な持ち物・準備"}),s.jsx("textarea",{name:"materials_needed",value:p.materials_needed,onChange:P,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：ノートパソコン、筆記用具、カメラなど"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"学習目標"}),s.jsx("textarea",{name:"lesson_goals",value:p.lesson_goals,onChange:P,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：このレッスンが終わると何ができるようになるか"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスンの流れ"}),s.jsx("textarea",{name:"lesson_outline",value:p.lesson_outline,onChange:P,rows:5,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"例：1. 導入（10分）、2. 基本的な操作の説明（20分）、3. 実践練習（20分）、4. 質疑応答（10分）"})]})]})}),s.jsx(Ne,{value:"schedule",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["開始日時 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"date_time_start",value:p.date_time_start,onChange:P,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.date_time_start?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,disabled:b,title:b?"予約があるため変更できません":""})]}),j.date_time_start&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.date_time_start}),b&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"予約があるため変更できません"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["終了日時 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"date_time_end",value:p.date_time_end,onChange:P,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.date_time_end?"border-red-500":""} ${b?"bg-gray-100 cursor-not-allowed":""}`,disabled:b,title:b?"予約があるため変更できません":""})]}),j.date_time_end&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.date_time_end}),b&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"予約があるため変更できません"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"予約締め切り時間"}),s.jsxs("div",{className:"relative",children:[s.jsx(vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"datetime-local",name:"booking_deadline",value:p.booking_deadline,onChange:P,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.booking_deadline?"border-red-500":""}`})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"空欄の場合、開始直前まで予約可能"}),j.booking_deadline&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.booking_deadline})]})]}),b&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsxs("div",{className:"flex",children:[s.jsx(np,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:"注意事項"}),s.jsx("p",{className:"mt-1",children:"既に予約が入っているレッスンの日程を変更すると、参加者に影響します。変更する場合は、参加者に個別に連絡することをお勧めします。"})]})]})})]})}),s.jsx(Ne,{value:"location",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["レッスンの形式 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.location_type==="online"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>v({...p,location_type:"online"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"online",checked:p.location_type==="online",onChange:()=>v({...p,location_type:"online"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"オンライン"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Zoom、Google Meet、Skypeなどのビデオ会議ツールを使用してレッスンを行います。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.location_type==="in_person"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>v({...p,location_type:"in_person"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"in_person",checked:p.location_type==="in_person",onChange:()=>v({...p,location_type:"in_person"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"対面"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"特定の場所に集まって対面でレッスンを行います。"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${p.location_type==="hybrid"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>v({...p,location_type:"hybrid"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"hybrid",checked:p.location_type==="hybrid",onChange:()=>v({...p,location_type:"hybrid"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"ハイブリッド"})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"対面とオンラインの両方の選択肢を提供します。"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["場所の詳細 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Hc,{className:"absolute left-3 top-3 text-gray-400 h-4 w-4"}),s.jsx("textarea",{name:"location_name",value:p.location_name,onChange:P,rows:3,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${j.location_name?"border-red-500":""}`,placeholder:p.location_type==="online"?"使用するオンラインツール（Zoom、Google Meet、Skypeなど）と、レッスン前に共有するURLについての情報":p.location_type==="in_person"?"正確な住所、建物名、部屋番号、アクセス方法などの詳細":"対面とオンラインの両方の選択肢に関する詳細情報"})]}),j.location_name&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.location_name})]}),b&&p.location_type!==(w==null?void 0:w.location_type)&&s.jsx("div",{className:"bg-yellow-50 p-4 rounded-md border border-yellow-100",children:s.jsxs("div",{className:"flex",children:[s.jsx(Tu,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-700",children:[s.jsx("p",{className:"font-medium",children:"レッスン形式の変更について"}),s.jsx("p",{className:"mt-1",children:"レッスン形式を変更すると、既に申し込んでいる参加者に影響する可能性があります。変更する場合は、参加者に個別に連絡することをお勧めします。"})]})]})})]})}),s.jsx(Ne,{value:"media",children:s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"レッスン画像（最大3枚まで）"}),s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.lesson_image_url.length<3&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 w-full flex flex-col items-center justify-center ${h?"opacity-50":"hover:border-primary/50 hover:bg-gray-50"}`,children:s.jsxs("div",{className:"relative cursor-pointer",children:[s.jsx("input",{type:"file",id:"lesson-image",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:$,disabled:h}),s.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(ap,{className:`h-8 w-8 ${h?"text-gray-400":"text-primary"}`}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-700",children:h?"画像をアップロード中...":"画像をアップロード"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF（最大 5MB）"})]})]})})}),p.lesson_image_url.length>0?p.lesson_image_url.map((k,T)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:k,alt:`レッスン画像 ${T+1}`,className:"w-full h-48 object-cover rounded-md"}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[s.jsxs("span",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[T+1,"/",p.lesson_image_url.length]}),s.jsx("button",{type:"button",onClick:()=>I(T),className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},T)):s.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 rounded-md border text-gray-400 col-span-3",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(sp,{className:"h-10 w-10"}),s.jsx("p",{className:"mt-2 text-sm",children:"画像が未設定です"})]})})]}),s.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[p.lesson_image_url.length,"/3枚 アップロード済み"]})]})})})]})]})}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsx(B,{variant:"outline",onClick:()=>{const k=["basic","details","schedule","location","media"],T=k.indexOf(a);T>0&&i(k[T-1])},disabled:a==="basic",children:"前へ"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(B,{variant:"outline",onClick:A,disabled:d,children:"下書き保存"}),a==="media"?s.jsx(B,{onClick:q,disabled:d||h,children:d?"保存中...":"公開する"}):s.jsx(B,{onClick:()=>{const k=["basic","details","schedule","location","media"],T=k.indexOf(a);T<k.length-1&&i(k[T+1])},disabled:a==="media",children:"次へ"})]})]})]})},Rj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState("upcoming"),[d,c]=y.useState(!1);y.useEffect(()=>{h()},[l]);const h=async()=>{try{n(!0);const{data:{user:m}}=await E.auth.getUser();if(!m){n(!1);return}let p=E.from("bookings").select(`
            *,
            user:user_profiles(name, profile_image_url),
            lesson:lesson_id(
              lesson_title,
              date_time_start,
              date_time_end,
              price,
              status,
              instructor_id
            )
          `).filter("lesson.instructor_id","eq",m.id);const v=new Date().toISOString();l==="upcoming"?p=p.in("status",["pending","confirmed"]).gt("lesson.date_time_start",v).order("date_time_start",{ascending:!0,foreignTable:"lesson"}):l==="pending"?p=p.eq("status","pending").order("created_at",{ascending:!1}):l==="past"?p=p.in("status",["confirmed","completed","cancelled"]).lt("lesson.date_time_start",v).order("date_time_start",{ascending:!1,foreignTable:"lesson"}):l==="cancelled"&&(p=p.eq("status","cancelled").order("updated_at",{ascending:!1}));const{data:x,error:_}=await p;if(_){console.error("Error fetching bookings:",_);return}const j=(x||[]).filter(S=>S.lesson);t(j)}catch(m){console.error("Error:",m)}finally{n(!1)}},f=async(m,p)=>{try{c(!0);const{error:v}=await E.from("bookings").update({status:p,updated_at:new Date().toISOString()}).eq("id",m);if(v)throw v;t(x=>x.map(_=>_.id===m?{..._,status:p}:_)),Nt({description:p==="confirmed"?"予約を承認しました":"予約をキャンセルしました"}),l==="pending"&&h()}catch(v){console.error("Error updating booking status:",v),Nt({variant:"destructive",title:"エラー",description:v.message||"予約ステータスの更新に失敗しました。"})}finally{c(!1)}},u=e.filter(m=>m.user.name.toLowerCase().includes(a.toLowerCase())||m.lesson.lesson_title.toLowerCase().includes(a.toLowerCase())),g=m=>{switch(m){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},w=m=>{switch(m){case"confirmed":return"承認済み";case"pending":return"保留中";case"cancelled":return"キャンセル済み";case"completed":return"完了";default:return m}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"予約管理"}),s.jsxs(Di,{defaultValue:"upcoming",value:l,onValueChange:o,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsxs(Wn,{children:[s.jsx(be,{value:"upcoming",children:"予定の予約"}),s.jsx(be,{value:"pending",children:"保留中"}),s.jsx(be,{value:"past",children:"過去の予約"}),s.jsx(be,{value:"cancelled",children:"キャンセル済み"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"受講者名またはレッスン名で検索...",className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 w-full sm:w-64",value:a,onChange:m=>i(m.target.value)})]})]}),s.jsx(Ne,{value:"upcoming",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):u.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"受講者"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"日程"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"ステータス"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(m=>{var p,v;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.user.profile_image_url||"/placeholder-avatar.jpg",alt:m.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:m.user.name})})]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((p=m.lesson)==null?void 0:p.lesson_title)||"レッスン情報なし"}),s.jsx("div",{className:"text-sm text-gray-500",children:((v=m.lesson)==null?void 0:v.status)==="cancelled"&&"(レッスンがキャンセルされました)"})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(m.lesson.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(m.lesson.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(m.lesson.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(m.status)}`,children:w(m.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[m.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>f(m.id,"confirmed"),disabled:d,className:"text-gray-400 hover:text-green-500",children:s.jsx(No,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>f(m.id,"cancelled"),disabled:d,className:"text-gray-400 hover:text-red-500",children:s.jsx(dl,{className:"h-5 w-5"})})]}),s.jsx(M,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(ps,{className:"h-5 w-5"})})]})})]},m.id)})})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:"予定されている予約はありません"})})}),s.jsx(Ne,{value:"pending",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):u.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:"保留中の予約"}),s.jsx("p",{className:"mt-1",children:"保留中の予約リクエストがあります。承認またはキャンセルしてください。"})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"受講者"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"日程"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"リクエスト日"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.user.profile_image_url||"/placeholder-avatar.jpg",alt:m.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:m.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.lesson.lesson_title})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(m.lesson.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(m.lesson.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(m.lesson.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-500",children:Be(m.created_at)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>f(m.id,"confirmed"),disabled:d,className:"text-green-500 hover:text-green-700",children:s.jsx(No,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>f(m.id,"cancelled"),disabled:d,className:"text-red-500 hover:text-red-700",children:s.jsx(dl,{className:"h-5 w-5"})}),s.jsx(M,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(ps,{className:"h-5 w-5"})})]})})]},m.id))})]})})})]}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:"保留中の予約リクエストはありません"})})}),s.jsx(Ne,{value:"past",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):u.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"受講者"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"日程"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"ステータス"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"操作"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.user.profile_image_url||"/placeholder-avatar.jpg",alt:m.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:m.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.lesson.lesson_title})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(m.lesson.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(vt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(m.lesson.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(m.lesson.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(m.status)}`,children:w(m.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(M,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(ps,{className:"h-5 w-5"})})})]},m.id))})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:"過去の予約はありません"})})}),s.jsx(Ne,{value:"cancelled",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):u.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"受講者"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"レッスン"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"予定日"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"キャンセル日"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.user.profile_image_url||"/placeholder-avatar.jpg",alt:m.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:m.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.lesson.lesson_title})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ke,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:Be(m.lesson.date_time_start)})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(dl,{className:"h-4 w-4 mr-1 text-red-400"}),s.jsx("span",{className:"text-sm",children:Be(m.updated_at)})]})})]},m.id))})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:"キャンセルされた予約はありません"})})})]})]})},ad=y.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ad.displayName="Input";const Dj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(""),[l,o]=y.useState(null);y.useEffect(()=>{(async()=>{try{const{data:{user:u}}=await E.auth.getUser();o(u)}catch(u){console.error("Error fetching current user:",u)}})()},[]),y.useEffect(()=>{if(l){d();const f=E.channel("instructor_chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},u=>{const g=u.new.chat_room_id;t(w=>{const m=w.findIndex(x=>x.id===g);if(m===-1)return w;const p=[...w],v=p[m];return p[m]={...v,last_message:u.new.message,last_message_at:u.new.created_at,unread_count:u.new.sender_id!==l.id?(v.unread_count||0)+1:v.unread_count||0},p.splice(m,1),p.unshift(p[m]),p})}).subscribe();return()=>{E.removeChannel(f)}}},[l]);const d=async()=>{try{if(n(!0),!l){n(!1);return}const{data:f,error:u}=await E.from("chat_rooms").select(`
          *,
          user:user_id(
            id, 
            profile_image_url,
            name
          )
        `).eq("instructor_id",l.id).order("created_at",{ascending:!1});if(u){console.error("Error fetching chat rooms:",u);return}const g=await Promise.all((f||[]).map(async w=>{var _,j,S,b;const{data:m,error:p}=await E.from("chat_messages").select("*").eq("chat_room_id",w.id).order("created_at",{ascending:!1}).limit(1);if(p)return console.error("Error fetching messages:",p),w;const{count:v,error:x}=await E.from("chat_messages").select("*",{count:"exact",head:!0}).eq("chat_room_id",w.id).eq("is_read",!1).neq("sender_id",l.id);return x?(console.error("Error counting unread messages:",x),{...w,last_message:((_=m==null?void 0:m[0])==null?void 0:_.message)||"",last_message_at:((j=m==null?void 0:m[0])==null?void 0:j.created_at)||w.created_at,unread_count:0}):{...w,last_message:((S=m==null?void 0:m[0])==null?void 0:S.message)||"",last_message_at:((b=m==null?void 0:m[0])==null?void 0:b.created_at)||w.created_at,unread_count:v||0}}));g.sort((w,m)=>{const p=new Date(w.last_message_at||w.created_at).getTime();return new Date(m.last_message_at||m.created_at).getTime()-p}),t(g)}catch(f){console.error("Error:",f)}finally{n(!1)}},c=e.filter(f=>f.user.name.toLowerCase().includes(a.toLowerCase())||f.last_message&&f.last_message.toLowerCase().includes(a.toLowerCase())),h=f=>{const u=new Date(f),g=new Date,w=new Date(u.getFullYear(),u.getMonth(),u.getDate()),m=new Date(g.getFullYear(),g.getMonth(),g.getDate()),p=Math.floor((m.getTime()-w.getTime())/(24*60*60*1e3));return p===0?u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):p===1?"昨日 "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):p===2?"一昨日 "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):p<7?["日","月","火","水","木","金","土"][u.getDay()]+"曜日":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(u)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"メッセージ"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx(ad,{placeholder:"メッセージを検索...",className:"pl-9 pr-4",value:a,onChange:f=>i(f.target.value)})]})}),r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):c.length>0?s.jsx("div",{className:"divide-y divide-gray-100",children:c.map(f=>s.jsx(M,{to:`/instructor/chat/${f.id}`,className:"block hover:bg-gray-50",children:s.jsxs("div",{className:"p-4 flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:f.user.profile_image_url||"/placeholder-avatar.jpg",alt:f.user.name,className:"h-12 w-12 rounded-full object-cover"}),f.unread_count>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:f.unread_count})]}),s.jsxs("div",{className:"flex-1 min-w-0 ml-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-sm font-medium text-gray-900 truncate",children:f.user.name}),s.jsx("p",{className:"text-xs text-gray-500",children:h(f.last_message_at)})]}),s.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:f.last_message||"メッセージなし"})]}),s.jsx(ks,{className:"h-5 w-5 text-gray-400 ml-2"})]})},f.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(ps,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"メッセージはありません"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a?"検索条件に一致するメッセージはありません":"生徒からのメッセージはまだありません"})]})]})]})},Ij=()=>{const{id:e}=Bn(),t=y.useRef(null),[r,n]=y.useState([]),[a,i]=y.useState(""),[l,o]=y.useState(!0),[d,c]=y.useState(!1),[h,f]=y.useState(!1),[u,g]=y.useState(!0),[w,m]=y.useState(null),[p,v]=y.useState(null),[x,_]=y.useState([]),[j,S]=y.useState(0),b=20;y.useEffect(()=>{(async()=>{try{const{data:{user:T}}=await E.auth.getUser();T&&v(T.id)}catch(T){console.error("Error fetching current user:",T)}})()},[]),y.useEffect(()=>{if(e&&p){N(),P();const k=`chat_messages_${e}_${Date.now()}`,T=E.channel(k).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`chat_room_id=eq.${e}`},R=>{const O=R.new;n(z=>[...z.filter(Z=>!(Z.id.startsWith("temp-")&&Z.sender_id===O.sender_id)),O]),O.sender_id!==p&&L(O.id)}).subscribe();return()=>{E.removeChannel(T)}}},[e,p]);const N=async()=>{if(!(!e||!p))try{o(!0);const{data:k,error:T}=await E.from("chat_rooms").select(`
          *,
          user:user_profiles!chat_rooms_user_id_fkey(id, name, profile_image_url)
        `).eq("id",e).single();if(T){console.error("Error fetching chat room:",T);return}k&&k.user&&m(k.user),C();const{data:R,error:O}=await E.from("chat_messages").select("id").eq("chat_room_id",e).neq("sender_id",p).eq("is_read",!1);if(O)console.error("Error fetching unread messages:",O);else if(R&&R.length>0){console.log(`Marking ${R.length} messages as read in room ${e} for instructor`);const z=R.map(Z=>Z.id),{error:Q}=await E.from("chat_messages").update({is_read:!0}).in("id",z);Q?console.error("Error marking messages as read:",Q):console.log("Messages marked as read successfully")}}catch(k){console.error("Error fetching chat data:",k)}finally{o(!1),setTimeout(()=>I(),100)}},C=async(k=!1)=>{if(e)try{const T=k?j+1:0;k&&f(!0);const{data:R,error:O}=await E.from("chat_messages").select("*").eq("chat_room_id",e).order("created_at",{ascending:!0}).range(T*b,(T+1)*b-1);if(O){console.error("Error fetching messages:",O);return}g(R.length===b),S(T),n(k?z=>[...z,...R]:R||[])}catch(T){console.error("Error:",T)}finally{o(!1),f(!1),k||setTimeout(()=>I(),100)}},P=async()=>{if(!(!e||!p))try{const{data:k}=await E.from("chat_rooms").select("user_id").eq("id",e).single();if(!k)return;const{data:T,error:R}=await E.from("bookings").select(`
          id,
          lesson:lessons(id, lesson_title, date_time_start)
        `).eq("user_id",k.user_id).eq("lesson.instructor_id",p).order("lesson.date_time_start",{ascending:!1}).limit(3);if(R){console.error("Error fetching related bookings:",R);return}const O=(T||[]).map(z=>({id:z.id,lesson:Array.isArray(z.lesson)?z.lesson[0]:z.lesson}));_(O)}catch(k){console.error("Error:",k)}},L=async k=>{await E.from("chat_messages").update({is_read:!0}).eq("id",k)},$=async()=>{if(!(!e||!a.trim()||!p))try{c(!0);const k=a.trim(),T={id:`temp-${Date.now()}`,chat_room_id:e,sender_id:p,message:k,is_read:!1,created_at:new Date().toISOString()};n(O=>[...O,T]),i(""),setTimeout(()=>I(),100);const{error:R}=await E.from("chat_messages").insert({chat_room_id:e,sender_id:p,message:k,is_read:!1});if(R){console.error("Error sending message:",R),n(O=>O.filter(z=>!z.id.startsWith("temp-")));return}window.location.reload()}catch(k){console.error("Error:",k),n(T=>T.filter(R=>!R.id.startsWith("temp-")))}finally{c(!1)}},I=()=>{var k;(k=t.current)==null||k.scrollIntoView({behavior:"smooth"})},F=()=>{const k={};return r.forEach(T=>{const R=new Date(T.created_at).toLocaleDateString("ja-JP");k[R]||(k[R]=[]),k[R].push(T)}),k},A=k=>{const T=new Date(k),R=new Date,O=new Date(R);return O.setDate(O.getDate()-1),T.toDateString()===R.toDateString()?"今日":T.toDateString()===O.toDateString()?"昨日":Be(k)},q=k=>new Date(k).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),V=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),$())};if(l)return s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const H=F();return s.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)]",children:[s.jsx("div",{className:"flex justify-between items-center bg-white p-4 border-b",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(M,{to:"/instructor/chat",className:"mr-4 text-gray-500 hover:text-gray-700",children:s.jsx(qc,{className:"h-5 w-5"})}),w&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:w.profile_image_url||"/placeholder-avatar.jpg",alt:w.name,className:"h-10 w-10 rounded-full object-cover"}),s.jsx("div",{className:"ml-3",children:s.jsx("h2",{className:"text-sm font-medium text-gray-900",children:w.name})})]})]})}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:[u&&s.jsx("div",{className:"text-center mb-4",children:s.jsx(B,{variant:"outline",size:"sm",onClick:()=>C(!0),disabled:h,children:h?"メッセージを読み込み中...":"過去のメッセージを読み込む"})}),Object.keys(H).map(k=>s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center my-4",children:s.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:A(k)})}),H[k].map(T=>s.jsxs("div",{className:`flex mb-4 ${T.sender_id===p?"justify-end":"justify-start"}`,children:[T.sender_id!==p&&w&&s.jsx("img",{src:w.profile_image_url||"/placeholder-avatar.jpg",alt:w.name,className:"h-8 w-8 rounded-full object-cover mr-2 self-end"}),s.jsxs("div",{className:"flex flex-col max-w-[70%]",children:[s.jsx("div",{className:`rounded-2xl p-3 inline-block ${T.sender_id===p?"bg-primary text-white rounded-tr-none":"bg-white border rounded-tl-none"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:T.message})}),s.jsxs("span",{className:`text-xs text-gray-500 mt-1 ${T.sender_id===p?"text-right":"text-left"}`,children:[q(T.created_at),T.sender_id===p&&s.jsx("span",{className:"ml-1",children:T.is_read?"既読":"未読"})]})]}),T.sender_id===p&&s.jsx("div",{className:"h-8 w-8 ml-2"})]},T.id))]},k)),s.jsx("div",{ref:t})]}),x.length>0&&s.jsxs("div",{className:"w-72 border-l bg-white p-4 overflow-y-auto hidden md:block",children:[s.jsx("h3",{className:"font-medium text-sm text-gray-900 mb-3",children:"関連情報"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-2",children:"予約済みレッスン"}),x.map(k=>s.jsxs("div",{className:"bg-gray-50 rounded-md p-3 text-sm",children:[s.jsx("p",{className:"font-medium text-gray-900",children:k.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mt-1 text-gray-500 text-xs",children:[s.jsx(ke,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:Be(k.lesson.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1 text-gray-500 text-xs",children:[s.jsx(vt,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:new Date(k.lesson.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]})]},k.id))]})})]})]}),s.jsx("div",{className:"bg-white border-t p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ad,{value:a,onChange:k=>i(k.target.value),onKeyDown:V,placeholder:"メッセージを入力...",className:"flex-1",disabled:d}),s.jsx(B,{onClick:$,disabled:!a.trim()||d,className:"ml-2",children:s.jsx(Av,{className:"h-4 w-4"})})]})})]})},Oj=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0);y.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const{data:{user:d}}=await E.auth.getUser();if(!d){n(!1);return}const{data:c,error:h}=await E.from("notifications").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(h){console.error("Error fetching notifications:",h);return}t(c||[]);const f=(c==null?void 0:c.filter(u=>!u.is_read).map(u=>u.id))||[];f.length>0&&await E.from("notifications").update({is_read:!0}).in("id",f)}catch(d){console.error("Error:",d)}finally{n(!1)}},i=d=>{if(!d)return s.jsx(un,{className:"h-6 w-6 text-gray-500"});switch(d){case"booking_request":case"booking_confirmed":case"booking_cancelled":return s.jsx(Xf,{className:"h-6 w-6 text-blue-500"});case"message":return s.jsx(ps,{className:"h-6 w-6 text-green-500"});case"review":return s.jsx(Ni,{className:"h-6 w-6 text-yellow-500"});case"favorite":return s.jsx(rp,{className:"h-6 w-6 text-red-500"});case"payment":return s.jsx(Vc,{className:"h-6 w-6 text-emerald-500"});case"new_student":return s.jsx(ti,{className:"h-6 w-6 text-purple-500"});default:return s.jsx(un,{className:"h-6 w-6 text-gray-500"})}},l=d=>{switch(d.type||""){case"booking_request":case"booking_confirmed":case"booking_cancelled":return"/instructor/bookings";case"message":return d.entity_id?`/instructor/chat/${d.entity_id}`:"/instructor/chat";case"review":return"/instructor/lessons";case"payment":return"/instructor/bookings";default:return"#"}},o=d=>{const c=new Date(d),h=new Date,f=new Date(c.getFullYear(),c.getMonth(),c.getDate()),u=new Date(h.getFullYear(),h.getMonth(),h.getDate()),g=Math.floor((u.getTime()-f.getTime())/(24*60*60*1e3));return g===0?c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):g===1?"昨日 "+c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):g===2?"一昨日 "+c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):g<7?["日","月","火","水","木","金","土"][c.getDay()]+"曜日":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(c)};return r?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"通知"}),e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(un,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"通知はありません"}),s.jsx("p",{className:"mt-2 text-gray-500",children:"新しい通知が届いたら、ここに表示されます。"})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border divide-y",children:e.map(d=>s.jsx(M,{to:l(d),className:`block p-4 hover:bg-gray-50 ${d.is_read?"":"bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full p-2",children:i(d.type)}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h3",{className:`text-sm font-medium ${d.is_read?"text-gray-900":"text-blue-800"}`,children:d.title}),s.jsx("span",{className:"text-xs text-gray-500",children:o(d.created_at)})]}),s.jsx("p",{className:`mt-1 text-sm ${d.is_read?"text-gray-600":"text-blue-700"}`,children:d.message})]}),!d.is_read&&s.jsx("div",{className:"ml-3 bg-blue-500 rounded-full w-2 h-2"})]})},d.id))})]})},$j=()=>{const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[a,i]=y.useState(null),[l,o]=y.useState(!1),{toast:d}=Wt(),c=ut();y.useEffect(()=>{(async()=>{t(!0);try{const{data:{user:g}}=await E.auth.getUser();if(!g)return;const w=new Date().toISOString(),{data:m}=await E.from("premium_subscriptions").select("*").eq("instructor_id",g.id).eq("status","active").lt("start_date",w).gt("end_date",w).maybeSingle();n(!!m),i(m)}catch(g){console.error("Error checking premium status:",g)}finally{t(!1)}})()},[]);const h=async()=>{o(!0);try{const{data:{user:u}}=await E.auth.getUser();if(!u){d({title:"エラー",description:"ログインが必要です",variant:"destructive"});return}const g=new Date,w=new Date;w.setMonth(w.getMonth()+1);const{data:m,error:p}=await E.from("premium_subscriptions").insert([{instructor_id:u.id,start_date:g.toISOString(),end_date:w.toISOString(),status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw p;await E.from("lessons").update({is_featured:!0}).eq("instructor_id",u.id).eq("status","published"),d({title:"プレミアムプラン登録完了",description:"登録ありがとうございます。特典が有効になりました。"}),n(!0),i(m)}catch(u){d({title:"登録エラー",description:u.message||"登録処理中にエラーが発生しました",variant:"destructive"})}finally{o(!1)}},f=async()=>{o(!0);try{if(!a)return;const{error:u}=await E.from("premium_subscriptions").update({status:"canceled",updated_at:new Date().toISOString()}).eq("id",a.id);if(u)throw u;await E.from("lessons").update({is_featured:!1}).eq("instructor_id",a.instructor_id),d({title:"プレミアムプラン解約",description:"プレミアムプランの解約が完了しました。期間終了までは特典が継続します。"}),c(0)}catch(u){d({title:"解約エラー",description:u.message||"解約処理中にエラーが発生しました",variant:"destructive"})}finally{o(!1)}};return e?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx(At,{className:"w-16 h-16 text-yellow-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"プレミアムプラン"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"レッスンの集客力アップと収益の最大化を実現する特別なプラン"})]}),r?s.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl p-8 border border-yellow-200 mb-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(At,{className:"w-8 h-8 text-yellow-500 mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"プレミアムプラン会員"}),s.jsx("p",{className:"text-gray-600",children:"特典を最大限に活用して、ビジネスを成長させましょう"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"有効期限"}),s.jsx("p",{className:"font-medium",children:Be(a==null?void 0:a.end_date)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"現在の特典"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"検索結果の上位表示"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"仲介手数料 0円（通常10%）"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"アカウントに「プレミアム」バッジ表示"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"プラン詳細"}),s.jsxs("p",{className:"mb-3",children:[s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:Co(1e4)}),s.jsx("span",{className:"text-gray-500",children:" / 月"})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"毎月自動更新 - いつでもキャンセル可能"}),s.jsx(B,{variant:"outline",className:"w-full",onClick:f,disabled:l,children:l?"処理中...":"プランをキャンセル"})]})]}),s.jsxs("div",{className:"bg-yellow-100 rounded-lg p-4 flex items-start",children:[s.jsx(Pv,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"プランをキャンセルしても、現在の請求期間の終了まで特典を引き続き受けられます。 次回の更新日以降は、特典が自動的に無効になります。"})]})]}):s.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 mb-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary/90 to-primary p-8 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"プレミアムプラン"}),s.jsx("p",{className:"mt-2 text-white/90",children:"講師のためのプレミアム特典"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xl font-bold",children:Co(1e4)}),s.jsx("p",{className:"text-sm text-white/90",children:"/ 月（税込）"})]})]})}),s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"主な特典"}),s.jsxs("ul",{className:"space-y-4 mb-8",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"検索結果の上位表示"}),s.jsx("p",{className:"text-gray-600",children:"生徒がレッスンを探す際、あなたのレッスンが検索結果の上部に表示されます。"})]})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"仲介手数料 0円"}),s.jsx("p",{className:"text-gray-600",children:"通常10%の仲介手数料が完全に無料になります。初回無料レッスンの場合の500円/件も免除されます。"})]})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Hr,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"プレミアムバッジ"}),s.jsx("p",{className:"text-gray-600",children:"プロフィールとレッスンに「プレミアム講師」バッジが表示され、信頼性が向上します。"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-8",children:[s.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:"費用対効果"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"初回無料レッスンを多く提供している講師の場合、月20件以上の予約があれば手数料の方が高くなります。 プレミアムプランなら、月額10,000円で無制限のレッスンに適用されます。"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"・通常プラン: 500円 × 20件 = 10,000円（初回無料レッスンの場合）"}),s.jsx("li",{children:"・通常プラン: レッスン料10,000円 × 10% × 10件 = 10,000円"}),s.jsxs("li",{children:["・",s.jsx("span",{className:"font-medium text-primary",children:"プレミアムプラン: 月額10,000円で無制限"})]})]})]}),s.jsx(B,{className:"w-full py-6",onClick:h,disabled:l,children:l?"処理中...":"プレミアムプランに登録する"}),s.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"いつでもキャンセル可能 - 年間契約の縛りはありません"})]})]}),s.jsx("div",{className:"space-y-8",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"よくある質問"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"プレミアムプランはいつでもキャンセルできますか？"}),s.jsx("p",{className:"text-gray-600",children:"はい、いつでもキャンセル可能です。キャンセル後も、次の請求日まで特典は継続して利用できます。"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"検索結果の上位表示はどのように機能しますか？"}),s.jsx("p",{className:"text-gray-600",children:"プレミアム講師のレッスンは、同じ検索条件の通常レッスンよりも上位に表示されます。 これにより、生徒があなたのレッスンを見つける可能性が高まります。"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"手数料が完全に無料になるのはどのようなレッスンですか？"}),s.jsx("p",{className:"text-gray-600",children:"プレミアムプランに登録すると、対面レッスンの初回無料レッスン手数料（500円/件）と、 すべてのレッスンの仲介手数料（通常10%）が無料になります。 オンラインレッスンも対面レッスンも、すべての手数料が免除されます。"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"プレミアムプランは収益向上にどのように役立ちますか？"}),s.jsx("p",{className:"text-gray-600",children:"1. 検索結果の上位表示により、より多くの生徒があなたのレッスンを見つけることができます。 2. 手数料が0円になるため、レッスンごとの収益が10%増加します。 3. プレミアムバッジにより講師としての信頼性が向上し、予約率の向上が期待できます。"})]})]})]})})]})},Aj=()=>s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h1",{className:"text-9xl font-bold text-primary",children:"404"}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"ページが見つかりません"}),s.jsx("p",{className:"mt-2 text-lg text-gray-600 max-w-md mx-auto",children:"お探しのページは存在しないか、移動した可能性があります。"}),s.jsx("div",{className:"mt-10",children:s.jsx(B,{asChild:!0,children:s.jsx(M,{to:"/",children:"ホームに戻る"})})})]});function Mj(){var a;const[e,t]=y.useState(null),[r,n]=y.useState(!0);return y.useEffect(()=>{(async()=>{const{data:o}=await E.auth.getUser();t(o.user||null),n(!1)})();const{data:l}=E.auth.onAuthStateChange((o,d)=>{t((d==null?void 0:d.user)||null)});return()=>{l&&l.subscription&&l.subscription.unsubscribe()}},[]),r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white",children:[s.jsxs("div",{className:"relative w-16 h-16",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg font-medium text-foreground/70 animate-pulse",children:"読み込み中..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Ry,{children:[s.jsx(te,{path:"/login",element:s.jsx(O_,{})}),s.jsx(te,{path:"/register",element:s.jsx($_,{})}),s.jsx(te,{path:"/reset-password",element:s.jsx(A_,{})}),s.jsx(te,{path:"/update-password",element:s.jsx(M_,{})}),s.jsxs(te,{path:"/user",element:s.jsx(st,{user:e,userType:"user",children:s.jsx(U_,{})}),children:[s.jsx(te,{index:!0,element:s.jsx(H_,{})}),s.jsx(te,{path:"lessons",element:s.jsx(K_,{})}),s.jsx(te,{path:"lessons/:id",element:s.jsx(G_,{})}),s.jsx(te,{path:"instructors/:id",element:s.jsx(J_,{})}),s.jsx(te,{path:"bookings",element:s.jsx(Q_,{})}),s.jsx(te,{path:"chat",element:s.jsx(Y_,{})}),s.jsx(te,{path:"chat/:id",element:s.jsx(X_,{})}),s.jsx(te,{path:"profile",element:s.jsx(Z_,{})}),s.jsx(te,{path:"favorites",element:s.jsx(ej,{})}),s.jsx(te,{path:"history",element:s.jsx(tj,{})}),s.jsx(te,{path:"notifications",element:s.jsx(rj,{})})]}),s.jsxs(te,{path:"/instructor",element:s.jsx(st,{user:e,userType:"instructor",children:s.jsx(sj,{})}),children:[s.jsx(te,{index:!0,element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(nj,{})})}),s.jsx(te,{path:"profile",element:s.jsx(st,{user:e,userType:"instructor",allowIncompleteProfile:!0,children:s.jsx(aj,{})})}),s.jsx(te,{path:"lessons",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Nj,{})})}),s.jsx(te,{path:"lessons/create",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Pj,{})})}),s.jsx(te,{path:"lessons/:id/edit",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Lj,{})})}),s.jsx(te,{path:"bookings",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Rj,{})})}),s.jsx(te,{path:"chat",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Dj,{})})}),s.jsx(te,{path:"chat/:id",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(Ij,{})})}),s.jsx(te,{path:"notifications",element:s.jsx(st,{user:e,userType:"instructor",allowIncompleteProfile:!0,children:s.jsx(Oj,{})})}),s.jsx(te,{path:"premium",element:s.jsx(st,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx($j,{})})})]}),s.jsx(te,{path:"/",element:e?((a=e.user_metadata)==null?void 0:a.user_type)==="instructor"?s.jsx(Lr,{to:"/instructor",replace:!0}):s.jsx(Lr,{to:"/user",replace:!0}):s.jsx(Lr,{to:"/login",replace:!0})}),s.jsx(te,{path:"*",element:s.jsx(Aj,{})})]}),s.jsx(Jc,{})]})}jl.createRoot(document.getElementById("root")).render(s.jsx(Lt.StrictMode,{children:s.jsx(Uy,{children:s.jsx(Mj,{})})}));export{Ju as g};
