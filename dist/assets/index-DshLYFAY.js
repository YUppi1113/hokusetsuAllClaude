function Px(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Fh={exports:{}},No={},Uh={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=Symbol.for("react.element"),Ox=Symbol.for("react.portal"),$x=Symbol.for("react.fragment"),Ix=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),Fx=Symbol.for("react.forward_ref"),Ux=Symbol.for("react.suspense"),Wx=Symbol.for("react.memo"),zx=Symbol.for("react.lazy"),Ou=Symbol.iterator;function Bx(e){return e===null||typeof e!="object"?null:(e=Ou&&e[Ou]||e["@@iterator"],typeof e=="function"?e:null)}var Wh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zh=Object.assign,Bh={};function $n(e,t,r){this.props=e,this.context=t,this.refs=Bh,this.updater=r||Wh}$n.prototype.isReactComponent={};$n.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qh(){}qh.prototype=$n.prototype;function md(e,t,r){this.props=e,this.context=t,this.refs=Bh,this.updater=r||Wh}var hd=md.prototype=new qh;hd.constructor=md;zh(hd,$n.prototype);hd.isPureReactComponent=!0;var $u=Array.isArray,Hh=Object.prototype.hasOwnProperty,fd={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function Vh(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Hh.call(t,n)&&!Yh.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ka,type:e,key:i,ref:o,props:a,_owner:fd.current}}function qx(e,t){return{$$typeof:Ka,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ka}function Hx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Iu=/\/+/g;function al(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hx(""+e.key):t.toString(36)}function Pi(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ka:case Ox:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+al(o,0):n,$u(a)?(r="",e!=null&&(r=e.replace(Iu,"$&/")+"/"),Pi(a,t,r,"",function(c){return c})):a!=null&&(pd(a)&&(a=qx(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Iu,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",$u(e))for(var l=0;l<e.length;l++){i=e[l];var u=n+al(i,l);o+=Pi(i,t,r,u,a)}else if(u=Bx(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=n+al(i,l++),o+=Pi(i,t,r,u,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function li(e,t,r){if(e==null)return e;var n=[],a=0;return Pi(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Yx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},Mi={transition:null},Vx={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Mi,ReactCurrentOwner:fd};function Gh(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:li,forEach:function(e,t,r){li(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return li(e,function(){t++}),t},toArray:function(e){return li(e,function(t){return t})||[]},only:function(e){if(!pd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=$n;he.Fragment=$x;he.Profiler=Lx;he.PureComponent=md;he.StrictMode=Ix;he.Suspense=Ux;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vx;he.act=Gh;he.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=zh({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=fd.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Hh.call(t,u)&&!Yh.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Ka,type:e.type,key:a,ref:i,props:n,_owner:o}};he.createContext=function(e){return e={$$typeof:Ax,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rx,_context:e},e.Consumer=e};he.createElement=Vh;he.createFactory=function(e){var t=Vh.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:Fx,render:e}};he.isValidElement=pd;he.lazy=function(e){return{$$typeof:zx,_payload:{_status:-1,_result:e},_init:Yx}};he.memo=function(e,t){return{$$typeof:Wx,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Mi.transition;Mi.transition={};try{e()}finally{Mi.transition=t}};he.unstable_act=Gh;he.useCallback=function(e,t){return ft.current.useCallback(e,t)};he.useContext=function(e){return ft.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};he.useEffect=function(e,t){return ft.current.useEffect(e,t)};he.useId=function(){return ft.current.useId()};he.useImperativeHandle=function(e,t,r){return ft.current.useImperativeHandle(e,t,r)};he.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return ft.current.useMemo(e,t)};he.useReducer=function(e,t,r){return ft.current.useReducer(e,t,r)};he.useRef=function(e){return ft.current.useRef(e)};he.useState=function(e){return ft.current.useState(e)};he.useSyncExternalStore=function(e,t,r){return ft.current.useSyncExternalStore(e,t,r)};he.useTransition=function(){return ft.current.useTransition()};he.version="18.3.1";Uh.exports=he;var v=Uh.exports;const K=Ah(v),Jh=Px({__proto__:null,default:K},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx=v,Jx=Symbol.for("react.element"),Kx=Symbol.for("react.fragment"),Qx=Object.prototype.hasOwnProperty,Xx=Gx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zx={key:!0,ref:!0,__self:!0,__source:!0};function Kh(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Qx.call(t,n)&&!Zx.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Jx,type:e,key:i,ref:o,props:a,_owner:Xx.current}}No.Fragment=Kx;No.jsx=Kh;No.jsxs=Kh;Fh.exports=No;var s=Fh.exports,Kl={},Qh={exports:{}},$t={},Xh={exports:{}},Zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var L=T.length;T.push(I);e:for(;0<L;){var W=L-1>>>1,q=T[W];if(0<a(q,I))T[W]=I,T[L]=q,L=W;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var I=T[0],L=T.pop();if(L!==I){T[0]=L;e:for(var W=0,q=T.length,H=q>>>1;W<H;){var X=2*(W+1)-1,te=T[X],G=X+1,Y=T[G];if(0>a(te,L))G<q&&0>a(Y,te)?(T[W]=Y,T[G]=L,W=G):(T[W]=te,T[X]=L,W=X);else if(G<q&&0>a(Y,L))T[W]=Y,T[G]=L,W=G;else break e}}return I}function a(T,I){var L=T.sortIndex-I.sortIndex;return L!==0?L:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],m=1,h=null,d=3,f=!1,w=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var I=r(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=T)n(c),I.sortIndex=I.expirationTime,t(u,I);else break;I=r(c)}}function _(T){if(x=!1,b(T),!w)if(r(u)!==null)w=!0,E(C);else{var I=r(c);I!==null&&F(_,I.startTime-T)}}function C(T,I){w=!1,x&&(x=!1,g(S),S=-1),f=!0;var L=d;try{for(b(I),h=r(u);h!==null&&(!(h.expirationTime>I)||T&&!P());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var q=W(h.expirationTime<=I);I=e.unstable_now(),typeof q=="function"?h.callback=q:h===r(u)&&n(u),b(I)}else n(u);h=r(u)}if(h!==null)var H=!0;else{var X=r(c);X!==null&&F(_,X.startTime-I),H=!1}return H}finally{h=null,d=L,f=!1}}var k=!1,j=null,S=-1,U=5,R=-1;function P(){return!(e.unstable_now()-R<U)}function N(){if(j!==null){var T=e.unstable_now();R=T;var I=!0;try{I=j(!0,T)}finally{I?$():(k=!1,j=null)}}else k=!1}var $;if(typeof p=="function")$=function(){p(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,D=O.port2;O.port1.onmessage=N,$=function(){D.postMessage(null)}}else $=function(){y(N,0)};function E(T){j=T,k||(k=!0,$())}function F(T,I){S=y(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||f||(w=!0,E(C))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(T){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var L=d;d=I;try{return T()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=d;d=T;try{return I()}finally{d=L}},e.unstable_scheduleCallback=function(T,I,L){var W=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,T){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,T={id:m++,callback:I,priorityLevel:T,startTime:L,expirationTime:q,sortIndex:-1},L>W?(T.sortIndex=L,t(c,T),r(u)===null&&T===r(c)&&(x?(g(S),S=-1):x=!0,F(_,L-W))):(T.sortIndex=q,t(u,T),w||f||(w=!0,E(C))),T},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(T){var I=d;return function(){var L=d;d=I;try{return T.apply(this,arguments)}finally{d=L}}}})(Zh);Xh.exports=Zh;var ey=Xh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=v,Ot=ey;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ef=new Set,ka={};function Fs(e,t){jn(e,t),jn(e+"Capture",t)}function jn(e,t){for(ka[e]=t,e=0;e<t.length;e++)ef.add(t[e])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=Object.prototype.hasOwnProperty,ry=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lu={},Ru={};function sy(e){return Ql.call(Ru,e)?!0:Ql.call(Lu,e)?!1:ry.test(e)?Ru[e]=!0:(Lu[e]=!0,!1)}function ny(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ay(e,t,r,n){if(t===null||typeof t>"u"||ny(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var gd=/[\-:]([a-z])/g;function xd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gd,xd);rt[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gd,xd);rt[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gd,xd);rt[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function yd(e,t,r,n){var a=rt.hasOwnProperty(t)?rt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ay(t,r,a,n)&&(r=null),n||a===null?sy(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Or=ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),en=Symbol.for("react.portal"),tn=Symbol.for("react.fragment"),vd=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),rf=Symbol.for("react.context"),wd=Symbol.for("react.forward_ref"),Zl=Symbol.for("react.suspense"),ec=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),sf=Symbol.for("react.offscreen"),Au=Symbol.iterator;function qn(e){return e===null||typeof e!="object"?null:(e=Au&&e[Au]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,il;function sa(e){if(il===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);il=t&&t[1]||""}return`
`+il+e}var ol=!1;function ll(e,t){if(!e||ol)return"";ol=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var u=`
`+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{ol=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sa(e):""}function iy(e){switch(e.tag){case 5:return sa(e.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return e=ll(e.type,!1),e;case 11:return e=ll(e.type.render,!1),e;case 1:return e=ll(e.type,!0),e;default:return""}}function tc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tn:return"Fragment";case en:return"Portal";case Xl:return"Profiler";case vd:return"StrictMode";case Zl:return"Suspense";case ec:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rf:return(e.displayName||"Context")+".Consumer";case tf:return(e._context.displayName||"Context")+".Provider";case wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bd:return t=e.displayName||null,t!==null?t:tc(e.type)||"Memo";case Hr:t=e._payload,e=e._init;try{return tc(e(t))}catch{}}return null}function oy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tc(t);case 8:return t===vd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ly(e){var t=nf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function di(e){e._valueTracker||(e._valueTracker=ly(e))}function af(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=nf(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rc(e,t){var r=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=us(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function of(e,t){t=t.checked,t!=null&&yd(e,"checked",t,!1)}function sc(e,t){of(e,t);var r=us(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nc(e,t.type,r):t.hasOwnProperty("defaultValue")&&nc(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nc(e,t,r){(t!=="number"||Yi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var na=Array.isArray;function hn(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ac(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(na(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:us(r)}}function lf(e,t){var r=us(t.value),n=us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ic(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ui,df=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ui=ui||document.createElement("div"),ui.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ui.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cy=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(e){cy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ca[t]=ca[e]})});function uf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ca.hasOwnProperty(e)&&ca[e]?(""+t).trim():t+"px"}function mf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=uf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var dy=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oc(e,t){if(t){if(dy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function lc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cc=null;function _d(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dc=null,fn=null,pn=null;function Bu(e){if(e=Za(e)){if(typeof dc!="function")throw Error(B(280));var t=e.stateNode;t&&(t=To(t),dc(e.stateNode,e.type,t))}}function hf(e){fn?pn?pn.push(e):pn=[e]:fn=e}function ff(){if(fn){var e=fn,t=pn;if(pn=fn=null,Bu(e),t)for(e=0;e<t.length;e++)Bu(t[e])}}function pf(e,t){return e(t)}function gf(){}var cl=!1;function xf(e,t,r){if(cl)return e(t,r);cl=!0;try{return pf(e,t,r)}finally{cl=!1,(fn!==null||pn!==null)&&(gf(),ff())}}function Ca(e,t){var r=e.stateNode;if(r===null)return null;var n=To(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var uc=!1;if(Tr)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){uc=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{uc=!1}function uy(e,t,r,n,a,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(m){this.onError(m)}}var da=!1,Vi=null,Gi=!1,mc=null,my={onError:function(e){da=!0,Vi=e}};function hy(e,t,r,n,a,i,o,l,u){da=!1,Vi=null,uy.apply(my,arguments)}function fy(e,t,r,n,a,i,o,l,u){if(hy.apply(this,arguments),da){if(da){var c=Vi;da=!1,Vi=null}else throw Error(B(198));Gi||(Gi=!0,mc=c)}}function Us(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qu(e){if(Us(e)!==e)throw Error(B(188))}function py(e){var t=e.alternate;if(!t){if(t=Us(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return qu(a),e;if(i===n)return qu(a),t;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function vf(e){return e=py(e),e!==null?wf(e):null}function wf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wf(e);if(t!==null)return t;e=e.sibling}return null}var bf=Ot.unstable_scheduleCallback,Hu=Ot.unstable_cancelCallback,gy=Ot.unstable_shouldYield,xy=Ot.unstable_requestPaint,ze=Ot.unstable_now,yy=Ot.unstable_getCurrentPriorityLevel,jd=Ot.unstable_ImmediatePriority,_f=Ot.unstable_UserBlockingPriority,Ji=Ot.unstable_NormalPriority,vy=Ot.unstable_LowPriority,jf=Ot.unstable_IdlePriority,ko=null,mr=null;function wy(e){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:jy,by=Math.log,_y=Math.LN2;function jy(e){return e>>>=0,e===0?32:31-(by(e)/_y|0)|0}var mi=64,hi=4194304;function aa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ki(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=aa(l):(i&=o,i!==0&&(n=aa(i)))}else o=r&~a,o!==0?n=aa(o):i!==0&&(n=aa(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-er(t),a=1<<r,n|=e[r],t&=~a;return n}function Ny(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ky(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-er(i),l=1<<o,u=a[o];u===-1?(!(l&r)||l&n)&&(a[o]=Ny(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function hc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nf(){var e=mi;return mi<<=1,!(mi&4194240)&&(mi=64),e}function dl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-er(t),e[t]=r}function Sy(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-er(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Nd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-er(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ne=0;function kf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sf,kd,Cf,Ef,Tf,fc=!1,fi=[],ts=null,rs=null,ss=null,Ea=new Map,Ta=new Map,Jr=[],Cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yu(e,t){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":Ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(t.pointerId)}}function Yn(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Za(t),t!==null&&kd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Ey(e,t,r,n,a){switch(t){case"focusin":return ts=Yn(ts,e,t,r,n,a),!0;case"dragenter":return rs=Yn(rs,e,t,r,n,a),!0;case"mouseover":return ss=Yn(ss,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ea.set(i,Yn(Ea.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ta.set(i,Yn(Ta.get(i)||null,e,t,r,n,a)),!0}return!1}function Df(e){var t=Ss(e.target);if(t!==null){var r=Us(t);if(r!==null){if(t=r.tag,t===13){if(t=yf(r),t!==null){e.blockedOn=t,Tf(e.priority,function(){Cf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);cc=n,r.target.dispatchEvent(n),cc=null}else return t=Za(r),t!==null&&kd(t),e.blockedOn=r,!1;t.shift()}return!0}function Vu(e,t,r){Oi(e)&&r.delete(t)}function Ty(){fc=!1,ts!==null&&Oi(ts)&&(ts=null),rs!==null&&Oi(rs)&&(rs=null),ss!==null&&Oi(ss)&&(ss=null),Ea.forEach(Vu),Ta.forEach(Vu)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,fc||(fc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Ty)))}function Da(e){function t(a){return Vn(a,e)}if(0<fi.length){Vn(fi[0],e);for(var r=1;r<fi.length;r++){var n=fi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ts!==null&&Vn(ts,e),rs!==null&&Vn(rs,e),ss!==null&&Vn(ss,e),Ea.forEach(t),Ta.forEach(t),r=0;r<Jr.length;r++)n=Jr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)Df(r),r.blockedOn===null&&Jr.shift()}var gn=Or.ReactCurrentBatchConfig,Qi=!0;function Dy(e,t,r,n){var a=Ne,i=gn.transition;gn.transition=null;try{Ne=1,Sd(e,t,r,n)}finally{Ne=a,gn.transition=i}}function Py(e,t,r,n){var a=Ne,i=gn.transition;gn.transition=null;try{Ne=4,Sd(e,t,r,n)}finally{Ne=a,gn.transition=i}}function Sd(e,t,r,n){if(Qi){var a=pc(e,t,r,n);if(a===null)wl(e,t,n,Xi,r),Yu(e,n);else if(Ey(a,e,t,r,n))n.stopPropagation();else if(Yu(e,n),t&4&&-1<Cy.indexOf(e)){for(;a!==null;){var i=Za(a);if(i!==null&&Sf(i),i=pc(e,t,r,n),i===null&&wl(e,t,n,Xi,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else wl(e,t,n,null,r)}}var Xi=null;function pc(e,t,r,n){if(Xi=null,e=_d(n),e=Ss(e),e!==null)if(t=Us(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xi=e,null}function Pf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yy()){case jd:return 1;case _f:return 4;case Ji:case vy:return 16;case jf:return 536870912;default:return 16}default:return 16}}var Xr=null,Cd=null,$i=null;function Mf(){if($i)return $i;var e,t=Cd,r=t.length,n,a="value"in Xr?Xr.value:Xr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return $i=a.slice(e,1<n?1-n:void 0)}function Ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pi(){return!0}function Gu(){return!1}function It(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pi:Gu,this.isPropagationStopped=Gu,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ed=It(In),Xa=Ae({},In,{view:0,detail:0}),My=It(Xa),ul,ml,Gn,So=Ae({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gn&&(Gn&&e.type==="mousemove"?(ul=e.screenX-Gn.screenX,ml=e.screenY-Gn.screenY):ml=ul=0,Gn=e),ul)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),Ju=It(So),Oy=Ae({},So,{dataTransfer:0}),$y=It(Oy),Iy=Ae({},Xa,{relatedTarget:0}),hl=It(Iy),Ly=Ae({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Ry=It(Ly),Ay=Ae({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fy=It(Ay),Uy=Ae({},In,{data:0}),Ku=It(Uy),Wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},By={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=By[e])?!!t[e]:!1}function Td(){return qy}var Hy=Ae({},Xa,{key:function(e){if(e.key){var t=Wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yy=It(Hy),Vy=Ae({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=It(Vy),Gy=Ae({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),Jy=It(Gy),Ky=Ae({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qy=It(Ky),Xy=Ae({},So,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zy=It(Xy),ev=[9,13,27,32],Dd=Tr&&"CompositionEvent"in window,ua=null;Tr&&"documentMode"in document&&(ua=document.documentMode);var tv=Tr&&"TextEvent"in window&&!ua,Of=Tr&&(!Dd||ua&&8<ua&&11>=ua),Xu=" ",Zu=!1;function $f(e,t){switch(e){case"keyup":return ev.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rn=!1;function rv(e,t){switch(e){case"compositionend":return If(t);case"keypress":return t.which!==32?null:(Zu=!0,Xu);case"textInput":return e=t.data,e===Xu&&Zu?null:e;default:return null}}function sv(e,t){if(rn)return e==="compositionend"||!Dd&&$f(e,t)?(e=Mf(),$i=Cd=Xr=null,rn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Of&&t.locale!=="ko"?null:t.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nv[e.type]:t==="textarea"}function Lf(e,t,r,n){hf(n),t=Zi(t,"onChange"),0<t.length&&(r=new Ed("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ma=null,Pa=null;function av(e){Vf(e,0)}function Co(e){var t=an(e);if(af(t))return e}function iv(e,t){if(e==="change")return t}var Rf=!1;if(Tr){var fl;if(Tr){var pl="oninput"in document;if(!pl){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),pl=typeof tm.oninput=="function"}fl=pl}else fl=!1;Rf=fl&&(!document.documentMode||9<document.documentMode)}function rm(){ma&&(ma.detachEvent("onpropertychange",Af),Pa=ma=null)}function Af(e){if(e.propertyName==="value"&&Co(Pa)){var t=[];Lf(t,Pa,e,_d(e)),xf(av,t)}}function ov(e,t,r){e==="focusin"?(rm(),ma=t,Pa=r,ma.attachEvent("onpropertychange",Af)):e==="focusout"&&rm()}function lv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Co(Pa)}function cv(e,t){if(e==="click")return Co(t)}function dv(e,t){if(e==="input"||e==="change")return Co(t)}function uv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rr=typeof Object.is=="function"?Object.is:uv;function Ma(e,t){if(rr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ql.call(t,a)||!rr(e[a],t[a]))return!1}return!0}function sm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nm(e,t){var r=sm(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sm(r)}}function Ff(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ff(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uf(){for(var e=window,t=Yi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Yi(e.document)}return t}function Pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mv(e){var t=Uf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ff(r.ownerDocument.documentElement,r)){if(n!==null&&Pd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=nm(r,i);var o=nm(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hv=Tr&&"documentMode"in document&&11>=document.documentMode,sn=null,gc=null,ha=null,xc=!1;function am(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xc||sn==null||sn!==Yi(n)||(n=sn,"selectionStart"in n&&Pd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ha&&Ma(ha,n)||(ha=n,n=Zi(gc,"onSelect"),0<n.length&&(t=new Ed("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=sn)))}function gi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var nn={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionend:gi("Transition","TransitionEnd")},gl={},Wf={};Tr&&(Wf=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function Eo(e){if(gl[e])return gl[e];if(!nn[e])return e;var t=nn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Wf)return gl[e]=t[r];return e}var zf=Eo("animationend"),Bf=Eo("animationiteration"),qf=Eo("animationstart"),Hf=Eo("transitionend"),Yf=new Map,im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(e,t){Yf.set(e,t),Fs(t,[e])}for(var xl=0;xl<im.length;xl++){var yl=im[xl],fv=yl.toLowerCase(),pv=yl[0].toUpperCase()+yl.slice(1);ps(fv,"on"+pv)}ps(zf,"onAnimationEnd");ps(Bf,"onAnimationIteration");ps(qf,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Hf,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function om(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,fy(n,t,void 0,e),e.currentTarget=null}function Vf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&a.isPropagationStopped())break e;om(a,l,c),i=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&a.isPropagationStopped())break e;om(a,l,c),i=u}}}if(Gi)throw e=mc,Gi=!1,mc=null,e}function Me(e,t){var r=t[_c];r===void 0&&(r=t[_c]=new Set);var n=e+"__bubble";r.has(n)||(Gf(t,e,2,!1),r.add(n))}function vl(e,t,r){var n=0;t&&(n|=4),Gf(r,e,n,t)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Oa(e){if(!e[xi]){e[xi]=!0,ef.forEach(function(r){r!=="selectionchange"&&(gv.has(r)||vl(r,!1,e),vl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xi]||(t[xi]=!0,vl("selectionchange",!1,t))}}function Gf(e,t,r,n){switch(Pf(t)){case 1:var a=Dy;break;case 4:a=Py;break;default:a=Sd}r=a.bind(null,t,r,e),a=void 0,!uc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function wl(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ss(l),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}l=l.parentNode}}n=n.return}xf(function(){var c=i,m=_d(r),h=[];e:{var d=Yf.get(e);if(d!==void 0){var f=Ed,w=e;switch(e){case"keypress":if(Ii(r)===0)break e;case"keydown":case"keyup":f=Yy;break;case"focusin":w="focus",f=hl;break;case"focusout":w="blur",f=hl;break;case"beforeblur":case"afterblur":f=hl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=$y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Jy;break;case zf:case Bf:case qf:f=Ry;break;case Hf:f=Qy;break;case"scroll":f=My;break;case"wheel":f=Zy;break;case"copy":case"cut":case"paste":f=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Qu}var x=(t&4)!==0,y=!x&&e==="scroll",g=x?d!==null?d+"Capture":null:d;x=[];for(var p=c,b;p!==null;){b=p;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,g!==null&&(_=Ca(p,g),_!=null&&x.push($a(p,_,b)))),y)break;p=p.return}0<x.length&&(d=new f(d,w,null,r,m),h.push({event:d,listeners:x}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&r!==cc&&(w=r.relatedTarget||r.fromElement)&&(Ss(w)||w[Dr]))break e;if((f||d)&&(d=m.window===m?m:(d=m.ownerDocument)?d.defaultView||d.parentWindow:window,f?(w=r.relatedTarget||r.toElement,f=c,w=w?Ss(w):null,w!==null&&(y=Us(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(f=null,w=c),f!==w)){if(x=Ju,_="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Qu,_="onPointerLeave",g="onPointerEnter",p="pointer"),y=f==null?d:an(f),b=w==null?d:an(w),d=new x(_,p+"leave",f,r,m),d.target=y,d.relatedTarget=b,_=null,Ss(m)===c&&(x=new x(g,p+"enter",w,r,m),x.target=b,x.relatedTarget=y,_=x),y=_,f&&w)t:{for(x=f,g=w,p=0,b=x;b;b=Hs(b))p++;for(b=0,_=g;_;_=Hs(_))b++;for(;0<p-b;)x=Hs(x),p--;for(;0<b-p;)g=Hs(g),b--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=Hs(x),g=Hs(g)}x=null}else x=null;f!==null&&lm(h,d,f,x,!1),w!==null&&y!==null&&lm(h,y,w,x,!0)}}e:{if(d=c?an(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var C=iv;else if(em(d))if(Rf)C=dv;else{C=lv;var k=ov}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=cv);if(C&&(C=C(e,c))){Lf(h,C,r,m);break e}k&&k(e,d,c),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&nc(d,"number",d.value)}switch(k=c?an(c):window,e){case"focusin":(em(k)||k.contentEditable==="true")&&(sn=k,gc=c,ha=null);break;case"focusout":ha=gc=sn=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,am(h,r,m);break;case"selectionchange":if(hv)break;case"keydown":case"keyup":am(h,r,m)}var j;if(Dd)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else rn?$f(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Of&&r.locale!=="ko"&&(rn||S!=="onCompositionStart"?S==="onCompositionEnd"&&rn&&(j=Mf()):(Xr=m,Cd="value"in Xr?Xr.value:Xr.textContent,rn=!0)),k=Zi(c,S),0<k.length&&(S=new Ku(S,e,null,r,m),h.push({event:S,listeners:k}),j?S.data=j:(j=If(r),j!==null&&(S.data=j)))),(j=tv?rv(e,r):sv(e,r))&&(c=Zi(c,"onBeforeInput"),0<c.length&&(m=new Ku("onBeforeInput","beforeinput",null,r,m),h.push({event:m,listeners:c}),m.data=j))}Vf(h,t)})}function $a(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zi(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ca(e,r),i!=null&&n.unshift($a(e,i,a)),i=Ca(e,t),i!=null&&n.push($a(e,i,a))),e=e.return}return n}function Hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lm(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,a?(u=Ca(r,i),u!=null&&o.unshift($a(r,u,l))):a||(u=Ca(r,i),u!=null&&o.push($a(r,u,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var xv=/\r\n?/g,yv=/\u0000|\uFFFD/g;function cm(e){return(typeof e=="string"?e:""+e).replace(xv,`
`).replace(yv,"")}function yi(e,t,r){if(t=cm(t),cm(e)!==t&&r)throw Error(B(425))}function eo(){}var yc=null,vc=null;function wc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,vv=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(e){return dm.resolve(null).then(e).catch(bv)}:bc;function bv(e){setTimeout(function(){throw e})}function bl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Da(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Da(t)}function ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function um(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ln=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ln,Ia="__reactProps$"+Ln,Dr="__reactContainer$"+Ln,_c="__reactEvents$"+Ln,_v="__reactListeners$"+Ln,jv="__reactHandles$"+Ln;function Ss(e){var t=e[lr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Dr]||r[lr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=um(e);e!==null;){if(r=e[lr])return r;e=um(e)}return t}e=r,r=e.parentNode}return null}function Za(e){return e=e[lr]||e[Dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function an(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function To(e){return e[Ia]||null}var jc=[],on=-1;function gs(e){return{current:e}}function Oe(e){0>on||(e.current=jc[on],jc[on]=null,on--)}function De(e,t){on++,jc[on]=e.current,e.current=t}var ms={},ct=gs(ms),_t=gs(!1),Ms=ms;function Nn(e,t){var r=e.type.contextTypes;if(!r)return ms;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function jt(e){return e=e.childContextTypes,e!=null}function to(){Oe(_t),Oe(ct)}function mm(e,t,r){if(ct.current!==ms)throw Error(B(168));De(ct,t),De(_t,r)}function Jf(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(B(108,oy(e)||"Unknown",a));return Ae({},r,n)}function ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ms,Ms=ct.current,De(ct,e),De(_t,_t.current),!0}function hm(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=Jf(e,t,Ms),n.__reactInternalMemoizedMergedChildContext=e,Oe(_t),Oe(ct),De(ct,e)):Oe(_t),De(_t,r)}var wr=null,Do=!1,_l=!1;function Kf(e){wr===null?wr=[e]:wr.push(e)}function Nv(e){Do=!0,Kf(e)}function xs(){if(!_l&&wr!==null){_l=!0;var e=0,t=Ne;try{var r=wr;for(Ne=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wr=null,Do=!1}catch(a){throw wr!==null&&(wr=wr.slice(e+1)),bf(jd,xs),a}finally{Ne=t,_l=!1}}return null}var ln=[],cn=0,so=null,no=0,At=[],Ft=0,Os=null,_r=1,jr="";function ws(e,t){ln[cn++]=no,ln[cn++]=so,so=e,no=t}function Qf(e,t,r){At[Ft++]=_r,At[Ft++]=jr,At[Ft++]=Os,Os=e;var n=_r;e=jr;var a=32-er(n)-1;n&=~(1<<a),r+=1;var i=32-er(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,_r=1<<32-er(t)+a|r<<a|n,jr=i+e}else _r=1<<i|r<<a|n,jr=e}function Md(e){e.return!==null&&(ws(e,1),Qf(e,1,0))}function Od(e){for(;e===so;)so=ln[--cn],ln[cn]=null,no=ln[--cn],ln[cn]=null;for(;e===Os;)Os=At[--Ft],At[Ft]=null,jr=At[--Ft],At[Ft]=null,_r=At[--Ft],At[Ft]=null}var Mt=null,Tt=null,$e=!1,Xt=null;function Xf(e,t){var r=Ut(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function fm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Tt=ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Os!==null?{id:_r,overflow:jr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ut(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Mt=e,Tt=null,!0):!1;default:return!1}}function Nc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function kc(e){if($e){var t=Tt;if(t){var r=t;if(!fm(e,t)){if(Nc(e))throw Error(B(418));t=ns(r.nextSibling);var n=Mt;t&&fm(e,t)?Xf(n,r):(e.flags=e.flags&-4097|2,$e=!1,Mt=e)}}else{if(Nc(e))throw Error(B(418));e.flags=e.flags&-4097|2,$e=!1,Mt=e}}}function pm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function vi(e){if(e!==Mt)return!1;if(!$e)return pm(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wc(e.type,e.memoizedProps)),t&&(t=Tt)){if(Nc(e))throw Zf(),Error(B(418));for(;t;)Xf(e,t),t=ns(t.nextSibling)}if(pm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Tt=ns(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=Mt?ns(e.stateNode.nextSibling):null;return!0}function Zf(){for(var e=Tt;e;)e=ns(e.nextSibling)}function kn(){Tt=Mt=null,$e=!1}function $d(e){Xt===null?Xt=[e]:Xt.push(e)}var kv=Or.ReactCurrentBatchConfig;function Jn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function wi(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gm(e){var t=e._init;return t(e._payload)}function ep(e){function t(g,p){if(e){var b=g.deletions;b===null?(g.deletions=[p],g.flags|=16):b.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=ls(g,p),g.index=0,g.sibling=null,g}function i(g,p,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<p?(g.flags|=2,p):b):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,b,_){return p===null||p.tag!==6?(p=Tl(b,g.mode,_),p.return=g,p):(p=a(p,b),p.return=g,p)}function u(g,p,b,_){var C=b.type;return C===tn?m(g,p,b.props.children,_,b.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Hr&&gm(C)===p.type)?(_=a(p,b.props),_.ref=Jn(g,p,b),_.return=g,_):(_=zi(b.type,b.key,b.props,null,g.mode,_),_.ref=Jn(g,p,b),_.return=g,_)}function c(g,p,b,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=Dl(b,g.mode,_),p.return=g,p):(p=a(p,b.children||[]),p.return=g,p)}function m(g,p,b,_,C){return p===null||p.tag!==7?(p=Ps(b,g.mode,_,C),p.return=g,p):(p=a(p,b),p.return=g,p)}function h(g,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Tl(""+p,g.mode,b),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ci:return b=zi(p.type,p.key,p.props,null,g.mode,b),b.ref=Jn(g,null,p),b.return=g,b;case en:return p=Dl(p,g.mode,b),p.return=g,p;case Hr:var _=p._init;return h(g,_(p._payload),b)}if(na(p)||qn(p))return p=Ps(p,g.mode,b,null),p.return=g,p;wi(g,p)}return null}function d(g,p,b,_){var C=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:l(g,p,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ci:return b.key===C?u(g,p,b,_):null;case en:return b.key===C?c(g,p,b,_):null;case Hr:return C=b._init,d(g,p,C(b._payload),_)}if(na(b)||qn(b))return C!==null?null:m(g,p,b,_,null);wi(g,b)}return null}function f(g,p,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(b)||null,l(p,g,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ci:return g=g.get(_.key===null?b:_.key)||null,u(p,g,_,C);case en:return g=g.get(_.key===null?b:_.key)||null,c(p,g,_,C);case Hr:var k=_._init;return f(g,p,b,k(_._payload),C)}if(na(_)||qn(_))return g=g.get(b)||null,m(p,g,_,C,null);wi(p,_)}return null}function w(g,p,b,_){for(var C=null,k=null,j=p,S=p=0,U=null;j!==null&&S<b.length;S++){j.index>S?(U=j,j=null):U=j.sibling;var R=d(g,j,b[S],_);if(R===null){j===null&&(j=U);break}e&&j&&R.alternate===null&&t(g,j),p=i(R,p,S),k===null?C=R:k.sibling=R,k=R,j=U}if(S===b.length)return r(g,j),$e&&ws(g,S),C;if(j===null){for(;S<b.length;S++)j=h(g,b[S],_),j!==null&&(p=i(j,p,S),k===null?C=j:k.sibling=j,k=j);return $e&&ws(g,S),C}for(j=n(g,j);S<b.length;S++)U=f(j,g,S,b[S],_),U!==null&&(e&&U.alternate!==null&&j.delete(U.key===null?S:U.key),p=i(U,p,S),k===null?C=U:k.sibling=U,k=U);return e&&j.forEach(function(P){return t(g,P)}),$e&&ws(g,S),C}function x(g,p,b,_){var C=qn(b);if(typeof C!="function")throw Error(B(150));if(b=C.call(b),b==null)throw Error(B(151));for(var k=C=null,j=p,S=p=0,U=null,R=b.next();j!==null&&!R.done;S++,R=b.next()){j.index>S?(U=j,j=null):U=j.sibling;var P=d(g,j,R.value,_);if(P===null){j===null&&(j=U);break}e&&j&&P.alternate===null&&t(g,j),p=i(P,p,S),k===null?C=P:k.sibling=P,k=P,j=U}if(R.done)return r(g,j),$e&&ws(g,S),C;if(j===null){for(;!R.done;S++,R=b.next())R=h(g,R.value,_),R!==null&&(p=i(R,p,S),k===null?C=R:k.sibling=R,k=R);return $e&&ws(g,S),C}for(j=n(g,j);!R.done;S++,R=b.next())R=f(j,g,S,R.value,_),R!==null&&(e&&R.alternate!==null&&j.delete(R.key===null?S:R.key),p=i(R,p,S),k===null?C=R:k.sibling=R,k=R);return e&&j.forEach(function(N){return t(g,N)}),$e&&ws(g,S),C}function y(g,p,b,_){if(typeof b=="object"&&b!==null&&b.type===tn&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ci:e:{for(var C=b.key,k=p;k!==null;){if(k.key===C){if(C=b.type,C===tn){if(k.tag===7){r(g,k.sibling),p=a(k,b.props.children),p.return=g,g=p;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Hr&&gm(C)===k.type){r(g,k.sibling),p=a(k,b.props),p.ref=Jn(g,k,b),p.return=g,g=p;break e}r(g,k);break}else t(g,k);k=k.sibling}b.type===tn?(p=Ps(b.props.children,g.mode,_,b.key),p.return=g,g=p):(_=zi(b.type,b.key,b.props,null,g.mode,_),_.ref=Jn(g,p,b),_.return=g,g=_)}return o(g);case en:e:{for(k=b.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){r(g,p.sibling),p=a(p,b.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=Dl(b,g.mode,_),p.return=g,g=p}return o(g);case Hr:return k=b._init,y(g,p,k(b._payload),_)}if(na(b))return w(g,p,b,_);if(qn(b))return x(g,p,b,_);wi(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(r(g,p.sibling),p=a(p,b),p.return=g,g=p):(r(g,p),p=Tl(b,g.mode,_),p.return=g,g=p),o(g)):r(g,p)}return y}var Sn=ep(!0),tp=ep(!1),ao=gs(null),io=null,dn=null,Id=null;function Ld(){Id=dn=io=null}function Rd(e){var t=ao.current;Oe(ao),e._currentValue=t}function Sc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function xn(e,t){io=e,Id=dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(Id!==e)if(e={context:e,memoizedValue:t,next:null},dn===null){if(io===null)throw Error(B(308));dn=e,io.dependencies={lanes:0,firstContext:e}}else dn=dn.next=e;return t}var Cs=null;function Ad(e){Cs===null?Cs=[e]:Cs.push(e)}function rp(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Ad(t)):(r.next=a.next,a.next=r),t.interleaved=r,Pr(e,n)}function Pr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yr=!1;function Fd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function as(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,xe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Pr(e,r)}return a=n.interleaved,a===null?(t.next=t,Ad(n)):(t.next=a.next,a.next=t),n.interleaved=t,Pr(e,r)}function Li(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nd(e,r)}}function xm(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function oo(e,t,r,n){var a=e.updateQueue;Yr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=u))}if(i!==null){var h=a.baseState;o=0,m=c=u=null,l=i;do{var d=l.lane,f=l.eventTime;if((n&d)===d){m!==null&&(m=m.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,x=l;switch(d=t,f=r,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(f,h,d);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,d=typeof w=="function"?w.call(f,h,d):w,d==null)break e;h=Ae({},h,d);break e;case 2:Yr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(c=m=f,u=h):m=m.next=f,o|=d;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;d=l,l=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(m===null&&(u=h),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Is|=o,e.lanes=o,e.memoizedState=h}}function ym(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(B(191,a));a.call(n)}}}var ei={},hr=gs(ei),La=gs(ei),Ra=gs(ei);function Es(e){if(e===ei)throw Error(B(174));return e}function Ud(e,t){switch(De(Ra,t),De(La,e),De(hr,ei),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ic(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ic(t,e)}Oe(hr),De(hr,t)}function Cn(){Oe(hr),Oe(La),Oe(Ra)}function np(e){Es(Ra.current);var t=Es(hr.current),r=ic(t,e.type);t!==r&&(De(La,e),De(hr,r))}function Wd(e){La.current===e&&(Oe(hr),Oe(La))}var Le=gs(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jl=[];function zd(){for(var e=0;e<jl.length;e++)jl[e]._workInProgressVersionPrimary=null;jl.length=0}var Ri=Or.ReactCurrentDispatcher,Nl=Or.ReactCurrentBatchConfig,$s=0,Re=null,Ye=null,Qe=null,co=!1,fa=!1,Aa=0,Sv=0;function at(){throw Error(B(321))}function Bd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rr(e[r],t[r]))return!1;return!0}function qd(e,t,r,n,a,i){if($s=i,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ri.current=e===null||e.memoizedState===null?Dv:Pv,e=r(n,a),fa){i=0;do{if(fa=!1,Aa=0,25<=i)throw Error(B(301));i+=1,Qe=Ye=null,t.updateQueue=null,Ri.current=Mv,e=r(n,a)}while(fa)}if(Ri.current=uo,t=Ye!==null&&Ye.next!==null,$s=0,Qe=Ye=Re=null,co=!1,t)throw Error(B(300));return e}function Hd(){var e=Aa!==0;return Aa=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Re.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function qt(){if(Ye===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Qe===null?Re.memoizedState:Qe.next;if(t!==null)Qe=t,Ye=e;else{if(e===null)throw Error(B(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Qe===null?Re.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Fa(e,t){return typeof t=="function"?t(e):t}function kl(e){var t=qt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=Ye,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,u=null,c=i;do{var m=c.lane;if(($s&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=n):u=u.next=h,Re.lanes|=m,Is|=m}c=c.next}while(c!==null&&c!==i);u===null?o=n:u.next=l,rr(n,t.memoizedState)||(bt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Re.lanes|=i,Is|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sl(e){var t=qt(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);rr(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ap(){}function ip(e,t){var r=Re,n=qt(),a=t(),i=!rr(n.memoizedState,a);if(i&&(n.memoizedState=a,bt=!0),n=n.queue,Yd(cp.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(r.flags|=2048,Ua(9,lp.bind(null,r,n,a,t),void 0,null),Xe===null)throw Error(B(349));$s&30||op(r,t,a)}return a}function op(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lp(e,t,r,n){t.value=r,t.getSnapshot=n,dp(t)&&up(e)}function cp(e,t,r){return r(function(){dp(t)&&up(e)})}function dp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rr(e,r)}catch{return!0}}function up(e){var t=Pr(e,1);t!==null&&tr(t,e,1,-1)}function vm(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:e},t.queue=e,e=e.dispatch=Tv.bind(null,Re,e),[t.memoizedState,e]}function Ua(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function mp(){return qt().memoizedState}function Ai(e,t,r,n){var a=or();Re.flags|=e,a.memoizedState=Ua(1|t,r,void 0,n===void 0?null:n)}function Po(e,t,r,n){var a=qt();n=n===void 0?null:n;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,n!==null&&Bd(n,o.deps)){a.memoizedState=Ua(t,r,i,n);return}}Re.flags|=e,a.memoizedState=Ua(1|t,r,i,n)}function wm(e,t){return Ai(8390656,8,e,t)}function Yd(e,t){return Po(2048,8,e,t)}function hp(e,t){return Po(4,2,e,t)}function fp(e,t){return Po(4,4,e,t)}function pp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gp(e,t,r){return r=r!=null?r.concat([e]):null,Po(4,4,pp.bind(null,t,e),r)}function Vd(){}function xp(e,t){var r=qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function yp(e,t){var r=qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vp(e,t,r){return $s&21?(rr(r,t)||(r=Nf(),Re.lanes|=r,Is|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function Cv(e,t){var r=Ne;Ne=r!==0&&4>r?r:4,e(!0);var n=Nl.transition;Nl.transition={};try{e(!1),t()}finally{Ne=r,Nl.transition=n}}function wp(){return qt().memoizedState}function Ev(e,t,r){var n=os(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bp(e))_p(t,r);else if(r=rp(e,t,r,n),r!==null){var a=ht();tr(r,e,n,a),jp(r,t,n)}}function Tv(e,t,r){var n=os(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bp(e))_p(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,rr(l,o)){var u=t.interleaved;u===null?(a.next=a,Ad(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}r=rp(e,t,a,n),r!==null&&(a=ht(),tr(r,e,n,a),jp(r,t,n))}}function bp(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function _p(e,t){fa=co=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jp(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nd(e,r)}}var uo={readContext:Bt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Dv={readContext:Bt,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:wm,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ai(4194308,4,pp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var r=or();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=or();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ev.bind(null,Re,e),[n.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:vm,useDebugValue:Vd,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=vm(!1),t=e[0];return e=Cv.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Re,a=or();if($e){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),Xe===null)throw Error(B(349));$s&30||op(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,wm(cp.bind(null,n,i,e),[e]),n.flags|=2048,Ua(9,lp.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=or(),t=Xe.identifierPrefix;if($e){var r=jr,n=_r;r=(n&~(1<<32-er(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Aa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Sv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pv={readContext:Bt,useCallback:xp,useContext:Bt,useEffect:Yd,useImperativeHandle:gp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:yp,useReducer:kl,useRef:mp,useState:function(){return kl(Fa)},useDebugValue:Vd,useDeferredValue:function(e){var t=qt();return vp(t,Ye.memoizedState,e)},useTransition:function(){var e=kl(Fa)[0],t=qt().memoizedState;return[e,t]},useMutableSource:ap,useSyncExternalStore:ip,useId:wp,unstable_isNewReconciler:!1},Mv={readContext:Bt,useCallback:xp,useContext:Bt,useEffect:Yd,useImperativeHandle:gp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:yp,useReducer:Sl,useRef:mp,useState:function(){return Sl(Fa)},useDebugValue:Vd,useDeferredValue:function(e){var t=qt();return Ye===null?t.memoizedState=e:vp(t,Ye.memoizedState,e)},useTransition:function(){var e=Sl(Fa)[0],t=qt().memoizedState;return[e,t]},useMutableSource:ap,useSyncExternalStore:ip,useId:wp,unstable_isNewReconciler:!1};function Jt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Cc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Mo={isMounted:function(e){return(e=e._reactInternals)?Us(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ht(),a=os(e),i=Er(n,a);i.payload=t,r!=null&&(i.callback=r),t=as(e,i,a),t!==null&&(tr(t,e,a,n),Li(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ht(),a=os(e),i=Er(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=as(e,i,a),t!==null&&(tr(t,e,a,n),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),n=os(e),a=Er(r,n);a.tag=2,t!=null&&(a.callback=t),t=as(e,a,n),t!==null&&(tr(t,e,n,r),Li(t,e,n))}};function bm(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ma(r,n)||!Ma(a,i):!0}function Np(e,t,r){var n=!1,a=ms,i=t.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(a=jt(t)?Ms:ct.current,n=t.contextTypes,i=(n=n!=null)?Nn(e,a):ms),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function _m(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Mo.enqueueReplaceState(t,t.state,null)}function Ec(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Fd(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Bt(i):(i=jt(t)?Ms:ct.current,a.context=Nn(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Cc(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Mo.enqueueReplaceState(a,a.state,null),oo(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function En(e,t){try{var r="",n=t;do r+=iy(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Cl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Tc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ov=typeof WeakMap=="function"?WeakMap:Map;function kp(e,t,r){r=Er(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ho||(ho=!0,Fc=n),Tc(e,t)},r}function Sp(e,t,r){r=Er(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Tc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Tc(e,t),typeof n!="function"&&(is===null?is=new Set([this]):is.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function jm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ov;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Vv.bind(null,e,t,r),t.then(e,e))}function Nm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function km(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Er(-1,1),t.tag=2,as(r,t,1))),r.lanes|=1),e)}var $v=Or.ReactCurrentOwner,bt=!1;function ut(e,t,r,n){t.child=e===null?tp(t,null,r,n):Sn(t,e.child,r,n)}function Sm(e,t,r,n,a){r=r.render;var i=t.ref;return xn(t,a),n=qd(e,t,r,n,i,a),r=Hd(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mr(e,t,a)):($e&&r&&Md(t),t.flags|=1,ut(e,t,n,a),t.child)}function Cm(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!tu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Cp(e,t,i,n,a)):(e=zi(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ma,r(o,n)&&e.ref===t.ref)return Mr(e,t,a)}return t.flags|=1,e=ls(i,n),e.ref=t.ref,e.return=t,t.child=e}function Cp(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Ma(i,n)&&e.ref===t.ref)if(bt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Mr(e,t,a)}return Dc(e,t,r,n,a)}function Ep(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(mn,St),St|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(mn,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,De(mn,St),St|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,De(mn,St),St|=n;return ut(e,t,a,r),t.child}function Tp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Dc(e,t,r,n,a){var i=jt(r)?Ms:ct.current;return i=Nn(t,i),xn(t,a),r=qd(e,t,r,n,i,a),n=Hd(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mr(e,t,a)):($e&&n&&Md(t),t.flags|=1,ut(e,t,r,a),t.child)}function Em(e,t,r,n,a){if(jt(r)){var i=!0;ro(t)}else i=!1;if(xn(t,a),t.stateNode===null)Fi(e,t),Np(t,r,n),Ec(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Bt(c):(c=jt(r)?Ms:ct.current,c=Nn(t,c));var m=r.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==c)&&_m(t,o,n,c),Yr=!1;var d=t.memoizedState;o.state=d,oo(t,n,o,a),u=t.memoizedState,l!==n||d!==u||_t.current||Yr?(typeof m=="function"&&(Cc(t,r,m,n),u=t.memoizedState),(l=Yr||bm(t,r,l,n,d,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,sp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Jt(t.type,l),o.props=c,h=t.pendingProps,d=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Bt(u):(u=jt(r)?Ms:ct.current,u=Nn(t,u));var f=r.getDerivedStateFromProps;(m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==u)&&_m(t,o,n,u),Yr=!1,d=t.memoizedState,o.state=d,oo(t,n,o,a);var w=t.memoizedState;l!==h||d!==w||_t.current||Yr?(typeof f=="function"&&(Cc(t,r,f,n),w=t.memoizedState),(c=Yr||bm(t,r,c,n,d,w,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=u,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Pc(e,t,r,n,i,a)}function Pc(e,t,r,n,a,i){Tp(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&hm(t,r,!1),Mr(e,t,i);n=t.stateNode,$v.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Sn(t,e.child,null,i),t.child=Sn(t,null,l,i)):ut(e,t,l,i),t.memoizedState=n.state,a&&hm(t,r,!0),t.child}function Dp(e){var t=e.stateNode;t.pendingContext?mm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mm(e,t.context,!1),Ud(e,t.containerInfo)}function Tm(e,t,r,n,a){return kn(),$d(a),t.flags|=256,ut(e,t,r,n),t.child}var Mc={dehydrated:null,treeContext:null,retryLane:0};function Oc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pp(e,t,r){var n=t.pendingProps,a=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),De(Le,a&1),e===null)return kc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Io(o,n,0,null),e=Ps(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Oc(r),t.memoizedState=Mc,e):Gd(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Iv(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=ls(a,u),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ls(l,i):(i=Ps(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Oc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Mc,n}return i=e.child,e=i.sibling,n=ls(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Gd(e,t){return t=Io({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bi(e,t,r,n){return n!==null&&$d(n),Sn(t,e.child,null,r),e=Gd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Iv(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Cl(Error(B(422))),bi(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Io({mode:"visible",children:n.children},a,0,null),i=Ps(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Sn(t,e.child,null,o),t.child.memoizedState=Oc(o),t.memoizedState=Mc,i);if(!(t.mode&1))return bi(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(B(419)),n=Cl(i,n,void 0),bi(e,t,o,n)}if(l=(o&e.childLanes)!==0,bt||l){if(n=Xe,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Pr(e,a),tr(n,e,a,-1))}return eu(),n=Cl(Error(B(421))),bi(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Gv.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Tt=ns(a.nextSibling),Mt=t,$e=!0,Xt=null,e!==null&&(At[Ft++]=_r,At[Ft++]=jr,At[Ft++]=Os,_r=e.id,jr=e.overflow,Os=t),t=Gd(t,n.children),t.flags|=4096,t)}function Dm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Sc(e.return,t,r)}function El(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Mp(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ut(e,t,n.children,r),n=Le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dm(e,r,t);else if(e.tag===19)Dm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(De(Le,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&lo(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),El(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&lo(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}El(t,!0,r,null,i);break;case"together":El(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Is|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=ls(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ls(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Lv(e,t,r){switch(t.tag){case 3:Dp(t),kn();break;case 5:np(t);break;case 1:jt(t.type)&&ro(t);break;case 4:Ud(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;De(ao,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(De(Le,Le.current&1),t.flags|=128,null):r&t.child.childLanes?Pp(e,t,r):(De(Le,Le.current&1),e=Mr(e,t,r),e!==null?e.sibling:null);De(Le,Le.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Mp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),De(Le,Le.current),n)break;return null;case 22:case 23:return t.lanes=0,Ep(e,t,r)}return Mr(e,t,r)}var Op,$c,$p,Ip;Op=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$c=function(){};$p=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Es(hr.current);var i=null;switch(r){case"input":a=rc(e,a),n=rc(e,n),i=[];break;case"select":a=Ae({},a,{value:void 0}),n=Ae({},n,{value:void 0}),i=[];break;case"textarea":a=ac(e,a),n=ac(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=eo)}oc(r,n);var o;r=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ka.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ka.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ip=function(e,t,r,n){r!==n&&(t.flags|=4)};function Kn(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Rv(e,t,r){var n=t.pendingProps;switch(Od(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return jt(t.type)&&to(),it(t),null;case 3:return n=t.stateNode,Cn(),Oe(_t),Oe(ct),zd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(zc(Xt),Xt=null))),$c(e,t),it(t),null;case 5:Wd(t);var a=Es(Ra.current);if(r=t.type,e!==null&&t.stateNode!=null)$p(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return it(t),null}if(e=Es(hr.current),vi(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[lr]=t,n[Ia]=i,e=(t.mode&1)!==0,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(a=0;a<ia.length;a++)Me(ia[a],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":Fu(n,i),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Me("invalid",n);break;case"textarea":Wu(n,i),Me("invalid",n)}oc(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&yi(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&yi(n.textContent,l,e),a=["children",""+l]):ka.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",n)}switch(r){case"input":di(n),Uu(n,i,!0);break;case"textarea":di(n),zu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=eo)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[lr]=t,e[Ia]=n,Op(e,t,!1,!1),t.stateNode=e;e:{switch(o=lc(r,n),r){case"dialog":Me("cancel",e),Me("close",e),a=n;break;case"iframe":case"object":case"embed":Me("load",e),a=n;break;case"video":case"audio":for(a=0;a<ia.length;a++)Me(ia[a],e);a=n;break;case"source":Me("error",e),a=n;break;case"img":case"image":case"link":Me("error",e),Me("load",e),a=n;break;case"details":Me("toggle",e),a=n;break;case"input":Fu(e,n),a=rc(e,n),Me("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ae({},n,{value:void 0}),Me("invalid",e);break;case"textarea":Wu(e,n),a=ac(e,n),Me("invalid",e);break;default:a=n}oc(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?mf(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&df(e,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Sa(e,u):typeof u=="number"&&Sa(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ka.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Me("scroll",e):u!=null&&yd(e,i,u,o))}switch(r){case"input":di(e),Uu(e,n,!1);break;case"textarea":di(e),zu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+us(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?hn(e,!!n.multiple,i,!1):n.defaultValue!=null&&hn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=eo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Ip(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=Es(Ra.current),Es(hr.current),vi(t)){if(n=t.stateNode,r=t.memoizedProps,n[lr]=t,(i=n.nodeValue!==r)&&(e=Mt,e!==null))switch(e.tag){case 3:yi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yi(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lr]=t,t.stateNode=n}return it(t),null;case 13:if(Oe(Le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Tt!==null&&t.mode&1&&!(t.flags&128))Zf(),kn(),t.flags|=98560,i=!1;else if(i=vi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[lr]=t}else kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),i=!1}else Xt!==null&&(zc(Xt),Xt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ve===0&&(Ve=3):eu())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Cn(),$c(e,t),e===null&&Oa(t.stateNode.containerInfo),it(t),null;case 10:return Rd(t.type._context),it(t),null;case 17:return jt(t.type)&&to(),it(t),null;case 19:if(Oe(Le),i=t.memoizedState,i===null)return it(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Kn(i,!1);else{if(Ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lo(e),o!==null){for(t.flags|=128,Kn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return De(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&ze()>Tn&&(t.flags|=128,n=!0,Kn(i,!1),t.lanes=4194304)}else{if(!n)if(e=lo(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Kn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return it(t),null}else 2*ze()-i.renderingStartTime>Tn&&r!==1073741824&&(t.flags|=128,n=!0,Kn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ze(),t.sibling=null,r=Le.current,De(Le,n?r&1|2:r&1),t):(it(t),null);case 22:case 23:return Zd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?St&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function Av(e,t){switch(Od(t),t.tag){case 1:return jt(t.type)&&to(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),Oe(_t),Oe(ct),zd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wd(t),null;case 13:if(Oe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Le),null;case 4:return Cn(),null;case 10:return Rd(t.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var _i=!1,ot=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,Z=null;function un(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Fe(e,t,n)}else r.current=null}function Ic(e,t,r){try{r()}catch(n){Fe(e,t,n)}}var Pm=!1;function Uv(e,t){if(yc=Qi,e=Uf(),Pd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,m=0,h=e,d=null;t:for(;;){for(var f;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(u=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===e)break t;if(d===r&&++c===a&&(l=o),d===i&&++m===n&&(u=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(vc={focusedElem:e,selectionRange:r},Qi=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,y=w.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:Jt(t.type,x),y);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(_){Fe(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return w=Pm,Pm=!1,w}function pa(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ic(t,r,i)}a=a.next}while(a!==n)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Lc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lp(e){var t=e.alternate;t!==null&&(e.alternate=null,Lp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[Ia],delete t[_c],delete t[_v],delete t[jv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rp(e){return e.tag===5||e.tag===3||e.tag===4}function Mm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=eo));else if(n!==4&&(e=e.child,e!==null))for(Rc(e,t,r),e=e.sibling;e!==null;)Rc(e,t,r),e=e.sibling}function Ac(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ac(e,t,r),e=e.sibling;e!==null;)Ac(e,t,r),e=e.sibling}var et=null,Kt=!1;function Ar(e,t,r){for(r=r.child;r!==null;)Ap(e,t,r),r=r.sibling}function Ap(e,t,r){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:ot||un(r,t);case 6:var n=et,a=Kt;et=null,Ar(e,t,r),et=n,Kt=a,et!==null&&(Kt?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(Kt?(e=et,r=r.stateNode,e.nodeType===8?bl(e.parentNode,r):e.nodeType===1&&bl(e,r),Da(e)):bl(et,r.stateNode));break;case 4:n=et,a=Kt,et=r.stateNode.containerInfo,Kt=!0,Ar(e,t,r),et=n,Kt=a;break;case 0:case 11:case 14:case 15:if(!ot&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ic(r,t,o),a=a.next}while(a!==n)}Ar(e,t,r);break;case 1:if(!ot&&(un(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Fe(r,t,l)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(ot=(n=ot)||r.memoizedState!==null,Ar(e,t,r),ot=n):Ar(e,t,r);break;default:Ar(e,t,r)}}function Om(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Fv),t.forEach(function(n){var a=Jv.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Gt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,Kt=!1;break e;case 3:et=l.stateNode.containerInfo,Kt=!0;break e;case 4:et=l.stateNode.containerInfo,Kt=!0;break e}l=l.return}if(et===null)throw Error(B(160));Ap(i,o,a),et=null,Kt=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(c){Fe(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fp(t,e),t=t.sibling}function Fp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),ar(e),n&4){try{pa(3,e,e.return),Oo(3,e)}catch(x){Fe(e,e.return,x)}try{pa(5,e,e.return)}catch(x){Fe(e,e.return,x)}}break;case 1:Gt(t,e),ar(e),n&512&&r!==null&&un(r,r.return);break;case 5:if(Gt(t,e),ar(e),n&512&&r!==null&&un(r,r.return),e.flags&32){var a=e.stateNode;try{Sa(a,"")}catch(x){Fe(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&of(a,i),lc(l,o);var c=lc(l,i);for(o=0;o<u.length;o+=2){var m=u[o],h=u[o+1];m==="style"?mf(a,h):m==="dangerouslySetInnerHTML"?df(a,h):m==="children"?Sa(a,h):yd(a,m,h,c)}switch(l){case"input":sc(a,i);break;case"textarea":lf(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?hn(a,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?hn(a,!!i.multiple,i.defaultValue,!0):hn(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ia]=i}catch(x){Fe(e,e.return,x)}}break;case 6:if(Gt(t,e),ar(e),n&4){if(e.stateNode===null)throw Error(B(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Fe(e,e.return,x)}}break;case 3:if(Gt(t,e),ar(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Da(t.containerInfo)}catch(x){Fe(e,e.return,x)}break;case 4:Gt(t,e),ar(e);break;case 13:Gt(t,e),ar(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qd=ze())),n&4&&Om(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(ot=(c=ot)||m,Gt(t,e),ot=c):Gt(t,e),ar(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(Z=e,m=e.child;m!==null;){for(h=Z=m;Z!==null;){switch(d=Z,f=d.child,d.tag){case 0:case 11:case 14:case 15:pa(4,d,d.return);break;case 1:un(d,d.return);var w=d.stateNode;if(typeof w.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){Fe(n,r,x)}}break;case 5:un(d,d.return);break;case 22:if(d.memoizedState!==null){Im(h);continue}}f!==null?(f.return=d,Z=f):Im(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{a=h.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=uf("display",o))}catch(x){Fe(e,e.return,x)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Fe(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gt(t,e),ar(e),n&4&&Om(e);break;case 21:break;default:Gt(t,e),ar(e)}}function ar(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Rp(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Sa(a,""),n.flags&=-33);var i=Mm(e);Ac(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Mm(e);Rc(e,l,o);break;default:throw Error(B(161))}}catch(u){Fe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wv(e,t,r){Z=e,Up(e)}function Up(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var a=Z,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||_i;if(!o){var l=a.alternate,u=l!==null&&l.memoizedState!==null||ot;l=_i;var c=ot;if(_i=o,(ot=u)&&!c)for(Z=a;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Lm(a):u!==null?(u.return=o,Z=u):Lm(a);for(;i!==null;)Z=i,Up(i),i=i.sibling;Z=a,_i=l,ot=c}$m(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Z=i):$m(e)}}function $m(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||Oo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ot)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Jt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ym(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ym(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Da(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ot||t.flags&512&&Lc(t)}catch(d){Fe(t,t.return,d)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Im(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Lm(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Oo(4,t)}catch(u){Fe(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(u){Fe(t,a,u)}}var i=t.return;try{Lc(t)}catch(u){Fe(t,i,u)}break;case 5:var o=t.return;try{Lc(t)}catch(u){Fe(t,o,u)}}}catch(u){Fe(t,t.return,u)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var zv=Math.ceil,mo=Or.ReactCurrentDispatcher,Jd=Or.ReactCurrentOwner,Wt=Or.ReactCurrentBatchConfig,xe=0,Xe=null,qe=null,tt=0,St=0,mn=gs(0),Ve=0,Wa=null,Is=0,$o=0,Kd=0,ga=null,yt=null,Qd=0,Tn=1/0,yr=null,ho=!1,Fc=null,is=null,ji=!1,Zr=null,fo=0,xa=0,Uc=null,Ui=-1,Wi=0;function ht(){return xe&6?ze():Ui!==-1?Ui:Ui=ze()}function os(e){return e.mode&1?xe&2&&tt!==0?tt&-tt:kv.transition!==null?(Wi===0&&(Wi=Nf()),Wi):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:Pf(e.type)),e):1}function tr(e,t,r,n){if(50<xa)throw xa=0,Uc=null,Error(B(185));Qa(e,r,n),(!(xe&2)||e!==Xe)&&(e===Xe&&(!(xe&2)&&($o|=r),Ve===4&&Kr(e,tt)),Nt(e,n),r===1&&xe===0&&!(t.mode&1)&&(Tn=ze()+500,Do&&xs()))}function Nt(e,t){var r=e.callbackNode;ky(e,t);var n=Ki(e,e===Xe?tt:0);if(n===0)r!==null&&Hu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Hu(r),t===1)e.tag===0?Nv(Rm.bind(null,e)):Kf(Rm.bind(null,e)),wv(function(){!(xe&6)&&xs()}),r=null;else{switch(kf(n)){case 1:r=jd;break;case 4:r=_f;break;case 16:r=Ji;break;case 536870912:r=jf;break;default:r=Ji}r=Gp(r,Wp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Wp(e,t){if(Ui=-1,Wi=0,xe&6)throw Error(B(327));var r=e.callbackNode;if(yn()&&e.callbackNode!==r)return null;var n=Ki(e,e===Xe?tt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=po(e,n);else{t=n;var a=xe;xe|=2;var i=Bp();(Xe!==e||tt!==t)&&(yr=null,Tn=ze()+500,Ds(e,t));do try{Hv();break}catch(l){zp(e,l)}while(!0);Ld(),mo.current=i,xe=a,qe!==null?t=0:(Xe=null,tt=0,t=Ve)}if(t!==0){if(t===2&&(a=hc(e),a!==0&&(n=a,t=Wc(e,a))),t===1)throw r=Wa,Ds(e,0),Kr(e,n),Nt(e,ze()),r;if(t===6)Kr(e,n);else{if(a=e.current.alternate,!(n&30)&&!Bv(a)&&(t=po(e,n),t===2&&(i=hc(e),i!==0&&(n=i,t=Wc(e,i))),t===1))throw r=Wa,Ds(e,0),Kr(e,n),Nt(e,ze()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:bs(e,yt,yr);break;case 3:if(Kr(e,n),(n&130023424)===n&&(t=Qd+500-ze(),10<t)){if(Ki(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ht(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=bc(bs.bind(null,e,yt,yr),t);break}bs(e,yt,yr);break;case 4:if(Kr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-er(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zv(n/1960))-n,10<n){e.timeoutHandle=bc(bs.bind(null,e,yt,yr),n);break}bs(e,yt,yr);break;case 5:bs(e,yt,yr);break;default:throw Error(B(329))}}}return Nt(e,ze()),e.callbackNode===r?Wp.bind(null,e):null}function Wc(e,t){var r=ga;return e.current.memoizedState.isDehydrated&&(Ds(e,t).flags|=256),e=po(e,t),e!==2&&(t=yt,yt=r,t!==null&&zc(t)),e}function zc(e){yt===null?yt=e:yt.push.apply(yt,e)}function Bv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!rr(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kr(e,t){for(t&=~Kd,t&=~$o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-er(t),n=1<<r;e[r]=-1,t&=~n}}function Rm(e){if(xe&6)throw Error(B(327));yn();var t=Ki(e,0);if(!(t&1))return Nt(e,ze()),null;var r=po(e,t);if(e.tag!==0&&r===2){var n=hc(e);n!==0&&(t=n,r=Wc(e,n))}if(r===1)throw r=Wa,Ds(e,0),Kr(e,t),Nt(e,ze()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bs(e,yt,yr),Nt(e,ze()),null}function Xd(e,t){var r=xe;xe|=1;try{return e(t)}finally{xe=r,xe===0&&(Tn=ze()+500,Do&&xs())}}function Ls(e){Zr!==null&&Zr.tag===0&&!(xe&6)&&yn();var t=xe;xe|=1;var r=Wt.transition,n=Ne;try{if(Wt.transition=null,Ne=1,e)return e()}finally{Ne=n,Wt.transition=r,xe=t,!(xe&6)&&xs()}}function Zd(){St=mn.current,Oe(mn)}function Ds(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,vv(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(Od(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&to();break;case 3:Cn(),Oe(_t),Oe(ct),zd();break;case 5:Wd(n);break;case 4:Cn();break;case 13:Oe(Le);break;case 19:Oe(Le);break;case 10:Rd(n.type._context);break;case 22:case 23:Zd()}r=r.return}if(Xe=e,qe=e=ls(e.current,null),tt=St=t,Ve=0,Wa=null,Kd=$o=Is=0,yt=ga=null,Cs!==null){for(t=0;t<Cs.length;t++)if(r=Cs[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Cs=null}return e}function zp(e,t){do{var r=qe;try{if(Ld(),Ri.current=uo,co){for(var n=Re.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}co=!1}if($s=0,Qe=Ye=Re=null,fa=!1,Aa=0,Jd.current=null,r===null||r.return===null){Ve=1,Wa=t,qe=null;break}e:{var i=e,o=r.return,l=r,u=t;if(t=tt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var d=m.alternate;d?(m.updateQueue=d.updateQueue,m.memoizedState=d.memoizedState,m.lanes=d.lanes):(m.updateQueue=null,m.memoizedState=null)}var f=Nm(o);if(f!==null){f.flags&=-257,km(f,o,l,i,t),f.mode&1&&jm(i,c,t),t=f,u=c;var w=t.updateQueue;if(w===null){var x=new Set;x.add(u),t.updateQueue=x}else w.add(u);break e}else{if(!(t&1)){jm(i,c,t),eu();break e}u=Error(B(426))}}else if($e&&l.mode&1){var y=Nm(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),km(y,o,l,i,t),$d(En(u,l));break e}}i=u=En(u,l),Ve!==4&&(Ve=2),ga===null?ga=[i]:ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=kp(i,u,t);xm(i,g);break e;case 1:l=u;var p=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(is===null||!is.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Sp(i,l,t);xm(i,_);break e}}i=i.return}while(i!==null)}Hp(r)}catch(C){t=C,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function Bp(){var e=mo.current;return mo.current=uo,e===null?uo:e}function eu(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Xe===null||!(Is&268435455)&&!($o&268435455)||Kr(Xe,tt)}function po(e,t){var r=xe;xe|=2;var n=Bp();(Xe!==e||tt!==t)&&(yr=null,Ds(e,t));do try{qv();break}catch(a){zp(e,a)}while(!0);if(Ld(),xe=r,mo.current=n,qe!==null)throw Error(B(261));return Xe=null,tt=0,Ve}function qv(){for(;qe!==null;)qp(qe)}function Hv(){for(;qe!==null&&!gy();)qp(qe)}function qp(e){var t=Vp(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?Hp(e):qe=t,Jd.current=null}function Hp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Av(r,t),r!==null){r.flags&=32767,qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ve=6,qe=null;return}}else if(r=Rv(r,t,St),r!==null){qe=r;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ve===0&&(Ve=5)}function bs(e,t,r){var n=Ne,a=Wt.transition;try{Wt.transition=null,Ne=1,Yv(e,t,r,n)}finally{Wt.transition=a,Ne=n}return null}function Yv(e,t,r,n){do yn();while(Zr!==null);if(xe&6)throw Error(B(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Sy(e,i),e===Xe&&(qe=Xe=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ji||(ji=!0,Gp(Ji,function(){return yn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=Ne;Ne=1;var l=xe;xe|=4,Jd.current=null,Uv(e,r),Fp(r,e),mv(vc),Qi=!!yc,vc=yc=null,e.current=r,Wv(r),xy(),xe=l,Ne=o,Wt.transition=i}else e.current=r;if(ji&&(ji=!1,Zr=e,fo=a),i=e.pendingLanes,i===0&&(is=null),wy(r.stateNode),Nt(e,ze()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ho)throw ho=!1,e=Fc,Fc=null,e;return fo&1&&e.tag!==0&&yn(),i=e.pendingLanes,i&1?e===Uc?xa++:(xa=0,Uc=e):xa=0,xs(),null}function yn(){if(Zr!==null){var e=kf(fo),t=Wt.transition,r=Ne;try{if(Wt.transition=null,Ne=16>e?16:e,Zr===null)var n=!1;else{if(e=Zr,Zr=null,fo=0,xe&6)throw Error(B(331));var a=xe;for(xe|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Z=c;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:pa(8,m,i)}var h=m.child;if(h!==null)h.return=m,Z=h;else for(;Z!==null;){m=Z;var d=m.sibling,f=m.return;if(Lp(m),m===c){Z=null;break}if(d!==null){d.return=f,Z=d;break}Z=f}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pa(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Z=g;break e}Z=i.return}}var p=e.current;for(Z=p;Z!==null;){o=Z;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Z=b;else e:for(o=p;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oo(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){Z=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Z=_;break e}Z=l.return}}if(xe=a,xs(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(ko,e)}catch{}n=!0}return n}finally{Ne=r,Wt.transition=t}}return!1}function Am(e,t,r){t=En(r,t),t=kp(e,t,1),e=as(e,t,1),t=ht(),e!==null&&(Qa(e,1,t),Nt(e,t))}function Fe(e,t,r){if(e.tag===3)Am(e,e,r);else for(;t!==null;){if(t.tag===3){Am(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(is===null||!is.has(n))){e=En(r,e),e=Sp(t,e,1),t=as(t,e,1),e=ht(),t!==null&&(Qa(t,1,e),Nt(t,e));break}}t=t.return}}function Vv(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,Xe===e&&(tt&r)===r&&(Ve===4||Ve===3&&(tt&130023424)===tt&&500>ze()-Qd?Ds(e,0):Kd|=r),Nt(e,t)}function Yp(e,t){t===0&&(e.mode&1?(t=hi,hi<<=1,!(hi&130023424)&&(hi=4194304)):t=1);var r=ht();e=Pr(e,t),e!==null&&(Qa(e,t,r),Nt(e,r))}function Gv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yp(e,r)}function Jv(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),Yp(e,r)}var Vp;Vp=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,Lv(e,t,r);bt=!!(e.flags&131072)}else bt=!1,$e&&t.flags&1048576&&Qf(t,no,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Fi(e,t),e=t.pendingProps;var a=Nn(t,ct.current);xn(t,r),a=qd(null,t,n,e,a,r);var i=Hd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(n)?(i=!0,ro(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Fd(t),a.updater=Mo,t.stateNode=a,a._reactInternals=t,Ec(t,n,e,r),t=Pc(null,t,n,!0,i,r)):(t.tag=0,$e&&i&&Md(t),ut(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Fi(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Qv(n),e=Jt(n,e),a){case 0:t=Dc(null,t,n,e,r);break e;case 1:t=Em(null,t,n,e,r);break e;case 11:t=Sm(null,t,n,e,r);break e;case 14:t=Cm(null,t,n,Jt(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Jt(n,a),Dc(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Jt(n,a),Em(e,t,n,a,r);case 3:e:{if(Dp(t),e===null)throw Error(B(387));n=t.pendingProps,i=t.memoizedState,a=i.element,sp(e,t),oo(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=En(Error(B(423)),t),t=Tm(e,t,n,r,a);break e}else if(n!==a){a=En(Error(B(424)),t),t=Tm(e,t,n,r,a);break e}else for(Tt=ns(t.stateNode.containerInfo.firstChild),Mt=t,$e=!0,Xt=null,r=tp(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kn(),n===a){t=Mr(e,t,r);break e}ut(e,t,n,r)}t=t.child}return t;case 5:return np(t),e===null&&kc(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,wc(n,a)?o=null:i!==null&&wc(n,i)&&(t.flags|=32),Tp(e,t),ut(e,t,o,r),t.child;case 6:return e===null&&kc(t),null;case 13:return Pp(e,t,r);case 4:return Ud(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Sn(t,null,n,r):ut(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Jt(n,a),Sm(e,t,n,a,r);case 7:return ut(e,t,t.pendingProps,r),t.child;case 8:return ut(e,t,t.pendingProps.children,r),t.child;case 12:return ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,De(ao,n._currentValue),n._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===a.children&&!_t.current){t=Mr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Er(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),Sc(i.return,r,t),l.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Sc(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ut(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,xn(t,r),a=Bt(a),n=n(a),t.flags|=1,ut(e,t,n,r),t.child;case 14:return n=t.type,a=Jt(n,t.pendingProps),a=Jt(n.type,a),Cm(e,t,n,a,r);case 15:return Cp(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Jt(n,a),Fi(e,t),t.tag=1,jt(n)?(e=!0,ro(t)):e=!1,xn(t,r),Np(t,n,a),Ec(t,n,a,r),Pc(null,t,n,!0,e,r);case 19:return Mp(e,t,r);case 22:return Ep(e,t,r)}throw Error(B(156,t.tag))};function Gp(e,t){return bf(e,t)}function Kv(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,r,n){return new Kv(e,t,r,n)}function tu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qv(e){if(typeof e=="function")return tu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wd)return 11;if(e===bd)return 14}return 2}function ls(e,t){var r=e.alternate;return r===null?(r=Ut(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zi(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")tu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case tn:return Ps(r.children,a,i,t);case vd:o=8,a|=8;break;case Xl:return e=Ut(12,r,t,a|2),e.elementType=Xl,e.lanes=i,e;case Zl:return e=Ut(13,r,t,a),e.elementType=Zl,e.lanes=i,e;case ec:return e=Ut(19,r,t,a),e.elementType=ec,e.lanes=i,e;case sf:return Io(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tf:o=10;break e;case rf:o=9;break e;case wd:o=11;break e;case bd:o=14;break e;case Hr:o=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Ut(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ps(e,t,r,n){return e=Ut(7,e,n,t),e.lanes=r,e}function Io(e,t,r,n){return e=Ut(22,e,n,t),e.elementType=sf,e.lanes=r,e.stateNode={isHidden:!1},e}function Tl(e,t,r){return e=Ut(6,e,null,t),e.lanes=r,e}function Dl(e,t,r){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xv(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ru(e,t,r,n,a,i,o,l,u){return e=new Xv(e,t,r,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ut(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fd(i),e}function Zv(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:en,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Jp(e){if(!e)return ms;e=e._reactInternals;e:{if(Us(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(jt(r))return Jf(e,r,t)}return t}function Kp(e,t,r,n,a,i,o,l,u){return e=ru(r,n,!0,e,a,i,o,l,u),e.context=Jp(null),r=e.current,n=ht(),a=os(r),i=Er(n,a),i.callback=t??null,as(r,i,a),e.current.lanes=a,Qa(e,a,n),Nt(e,n),e}function Lo(e,t,r,n){var a=t.current,i=ht(),o=os(a);return r=Jp(r),t.context===null?t.context=r:t.pendingContext=r,t=Er(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=as(a,t,o),e!==null&&(tr(e,a,o,i),Li(e,a,o)),o}function go(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function su(e,t){Fm(e,t),(e=e.alternate)&&Fm(e,t)}function ew(){return null}var Qp=typeof reportError=="function"?reportError:function(e){console.error(e)};function nu(e){this._internalRoot=e}Ro.prototype.render=nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Lo(e,t,null,null)};Ro.prototype.unmount=nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ls(function(){Lo(null,e,null,null)}),t[Dr]=null}};function Ro(e){this._internalRoot=e}Ro.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ef();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jr.length&&t!==0&&t<Jr[r].priority;r++);Jr.splice(r,0,e),r===0&&Df(e)}};function au(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Um(){}function tw(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=go(o);i.call(c)}}var o=Kp(t,n,e,0,null,!1,!1,"",Um);return e._reactRootContainer=o,e[Dr]=o.current,Oa(e.nodeType===8?e.parentNode:e),Ls(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var c=go(u);l.call(c)}}var u=ru(e,0,!1,null,null,!1,!1,"",Um);return e._reactRootContainer=u,e[Dr]=u.current,Oa(e.nodeType===8?e.parentNode:e),Ls(function(){Lo(t,u,r,n)}),u}function Fo(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var u=go(o);l.call(u)}}Lo(t,o,e,a)}else o=tw(r,t,e,a,n);return go(o)}Sf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=aa(t.pendingLanes);r!==0&&(Nd(t,r|1),Nt(t,ze()),!(xe&6)&&(Tn=ze()+500,xs()))}break;case 13:Ls(function(){var n=Pr(e,1);if(n!==null){var a=ht();tr(n,e,1,a)}}),su(e,1)}};kd=function(e){if(e.tag===13){var t=Pr(e,134217728);if(t!==null){var r=ht();tr(t,e,134217728,r)}su(e,134217728)}};Cf=function(e){if(e.tag===13){var t=os(e),r=Pr(e,t);if(r!==null){var n=ht();tr(r,e,t,n)}su(e,t)}};Ef=function(){return Ne};Tf=function(e,t){var r=Ne;try{return Ne=e,t()}finally{Ne=r}};dc=function(e,t,r){switch(t){case"input":if(sc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=To(n);if(!a)throw Error(B(90));af(n),sc(n,a)}}}break;case"textarea":lf(e,r);break;case"select":t=r.value,t!=null&&hn(e,!!r.multiple,t,!1)}};pf=Xd;gf=Ls;var rw={usingClientEntryPoint:!1,Events:[Za,an,To,hf,ff,Xd]},Qn={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sw={bundleType:Qn.bundleType,version:Qn.version,rendererPackageName:Qn.rendererPackageName,rendererConfig:Qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vf(e),e===null?null:e.stateNode},findFiberByHostInstance:Qn.findFiberByHostInstance||ew,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ni.isDisabled&&Ni.supportsFiber)try{ko=Ni.inject(sw),mr=Ni}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw;$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!au(t))throw Error(B(200));return Zv(e,t,null,r)};$t.createRoot=function(e,t){if(!au(e))throw Error(B(299));var r=!1,n="",a=Qp;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ru(e,1,!1,null,null,r,!1,n,a),e[Dr]=t.current,Oa(e.nodeType===8?e.parentNode:e),new nu(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=vf(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Ls(e)};$t.hydrate=function(e,t,r){if(!Ao(t))throw Error(B(200));return Fo(null,e,t,!0,r)};$t.hydrateRoot=function(e,t,r){if(!au(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Qp;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Kp(t,null,e,1,r??null,a,!1,i,o),e[Dr]=t.current,Oa(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ro(t)};$t.render=function(e,t,r){if(!Ao(t))throw Error(B(200));return Fo(null,e,t,!1,r)};$t.unmountComponentAtNode=function(e){if(!Ao(e))throw Error(B(40));return e._reactRootContainer?(Ls(function(){Fo(null,null,e,!1,function(){e._reactRootContainer=null,e[Dr]=null})}),!0):!1};$t.unstable_batchedUpdates=Xd;$t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ao(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return Fo(e,t,r,!1,n)};$t.version="18.3.1-next-f1338f8080-20240426";function Xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xp)}catch(e){console.error(e)}}Xp(),Qh.exports=$t;var Uo=Qh.exports;const nw=Ah(Uo);var Wm=Uo;Kl.createRoot=Wm.createRoot,Kl.hydrateRoot=Wm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},za.apply(this,arguments)}var es;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(es||(es={}));const zm="popstate";function aw(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Bc("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:xo(a)}return ow(t,r,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function iw(){return Math.random().toString(36).substr(2,8)}function Bm(e,t){return{usr:e.state,key:e.key,idx:t}}function Bc(e,t,r,n){return r===void 0&&(r=null),za({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rn(t):t,{state:r,key:t&&t.key||n||iw()})}function xo(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ow(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=es.Pop,u=null,c=m();c==null&&(c=0,o.replaceState(za({},o.state,{idx:c}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=es.Pop;let y=m(),g=y==null?null:y-c;c=y,u&&u({action:l,location:x.location,delta:g})}function d(y,g){l=es.Push;let p=Bc(x.location,y,g);c=m()+1;let b=Bm(p,c),_=x.createHref(p);try{o.pushState(b,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(_)}i&&u&&u({action:l,location:x.location,delta:1})}function f(y,g){l=es.Replace;let p=Bc(x.location,y,g);c=m();let b=Bm(p,c),_=x.createHref(p);o.replaceState(b,"",_),i&&u&&u({action:l,location:x.location,delta:0})}function w(y){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof y=="string"?y:xo(y);return p=p.replace(/ $/,"%20"),Be(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let x={get action(){return l},get location(){return e(a,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(zm,h),u=y,()=>{a.removeEventListener(zm,h),u=null}},createHref(y){return t(a,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(y){return o.go(y)}};return x}var qm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qm||(qm={}));function lw(e,t,r){return r===void 0&&(r="/"),cw(e,t,r)}function cw(e,t,r,n){let a=typeof t=="string"?Rn(t):t,i=iu(a.pathname||"/",r);if(i==null)return null;let o=eg(e);dw(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=_w(i);l=vw(o[u],c)}return l}function eg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let c=cs([n,u.relativePath]),m=r.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),eg(i.children,t,m,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:xw(c,i.index),routesMeta:m})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let u of tg(i.path))a(i,o,u)}),t}function tg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=tg(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function dw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:yw(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const uw=/^:[\w-]+$/,mw=3,hw=2,fw=1,pw=10,gw=-2,Hm=e=>e==="*";function xw(e,t){let r=e.split("/"),n=r.length;return r.some(Hm)&&(n+=gw),t&&(n+=hw),r.filter(a=>!Hm(a)).reduce((a,i)=>a+(uw.test(i)?mw:i===""?fw:pw),n)}function yw(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function vw(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],c=l===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=ww({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},m),d=u.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:cs([i,h.pathname]),pathnameBase:Sw(cs([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=cs([i,h.pathnameBase]))}return o}function ww(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=bw(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,m,h)=>{let{paramName:d,isOptional:f}=m;if(d==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[h];return f&&!w?c[d]=void 0:c[d]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function bw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Zp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function _w(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function iu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function jw(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Rn(e):e;return{pathname:r?r.startsWith("/")?r:Nw(r,t):t,search:Cw(n),hash:Ew(a)}}function Nw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ou(e,t){let r=kw(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function lu(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Rn(e):(a=za({},e),Be(!a.pathname||!a.pathname.includes("?"),Pl("?","pathname","search",a)),Be(!a.pathname||!a.pathname.includes("#"),Pl("#","pathname","hash",a)),Be(!a.search||!a.search.includes("#"),Pl("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;a.pathname=d.join("/")}l=h>=0?t[h]:"/"}let u=jw(a,l),c=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||m)&&(u.pathname+="/"),u}const cs=e=>e.join("/").replace(/\/\/+/g,"/"),Sw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Cw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ew=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Tw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rg=["post","put","patch","delete"];new Set(rg);const Dw=["get",...rg];new Set(Dw);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ba.apply(this,arguments)}const cu=v.createContext(null),Pw=v.createContext(null),ys=v.createContext(null),Wo=v.createContext(null),pr=v.createContext({outlet:null,matches:[],isDataRoute:!1}),sg=v.createContext(null);function Mw(e,t){let{relative:r}=t===void 0?{}:t;An()||Be(!1);let{basename:n,navigator:a}=v.useContext(ys),{hash:i,pathname:o,search:l}=ag(e,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:cs([n,o])),a.createHref({pathname:u,search:l,hash:i})}function An(){return v.useContext(Wo)!=null}function Ws(){return An()||Be(!1),v.useContext(Wo).location}function ng(e){v.useContext(ys).static||v.useLayoutEffect(e)}function Ht(){let{isDataRoute:e}=v.useContext(pr);return e?Vw():Ow()}function Ow(){An()||Be(!1);let e=v.useContext(cu),{basename:t,future:r,navigator:n}=v.useContext(ys),{matches:a}=v.useContext(pr),{pathname:i}=Ws(),o=JSON.stringify(ou(a,r.v7_relativeSplatPath)),l=v.useRef(!1);return ng(()=>{l.current=!0}),v.useCallback(function(c,m){if(m===void 0&&(m={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let h=lu(c,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:cs([t,h.pathname])),(m.replace?n.replace:n.push)(h,m.state,m)},[t,n,o,i,e])}const $w=v.createContext(null);function Iw(e){let t=v.useContext(pr).outlet;return t&&v.createElement($w.Provider,{value:e},t)}function ti(){let{matches:e}=v.useContext(pr),t=e[e.length-1];return t?t.params:{}}function ag(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(ys),{matches:a}=v.useContext(pr),{pathname:i}=Ws(),o=JSON.stringify(ou(a,n.v7_relativeSplatPath));return v.useMemo(()=>lu(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Lw(e,t){return Rw(e,t)}function Rw(e,t,r,n){An()||Be(!1);let{navigator:a,static:i}=v.useContext(ys),{matches:o}=v.useContext(pr),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let m=Ws(),h;if(t){var d;let g=typeof t=="string"?Rn(t):t;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||Be(!1),h=g}else h=m;let f=h.pathname||"/",w=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=lw(e,{pathname:w}),y=zw(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},u,g.params),pathname:cs([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:cs([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n);return t&&y?v.createElement(Wo.Provider,{value:{location:Ba({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:es.Pop}},y):y}function Aw(){let e=Yw(),t=Tw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const Fw=v.createElement(Aw,null);class Uw extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(pr.Provider,{value:this.props.routeContext},v.createElement(sg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ww(e){let{routeContext:t,match:r,children:n}=e,a=v.useContext(cu);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(pr.Provider,{value:t},n)}function zw(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let m=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||Be(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=m),h.route.id){let{loaderData:d,errors:f}=r,w=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((m,h,d)=>{let f,w=!1,x=null,y=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||Fw,u&&(c<0&&d===0?(Gw("route-fallback"),w=!0,y=null):c===d&&(w=!0,y=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,d+1)),p=()=>{let b;return f?b=x:w?b=y:h.route.Component?b=v.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=m,v.createElement(Ww,{match:h,routeContext:{outlet:m,matches:g,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?v.createElement(Uw,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var ig=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ig||{}),og=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(og||{});function Bw(e){let t=v.useContext(cu);return t||Be(!1),t}function qw(e){let t=v.useContext(Pw);return t||Be(!1),t}function Hw(e){let t=v.useContext(pr);return t||Be(!1),t}function lg(e){let t=Hw(),r=t.matches[t.matches.length-1];return r.route.id||Be(!1),r.route.id}function Yw(){var e;let t=v.useContext(sg),r=qw(),n=lg();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Vw(){let{router:e}=Bw(ig.UseNavigateStable),t=lg(og.UseNavigateStable),r=v.useRef(!1);return ng(()=>{r.current=!0}),v.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ba({fromRouteId:t},i)))},[e,t])}const Ym={};function Gw(e,t,r){Ym[e]||(Ym[e]=!0)}function Jw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function br(e){let{to:t,replace:r,state:n,relative:a}=e;An()||Be(!1);let{future:i,static:o}=v.useContext(ys),{matches:l}=v.useContext(pr),{pathname:u}=Ws(),c=Ht(),m=lu(t,ou(l,i.v7_relativeSplatPath),u,a==="path"),h=JSON.stringify(m);return v.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:a}),[c,h,a,r,n]),null}function cg(e){return Iw(e.context)}function we(e){Be(!1)}function Kw(e){let{basename:t="/",children:r=null,location:n,navigationType:a=es.Pop,navigator:i,static:o=!1,future:l}=e;An()&&Be(!1);let u=t.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:u,navigator:i,static:o,future:Ba({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=Rn(n));let{pathname:m="/",search:h="",hash:d="",state:f=null,key:w="default"}=n,x=v.useMemo(()=>{let y=iu(m,u);return y==null?null:{location:{pathname:y,search:h,hash:d,state:f,key:w},navigationType:a}},[u,m,h,d,f,w,a]);return x==null?null:v.createElement(ys.Provider,{value:c},v.createElement(Wo.Provider,{children:r,value:x}))}function Qw(e){let{children:t,location:r}=e;return Lw(qc(t),r)}new Promise(()=>{});function qc(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let i=[...t,a];if(n.type===v.Fragment){r.push.apply(r,qc(n.props.children,i));return}n.type!==we&&Be(!1),!n.props.index||!n.props.children||Be(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=qc(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hc.apply(this,arguments)}function Xw(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Zw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function e1(e,t){return e.button===0&&(!t||t==="_self")&&!Zw(e)}const t1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],r1="6";try{window.__reactRouterVersion=r1}catch{}const s1="startTransition",Vm=Jh[s1];function n1(e){let{basename:t,children:r,future:n,window:a}=e,i=v.useRef();i.current==null&&(i.current=aw({window:a,v5Compat:!0}));let o=i.current,[l,u]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},m=v.useCallback(h=>{c&&Vm?Vm(()=>u(h)):u(h)},[u,c]);return v.useLayoutEffect(()=>o.listen(m),[o,m]),v.useEffect(()=>Jw(n),[n]),v.createElement(Kw,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const a1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ee=v.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:m,viewTransition:h}=t,d=Xw(t,t1),{basename:f}=v.useContext(ys),w,x=!1;if(typeof c=="string"&&i1.test(c)&&(w=c,a1))try{let b=new URL(window.location.href),_=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=iu(_.pathname,f);_.origin===b.origin&&C!=null?c=C+_.search+_.hash:x=!0}catch{}let y=Mw(c,{relative:a}),g=o1(c,{replace:o,state:l,target:u,preventScrollReset:m,relative:a,viewTransition:h});function p(b){n&&n(b),b.defaultPrevented||g(b)}return v.createElement("a",Hc({},d,{href:w||y,onClick:x||i?n:p,ref:r,target:u}))});var Gm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gm||(Gm={}));var Jm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jm||(Jm={}));function o1(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,u=Ht(),c=Ws(),m=ag(e,{relative:o});return v.useCallback(h=>{if(e1(h,r)){h.preventDefault();let d=n!==void 0?n:xo(c)===xo(m);u(e,{replace:d,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[c,u,m,n,a,r,e,i,o,l])}function Ue(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Km(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function dg(...e){return t=>{let r=!1;const n=e.map(a=>{const i=Km(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Km(e[a],null)}}}}function hs(...e){return v.useCallback(dg(...e),e)}function zo(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),u=r.length;r=[...r,o];const c=h=>{var g;const{scope:d,children:f,...w}=h,x=((g=d==null?void 0:d[e])==null?void 0:g[u])||l,y=v.useMemo(()=>w,Object.values(w));return s.jsx(x.Provider,{value:y,children:f})};c.displayName=i+"Provider";function m(h,d){var x;const f=((x=d==null?void 0:d[e])==null?void 0:x[u])||l,w=v.useContext(f);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,m]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const u=(l==null?void 0:l[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return a.scopeName=e,[n,l1(a,...t)]}function l1(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...l,...h}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var qa=v.forwardRef((e,t)=>{const{children:r,...n}=e,a=v.Children.toArray(r),i=a.find(d1);if(i){const o=i.props.children,l=a.map(u=>u===i?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:u);return s.jsx(Yc,{...n,ref:t,children:v.isValidElement(o)?v.cloneElement(o,void 0,l):null})}return s.jsx(Yc,{...n,ref:t,children:r})});qa.displayName="Slot";var Yc=v.forwardRef((e,t)=>{const{children:r,...n}=e;if(v.isValidElement(r)){const a=m1(r),i=u1(n,r.props);return r.type!==v.Fragment&&(i.ref=t?dg(t,a):a),v.cloneElement(r,i)}return v.Children.count(r)>1?v.Children.only(null):null});Yc.displayName="SlotClone";var c1=({children:e})=>s.jsx(s.Fragment,{children:e});function d1(e){return v.isValidElement(e)&&e.type===c1}function u1(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function m1(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ug(e){const t=e+"CollectionProvider",[r,n]=zo(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:w,children:x}=f,y=K.useRef(null),g=K.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:g,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",u=K.forwardRef((f,w)=>{const{scope:x,children:y}=f,g=i(l,x),p=hs(w,g.collectionRef);return s.jsx(qa,{ref:p,children:y})});u.displayName=l;const c=e+"CollectionItemSlot",m="data-radix-collection-item",h=K.forwardRef((f,w)=>{const{scope:x,children:y,...g}=f,p=K.useRef(null),b=hs(w,p),_=i(c,x);return K.useEffect(()=>(_.itemMap.set(p,{ref:p,...g}),()=>void _.itemMap.delete(p))),s.jsx(qa,{[m]:"",ref:b,children:y})});h.displayName=c;function d(f){const w=i(e+"CollectionConsumer",f);return K.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const g=Array.from(y.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((_,C)=>g.indexOf(_.ref.current)-g.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},d,n]}var h1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],dt=h1.reduce((e,t)=>{const r=v.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?qa:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function mg(e,t){e&&Uo.flushSync(()=>e.dispatchEvent(t))}function fr(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function f1(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e);v.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var p1="DismissableLayer",Vc="dismissableLayer.update",g1="dismissableLayer.pointerDownOutside",x1="dismissableLayer.focusOutside",Qm,hg=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fg=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...u}=e,c=v.useContext(hg),[m,h]=v.useState(null),d=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=v.useState({}),w=hs(t,j=>h(j)),x=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(y),p=m?x.indexOf(m):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,_=p>=g,C=v1(j=>{const S=j.target,U=[...c.branches].some(R=>R.contains(S));!_||U||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},d),k=w1(j=>{const S=j.target;[...c.branches].some(R=>R.contains(S))||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},d);return f1(j=>{p===c.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},d),v.useEffect(()=>{if(m)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Qm=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(m)),c.layers.add(m),Xm(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Qm)}},[m,d,r,c]),v.useEffect(()=>()=>{m&&(c.layers.delete(m),c.layersWithOutsidePointerEventsDisabled.delete(m),Xm())},[m,c]),v.useEffect(()=>{const j=()=>f({});return document.addEventListener(Vc,j),()=>document.removeEventListener(Vc,j)},[]),s.jsx(dt.div,{...u,ref:w,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:Ue(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Ue(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Ue(e.onPointerDownCapture,C.onPointerDownCapture)})});fg.displayName=p1;var y1="DismissableLayerBranch",pg=v.forwardRef((e,t)=>{const r=v.useContext(hg),n=v.useRef(null),a=hs(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(dt.div,{...e,ref:a})});pg.displayName=y1;function v1(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e),n=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let u=function(){gg(g1,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function w1(e,t=globalThis==null?void 0:globalThis.document){const r=fr(e),n=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!n.current&&gg(x1,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Xm(){const e=new CustomEvent(Vc);document.dispatchEvent(e)}function gg(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?mg(a,i):a.dispatchEvent(i)}var b1=fg,_1=pg,Ha=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},j1="Portal",xg=v.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=v.useState(!1);Ha(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?nw.createPortal(s.jsx(dt.div,{...n,ref:t}),o):null});xg.displayName=j1;function N1(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var du=e=>{const{present:t,children:r}=e,n=k1(t),a=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=hs(n.ref,S1(a));return typeof r=="function"||n.isPresent?v.cloneElement(a,{ref:i}):null};du.displayName="Presence";function k1(e){const[t,r]=v.useState(),n=v.useRef({}),a=v.useRef(e),i=v.useRef("none"),o=e?"mounted":"unmounted",[l,u]=N1(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=ki(n.current);i.current=l==="mounted"?c:"none"},[l]),Ha(()=>{const c=n.current,m=a.current;if(m!==e){const d=i.current,f=ki(c);e?u("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(m&&d!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Ha(()=>{if(t){let c;const m=t.ownerDocument.defaultView??window,h=f=>{const x=ki(n.current).includes(f.animationName);if(f.target===t&&x&&(u("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},d=f=>{f.target===t&&(i.current=ki(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(c),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:v.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function ki(e){return(e==null?void 0:e.animationName)||"none"}function S1(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function uu({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=C1({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=fr(r),u=v.useCallback(c=>{if(i){const h=typeof c=="function"?c(e):c;h!==e&&l(h)}else a(c)},[i,e,a,l]);return[o,u]}function C1({defaultProp:e,onChange:t}){const r=v.useState(e),[n]=r,a=v.useRef(n),i=fr(t);return v.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var E1="VisuallyHidden",mu=v.forwardRef((e,t)=>s.jsx(dt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));mu.displayName=E1;var hu="ToastProvider",[fu,T1,D1]=ug("Toast"),[yg,R3]=zo("Toast",[D1]),[P1,Bo]=yg(hu),vg=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,u]=v.useState(null),[c,m]=v.useState(0),h=v.useRef(!1),d=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${hu}\`. Expected non-empty \`string\`.`),s.jsx(fu.Provider,{scope:t,children:s.jsx(P1,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:l,onViewportChange:u,onToastAdd:v.useCallback(()=>m(f=>f+1),[]),onToastRemove:v.useCallback(()=>m(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:o})})};vg.displayName=hu;var wg="ToastViewport",M1=["F8"],Gc="toast.viewportPause",Jc="toast.viewportResume",bg=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=M1,label:a="Notifications ({hotkey})",...i}=e,o=Bo(wg,r),l=T1(r),u=v.useRef(null),c=v.useRef(null),m=v.useRef(null),h=v.useRef(null),d=hs(t,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;v.useEffect(()=>{const y=g=>{var b;n.length!==0&&n.every(_=>g[_]||g.code===_)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),v.useEffect(()=>{const y=u.current,g=h.current;if(w&&y&&g){const p=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(Gc);g.dispatchEvent(k),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(Jc);g.dispatchEvent(k),o.isClosePausedRef.current=!1}},_=k=>{!y.contains(k.relatedTarget)&&b()},C=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",p),y.addEventListener("focusout",_),y.addEventListener("pointermove",p),y.addEventListener("pointerleave",C),window.addEventListener("blur",p),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",p),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",p),y.removeEventListener("pointerleave",C),window.removeEventListener("blur",p),window.removeEventListener("focus",b)}}},[w,o.isClosePausedRef]);const x=v.useCallback(({tabbingDirection:y})=>{const p=l().map(b=>{const _=b.ref.current,C=[_,...H1(_)];return y==="forwards"?C:C.reverse()});return(y==="forwards"?p.reverse():p).flat()},[l]);return v.useEffect(()=>{const y=h.current;if(y){const g=p=>{var C,k,j;const b=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!b){const S=document.activeElement,U=p.shiftKey;if(p.target===y&&U){(C=c.current)==null||C.focus();return}const N=x({tabbingDirection:U?"backwards":"forwards"}),$=N.findIndex(O=>O===S);Ml(N.slice($+1))?p.preventDefault():U?(k=c.current)==null||k.focus():(j=m.current)==null||j.focus()}};return y.addEventListener("keydown",g),()=>y.removeEventListener("keydown",g)}},[l,x]),s.jsxs(_1,{ref:u,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&s.jsx(Kc,{ref:c,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});Ml(y)}}),s.jsx(fu.Slot,{scope:r,children:s.jsx(dt.ol,{tabIndex:-1,...i,ref:d})}),w&&s.jsx(Kc,{ref:m,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});Ml(y)}})]})});bg.displayName=wg;var _g="ToastFocusProxy",Kc=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Bo(_g,r);return s.jsx(mu,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(l))&&n()}})});Kc.displayName=_g;var qo="Toast",O1="toast.swipeStart",$1="toast.swipeMove",I1="toast.swipeCancel",L1="toast.swipeEnd",jg=v.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,u]=uu({prop:n,defaultProp:a,onChange:i});return s.jsx(du,{present:r||l,children:s.jsx(F1,{open:l,...o,ref:t,onClose:()=>u(!1),onPause:fr(e.onPause),onResume:fr(e.onResume),onSwipeStart:Ue(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ue(e.onSwipeMove,c=>{const{x:m,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ue(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ue(e.onSwipeEnd,c=>{const{x:m,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),u(!1)})})})});jg.displayName=qo;var[R1,A1]=yg(qo,{onClose(){}}),F1=v.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:u,onResume:c,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:f,...w}=e,x=Bo(qo,r),[y,g]=v.useState(null),p=hs(t,O=>g(O)),b=v.useRef(null),_=v.useRef(null),C=a||x.duration,k=v.useRef(0),j=v.useRef(C),S=v.useRef(0),{onToastAdd:U,onToastRemove:R}=x,P=fr(()=>{var D;(y==null?void 0:y.contains(document.activeElement))&&((D=x.viewport)==null||D.focus()),o()}),N=v.useCallback(O=>{!O||O===1/0||(window.clearTimeout(S.current),k.current=new Date().getTime(),S.current=window.setTimeout(P,O))},[P]);v.useEffect(()=>{const O=x.viewport;if(O){const D=()=>{N(j.current),c==null||c()},E=()=>{const F=new Date().getTime()-k.current;j.current=j.current-F,window.clearTimeout(S.current),u==null||u()};return O.addEventListener(Gc,E),O.addEventListener(Jc,D),()=>{O.removeEventListener(Gc,E),O.removeEventListener(Jc,D)}}},[x.viewport,C,u,c,N]),v.useEffect(()=>{i&&!x.isClosePausedRef.current&&N(C)},[i,C,x.isClosePausedRef,N]),v.useEffect(()=>(U(),()=>R()),[U,R]);const $=v.useMemo(()=>y?Dg(y):null,[y]);return x.viewport?s.jsxs(s.Fragment,{children:[$&&s.jsx(U1,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),s.jsx(R1,{scope:r,onClose:P,children:Uo.createPortal(s.jsx(fu.ItemSlot,{scope:r,children:s.jsx(b1,{asChild:!0,onEscapeKeyDown:Ue(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(dt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...w,ref:p,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ue(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ue(e.onPointerDown,O=>{O.button===0&&(b.current={x:O.clientX,y:O.clientY})}),onPointerMove:Ue(e.onPointerMove,O=>{if(!b.current)return;const D=O.clientX-b.current.x,E=O.clientY-b.current.y,F=!!_.current,T=["left","right"].includes(x.swipeDirection),I=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,L=T?I(0,D):0,W=T?0:I(0,E),q=O.pointerType==="touch"?10:2,H={x:L,y:W},X={originalEvent:O,delta:H};F?(_.current=H,Si($1,h,X,{discrete:!1})):Zm(H,x.swipeDirection,q)?(_.current=H,Si(O1,m,X,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(D)>q||Math.abs(E)>q)&&(b.current=null)}),onPointerUp:Ue(e.onPointerUp,O=>{const D=_.current,E=O.target;if(E.hasPointerCapture(O.pointerId)&&E.releasePointerCapture(O.pointerId),_.current=null,b.current=null,D){const F=O.currentTarget,T={originalEvent:O,delta:D};Zm(D,x.swipeDirection,x.swipeThreshold)?Si(L1,f,T,{discrete:!0}):Si(I1,d,T,{discrete:!0}),F.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),U1=e=>{const{__scopeToast:t,children:r,...n}=e,a=Bo(qo,t),[i,o]=v.useState(!1),[l,u]=v.useState(!1);return B1(()=>o(!0)),v.useEffect(()=>{const c=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:s.jsx(xg,{asChild:!0,children:s.jsx(mu,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},W1="ToastTitle",Ng=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(dt.div,{...n,ref:t})});Ng.displayName=W1;var z1="ToastDescription",kg=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(dt.div,{...n,ref:t})});kg.displayName=z1;var Sg="ToastAction",Cg=v.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Tg,{altText:r,asChild:!0,children:s.jsx(pu,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Sg}\`. Expected non-empty \`string\`.`),null)});Cg.displayName=Sg;var Eg="ToastClose",pu=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=A1(Eg,r);return s.jsx(Tg,{asChild:!0,children:s.jsx(dt.button,{type:"button",...n,ref:t,onClick:Ue(e.onClick,a.onClose)})})});pu.displayName=Eg;var Tg=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Dg(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),q1(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Dg(n))}}),t}function Si(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?mg(a,i):a.dispatchEvent(i)}var Zm=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function B1(e=()=>{}){const t=fr(e);Ha(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function q1(e){return e.nodeType===e.ELEMENT_NODE}function H1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ml(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Y1=vg,Pg=bg,Mg=jg,Og=Ng,$g=kg,Ig=Cg,Lg=pu;function Rg(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Rg(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ag(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Rg(e))&&(n&&(n+=" "),n+=t);return n}const eh=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,th=Ag,Fg=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return th(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const m=r==null?void 0:r[c],h=i==null?void 0:i[c];if(m===null)return null;const d=eh(m)||eh(h);return a[c][d]}),l=r&&Object.entries(r).reduce((c,m)=>{let[h,d]=m;return d===void 0||(c[h]=d),c},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,m)=>{let{class:h,className:d,...f}=m;return Object.entries(f).every(w=>{let[x,y]=w;return Array.isArray(y)?y.includes({...i,...l}[x]):{...i,...l}[x]===y})?[...c,h,d]:c},[]);return th(e,o,u,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ie=(e,t)=>{const r=v.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...c},m)=>v.createElement("svg",{ref:m,...V1,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${G1(e)}`,l].join(" "),...c},[...t.map(([h,d])=>v.createElement(h,d)),...(Array.isArray(u)?u:[u])||[]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ie("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ie("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ie("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wu="-",nb=e=>{const t=ib(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(wu);return l[0]===""&&l.length!==1&&l.shift(),Gg(l,t)||ab(o)},getConflictingClassGroupIds:(o,l)=>{const u=r[o]||[];return l&&n[o]?[...u,...n[o]]:u}}},Gg=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Gg(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(wu);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ah=/^\[(.+)\]$/,ab=e=>{if(ah.test(e)){const t=ah.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ib=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return lb(Object.entries(e.classGroups),r).forEach(([i,o])=>{Xc(o,n,i,t)}),n},Xc=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:ih(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(ob(a)){Xc(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Xc(o,ih(t,i),r,n)})})},ih=(e,t)=>{let r=e;return t.split(wu).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ob=e=>e.isThemeGetter,lb=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,cb=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Jg="!",db=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const u=[];let c=0,m=0,h;for(let y=0;y<l.length;y++){let g=l[y];if(c===0){if(g===a&&(n||l.slice(y,y+i)===t)){u.push(l.slice(m,y)),m=y+i;continue}if(g==="/"){h=y;continue}}g==="["?c++:g==="]"&&c--}const d=u.length===0?l:l.substring(m),f=d.startsWith(Jg),w=f?d.substring(1):d,x=h&&h>m?h-m:void 0;return{modifiers:u,hasImportantModifier:f,baseClassName:w,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},ub=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},mb=e=>({cache:cb(e.cacheSize),parseClassName:db(e),...nb(e)}),hb=/\s+/,fb=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(hb);let l="";for(let u=o.length-1;u>=0;u-=1){const c=o[u],{modifiers:m,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}=r(c);let w=!!f,x=n(w?d.substring(0,f):d);if(!x){if(!w){l=c+(l.length>0?" "+l:l);continue}if(x=n(d),!x){l=c+(l.length>0?" "+l:l);continue}w=!1}const y=ub(m).join(":"),g=h?y+Jg:y,p=g+x;if(i.includes(p))continue;i.push(p);const b=a(x,w);for(let _=0;_<b.length;++_){const C=b[_];i.push(g+C)}l=c+(l.length>0?" "+l:l)}return l};function pb(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Kg(t))&&(n&&(n+=" "),n+=r);return n}const Kg=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Kg(e[n]))&&(r&&(r+=" "),r+=t);return r};function gb(e,...t){let r,n,a,i=o;function o(u){const c=t.reduce((m,h)=>h(m),e());return r=mb(c),n=r.cache.get,a=r.cache.set,i=l,l(u)}function l(u){const c=n(u);if(c)return c;const m=fb(u,r);return a(u,m),m}return function(){return i(pb.apply(null,arguments))}}const Pe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Qg=/^\[(?:([a-z-]+):)?(.+)\]$/i,xb=/^\d+\/\d+$/,yb=new Set(["px","full","screen"]),vb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_b=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xr=e=>wn(e)||yb.has(e)||xb.test(e),Fr=e=>Fn(e,"length",Pb),wn=e=>!!e&&!Number.isNaN(Number(e)),Ll=e=>Fn(e,"number",wn),Xn=e=>!!e&&Number.isInteger(Number(e)),Nb=e=>e.endsWith("%")&&wn(e.slice(0,-1)),ce=e=>Qg.test(e),Ur=e=>vb.test(e),kb=new Set(["length","size","percentage"]),Sb=e=>Fn(e,kb,Xg),Cb=e=>Fn(e,"position",Xg),Eb=new Set(["image","url"]),Tb=e=>Fn(e,Eb,Ob),Db=e=>Fn(e,"",Mb),Zn=()=>!0,Fn=(e,t,r)=>{const n=Qg.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Pb=e=>wb.test(e)&&!bb.test(e),Xg=()=>!1,Mb=e=>_b.test(e),Ob=e=>jb.test(e),$b=()=>{const e=Pe("colors"),t=Pe("spacing"),r=Pe("blur"),n=Pe("brightness"),a=Pe("borderColor"),i=Pe("borderRadius"),o=Pe("borderSpacing"),l=Pe("borderWidth"),u=Pe("contrast"),c=Pe("grayscale"),m=Pe("hueRotate"),h=Pe("invert"),d=Pe("gap"),f=Pe("gradientColorStops"),w=Pe("gradientColorStopPositions"),x=Pe("inset"),y=Pe("margin"),g=Pe("opacity"),p=Pe("padding"),b=Pe("saturate"),_=Pe("scale"),C=Pe("sepia"),k=Pe("skew"),j=Pe("space"),S=Pe("translate"),U=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",ce,t],N=()=>[ce,t],$=()=>["",xr,Fr],O=()=>["auto",wn,ce],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],E=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",ce],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[wn,ce];return{cacheSize:500,separator:":",theme:{colors:[Zn],spacing:[xr,Fr],blur:["none","",Ur,ce],brightness:W(),borderColor:[e],borderRadius:["none","","full",Ur,ce],borderSpacing:N(),borderWidth:$(),contrast:W(),grayscale:I(),hueRotate:W(),invert:I(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[Nb,Fr],inset:P(),margin:P(),opacity:W(),padding:N(),saturate:W(),scale:W(),sepia:I(),skew:W(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",ce]}],container:["container"],columns:[{columns:[Ur]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),ce]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xn,ce]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ce]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Xn,ce]}],"grid-cols":[{"grid-cols":[Zn]}],"col-start-end":[{col:["auto",{span:["full",Xn,ce]},ce]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Zn]}],"row-start-end":[{row:["auto",{span:[Xn,ce]},ce]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ce]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ce,t]}],"min-w":[{"min-w":[ce,t,"min","max","fit"]}],"max-w":[{"max-w":[ce,t,"none","full","min","max","fit","prose",{screen:[Ur]},Ur]}],h:[{h:[ce,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ce,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ce,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ce,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ur,Fr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ll]}],"font-family":[{font:[Zn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ce]}],"line-clamp":[{"line-clamp":["none",wn,Ll]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xr,ce]}],"list-image":[{"list-image":["none",ce]}],"list-style-type":[{list:["none","disc","decimal",ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xr,Fr]}],"underline-offset":[{"underline-offset":["auto",xr,ce]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),Cb]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Sb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Tb]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...E(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:E()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...E()]}],"outline-offset":[{"outline-offset":[xr,ce]}],"outline-w":[{outline:[xr,Fr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[xr,Fr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ur,Db]}],"shadow-color":[{shadow:[Zn]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ur,ce]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ce]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",ce]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Xn,ce]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ce]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xr,Fr,Ll]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ib=gb($b),Lb="modulepreload",Rb=function(e){return"/"+e},oh={},Pn=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(u=>{if(u=Rb(u),u in oh)return;oh[u]=!0;const c=u.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Lb,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Ab=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pn(async()=>{const{default:n}=await Promise.resolve().then(()=>Un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class bu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fb extends bu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ub extends bu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Wb extends bu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zc||(Zc={}));var zb=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Bb{constructor(t,{headers:r={},customFetch:n,region:a=Zc.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Ab(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return zb(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:u}=r;u||(u=this.region),u&&u!=="any"&&(l["x-region"]=u);let c;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const m=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:c}).catch(w=>{throw new Fb(w)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Ub(m);if(!m.ok)throw new Wb(m);let d=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield m.json():d==="application/octet-stream"?f=yield m.blob():d==="text/event-stream"?f=m:d==="multipart/form-data"?f=yield m.formData():f=yield m.text(),{data:f,error:null}}catch(a){return{data:null,error:a}}})}}var vt={},_u={},Yo={},ri={},Vo={},Go={},qb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Mn=qb();const Hb=Mn.fetch,Zg=Mn.fetch.bind(Mn),e0=Mn.Headers,Yb=Mn.Request,Vb=Mn.Response,Un=Object.freeze(Object.defineProperty({__proto__:null,Headers:e0,Request:Yb,Response:Vb,default:Zg,fetch:Hb},Symbol.toStringTag,{value:"Module"})),Gb=Mx(Un);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});let Jb=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Jo.default=Jb;var t0=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Go,"__esModule",{value:!0});const Kb=t0(Gb),Qb=t0(Jo);let Xb=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Kb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,u;let c=null,m=null,h=null,d=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=g:m=JSON.parse(g))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(c={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,h=null,d=406,f="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(m=[],c=null,d=200,f="OK")}catch{i.status===404&&x===""?(d=204,f="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw new Qb.default(c)}return{error:c,data:m,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Go.default=Xb;var Zb=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vo,"__esModule",{value:!0});const e_=Zb(Go);let t_=class extends e_.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vo.default=t_;var r_=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ri,"__esModule",{value:!0});const s_=r_(Vo);let n_=class extends s_.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ri.default=n_;var a_=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yo,"__esModule",{value:!0});const ea=a_(ri);let i_=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new ea.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ea.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const u=t.reduce((c,m)=>c.concat(Object.keys(m)),[]);if(u.length>0){const c=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",c.join(","))}}return new ea.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new ea.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ea.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yo.default=i_;var Ko={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.version=void 0;Qo.version="0.0.0-automated";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.DEFAULT_HEADERS=void 0;const o_=Qo;Ko.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${o_.version}`};var r0=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_u,"__esModule",{value:!0});const l_=r0(Yo),c_=r0(ri),d_=Ko;let u_=class s0{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},d_.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new l_.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new s0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let u;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([m,h])=>h!==void 0).map(([m,h])=>[m,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([m,h])=>{l.searchParams.append(m,h)})):(o="POST",u=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new c_.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};_u.default=u_;var Wn=zt&&zt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const n0=Wn(_u);vt.PostgrestClient=n0.default;const a0=Wn(Yo);vt.PostgrestQueryBuilder=a0.default;const i0=Wn(ri);vt.PostgrestFilterBuilder=i0.default;const o0=Wn(Vo);vt.PostgrestTransformBuilder=o0.default;const l0=Wn(Go);vt.PostgrestBuilder=l0.default;const c0=Wn(Jo);vt.PostgrestError=c0.default;var m_=vt.default={PostgrestClient:n0.default,PostgrestQueryBuilder:a0.default,PostgrestFilterBuilder:i0.default,PostgrestTransformBuilder:o0.default,PostgrestBuilder:l0.default,PostgrestError:c0.default};const{PostgrestClient:h_,PostgrestQueryBuilder:B3,PostgrestFilterBuilder:q3,PostgrestTransformBuilder:H3,PostgrestBuilder:Y3,PostgrestError:V3}=m_,f_="2.11.2",p_={"X-Client-Info":`realtime-js/${f_}`},g_="1.0.0",d0=1e4,x_=1e3;var bn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bn||(bn={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var Qt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qt||(Qt={}));var ed;(function(e){e.websocket="websocket"})(ed||(ed={}));var ks;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ks||(ks={}));class y_{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const u=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class u0{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ee||(Ee={}));const lh=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=v_(o,e,t,a),i),{})},v_=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?m0(i,o):td(o)},m0=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return j_(t,r)}switch(e){case Ee.bool:return w_(t);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return b_(t);case Ee.json:case Ee.jsonb:return __(t);case Ee.timestamp:return N_(t);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return td(t);default:return td(t)}},td=e=>e,w_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},b_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},__=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},j_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>m0(t,l))}return e},N_=e=>typeof e=="string"?e.replace(" ","T"):e,h0=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Rl{constructor(t,r,n={},a=d0){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ch;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ch||(ch={}));class wa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wa.syncState(this.state,a,i,o),this.pendingDiffs.forEach(u=>{this.state=wa.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wa.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(c,m)=>{o[c]||(u[c]=m)}),this.map(o,(c,m)=>{const h=i[c];if(h){const d=m.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),w=m.filter(y=>f.indexOf(y.presence_ref)<0),x=h.filter(y=>d.indexOf(y.presence_ref)<0);w.length>0&&(l[c]=w),x.length>0&&(u[c]=x)}else l[c]=m}),this.syncDiff(i,{joins:l,leaves:u},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,u)=>{var c;const m=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),m.length>0){const h=t[l].map(f=>f.presence_ref),d=m.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...d)}n(l,m,u)}),this.map(o,(l,u)=>{let c=t[l];if(!c)return;const m=u.map(h=>h.presence_ref);c=c.filter(h=>m.indexOf(h.presence_ref)<0),t[l]=c,a(l,c,u),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(dh||(dh={}));var uh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(uh||(uh={}));var vr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vr||(vr={}));class ju{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Rl(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new u0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new wa(this),this.broadcastEndpointURL=h0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(m=>t==null?void 0:t(vr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(vr.CLOSED));const u={},c={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var h;if(this.socket.setAuth(),m===void 0){t==null||t(vr.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,w=[];for(let x=0;x<f;x++){const y=d[x],{filter:{event:g,schema:p,table:b,filter:_}}=y,C=m&&m[x];if(C&&C.event===g&&C.schema===p&&C.table===b&&C.filter===_)w.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),t==null||t(vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(vr.SUBSCRIBED);return}}).receive("error",m=>{t==null||t(vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new Rl(this,Qt.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Rl(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:m}=Qt;if(n&&[l,u,c,m].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var w,x,y;return((w=f.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(x=f.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var w,x,y,g,p,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,C=(w=f.filter)===null||w===void 0?void 0:w.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(p=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const w=d.data,{schema:x,table:y,commit_timestamp:g,type:p,errors:b}=w;d=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:g,eventType:p,new:{},old:{},errors:b}),this._getPayloadRecords(w))}f.callback(d,n)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ju.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qt.close,{},t)}_onError(t){this._on(Qt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lh(t.columns,t.old_record)),r}}const k_=()=>{},S_=typeof WebSocket<"u",C_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E_{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=p_,this.params={},this.timeout=d0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=k_,this.conn=null,this.sendBuffer=[],this.serializer=new y_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Pn(async()=>{const{default:u}=await Promise.resolve().then(()=>Un);return{default:u}},void 0).then(({default:u})=>u(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${ed.websocket}`,this.httpEndpoint=h0(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new u0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(S_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new T_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Pn(async()=>{const{default:t}=await import("./browser-BVSdP6O8.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:g_}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return ks.Connecting;case bn.open:return ks.Open;case bn.closing:return ks.Closing;default:return ks.Closed}}isConnected(){return this.connectionState()===ks.Open}channel(t,r={config:{}}){const n=new ju(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Qt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(x_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([C_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class T_{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=bn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Nu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ke(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class D_ extends Nu{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class rd extends Nu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var P_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const f0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pn(async()=>{const{default:n}=await Promise.resolve().then(()=>Un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},M_=()=>P_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pn(()=>Promise.resolve().then(()=>Un),void 0)).Response:Response}),sd=e=>{if(Array.isArray(e))return e.map(r=>sd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=sd(n)}),t};var zs=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const Al=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),O_=(e,t,r)=>zs(void 0,void 0,void 0,function*(){const n=yield M_();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new D_(Al(a),e.status||500))}).catch(a=>{t(new rd(Al(a),a))}):t(new rd(Al(e),e))}),$_=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function si(e,t,r,n,a,i){return zs(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,$_(t,n,a,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>O_(u,l,n))})})}function wo(e,t,r,n){return zs(this,void 0,void 0,function*(){return si(e,"GET",t,r,n)})}function Gr(e,t,r,n,a){return zs(this,void 0,void 0,function*(){return si(e,"POST",t,n,a,r)})}function I_(e,t,r,n,a){return zs(this,void 0,void 0,function*(){return si(e,"PUT",t,n,a,r)})}function L_(e,t,r,n){return zs(this,void 0,void 0,function*(){return si(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function p0(e,t,r,n,a){return zs(this,void 0,void 0,function*(){return si(e,"DELETE",t,n,a,r)})}var xt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const R_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class A_{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=f0(a)}uploadOrUpdate(t,r,n,a){return xt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},mh),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),m=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:c,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}upload(t,r,n){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return xt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:mh.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,m["cache-control"]=`max-age=${c.cacheControl}`,m["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:u,headers:m}),d=yield h.json();return h.ok?{data:{path:i,fullPath:d.Key},error:null}:{data:null,error:d}}catch(u){if(Ke(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return xt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Gr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Nu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}update(t,r,n){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return xt(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}copy(t,r,n){return xt(this,void 0,void 0,function*(){try{return{data:{path:(yield Gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return xt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Gr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return xt(this,void 0,void 0,function*(){try{const a=yield Gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}download(t,r){return xt(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield wo(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ke(l))return{data:null,error:l};throw l}})}info(t){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield wo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:sd(n),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}exists(t){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield L_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ke(n)&&n instanceof rd){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&a.push(u);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return xt(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}list(t,r,n){return xt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},R_),r),{prefix:t||""});return{data:yield Gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const F_="2.7.1",U_={"X-Client-Info":`storage-js/${F_}`};var Gs=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class W_{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},U_),r),this.fetch=f0(n)}listBuckets(){return Gs(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ke(t))return{data:null,error:t};throw t}})}getBucket(t){return Gs(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Gs(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Gs(this,void 0,void 0,function*(){try{return{data:yield I_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Gs(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Gs(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}}class z_ extends W_{constructor(t,r={},n){super(t,r,n)}from(t){return new A_(this.url,this.headers,t,this.fetch)}}const B_="2.49.1";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const q_={"X-Client-Info":`supabase-js-${oa}/${B_}`},H_={headers:q_},Y_={schema:"public"},V_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G_={};var J_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const K_=e=>{let t;return e?t=e:typeof fetch>"u"?t=Zg:t=fetch,(...r)=>t(...r)},Q_=()=>typeof Headers>"u"?e0:Headers,X_=(e,t,r)=>{const n=K_(r),a=Q_();return(i,o)=>J_(void 0,void 0,void 0,function*(){var l;const u=(l=yield t())!==null&&l!==void 0?l:e;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var Z_=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};function ej(e){return e.replace(/\/$/,"")}function tj(e,t){const{db:r,auth:n,realtime:a,global:i}=e,{db:o,auth:l,realtime:u,global:c}=t,m={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},u),a),global:Object.assign(Object.assign({},c),i),accessToken:()=>Z_(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const g0="2.68.0",Zs=30*1e3,nd=3,Fl=nd*Zs,rj="http://localhost:9999",sj="supabase.auth.token",nj={"X-Client-Info":`gotrue-js/${g0}`},ad="X-Supabase-Api-Version",x0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function aj(e){return Math.round(Date.now()/1e3)+e}function ij(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ir=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},ba=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function oj(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const y0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pn(async()=>{const{default:n}=await Promise.resolve().then(()=>Un);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},lj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",v0=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ci=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ei=async(e,t)=>{await e.removeItem(t)};function cj(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,a,i,o,l,u,c,m=0;for(e=e.replace("-","+").replace("_","/");m<e.length;)o=t.indexOf(e.charAt(m++)),l=t.indexOf(e.charAt(m++)),u=t.indexOf(e.charAt(m++)),c=t.indexOf(e.charAt(m++)),n=o<<2|l>>4,a=(l&15)<<4|u>>2,i=(u&3)<<6|c,r=r+String.fromCharCode(n),u!=64&&a!=0&&(r=r+String.fromCharCode(a)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class Xo{constructor(){this.promise=new Xo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xo.promiseConstructor=Promise;function hh(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=e.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(cj(n))}async function dj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function uj(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function mj(e){return("0"+e.toString(16)).substr(-2)}function hj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,mj).join("")}async function fj(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function pj(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await fj(e);return pj(r)}async function Js(e,t,r=!1){const n=hj();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await v0(e,`${t}-code-verifier`,a);const i=await gj(n);return[i,n===i?"plain":"s256"]}const xj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yj(e){const t=e.headers.get(ad);if(!t||!t.match(xj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class ku extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vj extends ku{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function wj(e){return ue(e)&&e.name==="AuthApiError"}class w0 extends ku{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Bs extends ku{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Br extends Bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bj(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Ul extends Bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ti extends Bs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Di extends Bs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _j(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class fh extends Bs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class id extends Bs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Wl(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class ph extends Bs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var jj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const _s=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Nj=[502,503,504];async function gh(e){var t;if(!lj(e))throw new id(_s(e),0);if(Nj.includes(e.status))throw new id(_s(e),e.status);let r;try{r=await e.json()}catch(i){throw new w0(_s(i),i)}let n;const a=yj(e);if(a&&a.getTime()>=x0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ph(_s(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ph(_s(r),e.status,r.weak_password.reasons);throw new vj(_s(r),e.status||500,n)}const kj=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function pe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[ad]||(i[ad]=x0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Sj(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Sj(e,t,r,n,a,i){const o=kj(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new id(_s(u),0)}if(l.ok||await gh(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await gh(u)}}function qr(e){var t;let r=null;Dj(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=aj(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function xh(e){const t=qr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Cj(e){return{data:e,error:null}}function Ej(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=jj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Tj(e){return e}function Dj(e){return e.access_token&&e.refresh_token&&e.expires_in}var Pj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class Mj{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=y0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qr})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Pj(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Ej,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qr})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},m=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Tj});if(m.error)throw m.error;const h=await m.json(),d=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);c[`${y}Page`]=x}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ue(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qr})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Qr})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qr})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}const Oj={getItem:e=>ba()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ba()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ba()&&globalThis.localStorage.removeItem(e)}};function yh(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function $j(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ks={debug:!!(globalThis&&ba()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class b0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ij extends b0{}async function Lj(e,t,r){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ij(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ks.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}$j();const Rj={url:rj,storageKey:sj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vh(e,t,r){return await r()}class Va{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Va.nextInstanceID,Va.nextInstanceID+=1,this.instanceID>0&&ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Rj),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Mj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=y0(a.fetch),this.lock=a.lock||vh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ir()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Lj:this.lock=vh,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:ba()?this.storage=Oj:(this.memoryStorage={},this.storage=yh(this.memoryStorage)):(this.memoryStorage={},this.storage=yh(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${g0}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=oj(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ir()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_j(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new w0("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:qr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:m,password:h,options:d}=t;let f=null,w=null;this.flowType==="pkce"&&([f,w]=await Js(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:m,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:w},xform:qr})}else if("phone"in t){const{phone:m,password:h,options:d}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:qr})}else throw new Ti("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:xh})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:xh})}else throw new Ti("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ul}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Ci(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qr});if(await Ei(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ul}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qr}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Ul}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:u}=t;let c=null,m=null;this.flowType==="pkce"&&([c,m]=await Js(this.storage,this.storageKey));const{error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:m},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:m}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=u==null?void 0:u.data)!==null&&a!==void 0?a:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:m}}throw new Ti("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:qr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Js(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Cj})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Br;const{error:a}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ti("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ci(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Fl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,m)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,m))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qr}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Br}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Qr})})}catch(r){if(ue(r))return bj(r)&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Br;const o=a.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Js(this.storage,this.storageKey));const{data:c,error:m}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Qr});if(m)throw m;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return hh(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Br;const r=Date.now()/1e3;let n=r,a=!0,i=null;const o=hh(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Br;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ir())throw new Di("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Di(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Di("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fh("No code detected.");const{data:p,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=t;if(!i||!l||!o||!c)throw new Di("No session defined in URL");const m=Math.round(Date.now()/1e3),h=parseInt(l);let d=m+h;u&&(d=parseInt(u));const f=d-m;f*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const w=d-h;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,d,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,d,m);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ci(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(wj(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=ij(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Js(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,u,c,m;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",f,{headers:this.headers,jwt:(m=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return ir()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uj(async a=>(a>0&&await dj(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qr})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Wl(i)&&Date.now()+o-n<Zs})}catch(n){if(this._debug(r,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ir()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ci(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Fl;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Fl}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Wl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Xo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Br;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ue(i)){const o={session:null,error:i};return Wl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await v0(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ei(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Zs}ms, refresh threshold is ${nd} ticks`),a<=nd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof b0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Js(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=u==null?void 0:u.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(a.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const m=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:m},error:null}}))}}Va.nextInstanceID=0;const Aj=Va;class Fj extends Aj{constructor(t){super(t)}}var Uj=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{c(n.next(m))}catch(h){o(h)}}function u(m){try{c(n.throw(m))}catch(h){o(h)}}function c(m){m.done?i(m.value):a(m.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Wj{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=ej(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const u=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Y_,realtime:G_,auth:Object.assign(Object.assign({},V_),{storageKey:u}),global:H_},m=tj(n??{},c);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=X_(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new h_(`${l}/rest/v1`,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new Bb(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new z_(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Uj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:u},c,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fj({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:u,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new E_(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zj=(e,t,r)=>new Wj(e,t,r),Bj="https://dypxnlgeyjcyklccszqa.supabase.co",qj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5cHhubGdleWpjeWtsY2NzenFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExODk4MjYsImV4cCI6MjA1Njc2NTgyNn0.q_S3OAdN_04ChF2TM2fAllRyCH652UnPaU_ByWDKFm0",M=zj(Bj,qj,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"kitasetsu_auth_token",storage:{getItem:e=>{try{const t=window.localStorage.getItem(e);return t||null}catch(t){return console.error("Error retrieving auth data:",t),null}},setItem:(e,t)=>{try{window.localStorage.setItem(e,t)}catch(r){console.error("Error storing auth data:",r)}},removeItem:e=>{try{window.localStorage.removeItem(e)}catch(t){console.error("Error removing auth data:",t)}}}}});function ve(...e){return Ib(Ag(e))}function Et(e){return new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}function od(e){return new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY"}).format(e)}function Hj(e,t=""){e instanceof Error?console.error(` [${t}]:`,e.message,e.stack):console.error(` [${t}]:`,e),typeof e=="string"&&e.includes("DEPLOYMENT_NOT_FOUND")&&console.error("")}async function _0(e){try{if(!e)return!1;const t=new Date().toISOString(),{data:r}=await M.from("premium_subscriptions").select("*").eq("instructor_id",e).eq("status","active").lt("start_date",t).gt("end_date",t).maybeSingle();return!!r}catch(t){return Hj(t,"checkIsPremiumInstructor"),!1}}const Yj=Y1,j0=v.forwardRef(({className:e,...t},r)=>s.jsx(Pg,{ref:r,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));j0.displayName=Pg.displayName;const Vj=Fg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),N0=v.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Mg,{ref:n,className:ve(Vj({variant:t}),e),...r}));N0.displayName=Mg.displayName;const Gj=v.forwardRef(({className:e,...t},r)=>s.jsx(Ig,{ref:r,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Gj.displayName=Ig.displayName;const k0=v.forwardRef(({className:e,...t},r)=>s.jsx(Lg,{ref:r,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Vg,{className:"h-4 w-4"})}));k0.displayName=Lg.displayName;const S0=v.forwardRef(({className:e,...t},r)=>s.jsx(Og,{ref:r,className:ve("text-sm font-semibold",e),...t}));S0.displayName=Og.displayName;const C0=v.forwardRef(({className:e,...t},r)=>s.jsx($g,{ref:r,className:ve("text-sm opacity-90",e),...t}));C0.displayName=$g.displayName;const Jj=5,Kj=1e6,kr={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let zl=0;function Qj(){return zl=(zl+1)%Number.MAX_VALUE,zl.toString()}const Bl=new Map,Xj=(e,t)=>{switch(t.type){case kr.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,Jj)};case kr.UPDATE_TOAST:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case kr.DISMISS_TOAST:{const{toastId:r}=t;return r?wh(r):e.toasts.forEach(n=>{wh(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case kr.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},qi=[];let Hi={toasts:[]};function _a(e){Hi=Xj(Hi,e),qi.forEach(t=>{t(Hi)})}function wt({...e}){const t=Qj(),r=a=>_a({type:kr.UPDATE_TOAST,toast:{...a,id:t}}),n=()=>_a({type:kr.DISMISS_TOAST,toastId:t});return _a({type:kr.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function $r(){const[e,t]=v.useState(Hi);return v.useEffect(()=>(qi.push(t),()=>{const r=qi.indexOf(t);r>-1&&qi.splice(r,1)}),[e]),{...e,toast:wt,dismiss:r=>_a({type:kr.DISMISS_TOAST,toastId:r})}}function wh(e){if(Bl.has(e))return;const t=setTimeout(()=>{Bl.delete(e),_a({type:kr.REMOVE_TOAST,toastId:e})},Kj);Bl.set(e,t)}function Su(){const{toasts:e}=$r();return s.jsxs(Yj,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(N0,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(S0,{children:r}),n&&s.jsx(C0,{children:n})]}),a,s.jsx(k0,{})]},t)}),s.jsx(j0,{})]})}const Zj=Fg("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-button-hover",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-button hover:shadow-button-hover",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-button hover:shadow-button-hover",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:from-primary/90 hover:to-secondary/90 shadow-button hover:shadow-button-hover",subtle:"bg-primary/10 text-primary hover:bg-primary/20",glass:"backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border border-white/20 dark:border-gray-800/20 text-foreground shadow-button hover:shadow-button-hover hover:bg-white/90 dark:hover:bg-gray-900/90"},size:{default:"h-10 px-5 py-2.5",sm:"h-9 rounded-md px-3 py-2 text-xs",lg:"h-12 rounded-md px-8 py-3 text-base",xl:"h-14 rounded-md px-10 py-4 text-lg",icon:"h-10 w-10","icon-sm":"h-8 w-8 rounded-md","icon-lg":"h-12 w-12 rounded-md"},rounded:{default:"rounded-md",none:"rounded-none",sm:"rounded-sm",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full"},withIcon:{true:"inline-flex items-center justify-center gap-2"}},defaultVariants:{variant:"default",size:"default",rounded:"default"}}),re=v.forwardRef(({className:e,variant:t,size:r,rounded:n,withIcon:a,asChild:i=!1,isLoading:o=!1,children:l,...u},c)=>{const m=i?qa:"button";return s.jsx(m,{className:ve(Zj({variant:t,size:r,rounded:n,withIcon:a,className:e})),ref:c,disabled:o||u.disabled,...u,children:o?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"..."})]}):l})});re.displayName="Button";const e2=()=>{const[e,t]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(!1),o=Ht(),{toast:l}=$r(),u=async c=>{if(c.preventDefault(),!e||!r){l({title:"",description:"",variant:"destructive"});return}try{i(!0);const{data:m,error:h}=await M.auth.signInWithPassword({email:e,password:r});if(m.session?console.log("Session created successfully"):console.warn("Login succeeded but no session was created"),h)throw h;const{data:d}=await M.from("user_profiles").select("is_profile_completed").eq("id",m.user.id).maybeSingle(),{data:f}=await M.from("instructor_profiles").select("is_profile_completed").eq("id",m.user.id).maybeSingle(),w={user_type:d?"user":"instructor",is_profile_completed:d?d.is_profile_completed:f==null?void 0:f.is_profile_completed};l({title:"",description:""}),w!=null&&w.is_profile_completed?o(`/${w.user_type}`):o(`/${w.user_type}/profile`)}catch(m){l({title:"",description:m.message||"",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:[s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:""})]}),s.jsxs("div",{className:"w-full max-w-md space-y-4",children:[s.jsxs("div",{className:"flex items-center p-4 bg-white/20 backdrop-blur-sm rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center mr-4 flex-shrink-0",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"8",r:"6"}),s.jsx("path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"})]})}),s.jsx("p",{className:"text-sm",children:""})]}),s.jsxs("div",{className:"flex items-center p-4 bg-white/20 backdrop-blur-sm rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/30 flex items-center justify-center mr-4 flex-shrink-0",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),s.jsx("p",{className:"text-sm",children:""})]})]})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:""})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:""}),s.jsxs("p",{className:"text-center text-sm text-gray-600",children:[""," ",s.jsx(ee,{to:"/register",className:"font-medium text-primary hover:text-primary/80 underline underline-offset-4",children:""})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:s.jsxs("form",{className:"space-y-6",onSubmit:u,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:c=>t(c.target.value),className:"form-input",placeholder:"example@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:c=>n(c.target.value),className:"form-input",placeholder:""})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),s.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:""})]}),s.jsx("div",{className:"text-sm",children:s.jsx(ee,{to:"/reset-password",className:"font-medium text-primary hover:text-primary/80",children:""})})]}),s.jsx(re,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:a,isLoading:a,children:""})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:" 2025 . All rights reserved."})})]})]})})]})},t2=()=>{const[e,t]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(""),[o,l]=v.useState("user"),[u,c]=v.useState(!1),m=Ht(),{toast:h}=$r(),d=async f=>{if(f.preventDefault(),!e||!r||!a){h({title:"",description:"",variant:"destructive"});return}if(r!==a){h({title:"",description:"",variant:"destructive"});return}try{c(!0);const{data:w,error:x}=await M.auth.signUp({email:e,password:r,options:{data:{user_type:o}}});if(x)throw x;if(w.user){if(o==="user"){const{error:y}=await M.from("user_profiles").insert([{id:w.user.id,name:e.split("@")[0],email:e,username:e.split("@")[0],is_profile_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(y)throw y}else{const{error:y}=await M.from("instructor_profiles").insert([{id:w.user.id,name:e.split("@")[0],email:e,username:e.split("@")[0],is_profile_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(y)throw y}h({title:"",description:""}),m(`/${o}/profile`)}}catch(w){h({title:"",description:w.message||"",variant:"destructive"})}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-center text-3xl font-bold text-primary",children:""}),s.jsx("h2",{className:"mt-6 text-center text-2xl font-extrabold text-gray-900",children:""}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:[""," ",s.jsx(ee,{to:"/login",className:"font-medium text-primary hover:text-primary/80",children:""})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:""}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:f=>t(f.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:r,onChange:f=>n(f.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:""}),s.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:a,onChange:f=>i(f.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:""})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"user-type-user",name:"user-type",type:"radio",checked:o==="user",onChange:()=>l("user"),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300"}),s.jsx("label",{htmlFor:"user-type-user",className:"ml-2 mr-6 block text-sm text-gray-900",children:""})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"user-type-instructor",name:"user-type",type:"radio",checked:o==="instructor",onChange:()=>l("instructor"),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300"}),s.jsx("label",{htmlFor:"user-type-instructor",className:"ml-2 block text-sm text-gray-900",children:""})]})]})}),s.jsx("div",{children:s.jsx(re,{type:"submit",className:"w-full py-6",disabled:u,children:u?"...":""})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("p",{className:"text-gray-600",children:""})})]})]})})},r2=()=>{const[e,t]=v.useState(""),[r,n]=v.useState(!1),[a,i]=v.useState(!1),{toast:o}=$r(),l=async u=>{if(u.preventDefault(),!e){o({title:"",description:"",variant:"destructive"});return}try{n(!0);const{error:c}=await M.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/update-password`});if(c)throw c;i(!0),o({title:"",description:""})}catch(c){o({title:"",description:c.message||"",variant:"destructive"})}finally{n(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:""})]})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:""})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:""}),s.jsxs("p",{className:"text-center text-sm text-gray-600",children:[""," ",s.jsx(ee,{to:"/login",className:"font-medium text-primary hover:text-primary/80 underline underline-offset-4",children:""})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:a?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-primary",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:""}),s.jsx("p",{className:"mt-2 text-gray-500",children:" "}),s.jsx("div",{className:"mt-6",children:s.jsx(ee,{to:"/login",className:"text-sm font-medium text-primary hover:text-primary/80",children:""})})]}):s.jsxs("form",{className:"space-y-6",onSubmit:l,children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 mb-4",children:" "}),s.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:u=>t(u.target.value),className:"form-input",placeholder:"example@email.com"})]}),s.jsx(re,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:r,isLoading:r,children:""})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:" 2025 . All rights reserved."})})]})]})})]})},s2=()=>{const[e,t]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(!1),[o,l]=v.useState(!1),u=Ht(),{toast:c}=$r();v.useEffect(()=>{(async()=>{const{data:d}=await M.auth.getSession();d.session||(c({title:"",description:"",variant:"destructive"}),u("/login"))})()},[u,c]);const m=async h=>{if(h.preventDefault(),!e||!r){c({title:"",description:"",variant:"destructive"});return}if(e!==r){c({title:"",description:"",variant:"destructive"});return}if(e.length<8){c({title:"",description:"8",variant:"destructive"});return}try{i(!0);const{error:d}=await M.auth.updateUser({password:e});if(d)throw d;l(!0),c({title:"",description:""}),setTimeout(()=>{u("/login")},3e3)}catch(d){c({title:"",description:d.message||"",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-hero-pattern bg-cover bg-center bg-no-repeat relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/70 to-secondary/70 mix-blend-multiply"}),s.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full p-12 text-white",children:s.jsxs("div",{className:"animate-float",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-xl max-w-md text-center mb-8",children:""})]})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12 bg-white",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-2 rounded-full bg-primary/10 mb-4",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-primary to-secondary text-white",children:s.jsx("span",{className:"text-xl font-bold",children:""})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-center text-sm text-gray-600",children:""})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("div",{className:"bg-primary/5 rounded-lg p-6 shadow-sm border border-primary/10",children:o?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-primary",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:""}),s.jsx("p",{className:"mt-2 text-gray-500",children:"..."})]}):s.jsxs("form",{className:"space-y-6",onSubmit:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:e,onChange:h=>t(h.target.value),className:"form-input",placeholder:"",minLength:8}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"8"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:r,onChange:h=>n(h.target.value),className:"form-input",placeholder:""})]})]}),s.jsx(re,{type:"submit",variant:"gradient",size:"lg",className:"w-full shadow-lg",disabled:a,isLoading:a,children:""})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:" 2025 . All rights reserved."})})]})]})})]})},Rt=({children:e,user:t,userType:r,requireProfileCompletion:n=!1,allowIncompleteProfile:a=!1})=>{const[i,o]=v.useState(!0),[l,u]=v.useState(null),[c,m]=v.useState(null),[h,d]=v.useState(null),[f,w]=v.useState(!1);if(v.useEffect(()=>{if(!t){o(!1);return}const x=async()=>{try{const{data:g,error:p}=await M.auth.getSession();if(p||!g.session){console.error("No valid auth session in ProtectedRoute:",(p==null?void 0:p.message)||"Session missing"),o(!1);return}}catch(g){console.error("Session check error:",g)}},y=async()=>{try{const{data:g,error:p}=await M.from("user_profiles").select("*").eq("id",t.id).single();!p&&g&&(u(g),d("user"));const{data:b,error:_}=await M.from("instructor_profiles").select("*").eq("id",t.id).single();!_&&b?(m(b),r==="instructor"&&w((b==null?void 0:b.is_profile_completed)||!1),(r==="instructor"||!p&&!r)&&d("instructor")):r==="instructor"&&w(!1),r==="user"&&!p&&g&&w((g==null?void 0:g.is_profile_completed)||!1)}catch(g){console.error("Error fetching profiles:",g)}finally{o(!1)}};x().then(()=>y())},[t,r]),i)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx(br,{to:"/login",replace:!0});if(r&&!h&&i)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(r&&h&&r!==h)return s.jsx(br,{to:`/${h}`,replace:!0});if(n&&!f&&!a){if(r==="instructor")return s.jsx(br,{to:"/instructor/profile",replace:!0});if(r==="user")return s.jsx(br,{to:"/user/profile",replace:!0})}if(r==="user"&&!l||r==="instructor"&&!c){if(r==="user")return console.log("User profile not found, redirecting to profile page"),s.jsx(br,{to:"/user/profile",replace:!0});if(r==="instructor")return console.log("Instructor profile not found, redirecting to profile page"),s.jsx(br,{to:"/instructor/profile",replace:!0})}return s.jsx(s.Fragment,{children:e})},E0=({userType:e,navItems:t,profileHref:r,notificationsHref:n,user:a,isPremium:i=!1})=>{const[o,l]=v.useState(!1),[u,c]=v.useState(0),[m,h]=v.useState(0),[d,f]=v.useState(!1),[w,x]=v.useState(""),y=Ht(),g=Ws(),{toast:p}=$r();v.useEffect(()=>{const k=()=>{f(window.scrollY>10)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]),v.useEffect(()=>{const k=async()=>{if(a){const{count:S}=await M.from("notifications").select("count",{count:"exact"}).eq("user_id",a.id).eq("is_read",!1);c(S||0);const U=e==="instructor"?{instructor_id:a.id}:{user_id:a.id},{data:R}=await M.from("chat_rooms").select("id").match(U),P=(R==null?void 0:R.map($=>$.id))||[];let N=0;if(P.length>0){const{count:$}=await M.from("chat_messages").select("count",{count:"exact"}).eq("is_read",!1).neq("sender_id",a.id).in("chat_room_id",P);N=$||0}h(N)}};k();const j=M.channel("unread-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},()=>{k()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:"is_read=eq.true"},()=>{k()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},()=>{k()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:"is_read=eq.true"},()=>{k()}).subscribe();return()=>{M.removeChannel(j)}},[a,e]);const b=async()=>{await M.auth.signOut(),p({title:"",description:""}),y("/login")},_=()=>{l(!o)},C=k=>{switch(k.toLowerCase()){case"":return s.jsx(xu,{className:"w-5 h-5"});case"":case"":return s.jsx(lt,{className:"w-5 h-5"});case"":return s.jsx(Ho,{className:"w-5 h-5"});case"":case"":return s.jsx(vu,{className:"w-5 h-5"});case"":case"":return s.jsx(Qc,{className:"w-5 h-5"});case"":return s.jsx(X1,{className:"w-5 h-5"});default:return null}};return s.jsxs("nav",{className:ve("sticky top-0 z-50 transition-all duration-300",d?"bg-white/90 backdrop-blur-md shadow-lg border-b border-primary/10":"bg-white shadow-sm"),children:[s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsxs(ee,{to:`/${e}`,className:"flex items-center space-x-2 group",children:[s.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-lg group-hover:bg-primary/30 transition-colors duration-300"}),s.jsx("span",{className:"relative text-xl font-bold text-primary",children:""})]}),s.jsx("span",{className:"gradient-heading text-xl tracking-tight",children:""})]})}),s.jsx("div",{className:"hidden sm:ml-10 sm:flex sm:items-center sm:space-x-1",children:t.map((k,j)=>{const S=g.pathname===k.href,U=k.label===""||k.label==="";return s.jsxs(ee,{to:k.href,className:ve("nav-link relative overflow-hidden",S?"nav-link-active":"hover:text-primary"),children:[S&&s.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"}),s.jsxs("span",{className:"flex items-center space-x-1.5",children:[k.icon||C(k.label),k.isPremium&&s.jsx(Nr,{className:"w-4 h-4 text-yellow-500 animate-pulse"}),s.jsx("span",{children:k.label}),U&&m>0&&s.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full shadow-sm animate-pulse",children:m>9?"9+":m})]})]},j)})})]}),s.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-3",children:[e==="user"&&s.jsxs("form",{className:"relative",onSubmit:k=>{k.preventDefault(),w.trim()&&y(`/${e}/lessons?search=${encodeURIComponent(w)}`)},children:[s.jsx("input",{type:"text",placeholder:"...",className:"px-4 py-2 pl-10 pr-4 rounded-full text-sm border border-input focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary w-[200px] bg-background",value:w,onChange:k=>x(k.target.value)}),s.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),s.jsxs(ee,{to:n,className:"nav-link relative overflow-hidden flex items-center space-x-1.5","aria-label":"",children:[s.jsx(ya,{className:"h-5 w-5"}),s.jsx("span",{children:""}),u>0&&s.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-primary rounded-full shadow-sm animate-pulse",children:u>9?"9+":u})]}),s.jsxs("div",{className:"relative flex items-center",children:[i&&s.jsxs("div",{className:"flex items-center mr-3 px-2.5 py-1 rounded-full bg-gradient-to-r from-yellow-400 to-amber-500 text-white shadow-sm",children:[s.jsx(Nr,{className:"h-3.5 w-3.5 mr-1 animate-pulse-soft"}),s.jsx("span",{className:"text-xs font-medium",children:""})]}),s.jsxs(ee,{to:r,className:"flex items-center space-x-2 p-1.5 rounded-full text-foreground/80 hover:text-foreground transition-colors hover:bg-accent/50",children:[s.jsx("div",{className:"relative w-9 h-9 overflow-hidden rounded-full ring-2 ring-primary/30 bg-muted flex items-center justify-center shadow-sm",children:a!=null&&a.profile_image_url?s.jsx("img",{className:"h-full w-full object-cover",src:a.profile_image_url,alt:(a==null?void 0:a.name)||""}):s.jsx(vo,{className:"h-5 w-5 text-foreground/60"})}),s.jsx("span",{className:"text-sm font-medium max-w-[120px] truncate",children:(a==null?void 0:a.name)||""})]}),s.jsx("div",{className:"ml-2 flex items-center space-x-2",children:s.jsx(re,{variant:"outline",size:"icon-sm",rounded:"full",onClick:b,className:"text-foreground/70 hover:text-destructive hover:border-destructive/50","aria-label":"",children:s.jsx(sh,{className:"h-4 w-4"})})})]})]}),s.jsxs("div",{className:"flex items-center sm:hidden",children:[e==="user"&&s.jsxs("form",{className:"relative mr-1",onSubmit:k=>{k.preventDefault(),w.trim()&&(y(`/${e}/lessons?search=${encodeURIComponent(w)}`),l(!1))},children:[s.jsx("input",{type:"text",placeholder:"...",className:"px-3 py-1.5 pl-8 pr-2 rounded-full text-xs border border-input focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary w-[120px] bg-background",value:w,onChange:k=>x(k.target.value)}),s.jsx(Rs,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"})]}),s.jsxs(ee,{to:n,className:"flex items-center mr-2 p-2 text-foreground/70 hover:text-primary transition-colors","aria-label":"",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ya,{className:"h-5 w-5"}),u>0&&s.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 h-4 w-4 text-xs font-bold text-white bg-primary rounded-full shadow-sm",children:u>9?"9+":u})]}),s.jsx("span",{className:"ml-1 text-sm",children:""})]}),s.jsx("button",{onClick:_,className:"inline-flex items-center justify-center p-2 rounded-md text-foreground/70 hover:text-primary hover:bg-accent/50 transition-colors","aria-label":o?"":"",children:o?s.jsx(Vg,{className:"block h-5 w-5"}):s.jsx(eb,{className:"block h-5 w-5"})})]})]})}),o&&s.jsxs("div",{className:"sm:hidden bg-white/95 backdrop-blur-md border-t border-primary/10 shadow-xl fixed inset-x-0 top-16 bottom-0 z-50 overflow-y-auto",children:[s.jsx("div",{className:"pt-4 pb-3 space-y-1 px-2",children:t.map((k,j)=>{const S=g.pathname===k.href;return s.jsxs(ee,{to:k.href,className:ve("flex items-center space-x-3 py-3 px-4 rounded-xl text-base font-medium transition-all duration-200",S?"bg-primary/10 text-primary shadow-sm":"text-foreground/70 hover:bg-accent hover:text-foreground hover:shadow-sm"),onClick:()=>l(!1),children:[s.jsx("div",{className:ve("flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg",S?"bg-primary/20":"bg-muted"),children:k.icon||C(k.label)}),s.jsxs("div",{className:"flex-1 flex items-center",children:[s.jsx("span",{children:k.label}),k.isPremium&&s.jsxs("span",{className:"ml-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium text-yellow-700 bg-yellow-100 rounded-full",children:[s.jsx(Nr,{className:"w-3 h-3 mr-0.5 text-yellow-500"}),""]}),(k.label===""||k.label==="")&&m>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full",children:m>9?"9+":m})]})]},j)})}),s.jsxs("div",{className:"mt-4 pt-4 pb-5 border-t border-border/30",children:[s.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-xl mx-2 p-4 mb-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"relative flex-shrink-0 w-12 h-12 overflow-hidden rounded-xl ring-2 ring-primary/30 bg-muted flex items-center justify-center shadow-sm",children:a!=null&&a.profile_image_url?s.jsx("img",{className:"h-full w-full object-cover",src:a.profile_image_url,alt:(a==null?void 0:a.name)||""}):s.jsx(vo,{className:"h-6 w-6 text-foreground/60"})}),s.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[s.jsx("div",{className:"text-lg font-bold text-foreground truncate",children:(a==null?void 0:a.name)||""}),s.jsx("div",{className:"text-sm text-foreground/60 truncate",children:(a==null?void 0:a.email)||""})]}),i&&s.jsx("div",{className:"ml-auto flex-shrink-0 px-2.5 py-1.5 rounded-full bg-gradient-to-r from-yellow-400 to-amber-500 text-white shadow-sm",children:s.jsx(Nr,{className:"h-5 w-5 animate-pulse-soft"})})]})}),s.jsxs("div",{className:"space-y-2 px-2",children:[s.jsxs(ee,{to:r,className:"flex items-center space-x-3 px-4 py-3 rounded-xl text-base font-medium text-foreground/80 hover:text-foreground hover:bg-accent/70 hover:shadow-sm transition-all duration-200",onClick:()=>l(!1),children:[s.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-lg bg-muted",children:s.jsx(Qc,{className:"h-5 w-5"})}),s.jsx("span",{children:""})]}),s.jsx("div",{className:"px-2 pt-2",children:s.jsxs("button",{onClick:()=>{b(),l(!1)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 rounded-xl text-base font-medium bg-destructive/10 text-destructive hover:bg-destructive/20 hover:shadow-sm transition-all duration-200",children:[s.jsx(sh,{className:"h-5 w-5"}),s.jsx("span",{children:""})]})})]})]})]})]})},n2=()=>{const[e,t]=v.useState(null),[r,n]=v.useState(!0),[a,i]=v.useState(!1);v.useEffect(()=>{(async()=>{const{data:{user:m}}=await M.auth.getUser();if(m){const{data:h}=await M.from("user_profiles").select("*").eq("id",m.id).single();t(h)}n(!1)})();const c=()=>{i(window.scrollY>500)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const o=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=[{label:"",href:"/user",icon:s.jsx(xu,{className:"w-5 h-5"})},{label:"",href:"/user/lessons",icon:s.jsx(Ug,{className:"w-5 h-5"})},{label:"",href:"/user/bookings",icon:s.jsx(lt,{className:"w-5 h-5"})},{label:"",href:"/user/chat",icon:s.jsx(vu,{className:"w-5 h-5"})},{label:"",href:"/user/favorites",icon:s.jsx(Ho,{className:"w-5 h-5"})},{label:"",href:"/user/history",icon:s.jsx(Z1,{className:"w-5 h-5"})}];return r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg text-foreground/70 animate-pulse",children:"..."})]}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsx(E0,{userType:"user",navItems:l,profileHref:"/user/profile",notificationsHref:"/user/notifications",user:e}),s.jsx("main",{className:"flex-1",children:s.jsx("div",{className:"page-container pb-16",children:s.jsx(cg,{})})}),a&&s.jsx(re,{variant:"default",size:"icon",rounded:"full",className:"fixed bottom-6 right-6 z-50 shadow-lg",onClick:o,"aria-label":"",children:s.jsx(Vr,{className:"h-5 w-5"})}),s.jsx("footer",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white py-12 border-t border-gray-700/50",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 gradient-heading",children:""}),s.jsx("p",{className:"text-gray-300 mb-4",children:""}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Instagram",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("a",{href:"/user",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/lessons",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/bookings",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/profile",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/favorites",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/history",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user/chat",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor",className:"text-gray-300 hover:text-primary transition-colors",children:""})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),s.jsx("p",{className:"text-gray-300 mb-2",children:""}),s.jsx("a",{href:"mailto:info@kitasetsu-manabu.jp",className:"text-primary hover:text-primary/80 transition-colors font-medium",children:"info@kitasetsu-manabu.jp"}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:""}),s.jsxs("p",{className:"text-gray-300",children:["",s.jsx("br",{}),"",s.jsx("br",{}),"000-0000"]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-700/50 mt-10 pt-8 text-center text-gray-400",children:[s.jsxs("p",{children:[" ",new Date().getFullYear(),"  All rights reserved."]}),s.jsxs("div",{className:"mt-2 text-sm space-x-4",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""})]})]})]})}),s.jsx(Su,{})]})};function ql({title:e,description:t,icon:r,className:n,titleClassName:a,descriptionClassName:i,align:o="left",withLine:l=!0,isGradient:u=!1}){return s.jsxs("div",{className:ve("mb-8",o==="center"&&"text-center",o==="right"&&"text-right",n),children:[s.jsxs("div",{className:ve("flex items-center gap-3 mb-2",o==="center"&&"justify-center",o==="right"&&"justify-end"),children:[r&&s.jsx("span",{className:"text-primary",children:r}),s.jsx("h2",{className:ve("text-2xl font-bold tracking-tight",u&&"gradient-heading",a),children:e})]}),t&&s.jsx("p",{className:ve("text-muted-foreground mt-1 max-w-3xl",o==="center"&&"mx-auto",o==="right"&&"ml-auto",i),children:t}),l&&s.jsx("div",{className:ve("mt-4 relative",o==="center"&&"flex justify-center",o==="right"&&"flex justify-end"),children:s.jsx("div",{className:ve(u?"h-1 bg-gradient-to-r from-primary to-secondary rounded-full":"h-1 bg-primary rounded-full","w-16")})})]})}function a2({title:e,description:t,children:r,className:n}){return s.jsxs("div",{className:ve("flex flex-col md:flex-row md:items-center md:justify-between pb-6 mb-6 border-b",n),children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e}),t&&s.jsx("p",{className:"text-muted-foreground mt-1",children:t})]}),r&&s.jsx("div",{className:"mt-4 md:mt-0 flex-shrink-0",children:r})]})}const ld=v.forwardRef(({className:e,variant:t="default",...r},n)=>{const a={default:"rounded-lg border border-border bg-card text-card-foreground shadow-card transition-all duration-300 hover:shadow-card-hover",glass:"rounded-lg border border-white/20 bg-white/80 backdrop-blur-sm text-card-foreground shadow-lg transition-all duration-300 hover:shadow-xl",gradient:"rounded-lg border-0 bg-gradient-to-br from-primary/10 to-secondary/10 text-card-foreground shadow-card transition-all duration-300 hover:shadow-card-hover",outline:"rounded-lg border-2 border-primary/20 bg-transparent text-card-foreground transition-all duration-300 hover:border-primary/50 hover:shadow-card-hover",subtle:"rounded-lg border border-border/50 bg-card/50 text-card-foreground shadow-sm transition-all duration-300 hover:shadow-card"};return s.jsx("div",{ref:n,className:ve(a[t],e),...r})});ld.displayName="Card";const i2=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("flex flex-col space-y-1.5 p-6",e),...t}));i2.displayName="CardHeader";const o2=v.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));o2.displayName="CardTitle";const l2=v.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ve("text-sm text-muted-foreground",e),...t}));l2.displayName="CardDescription";const cd=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("p-6 pt-0",e),...t}));cd.displayName="CardContent";const c2=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("flex items-center p-6 pt-0",e),...t}));c2.displayName="CardFooter";const T0=v.forwardRef(({className:e,imageUrl:t="https://placehold.jp/FF7F50/ffffff/400x250.png?text=",title:r,subtitle:n,price:a,instructorName:i,instructorImageUrl:o,instructorSpecialties:l,instructorVerified:u=!1,instructorRating:c,date:m,capacity:h,currentParticipants:d,location:f,category:w,lessonType:x="one_time",isFeatured:y=!1,isLiked:g=!1,onLikeClick:p,variant:b="default",..._},C)=>{const k={default:"bg-card",glass:"bg-white/80 backdrop-blur-sm border-white/20",gradient:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-800",outline:"bg-transparent border-2 border-primary/30",subtle:"bg-card/50 border-border/50"},j={monthly:"",one_time:"",course:""},S={monthly:"bg-blue-100 text-blue-800",one_time:"bg-purple-100 text-purple-800",course:"bg-green-100 text-green-800"};return s.jsxs("div",{ref:C,className:ve("group relative overflow-hidden rounded-xl border shadow-card transition-all duration-300 hover:shadow-card-hover text-card-foreground card-hover",k[b],y&&"ring-2 ring-yellow-400/80 shadow-lg",e),..._,children:[y&&s.jsx("div",{className:"absolute top-3 left-0 z-10 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-r-md shadow-md",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"overflow-hidden aspect-video w-full",children:[s.jsx("img",{src:t,alt:r,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),s.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2",children:[x&&s.jsx("div",{className:ve("px-2.5 py-1 rounded-full text-xs font-medium shadow-sm",S[x]),children:j[x]}),w&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm text-white text-xs font-medium px-2.5 py-1 rounded-full shadow-sm",children:typeof w=="string"?w:(w==null?void 0:w.name)||w})]}),s.jsx("button",{onClick:p,className:ve("absolute bottom-3 right-3 p-2 rounded-full transition-all duration-300 shadow-sm",g?"bg-primary text-white scale-110":"bg-white/80 text-gray-600 hover:bg-white hover:scale-105"),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:g?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})})]}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[m&&s.jsxs("div",{className:"badge-outline flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),s.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),s.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),m]}),f&&s.jsxs("div",{className:"badge-outline flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),f]})]}),s.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:r}),n&&s.jsx("p",{className:"text-sm text-foreground/70 mb-3 line-clamp-2",children:n}),s.jsx("div",{className:"divider my-3 opacity-30"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative w-8 h-8 rounded-full overflow-hidden ring-2 ring-primary/30 bg-muted",children:[o?s.jsx("img",{src:o,alt:i,className:"w-full h-full object-cover"}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-muted-foreground absolute inset-1/2 -translate-x-1/2 -translate-y-1/2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),u&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white rounded-full p-0.5 border border-white",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:i}),c!==void 0&&s.jsxs("div",{className:"flex items-center ml-2 text-xs",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-yellow-500 mr-0.5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),s.jsx("span",{children:c.toFixed(1)})]})]}),l&&l.length>0&&s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5 truncate w-24",children:[l[0],l.length>1?"...":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-foreground/70",children:x==="monthly"?"":x==="course"?"":""}),s.jsxs("div",{className:"font-bold text-primary",children:[typeof a=="number"?`${a.toLocaleString()}`:a,x==="monthly"&&"/"]})]})]}),x!=="monthly"&&h!==void 0&&d!==void 0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-foreground/70 mb-1.5",children:[s.jsxs("span",{children:[" ",h,""]}),s.jsxs("span",{children:[d,""]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:`h-2 rounded-full ${d/h>.8?"bg-yellow-500":d/h>.5?"bg-primary":"bg-secondary"}`,style:{width:`${Math.min(100,d/h*100)}%`}})})]})]})]})});T0.displayName="LessonCard";const d2=[{id:"sports",name:"",icon:""},{id:"music",name:"",icon:""},{id:"art",name:"",icon:""},{id:"language",name:"",icon:""},{id:"cooking",name:"",icon:""},{id:"technology",name:"",icon:""},{id:"academics",name:"",icon:""},{id:"hobby",name:"",icon:""}],u2=()=>{const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,i]=v.useState([]),[o,l]=v.useState(!0),[u,c]=v.useState(""),[m,h]=v.useState([]),d=Ht();v.useEffect(()=>{(async()=>{l(!0);try{const y=new Date().toISOString(),{data:g}=await M.from("lessons").select(`
            *,
            instructor:instructor_profiles(name, profile_image_url),
            lesson_slots!inner(date_time_start, date_time_end, booking_deadline)
          `).eq("status","published").eq("is_featured",!0).eq("lesson_slots.status","published").gt("lesson_slots.booking_deadline",y).order("created_at",{ascending:!1}).limit(8);g&&t(g);const{data:p}=await M.from("lessons").select(`
            *,
            instructor:instructor_profiles(name, profile_image_url),
            lesson_slots(date_time_start, date_time_end, booking_deadline, status)
          `).eq("status","published").order("created_at",{ascending:!1}).limit(10);if(p){const C=p.filter(k=>k.lesson_slots.some(j=>j.status==="published"&&new Date(j.date_time_start)>new Date(y)&&new Date(j.date_time_start)<new Date(Date.now()+6048e5)));C.sort((k,j)=>{const S=k.lesson_slots.find(R=>R.status==="published"&&new Date(R.date_time_start)>new Date(y)),U=j.lesson_slots.find(R=>R.status==="published"&&new Date(R.date_time_start)>new Date(y));return S?U?new Date(S.date_time_start).getTime()-new Date(U.date_time_start).getTime():-1:1}),n(C.slice(0,4))}const{data:b}=await M.from("instructor_profiles").select(`
            id,
            name,
            profile_image_url,
            instructor_bio,
            instructor_specialties
          `).eq("is_profile_completed",!0).limit(4);b&&i(b);const{data:{user:_}}=await M.auth.getUser();if(_){const{data:C}=await M.from("favorites").select("lesson_id").eq("user_id",_.id);C&&h(C.map(k=>k.lesson_id))}}catch(y){console.error("Error fetching home data:",y)}finally{l(!1)}})()},[]);const f=x=>{x.preventDefault(),u.trim()&&d(`/user/lessons?search=${encodeURIComponent(u)}`)},w=async x=>{try{const{data:{user:y}}=await M.auth.getUser();if(!y){d("/login");return}m.includes(x)?(await M.from("favorites").delete().eq("user_id",y.id).eq("lesson_id",x),h(m.filter(p=>p!==x))):(await M.from("favorites").insert({user_id:y.id,lesson_id:x,created_at:new Date().toISOString()}),h([...m,x]))}catch(y){console.error("Error updating favorites:",y)}};return o?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"text-lg text-foreground/70 animate-pulse",children:"..."})]}):s.jsxs("div",{className:"space-y-16",children:[s.jsx("section",{className:"relative bg-hero-pattern rounded-3xl overflow-hidden border border-primary/10",children:s.jsxs("div",{className:"relative max-w-7xl mx-auto py-20 px-6 sm:py-24 lg:px-8 flex flex-col items-center text-center",children:[s.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold gradient-heading mb-6",children:""}),s.jsx("p",{className:"text-xl text-foreground/80 max-w-2xl mb-10",children:" "}),s.jsx("div",{className:"w-full max-w-3xl",children:s.jsxs("form",{onSubmit:f,className:"flex shadow-lg rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Rs,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-4 border-0 rounded-l-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"...",value:u,onChange:x=>c(x.target.value)})]}),s.jsx(re,{type:"submit",size:"lg",className:"rounded-l-none px-8",children:""})]})}),s.jsx("div",{className:"mt-10 grid grid-cols-2 sm:grid-cols-4 gap-4 max-w-2xl w-full",children:d2.slice(0,4).map(x=>s.jsx(re,{variant:"glass",asChild:!0,className:"p-4 text-center flex-col h-auto",children:s.jsxs(ee,{to:`/user/lessons?category=${x.id}`,children:[s.jsx("span",{className:"text-3xl mb-2 block",children:x.icon}),s.jsx("span",{className:"text-sm font-medium",children:x.name})]})},x.id))}),s.jsx(re,{variant:"link",size:"sm",asChild:!0,className:"mt-2",children:s.jsxs(ee,{to:"/user/lessons",className:"flex items-center",children:["",s.jsx(Dn,{className:"h-4 w-4 ml-1"})]})})]})}),e.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx(ql,{title:"",description:"",withLine:!0,isGradient:!0,icon:s.jsx(rb,{className:"h-6 w-6"})}),s.jsx(re,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(ee,{to:"/user/lessons",className:"flex items-center",children:["",s.jsx(K1,{className:"h-4 w-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.slice(0,4).map(x=>{var y;return s.jsx(T0,{imageUrl:(y=x.lesson_image_url)==null?void 0:y[0],title:x.lesson_title,subtitle:"",price:x.price,instructorName:x.instructor.name,instructorImageUrl:x.instructor.profile_image_url,date:x.lesson_slots.find(g=>g.status==="published"&&new Date(g.date_time_start)>new Date)?new Date(x.lesson_slots.find(g=>g.status==="published"&&new Date(g.date_time_start)>new Date).date_time_start).toLocaleDateString():"",location:x.location_type==="online"?"":x.location_name,category:x.category,capacity:x.capacity,currentParticipants:x.current_participants_count,isFeatured:x.is_featured,isLiked:m.includes(x.id),onLikeClick:g=>{g.stopPropagation(),w(x.id)},onClick:()=>d(`/user/lessons/${x.id}`)},x.id)})})]}),r.length>0&&s.jsxs("section",{children:[s.jsx(ql,{title:"",description:"",withLine:!0,icon:s.jsx(lt,{className:"h-6 w-6"})}),s.jsx(ld,{className:"overflow-hidden",children:r.map((x,y)=>{var g;return s.jsx("div",{className:`${y!==r.length-1?"border-b border-border/50":""}`,children:s.jsx(cd,{className:"p-0 cursor-pointer",onClick:()=>d(`/user/lessons/${x.id}`),children:s.jsxs("div",{className:"flex flex-col sm:flex-row transition-colors hover:bg-accent/30",children:[s.jsx("div",{className:"sm:w-1/4 lg:w-1/5",children:s.jsxs("div",{className:"relative h-48 sm:h-full",children:[s.jsx("img",{src:(g=x.lesson_image_url)==null?void 0:g[0],alt:x.lesson_title,className:"w-full h-full object-cover"}),x.is_featured&&s.jsx("div",{className:"absolute top-2 left-0 z-10 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-r-md shadow-md",children:""}),s.jsx("button",{onClick:p=>{p.stopPropagation(),w(x.id)},className:`absolute bottom-2 right-2 p-2 rounded-full shadow-sm transition-colors ${m.includes(x.id)?"bg-primary text-white":"bg-white/80 text-gray-600 hover:bg-white"}`,children:s.jsx(qg,{className:"h-5 w-5",fill:m.includes(x.id)?"currentColor":"none"})})]})}),s.jsxs("div",{className:"p-6 sm:w-3/4 lg:w-4/5",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-primary transition-colors",children:x.lesson_title}),s.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[s.jsx("div",{className:"relative w-6 h-6 rounded-full overflow-hidden ring-2 ring-primary/20 bg-muted flex items-center justify-center",children:x.instructor.profile_image_url?s.jsx("img",{src:x.instructor.profile_image_url,alt:x.instructor.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-xs",children:""})}),s.jsx("span",{className:"text-sm font-medium text-foreground/80",children:x.instructor.name})]})]}),s.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4 flex flex-col items-start sm:items-end",children:[s.jsx("div",{className:"text-xs text-foreground/60",children:""}),s.jsx("div",{className:"font-bold text-primary text-lg",children:od(x.price)}),s.jsxs("div",{className:"text-xs text-foreground/70 flex items-center mt-1",children:[s.jsx(fs,{className:"h-3.5 w-3.5 mr-1"}),x.current_participants_count,"/",x.capacity,""]})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(lt,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:x.lesson_slots.find(p=>p.status==="published"&&new Date(p.date_time_start)>new Date)?new Date(x.lesson_slots.find(p=>p.status==="published"&&new Date(p.date_time_start)>new Date).date_time_start).toLocaleDateString():""})]}),s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(mt,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:x.lesson_slots.find(p=>p.status==="published"&&new Date(p.date_time_start)>new Date)?new Date(x.lesson_slots.find(p=>p.status==="published"&&new Date(p.date_time_start)>new Date).date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsxs("div",{className:"flex items-center text-xs text-foreground/70 bg-muted px-2 py-1 rounded-md",children:[s.jsx(yu,{className:"h-3.5 w-3.5 mr-1"}),s.jsx("span",{children:x.location_type==="online"?"":x.location_name})]})]}),s.jsx("p",{className:"mt-3 text-sm text-foreground/80 line-clamp-2",children:x.lesson_description}),s.jsxs(re,{variant:"link",size:"sm",className:"mt-2 px-0",onClick:p=>{p.stopPropagation(),d(`/user/lessons/${x.id}`)},children:[" ",s.jsx(Dn,{className:"h-4 w-4 ml-1"})]})]})]})})},x.id)})})]}),a.length>0&&s.jsxs("section",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/50 dark:to-gray-800/30 -mx-8 px-8 py-12 rounded-xl",children:[s.jsx(ql,{title:"",description:"",align:"center",withLine:!0,icon:s.jsx(Q1,{className:"h-6 w-6"})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:a.map(x=>s.jsxs(ld,{className:"overflow-hidden card-hover",children:[s.jsx("div",{className:"aspect-square w-full relative overflow-hidden",children:s.jsx("img",{src:x.profile_image_url||"https://placehold.jp/FF7F50/ffffff/400x400.png?text=",alt:x.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105"})}),s.jsxs(cd,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:x.name}),s.jsx("p",{className:"text-sm text-primary font-medium mt-1",children:x.category||""}),s.jsx("p",{className:"mt-3 text-sm text-foreground/70 line-clamp-2",children:x.instructor_pr_message||""}),s.jsx(re,{className:"w-full mt-4",variant:"outline",size:"sm",children:""})]})]},x.id))})]}),s.jsxs("section",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-10 text-center",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold gradient-heading mb-4",children:""}),s.jsx("p",{className:"text-lg text-foreground/80 mb-6 max-w-2xl mx-auto",children:" "}),s.jsx(re,{asChild:!0,size:"lg",variant:"gradient",className:"px-8",children:s.jsx(ee,{to:"/instructor",children:""})})]})]})},ja=[{id:"music",name:"",icon:""},{id:"cooking",name:"",icon:""},{id:"language",name:"",icon:""},{id:"craft",name:"",icon:""},{id:"dance",name:"",icon:""},{id:"technology",name:"",icon:""},{id:"art",name:"",icon:""},{id:"sports",name:"",icon:""},{id:"business",name:"",icon:""},{id:"academics",name:"",icon:""},{id:"outdoor",name:"",icon:""},{id:"wellness",name:"",icon:""}],ds={music:[{id:"piano",name:""},{id:"guitar",name:""},{id:"violin",name:""},{id:"drums",name:""},{id:"vocals",name:""},{id:"composition",name:""},{id:"music_theory",name:""},{id:"other_music",name:""}],cooking:[{id:"japanese",name:""},{id:"italian",name:""},{id:"french",name:""},{id:"chinese",name:""},{id:"dessert",name:""},{id:"bread",name:""},{id:"other_cooking",name:""}],language:[{id:"english",name:""},{id:"japanese",name:""},{id:"chinese",name:""},{id:"french",name:""},{id:"spanish",name:""},{id:"other_language",name:""}],craft:[{id:"knitting",name:""},{id:"pottery",name:""},{id:"jewelry",name:""},{id:"woodworking",name:""},{id:"sewing",name:""},{id:"other_craft",name:""}],dance:[{id:"ballet",name:""},{id:"contemporary",name:""},{id:"hiphop",name:""},{id:"ballroom",name:""},{id:"other_dance",name:""}],technology:[{id:"programming",name:""},{id:"web_design",name:""},{id:"data_science",name:""},{id:"ai",name:"AI/"},{id:"other_tech",name:""}],art:[{id:"painting",name:""},{id:"drawing",name:""},{id:"sculpture",name:""},{id:"photography",name:""},{id:"other_art",name:""}],sports:[{id:"yoga",name:""},{id:"running",name:""},{id:"swimming",name:""},{id:"martial_arts",name:""},{id:"tennis",name:""},{id:"golf",name:""},{id:"other_sports",name:""}],business:[{id:"marketing",name:""},{id:"finance",name:""},{id:"entrepreneurship",name:""},{id:"management",name:""},{id:"other_business",name:""}],academics:[{id:"math",name:""},{id:"science",name:""},{id:"history",name:""},{id:"literature",name:""},{id:"other_academics",name:""}],outdoor:[{id:"hiking",name:""},{id:"camping",name:""},{id:"fishing",name:""},{id:"gardening",name:""},{id:"other_outdoor",name:""}],wellness:[{id:"meditation",name:""},{id:"nutrition",name:""},{id:"fitness",name:""},{id:"mental_health",name:""},{id:"other_wellness",name:""}]};function bo(e){"@babel/helpers - typeof";return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(e)}function As(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function gt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function gr(e){gt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||bo(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function m2(e,t){gt(2,arguments);var r=gr(e).getTime(),n=As(t);return new Date(r+n)}var h2={};function Zo(){return h2}function f2(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function p2(e){return gt(1,arguments),e instanceof Date||bo(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function g2(e){if(gt(1,arguments),!p2(e)&&typeof e!="number")return!1;var t=gr(e);return!isNaN(Number(t))}function x2(e,t){gt(2,arguments);var r=As(t);return m2(e,-r)}var y2=864e5;function v2(e){gt(1,arguments);var t=gr(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/y2)+1}function _o(e){gt(1,arguments);var t=1,r=gr(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function D0(e){gt(1,arguments);var t=gr(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=_o(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=_o(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function w2(e){gt(1,arguments);var t=D0(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=_o(r);return n}var b2=6048e5;function _2(e){gt(1,arguments);var t=gr(e),r=_o(t).getTime()-w2(t).getTime();return Math.round(r/b2)+1}function jo(e,t){var r,n,a,i,o,l,u,c;gt(1,arguments);var m=Zo(),h=As((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:m.weekStartsOn)!==null&&n!==void 0?n:(u=m.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=gr(e),f=d.getUTCDay(),w=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-w),d.setUTCHours(0,0,0,0),d}function P0(e,t){var r,n,a,i,o,l,u,c;gt(1,arguments);var m=gr(e),h=m.getUTCFullYear(),d=Zo(),f=As((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(h+1,0,f),w.setUTCHours(0,0,0,0);var x=jo(w,t),y=new Date(0);y.setUTCFullYear(h,0,f),y.setUTCHours(0,0,0,0);var g=jo(y,t);return m.getTime()>=x.getTime()?h+1:m.getTime()>=g.getTime()?h:h-1}function j2(e,t){var r,n,a,i,o,l,u,c;gt(1,arguments);var m=Zo(),h=As((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:m.firstWeekContainsDate)!==null&&n!==void 0?n:(u=m.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1),d=P0(e,t),f=new Date(0);f.setUTCFullYear(d,0,h),f.setUTCHours(0,0,0,0);var w=jo(f,t);return w}var N2=6048e5;function k2(e,t){gt(1,arguments);var r=gr(e),n=jo(r,t).getTime()-j2(r,t).getTime();return Math.round(n/N2)+1}function _e(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var Wr={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return _e(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):_e(n+1,2)},d:function(t,r){return _e(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return _e(t.getUTCHours()%12||12,r.length)},H:function(t,r){return _e(t.getUTCHours(),r.length)},m:function(t,r){return _e(t.getUTCMinutes(),r.length)},s:function(t,r){return _e(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return _e(i,r.length)}},Qs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},S2={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Wr.y(t,r)},Y:function(t,r,n,a){var i=P0(t,a),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return _e(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):_e(o,r.length)},R:function(t,r){var n=D0(t);return _e(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return _e(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return _e(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return _e(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return Wr.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return _e(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=k2(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):_e(i,r.length)},I:function(t,r,n){var a=_2(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):_e(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Wr.d(t,r)},D:function(t,r,n){var a=v2(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):_e(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return _e(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return _e(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return _e(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=Qs.noon:a===0?i=Qs.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=Qs.evening:a>=12?i=Qs.afternoon:a>=4?i=Qs.morning:i=Qs.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Wr.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Wr.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):_e(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):_e(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Wr.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Wr.s(t,r)},S:function(t,r){return Wr.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return _h(o);case"XXXX":case"XX":return js(o);case"XXXXX":case"XXX":default:return js(o,":")}},x:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return _h(o);case"xxxx":case"xx":return js(o);case"xxxxx":case"xxx":default:return js(o,":")}},O:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+bh(o,":");case"OOOO":default:return"GMT"+js(o,":")}},z:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+bh(o,":");case"zzzz":default:return"GMT"+js(o,":")}},t:function(t,r,n,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return _e(o,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,o=i.getTime();return _e(o,r.length)}};function bh(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var o=t;return r+String(a)+o+_e(i,2)}function _h(e,t){if(e%60===0){var r=e>0?"-":"+";return r+_e(Math.abs(e)/60,2)}return js(e,t)}function js(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=_e(Math.floor(a/60),2),o=_e(a%60,2);return n+i+r+o}var jh=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},M0=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},C2=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return jh(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",jh(a,r)).replace("{{time}}",M0(i,r))},E2={p:M0,P:C2},T2=["D","DD"],D2=["YY","YYYY"];function P2(e){return T2.indexOf(e)!==-1}function M2(e){return D2.indexOf(e)!==-1}function Nh(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var O2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$2=function(t,r,n){var a,i=O2[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function _n(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var I2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},L2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},R2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A2={date:_n({formats:I2,defaultWidth:"full"}),time:_n({formats:L2,defaultWidth:"full"}),dateTime:_n({formats:R2,defaultWidth:"full"})},F2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U2=function(t,r,n,a){return F2[t]};function cr(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[l]}var c=e.argumentCallback?e.argumentCallback(t):t;return a[c]}}var W2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},q2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Y2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V2=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},G2={ordinalNumber:V2,era:cr({values:W2,defaultWidth:"wide"}),quarter:cr({values:z2,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:cr({values:B2,defaultWidth:"wide"}),day:cr({values:q2,defaultWidth:"wide"}),dayPeriod:cr({values:H2,defaultWidth:"wide",formattingValues:Y2,defaultFormattingWidth:"wide"})};function dr(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?K2(l,function(h){return h.test(o)}):J2(l,function(h){return h.test(o)}),c;c=e.valueCallback?e.valueCallback(u):u,c=r.valueCallback?r.valueCallback(c):c;var m=t.slice(o.length);return{value:c,rest:m}}}function J2(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function K2(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function O0(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var Q2=/^(\d+)(th|st|nd|rd)?/i,X2=/\d+/i,Z2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eN={any:[/^b/i,/^(a|c)/i]},tN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rN={any:[/1/i,/2/i,/3/i,/4/i]},sN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cN={ordinalNumber:O0({matchPattern:Q2,parsePattern:X2,valueCallback:function(t){return parseInt(t,10)}}),era:dr({matchPatterns:Z2,defaultMatchWidth:"wide",parsePatterns:eN,defaultParseWidth:"any"}),quarter:dr({matchPatterns:tN,defaultMatchWidth:"wide",parsePatterns:rN,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:dr({matchPatterns:sN,defaultMatchWidth:"wide",parsePatterns:nN,defaultParseWidth:"any"}),day:dr({matchPatterns:aN,defaultMatchWidth:"wide",parsePatterns:iN,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:oN,defaultMatchWidth:"any",parsePatterns:lN,defaultParseWidth:"any"})},dN={code:"en-US",formatDistance:$2,formatLong:A2,formatRelative:U2,localize:G2,match:cN,options:{weekStartsOn:0,firstWeekContainsDate:1}},uN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hN=/^'([^]*?)'?$/,fN=/''/g,pN=/[a-zA-Z]/;function kh(e,t,r){var n,a,i,o,l,u,c,m,h,d,f,w,x,y,g,p,b,_;gt(2,arguments);var C=String(t),k=Zo(),j=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:k.locale)!==null&&n!==void 0?n:dN,S=As((i=(o=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(c=r.locale)===null||c===void 0||(m=c.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:k.firstWeekContainsDate)!==null&&o!==void 0?o:(h=k.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=As((f=(w=(x=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(g=r.locale)===null||g===void 0||(p=g.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&x!==void 0?x:k.weekStartsOn)!==null&&w!==void 0?w:(b=k.locale)===null||b===void 0||(_=b.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&f!==void 0?f:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!j.localize)throw new RangeError("locale must contain localize property");if(!j.formatLong)throw new RangeError("locale must contain formatLong property");var R=gr(e);if(!g2(R))throw new RangeError("Invalid time value");var P=f2(R),N=x2(R,P),$={firstWeekContainsDate:S,weekStartsOn:U,locale:j,_originalDate:R},O=C.match(mN).map(function(D){var E=D[0];if(E==="p"||E==="P"){var F=E2[E];return F(D,j.formatLong)}return D}).join("").match(uN).map(function(D){if(D==="''")return"'";var E=D[0];if(E==="'")return gN(D);var F=S2[E];if(F)return!(r!=null&&r.useAdditionalWeekYearTokens)&&M2(D)&&Nh(D,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&P2(D)&&Nh(D,t,String(e)),F(N,D,j.localize,$);if(E.match(pN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return D}).join("");return O}function gN(e){var t=e.match(hN);return t?t[1].replace(fN,"'"):e}var xN={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},yN=function(t,r,n){n=n||{};var a,i=xN[t];return typeof i=="string"?a=i:r===1?n.addSuffix&&i.oneWithSuffix?a=i.oneWithSuffix:a=i.one:n.addSuffix&&i.otherWithSuffix?a=i.otherWithSuffix.replace("{{count}}",String(r)):a=i.other.replace("{{count}}",String(r)),n.addSuffix?n.comparison&&n.comparison>0?a+"":a+"":a},vN={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},wN={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},bN={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},_N={date:_n({formats:vN,defaultWidth:"full"}),time:_n({formats:wN,defaultWidth:"full"}),dateTime:_n({formats:bN,defaultWidth:"full"})},jN={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},NN=function(t,r,n,a){return jN[t]},kN={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},SN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},CN={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},EN={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},TN={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},DN={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},PN=function(t,r){var n=Number(t),a=String(r==null?void 0:r.unit);switch(a){case"year":return"".concat(n,"");case"quarter":return"".concat(n,"");case"month":return"".concat(n,"");case"week":return"".concat(n,"");case"date":return"".concat(n,"");case"hour":return"".concat(n,"");case"minute":return"".concat(n,"");case"second":return"".concat(n,"");default:return"".concat(n)}},MN={ordinalNumber:PN,era:cr({values:kN,defaultWidth:"wide"}),quarter:cr({values:SN,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:cr({values:CN,defaultWidth:"wide"}),day:cr({values:EN,defaultWidth:"wide"}),dayPeriod:cr({values:TN,defaultWidth:"wide",formattingValues:DN,defaultFormattingWidth:"wide"})},ON=/^?\d+(|||||||)?/i,$N=/\d+/i,IN={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},LN={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},RN={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},AN={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},FN={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},UN={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},WN={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},zN={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},BN={any:/^(AM|PM|||||||)/i},qN={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},HN={ordinalNumber:O0({matchPattern:ON,parsePattern:$N,valueCallback:function(t){return parseInt(t,10)}}),era:dr({matchPatterns:IN,defaultMatchWidth:"wide",parsePatterns:LN,defaultParseWidth:"any"}),quarter:dr({matchPatterns:RN,defaultMatchWidth:"wide",parsePatterns:AN,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:dr({matchPatterns:FN,defaultMatchWidth:"wide",parsePatterns:UN,defaultParseWidth:"any"}),day:dr({matchPatterns:WN,defaultMatchWidth:"wide",parsePatterns:zN,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:BN,defaultMatchWidth:"any",parsePatterns:qN,defaultParseWidth:"any"})},Hl={code:"ja",formatDistance:yN,formatLong:_N,formatRelative:NN,localize:MN,match:HN,options:{weekStartsOn:0,firstWeekContainsDate:1}},se;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(se||(se={}));var Te;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Te||(Te={}));var Zt;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(Zt||(Zt={}));var Ct;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ct||(Ct={}));const Yl={},la={};function Na(e,t){try{const n=(Yl[e]||(Yl[e]=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format))(t).split("GMT")[1]||"";return n in la?la[n]:Sh(n,n.split(":"))}catch{if(e in la)return la[e];const r=e==null?void 0:e.match(YN);return r?Sh(e,r.slice(1)):NaN}}const YN=/([+-]\d\d):?(\d\d)?/;function Sh(e,t){const r=+t[0],n=+(t[1]||0);return la[e]=r>0?r*60+n:r*60-n}class ur extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Na(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),$0(this),dd(this)):this.setTime(Date.now())}static tz(t,...r){return r.length?new ur(...r,t):new ur(Date.now(),t)}withTimeZone(t){return new ur(+this,t)}getTimezoneOffset(){return-Na(this.timeZone,this)}setTime(t){return Date.prototype.setTime.apply(this,arguments),dd(this),+this}[Symbol.for("constructDateFrom")](t){return new ur(+new Date(t),this.timeZone)}}const Ch=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!Ch.test(e))return;const t=e.replace(Ch,"$1UTC");ur.prototype[t]&&(e.startsWith("get")?ur.prototype[e]=function(){return this.internal[t]()}:(ur.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),VN(this),+this},ur.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),dd(this),+this}))});function dd(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function VN(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),$0(e)}function $0(e){const t=Na(e.timeZone,e),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const n=-new Date(+e).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),i=n-a,o=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&o&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const l=n-t;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const u=Na(e.timeZone,e),m=-new Date(+e).getTimezoneOffset()-u,h=u!==t,d=m-l;if(h&&d){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+d);const f=Na(e.timeZone,e),w=u-f;w&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+w),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+w))}}class Ts extends ur{static tz(t,...r){return r.length?new Ts(...r,t):new Ts(Date.now(),t)}toISOString(){const[t,r,n]=this.tzComponents(),a=`${t}${r}:${n}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,r,n,a]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${n} ${r} ${a}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[r,n,a]=this.tzComponents();return`${t} GMT${r}${n}${a} (${GN(this.timeZone,this)})`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),r=t>0?"-":"+",n=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),a=String(Math.abs(t)%60).padStart(2,"0");return[r,n,a]}withTimeZone(t){return new Ts(+this,t)}[Symbol.for("constructDateFrom")](t){return new Ts(+new Date(t),this.timeZone)}}function GN(e,t){return new Intl.DateTimeFormat("en-GB",{timeZone:e,timeZoneName:"long"}).format(t).slice(12)}const I0=6048e5,JN=864e5,Eh=Symbol.for("constructDateFrom");function Ge(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Eh in e?e[Eh](t):e instanceof Date?new e.constructor(t):new Date(t)}function Se(e,t){return Ge(t||e,e)}function L0(e,t,r){const n=Se(e,r==null?void 0:r.in);return isNaN(t)?Ge(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function R0(e,t,r){const n=Se(e,r==null?void 0:r.in);if(isNaN(t))return Ge(e,NaN);if(!t)return n;const a=n.getDate(),i=Ge(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return a>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}let KN={};function ni(){return KN}function On(e,t){var l,u,c,m;const r=ni(),n=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.weekStartsOn)??0,a=Se(e,t==null?void 0:t.in),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Ga(e,t){return On(e,{...t,weekStartsOn:1})}function A0(e,t){const r=Se(e,t==null?void 0:t.in),n=r.getFullYear(),a=Ge(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=Ga(a),o=Ge(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Ga(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Th(e){const t=Se(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function zn(e,...t){const r=Ge.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Ja(e,t){const r=Se(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function F0(e,t,r){const[n,a]=zn(r==null?void 0:r.in,e,t),i=Ja(n),o=Ja(a),l=+i-Th(i),u=+o-Th(o);return Math.round((l-u)/JN)}function QN(e,t){const r=A0(e,t),n=Ge(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Ga(n)}function XN(e,t,r){return L0(e,t*7,r)}function ZN(e,t,r){return R0(e,t*12,r)}function ek(e,t){let r,n=t==null?void 0:t.in;return e.forEach(a=>{!n&&typeof a=="object"&&(n=Ge.bind(null,a));const i=Se(a,n);(!r||r<i||isNaN(+i))&&(r=i)}),Ge(n,r||NaN)}function tk(e,t){let r,n=t==null?void 0:t.in;return e.forEach(a=>{!n&&typeof a=="object"&&(n=Ge.bind(null,a));const i=Se(a,n);(!r||r>i||isNaN(+i))&&(r=i)}),Ge(n,r||NaN)}function rk(e,t,r){const[n,a]=zn(r==null?void 0:r.in,e,t);return+Ja(n)==+Ja(a)}function U0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function sk(e){return!(!U0(e)&&typeof e!="number"||isNaN(+Se(e)))}function nk(e,t,r){const[n,a]=zn(r==null?void 0:r.in,e,t),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function ak(e,t){const r=Se(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function ik(e,t){const[r,n]=zn(e,t.start,t.end);return{start:r,end:n}}function ok(e,t){const{start:r,end:n}=ik(t==null?void 0:t.in,e);let a=+r>+n;const i=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0),o.setDate(1);let l=1;const u=[];for(;+o<=i;)u.push(Ge(r,o)),o.setMonth(o.getMonth()+l);return a?u.reverse():u}function lk(e,t){const r=Se(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function ck(e,t){const r=Se(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function W0(e,t){const r=Se(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function z0(e,t){var l,u,c,m;const r=ni(),n=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.weekStartsOn)??0,a=Se(e,t==null?void 0:t.in),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function dk(e,t){return z0(e,{...t,weekStartsOn:1})}const uk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mk=(e,t,r)=>{let n;const a=uk[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Vl(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const hk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pk={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gk={date:Vl({formats:hk,defaultWidth:"full"}),time:Vl({formats:fk,defaultWidth:"full"}),dateTime:Vl({formats:pk,defaultWidth:"full"})},xk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yk=(e,t,r,n)=>xk[e];function ta(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const vk={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wk={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bk={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_k={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kk=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Sk={ordinalNumber:kk,era:ta({values:vk,defaultWidth:"wide"}),quarter:ta({values:wk,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ta({values:bk,defaultWidth:"wide"}),day:ta({values:_k,defaultWidth:"wide"}),dayPeriod:ta({values:jk,defaultWidth:"wide",formattingValues:Nk,defaultFormattingWidth:"wide"})};function ra(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Ek(l,h=>h.test(o)):Ck(l,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=r.valueCallback?r.valueCallback(c):c;const m=t.slice(o.length);return{value:c,rest:m}}}function Ck(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Ek(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Tk(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Dk=/^(\d+)(th|st|nd|rd)?/i,Pk=/\d+/i,Mk={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ok={any:[/^b/i,/^(a|c)/i]},$k={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ik={any:[/1/i,/2/i,/3/i,/4/i]},Lk={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rk={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ak={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Fk={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Uk={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wk={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zk={ordinalNumber:Tk({matchPattern:Dk,parsePattern:Pk,valueCallback:e=>parseInt(e,10)}),era:ra({matchPatterns:Mk,defaultMatchWidth:"wide",parsePatterns:Ok,defaultParseWidth:"any"}),quarter:ra({matchPatterns:$k,defaultMatchWidth:"wide",parsePatterns:Ik,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ra({matchPatterns:Lk,defaultMatchWidth:"wide",parsePatterns:Rk,defaultParseWidth:"any"}),day:ra({matchPatterns:Ak,defaultMatchWidth:"wide",parsePatterns:Fk,defaultParseWidth:"any"}),dayPeriod:ra({matchPatterns:Uk,defaultMatchWidth:"any",parsePatterns:Wk,defaultParseWidth:"any"})},Cu={code:"en-US",formatDistance:mk,formatLong:gk,formatRelative:yk,localize:Sk,match:zk,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bk(e,t){const r=Se(e,t==null?void 0:t.in);return F0(r,W0(r))+1}function B0(e,t){const r=Se(e,t==null?void 0:t.in),n=+Ga(r)-+QN(r);return Math.round(n/I0)+1}function q0(e,t){var m,h,d,f;const r=Se(e,t==null?void 0:t.in),n=r.getFullYear(),a=ni(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=Ge((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=On(o,t),u=Ge((t==null?void 0:t.in)||e,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const c=On(u,t);return+r>=+l?n+1:+r>=+c?n:n-1}function qk(e,t){var l,u,c,m;const r=ni(),n=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(c=r.locale)==null?void 0:c.options)==null?void 0:m.firstWeekContainsDate)??1,a=q0(e,t),i=Ge((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),On(i,t)}function H0(e,t){const r=Se(e,t==null?void 0:t.in),n=+On(r,t)-+qk(r,t);return Math.round(n/I0)+1}function je(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const zr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return je(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):je(r+1,2)},d(e,t){return je(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return je(e.getHours()%12||12,t.length)},H(e,t){return je(e.getHours(),t.length)},m(e,t){return je(e.getMinutes(),t.length)},s(e,t){return je(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return je(a,t.length)}},Xs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Dh={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return zr.y(e,t)},Y:function(e,t,r,n){const a=q0(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return je(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):je(i,t.length)},R:function(e,t){const r=A0(e);return je(r,t.length)},u:function(e,t){const r=e.getFullYear();return je(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return je(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return je(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return zr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return je(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=H0(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):je(a,t.length)},I:function(e,t,r){const n=B0(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):je(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):zr.d(e,t)},D:function(e,t,r){const n=Bk(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):je(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return je(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return je(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return je(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Xs.noon:n===0?a=Xs.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Xs.evening:n>=12?a=Xs.afternoon:n>=4?a=Xs.morning:a=Xs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return zr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):zr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):je(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):je(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):zr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):zr.s(e,t)},S:function(e,t){return zr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Mh(n);case"XXXX":case"XX":return Ns(n);case"XXXXX":case"XXX":default:return Ns(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Mh(n);case"xxxx":case"xx":return Ns(n);case"xxxxx":case"xxx":default:return Ns(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ph(n,":");case"OOOO":default:return"GMT"+Ns(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ph(n,":");case"zzzz":default:return"GMT"+Ns(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return je(n,t.length)},T:function(e,t,r){return je(+e,t.length)}};function Ph(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+je(i,2)}function Mh(e,t){return e%60===0?(e>0?"-":"+")+je(Math.abs(e)/60,2):Ns(e,t)}function Ns(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=je(Math.trunc(n/60),2),i=je(n%60,2);return r+a+t+i}const Oh=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Y0=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Hk=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Oh(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Oh(n,t)).replace("{{time}}",Y0(a,t))},Yk={p:Y0,P:Hk},Vk=/^D+$/,Gk=/^Y+$/,Jk=["D","DD","YY","YYYY"];function Kk(e){return Vk.test(e)}function Qk(e){return Gk.test(e)}function Xk(e,t,r){const n=Zk(e,t,r);if(console.warn(n),Jk.includes(e))throw new RangeError(n)}function Zk(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const e4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,r4=/^'([^]*?)'?$/,s4=/''/g,n4=/[a-zA-Z]/;function a4(e,t,r){var m,h,d,f,w,x,y,g;const n=ni(),a=(r==null?void 0:r.locale)??n.locale??Cu,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((g=(y=n.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??0,l=Se(e,r==null?void 0:r.in);if(!sk(l))throw new RangeError("Invalid time value");let u=t.match(t4).map(p=>{const b=p[0];if(b==="p"||b==="P"){const _=Yk[b];return _(p,a.formatLong)}return p}).join("").match(e4).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const b=p[0];if(b==="'")return{isToken:!1,value:i4(p)};if(Dh[b])return{isToken:!0,value:p};if(b.match(n4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(u=a.localize.preprocessor(l,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(p=>{if(!p.isToken)return p.value;const b=p.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Qk(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Kk(b))&&Xk(b,t,String(e));const _=Dh[b[0]];return _(l,b,a.localize,c)}).join("")}function i4(e){const t=e.match(r4);return t?t[1].replace(s4,"'"):e}function o4(e,t){const r=Se(e,t==null?void 0:t.in),n=r.getFullYear(),a=r.getMonth(),i=Ge(r,0);return i.setFullYear(n,a+1,0),i.setHours(0,0,0,0),i.getDate()}function l4(e,t){return Se(e,t==null?void 0:t.in).getMonth()}function c4(e,t){return Se(e,t==null?void 0:t.in).getFullYear()}function d4(e,t){return+Se(e)>+Se(t)}function u4(e,t){return+Se(e)<+Se(t)}function m4(e,t,r){const[n,a]=zn(r==null?void 0:r.in,e,t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function h4(e,t,r){const[n,a]=zn(r==null?void 0:r.in,e,t);return n.getFullYear()===a.getFullYear()}function f4(e,t,r){const n=Se(e,r==null?void 0:r.in),a=n.getFullYear(),i=n.getDate(),o=Ge(e,0);o.setFullYear(a,t,15),o.setHours(0,0,0,0);const l=o4(o);return n.setMonth(t,Math.min(i,l)),n}function p4(e,t,r){const n=Se(e,r==null?void 0:r.in);return isNaN(+n)?Ge(e,NaN):(n.setFullYear(t),n)}const $h=5,g4=4;function x4(e,t){const r=t.startOfMonth(e),n=r.getDay()>0?r.getDay():7,a=t.addDays(e,-n+1),i=t.addDays(a,$h*7-1);return t.getMonth(e)===t.getMonth(i)?$h:g4}function V0(e,t){const r=t.startOfMonth(e),n=r.getDay();return n===1?r:n===0?t.addDays(r,-1*6):t.addDays(r,-1*(n-1))}function y4(e,t){const r=V0(e,t),n=x4(e,t);return t.addDays(r,n*7-1)}class Ir{constructor(t,r){this.Date=Date,this.today=()=>{var n;return(n=this.overrides)!=null&&n.today?this.overrides.today():this.options.timeZone?Ts.tz(this.options.timeZone):new this.Date},this.newDate=(n,a,i)=>{var o;return(o=this.overrides)!=null&&o.newDate?this.overrides.newDate(n,a,i):this.options.timeZone?new Ts(n,a,i,this.options.timeZone):new Date(n,a,i)},this.addDays=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.addDays)==null?void 0:o.call(i,n,a))??L0(n,a)},this.addMonths=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.addMonths)==null?void 0:o.call(i,n,a))??R0(n,a)},this.addWeeks=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.addWeeks)==null?void 0:o.call(i,n,a))??XN(n,a)},this.addYears=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.addYears)==null?void 0:o.call(i,n,a))??ZN(n,a)},this.differenceInCalendarDays=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.differenceInCalendarDays)==null?void 0:o.call(i,n,a))??F0(n,a)},this.differenceInCalendarMonths=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.differenceInCalendarMonths)==null?void 0:o.call(i,n,a))??nk(n,a)},this.eachMonthOfInterval=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.eachMonthOfInterval)==null?void 0:i.call(a,n))??ok(n)},this.endOfBroadcastWeek=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.endOfBroadcastWeek)==null?void 0:o.call(i,n,a))??y4(n,this)},this.endOfISOWeek=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.endOfISOWeek)==null?void 0:i.call(a,n))??dk(n)},this.endOfMonth=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.endOfMonth)==null?void 0:i.call(a,n))??ak(n)},this.endOfWeek=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.endOfWeek)==null?void 0:o.call(i,n,a??this.options))??z0(n,a??this.options)},this.endOfYear=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.endOfYear)==null?void 0:i.call(a,n))??ck(n)},this.format=(n,a,i)=>{var l,u;const o=((u=(l=this.overrides)==null?void 0:l.format)==null?void 0:u.call(l,n,a,i??this.options))??a4(n,a,i??this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.getISOWeek)==null?void 0:i.call(a,n))??B0(n)},this.getMonth=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.getMonth)==null?void 0:i.call(a,n))??l4(n)},this.getYear=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.getYear)==null?void 0:i.call(a,n))??c4(n)},this.getWeek=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.getWeek)==null?void 0:o.call(i,n,a??this.options))??H0(n,a??this.options)},this.isAfter=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.isAfter)==null?void 0:o.call(i,n,a))??d4(n,a)},this.isBefore=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.isBefore)==null?void 0:o.call(i,n,a))??u4(n,a)},this.isDate=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.isDate)==null?void 0:i.call(a,n))??U0(n)},this.isSameDay=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.isSameDay)==null?void 0:o.call(i,n,a))??rk(n,a)},this.isSameMonth=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.isSameMonth)==null?void 0:o.call(i,n,a))??m4(n,a)},this.isSameYear=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.isSameYear)==null?void 0:o.call(i,n,a))??h4(n,a)},this.max=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.max)==null?void 0:i.call(a,n))??ek(n)},this.min=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.min)==null?void 0:i.call(a,n))??tk(n)},this.setMonth=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.setMonth)==null?void 0:o.call(i,n,a))??f4(n,a)},this.setYear=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.setYear)==null?void 0:o.call(i,n,a))??p4(n,a)},this.startOfBroadcastWeek=(n,a)=>{var i,o;return((o=(i=this.overrides)==null?void 0:i.startOfBroadcastWeek)==null?void 0:o.call(i,n,a??this))??V0(n,a??this)},this.startOfDay=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.startOfDay)==null?void 0:i.call(a,n))??Ja(n)},this.startOfISOWeek=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.startOfISOWeek)==null?void 0:i.call(a,n))??Ga(n)},this.startOfMonth=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.startOfMonth)==null?void 0:i.call(a,n))??lk(n)},this.startOfWeek=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.startOfWeek)==null?void 0:i.call(a,n))??On(n,this.options)},this.startOfYear=n=>{var a,i;return((i=(a=this.overrides)==null?void 0:a.startOfYear)==null?void 0:i.call(a,n))??W0(n)},this.options={locale:Cu,...t},this.overrides=r}getDigitMap(){const{numerals:t="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:t}),n={};for(let a=0;a<10;a++)n[a.toString()]=r.format(a);return n}replaceDigits(t){const r=this.getDigitMap();return t.replace(/\d/g,n=>r[n]||n)}formatNumber(t){return this.replaceDigits(t.toString())}}const Lr=new Ir;function v4(e,t,r={}){return Object.entries(e).filter(([,a])=>a===!0).reduce((a,[i])=>(r[i]?a.push(r[i]):t[Te[i]]?a.push(t[Te[i]]):t[Zt[i]]&&a.push(t[Zt[i]]),a),[t[se.Day]])}function w4(e){return K.createElement("button",{...e})}function b4(e){return K.createElement("span",{...e})}function _4(e){const{size:t=24,orientation:r="left",className:n}=e;return K.createElement("svg",{className:n,width:t,height:t,viewBox:"0 0 24 24"},r==="up"&&K.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&K.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&K.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&K.createElement("polygon",{points:"8 18.612 14.1888889 12.5 8 6.37733333 9.91111111 4.5 18 12.5 9.91111111 20.5"}))}function j4(e){const{day:t,modifiers:r,...n}=e;return K.createElement("td",{...n})}function N4(e){const{day:t,modifiers:r,...n}=e,a=K.useRef(null);return K.useEffect(()=>{var i;r.focused&&((i=a.current)==null||i.focus())},[r.focused]),K.createElement("button",{ref:a,...n})}function k4(e){const{options:t,className:r,components:n,classNames:a,...i}=e,o=[a[se.Dropdown],r].join(" "),l=t==null?void 0:t.find(({value:u})=>u===i.value);return K.createElement("span",{"data-disabled":i.disabled,className:a[se.DropdownRoot]},K.createElement(n.Select,{className:o,...i},t==null?void 0:t.map(({value:u,label:c,disabled:m})=>K.createElement(n.Option,{key:u,value:u,disabled:m},c))),K.createElement("span",{className:a[se.CaptionLabel],"aria-hidden":!0},l==null?void 0:l.label,K.createElement(n.Chevron,{orientation:"down",size:18,className:a[se.Chevron]})))}function S4(e){return K.createElement("div",{...e})}function C4(e){return K.createElement("div",{...e})}function E4(e){const{calendarMonth:t,displayIndex:r,...n}=e;return K.createElement("div",{...n},e.children)}function T4(e){const{calendarMonth:t,displayIndex:r,...n}=e;return K.createElement("div",{...n})}function D4(e){return K.createElement("table",{...e})}function P4(e){return K.createElement("div",{...e})}const G0=v.createContext(void 0);function ai(){const e=v.useContext(G0);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function M4(e){const{components:t}=ai();return K.createElement(t.Dropdown,{...e})}function O4(e){const{onPreviousClick:t,onNextClick:r,previousMonth:n,nextMonth:a,...i}=e,{components:o,classNames:l,labels:{labelPrevious:u,labelNext:c}}=ai(),m=v.useCallback(d=>{a&&(r==null||r(d))},[a,r]),h=v.useCallback(d=>{n&&(t==null||t(d))},[n,t]);return K.createElement("nav",{...i},K.createElement(o.PreviousMonthButton,{type:"button",className:l[se.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":u(n),onClick:h},K.createElement(o.Chevron,{disabled:n?void 0:!0,className:l[se.Chevron],orientation:"left"})),K.createElement(o.NextMonthButton,{type:"button",className:l[se.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":c(a),onClick:m},K.createElement(o.Chevron,{disabled:a?void 0:!0,orientation:"right",className:l[se.Chevron]})))}function $4(e){const{components:t}=ai();return K.createElement(t.Button,{...e})}function I4(e){return K.createElement("option",{...e})}function L4(e){const{components:t}=ai();return K.createElement(t.Button,{...e})}function R4(e){const{rootRef:t,...r}=e;return K.createElement("div",{...r,ref:t})}function A4(e){return K.createElement("select",{...e})}function F4(e){const{week:t,...r}=e;return K.createElement("tr",{...r})}function U4(e){return K.createElement("th",{...e})}function W4(e){return K.createElement("thead",{"aria-hidden":!0},K.createElement("tr",{...e}))}function z4(e){const{week:t,...r}=e;return K.createElement("th",{...r})}function B4(e){return K.createElement("th",{...e})}function q4(e){return K.createElement("tbody",{...e})}function H4(e){const{components:t}=ai();return K.createElement(t.Dropdown,{...e})}const Y4=Object.freeze(Object.defineProperty({__proto__:null,Button:w4,CaptionLabel:b4,Chevron:_4,Day:j4,DayButton:N4,Dropdown:k4,DropdownNav:S4,Footer:C4,Month:E4,MonthCaption:T4,MonthGrid:D4,Months:P4,MonthsDropdown:M4,Nav:O4,NextMonthButton:$4,Option:I4,PreviousMonthButton:L4,Root:R4,Select:A4,Week:F4,WeekNumber:z4,WeekNumberHeader:B4,Weekday:U4,Weekdays:W4,Weeks:q4,YearsDropdown:H4},Symbol.toStringTag,{value:"Module"}));function V4(e){return{...Y4,...e}}function G4(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0};return Object.entries(e).forEach(([r,n])=>{r.startsWith("data-")&&(t[r]=n)}),t}function J4(){const e={};for(const t in se)e[se[t]]=`rdp-${se[t]}`;for(const t in Te)e[Te[t]]=`rdp-${Te[t]}`;for(const t in Zt)e[Zt[t]]=`rdp-${Zt[t]}`;for(const t in Ct)e[Ct[t]]=`rdp-${Ct[t]}`;return e}function J0(e,t,r){return(r??new Ir(t)).format(e,"LLLL y")}const K4=J0;function Q4(e,t,r){return(r??new Ir(t)).format(e,"d")}function X4(e,t=Lr){return t.format(e,"LLLL")}function Z4(e){return e<10?`0${e.toLocaleString()}`:`${e.toLocaleString()}`}function eS(){return""}function tS(e,t,r){return(r??new Ir(t)).format(e,"cccccc")}function K0(e,t=Lr){return t.format(e,"yyyy")}const rS=K0,sS=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:J0,formatDay:Q4,formatMonthCaption:K4,formatMonthDropdown:X4,formatWeekNumber:Z4,formatWeekNumberHeader:eS,formatWeekdayName:tS,formatYearCaption:rS,formatYearDropdown:K0},Symbol.toStringTag,{value:"Module"}));function nS(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...sS,...e}}function aS(e,t,r,n,a){const{startOfMonth:i,startOfYear:o,endOfYear:l,eachMonthOfInterval:u,getMonth:c}=a;return u({start:o(e),end:l(e)}).map(d=>{const f=n.formatMonthDropdown(d,a),w=c(d),x=t&&d<i(t)||r&&d>i(r)||!1;return{value:w,label:f,disabled:x}})}function iS(e,t={},r={}){let n={...t==null?void 0:t[se.Day]};return Object.entries(e).filter(([,a])=>a===!0).forEach(([a])=>{n={...n,...r==null?void 0:r[a]}}),n}function oS(e,t,r){const n=e.today(),a=t?e.startOfISOWeek(n):e.startOfWeek(n),i=[];for(let o=0;o<7;o++){const l=e.addDays(a,o);i.push(l)}return i}function lS(e,t,r,n){if(!e||!t)return;const{startOfYear:a,endOfYear:i,addYears:o,getYear:l,isBefore:u,isSameYear:c}=n,m=a(e),h=i(t),d=[];let f=m;for(;u(f,h)||c(f,h);)d.push(f),f=o(f,1);return d.map(w=>{const x=r.formatYearDropdown(w,n);return{value:l(w),label:x,disabled:!1}})}function Q0(e,t,r){return(r??new Ir(t)).format(e,"LLLL y")}const cS=Q0;function dS(e,t,r,n){let a=(n??new Ir(r)).format(e,"PPPP");return t!=null&&t.today&&(a=`Today, ${a}`),a}function X0(e,t,r,n){let a=(n??new Ir(r)).format(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a}const uS=X0;function mS(){return""}function hS(e){return"Choose the Month"}function fS(e){return"Go to the Next Month"}function pS(e){return"Go to the Previous Month"}function gS(e,t,r){return(r??new Ir(t)).format(e,"cccc")}function xS(e,t){return`Week ${e}`}function yS(e){return"Week Number"}function vS(e){return"Choose the Year"}const wS=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:cS,labelDay:uS,labelDayButton:X0,labelGrid:Q0,labelGridcell:dS,labelMonthDropdown:hS,labelNav:mS,labelNext:fS,labelPrevious:pS,labelWeekNumber:xS,labelWeekNumberHeader:yS,labelWeekday:gS,labelYearDropdown:vS},Symbol.toStringTag,{value:"Module"}));function bS(e,t,{classNames:r,months:n,focused:a,dateLib:i}){const o=v.useRef(null),l=v.useRef(n),u=v.useRef(!1);v.useLayoutEffect(()=>{const c=l.current;if(l.current=n,!t||!e.current||!(e.current instanceof HTMLElement))return;const m=o.current,h=e.current.cloneNode(!0);if(h instanceof HTMLElement?([...h.querySelectorAll("[data-animated-month]")??[]].forEach(y=>{const g=y.querySelector("[data-animated-month]");g&&y.contains(g)&&y.removeChild(g)}),o.current=h):o.current=null,n.length===0||c.length===0||n.length!==c.length||a||u.current||i.isSameMonth(n[0].date,c[0].date))return;const f=[...(m==null?void 0:m.querySelectorAll("[data-animated-month]"))??[]],w=[...e.current.querySelectorAll("[data-animated-month]")??[]];if(w&&w.every(x=>x instanceof HTMLElement)&&f&&f.every(x=>x instanceof HTMLElement)){u.current=!0;const x=i.isAfter(n[0].date,c[0].date);w.forEach((y,g)=>{const p=f[g];if(!p)return;const b=x?r[Ct.caption_after_enter]:r[Ct.caption_before_enter],_=x?r[Ct.weeks_after_enter]:r[Ct.weeks_before_enter];y.style.position="relative",y.style.overflow="hidden";const C=y.querySelector("[data-animated-caption]");C&&C instanceof HTMLElement&&C.classList.add(b);const k=y.querySelector("[data-animated-weeks]");k&&k instanceof HTMLElement&&k.classList.add(_);const j=()=>{u.current=!1,C&&C instanceof HTMLElement&&C.classList.remove(b),k&&k instanceof HTMLElement&&k.classList.remove(_),y.style.position="",y.style.overflow="",y.contains(p)&&y.removeChild(p)};p.style.pointerEvents="none",p.style.position="absolute",p.style.overflow="hidden",p.setAttribute("aria-hidden","true");const S=p.querySelector("[data-animated-weekdays]");S&&S instanceof HTMLElement&&(S.style.opacity="0");const U=p.querySelector("[data-animated-caption]");U&&U instanceof HTMLElement&&(U.classList.add(x?r[Ct.caption_before_exit]:r[Ct.caption_after_exit]),U.addEventListener("animationend",j));const R=p.querySelector("[data-animated-weeks]");R&&R instanceof HTMLElement&&R.classList.add(x?r[Ct.weeks_before_exit]:r[Ct.weeks_after_exit]),y.insertBefore(p,y.firstChild)})}})}function _S(e,t,r,n){const a=e[0],i=e[e.length-1],{ISOWeek:o,fixedWeeks:l,broadcastCalendar:u}=r??{},{addDays:c,differenceInCalendarDays:m,differenceInCalendarMonths:h,endOfBroadcastWeek:d,endOfISOWeek:f,endOfMonth:w,endOfWeek:x,isAfter:y,startOfBroadcastWeek:g,startOfISOWeek:p,startOfWeek:b}=n,_=u?g(a,n):o?p(a):b(a),C=u?d(i,n):o?f(w(i)):x(w(i)),k=m(C,_),j=h(i,a)+1,S=[];for(let P=0;P<=k;P++){const N=c(_,P);if(t&&y(N,t))break;S.push(N)}const R=(u?35:42)*j;if(l&&S.length<R){const P=R-S.length;for(let N=0;N<P;N++){const $=c(S[S.length-1],1);S.push($)}}return S}function jS(e){const t=[];return e.reduce((r,n)=>{const a=[],i=n.weeks.reduce((o,l)=>[...o,...l.days],a);return[...r,...i]},t)}function NS(e,t,r,n){const{numberOfMonths:a=1}=r,i=[];for(let o=0;o<a;o++){const l=n.addMonths(e,o);if(t&&l>t)break;i.push(l)}return i}function Ih(e,t){const{month:r,defaultMonth:n,today:a=t.today(),numberOfMonths:i=1,endMonth:o,startMonth:l}=e;let u=r||n||a;const{differenceInCalendarMonths:c,addMonths:m,startOfMonth:h}=t;if(o&&c(o,u)<0){const d=-1*(i-1);u=m(o,d)}return l&&c(u,l)<0&&(u=l),h(u)}class Z0{constructor(t,r,n=Lr){this.date=t,this.displayMonth=r,this.outside=!!(r&&!n.isSameMonth(t,r)),this.dateLib=n}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class kS{constructor(t,r){this.date=t,this.weeks=r}}class SS{constructor(t,r){this.days=r,this.weekNumber=t}}function CS(e,t,r,n){const{addDays:a,endOfBroadcastWeek:i,endOfISOWeek:o,endOfMonth:l,endOfWeek:u,getISOWeek:c,getWeek:m,startOfBroadcastWeek:h,startOfISOWeek:d,startOfWeek:f}=n,w=e.reduce((x,y)=>{const g=r.broadcastCalendar?h(y,n):r.ISOWeek?d(y):f(y),p=r.broadcastCalendar?i(y,n):r.ISOWeek?o(l(y)):u(l(y)),b=t.filter(j=>j>=g&&j<=p),_=r.broadcastCalendar?35:42;if(r.fixedWeeks&&b.length<_){const j=t.filter(S=>{const U=_-b.length;return S>p&&S<=a(p,U)});b.push(...j)}const C=b.reduce((j,S)=>{const U=r.ISOWeek?c(S):m(S),R=j.find(N=>N.weekNumber===U),P=new Z0(S,y,n);return R?R.days.push(P):j.push(new SS(U,[P])),j},[]),k=new kS(y,C);return x.push(k),x},[]);return r.reverseMonths?w.reverse():w}function ES(e,t){let{startMonth:r,endMonth:n}=e;const{startOfYear:a,startOfDay:i,startOfMonth:o,endOfMonth:l,addYears:u,endOfYear:c,newDate:m,today:h}=t,{fromYear:d,toYear:f,fromMonth:w,toMonth:x}=e;!r&&w&&(r=w),!r&&d&&(r=t.newDate(d,0,1)),!n&&x&&(n=x),!n&&f&&(n=m(f,11,31));const y=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return r?r=o(r):d?r=m(d,0,1):!r&&y&&(r=a(u(e.today??h(),-100))),n?n=l(n):f?n=m(f,11,31):!n&&y&&(n=c(e.today??h())),[r&&i(r),n&&i(n)]}function TS(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i=1}=r,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:u}=n,c=a?i:1,m=o(e);if(!t)return l(m,c);if(!(u(t,e)<i))return l(m,c)}function DS(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i}=r,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:u}=n,c=a?i??1:1,m=o(e);if(!t)return l(m,-c);if(!(u(m,t)<=0))return l(m,-c)}function PS(e){const t=[];return e.reduce((r,n)=>[...r,...n.weeks],t)}function el(e,t){const[r,n]=v.useState(e);return[t===void 0?r:t,n]}function MS(e,t){const[r,n]=ES(e,t),{startOfMonth:a,endOfMonth:i}=t,o=Ih(e,t),[l,u]=el(o,e.month?o:void 0);v.useEffect(()=>{const k=Ih(e,t);u(k)},[e.timeZone]);const c=NS(l,n,e,t),m=_S(c,e.endMonth?i(e.endMonth):void 0,e,t),h=CS(c,m,e,t),d=PS(h),f=jS(h),w=DS(l,r,e,t),x=TS(l,n,e,t),{disableNavigation:y,onMonthChange:g}=e,p=k=>d.some(j=>j.days.some(S=>S.isEqualTo(k))),b=k=>{if(y)return;let j=a(k);r&&j<a(r)&&(j=a(r)),n&&j>a(n)&&(j=a(n)),u(j),g==null||g(j)};return{months:h,weeks:d,days:f,navStart:r,navEnd:n,previousMonth:w,nextMonth:x,goToMonth:b,goToDay:k=>{p(k)||b(k.date)}}}function OS(e,t,r,n){let a,i=0,o=!1;for(;i<e.length&&!o;){const l=e[i],u=t(l);!u[Te.disabled]&&!u[Te.hidden]&&!u[Te.outside]&&(u[Te.focused]||n!=null&&n.isEqualTo(l)||r(l.date)||u[Te.today])&&(a=l,o=!0),i++}return a||(a=e.find(l=>{const u=t(l);return!u[Te.disabled]&&!u[Te.hidden]&&!u[Te.outside]})),a}function Sr(e,t,r=!1,n=Lr){let{from:a,to:i}=e;const{differenceInCalendarDays:o,isSameDay:l}=n;return a&&i?(o(i,a)<0&&([a,i]=[i,a]),o(t,a)>=(r?1:0)&&o(i,t)>=(r?1:0)):!r&&i?l(i,t):!r&&a?l(a,t):!1}function ex(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Eu(e){return!!(e&&typeof e=="object"&&"from"in e)}function tx(e){return!!(e&&typeof e=="object"&&"after"in e)}function rx(e){return!!(e&&typeof e=="object"&&"before"in e)}function sx(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function nx(e,t){return Array.isArray(e)&&e.every(t.isDate)}function Cr(e,t,r=Lr){const n=Array.isArray(t)?t:[t],{isSameDay:a,differenceInCalendarDays:i,isAfter:o}=r;return n.some(l=>{if(typeof l=="boolean")return l;if(r.isDate(l))return a(e,l);if(nx(l,r))return l.includes(e);if(Eu(l))return Sr(l,e,!1,r);if(sx(l))return Array.isArray(l.dayOfWeek)?l.dayOfWeek.includes(e.getDay()):l.dayOfWeek===e.getDay();if(ex(l)){const u=i(l.before,e),c=i(l.after,e),m=u>0,h=c<0;return o(l.before,l.after)?h&&m:m||h}return tx(l)?i(e,l.after)>0:rx(l)?i(l.before,e)>0:typeof l=="function"?l(e):!1})}function $S(e,t,r,n,a,i,o){const{ISOWeek:l,broadcastCalendar:u}=i,{addDays:c,addMonths:m,addWeeks:h,addYears:d,endOfBroadcastWeek:f,endOfISOWeek:w,endOfWeek:x,max:y,min:g,startOfBroadcastWeek:p,startOfISOWeek:b,startOfWeek:_}=o;let k={day:c,week:h,month:m,year:d,startOfWeek:j=>u?p(j,o):l?b(j):_(j),endOfWeek:j=>u?f(j,o):l?w(j):x(j)}[e](r,t==="after"?1:-1);return t==="before"&&n?k=y([n,k]):t==="after"&&a&&(k=g([a,k])),k}function ax(e,t,r,n,a,i,o,l=0){if(l>365)return;const u=$S(e,t,r.date,n,a,i,o),c=!!(i.disabled&&Cr(u,i.disabled,o)),m=!!(i.hidden&&Cr(u,i.hidden,o)),h=u,d=new Z0(u,h,o);return!c&&!m?d:ax(e,t,d,n,a,i,o,l+1)}function IS(e,t,r,n,a){const{autoFocus:i}=e,[o,l]=v.useState(),u=OS(t.days,r,n||(()=>!1),o),[c,m]=v.useState(i?u:void 0);return{isFocusTarget:x=>!!(u!=null&&u.isEqualTo(x)),setFocused:m,focused:c,blur:()=>{l(c),m(void 0)},moveFocus:(x,y)=>{if(!c)return;const g=ax(x,y,c,t.navStart,t.navEnd,e,a);g&&(t.goToDay(g),m(g))}}}function LS(e,t,r){const{disabled:n,hidden:a,modifiers:i,showOutsideDays:o,broadcastCalendar:l,today:u}=t,{isSameDay:c,isSameMonth:m,startOfMonth:h,isBefore:d,endOfMonth:f,isAfter:w}=r,x=t.startMonth&&h(t.startMonth),y=t.endMonth&&f(t.endMonth),g={[Te.focused]:[],[Te.outside]:[],[Te.disabled]:[],[Te.hidden]:[],[Te.today]:[]},p={};for(const b of e){const{date:_,displayMonth:C}=b,k=!!(C&&!m(_,C)),j=!!(x&&d(_,x)),S=!!(y&&w(_,y)),U=!!(n&&Cr(_,n,r)),R=!!(a&&Cr(_,a,r))||j||S||!l&&!o&&k||l&&o===!1&&k,P=c(_,u??r.today());k&&g.outside.push(b),U&&g.disabled.push(b),R&&g.hidden.push(b),P&&g.today.push(b),i&&Object.keys(i).forEach(N=>{const $=i==null?void 0:i[N];$&&Cr(_,$,r)&&(p[N]?p[N].push(b):p[N]=[b])})}return b=>{const _={[Te.focused]:!1,[Te.disabled]:!1,[Te.hidden]:!1,[Te.outside]:!1,[Te.today]:!1},C={};for(const k in g){const j=g[k];_[k]=j.some(S=>S===b)}for(const k in p)C[k]=p[k].some(j=>j===b);return{..._,...C}}}function RS(e,t){const{selected:r,required:n,onSelect:a}=e,[i,o]=el(r,a?r:void 0),l=a?r:i,{isSameDay:u}=t,c=f=>(l==null?void 0:l.some(w=>u(w,f)))??!1,{min:m,max:h}=e;return{selected:l,select:(f,w,x)=>{let y=[...l??[]];if(c(f)){if((l==null?void 0:l.length)===m||n&&(l==null?void 0:l.length)===1)return;y=l==null?void 0:l.filter(g=>!u(g,f))}else(l==null?void 0:l.length)===h?y=[f]:y=[...y,f];return a||o(y),a==null||a(y,f,w,x),y},isSelected:c}}function AS(e,t,r=0,n=0,a=!1,i=Lr){const{from:o,to:l}=t||{},{isSameDay:u,isAfter:c,isBefore:m}=i;let h;if(!o&&!l)h={from:e,to:r>0?void 0:e};else if(o&&!l)u(o,e)?a?h={from:o,to:void 0}:h=void 0:m(e,o)?h={from:e,to:o}:h={from:o,to:e};else if(o&&l)if(u(o,e)&&u(l,e))a?h={from:o,to:l}:h=void 0;else if(u(o,e))h={from:o,to:r>0?void 0:e};else if(u(l,e))h={from:e,to:r>0?void 0:e};else if(m(e,o))h={from:e,to:l};else if(c(e,o))h={from:o,to:e};else if(c(e,l))h={from:o,to:e};else throw new Error("Invalid range");if(h!=null&&h.from&&(h!=null&&h.to)){const d=i.differenceInCalendarDays(h.to,h.from);n>0&&d>n?h={from:e,to:void 0}:r>1&&d<r&&(h={from:e,to:void 0})}return h}function FS(e,t,r=Lr){const n=Array.isArray(t)?t:[t];let a=e.from;const i=r.differenceInCalendarDays(e.to,e.from),o=Math.min(i,6);for(let l=0;l<=o;l++){if(n.includes(a.getDay()))return!0;a=r.addDays(a,1)}return!1}function Lh(e,t,r=Lr){return Sr(e,t.from,!1,r)||Sr(e,t.to,!1,r)||Sr(t,e.from,!1,r)||Sr(t,e.to,!1,r)}function US(e,t,r=Lr){const n=Array.isArray(t)?t:[t];if(n.filter(l=>typeof l!="function").some(l=>typeof l=="boolean"?l:r.isDate(l)?Sr(e,l,!1,r):nx(l,r)?l.some(u=>Sr(e,u,!1,r)):Eu(l)?l.from&&l.to?Lh(e,{from:l.from,to:l.to},r):!1:sx(l)?FS(e,l.dayOfWeek,r):ex(l)?r.isAfter(l.before,l.after)?Lh(e,{from:r.addDays(l.after,1),to:r.addDays(l.before,-1)},r):Cr(e.from,l,r)||Cr(e.to,l,r):tx(l)||rx(l)?Cr(e.from,l,r)||Cr(e.to,l,r):!1))return!0;const o=n.filter(l=>typeof l=="function");if(o.length){let l=e.from;const u=r.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=u;c++){if(o.some(m=>m(l)))return!0;l=r.addDays(l,1)}}return!1}function WS(e,t){const{disabled:r,excludeDisabled:n,selected:a,required:i,onSelect:o}=e,[l,u]=el(a,o?a:void 0),c=o?a:l;return{selected:c,select:(d,f,w)=>{const{min:x,max:y}=e,g=d?AS(d,c,x,y,i,t):void 0;return n&&r&&(g!=null&&g.from)&&g.to&&US({from:g.from,to:g.to},r,t)&&(g.from=d,g.to=void 0),o||u(g),o==null||o(g,d,f,w),g},isSelected:d=>c&&Sr(c,d,!1,t)}}function zS(e,t){const{selected:r,required:n,onSelect:a}=e,[i,o]=el(r,a?r:void 0),l=a?r:i,{isSameDay:u}=t;return{selected:l,select:(h,d,f)=>{let w=h;return!n&&l&&l&&u(h,l)&&(w=void 0),a||o(w),a==null||a(w,h,d,f),w},isSelected:h=>l?u(l,h):!1}}function BS(e,t){const r=zS(e,t),n=RS(e,t),a=WS(e,t);switch(e.mode){case"single":return r;case"multiple":return n;case"range":return a;default:return}}function qS(e){const{components:t,formatters:r,labels:n,dateLib:a,locale:i,classNames:o}=v.useMemo(()=>{const ge={...Cu,...e.locale};return{dateLib:new Ir({locale:ge,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:V4(e.components),formatters:nS(e.formatters),labels:{...wS,...e.labels},locale:ge,classNames:{...J4(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:l,mode:u,onDayBlur:c,onDayClick:m,onDayFocus:h,onDayKeyDown:d,onDayMouseEnter:f,onDayMouseLeave:w,onNextClick:x,onPrevClick:y,showWeekNumber:g,styles:p}=e,{formatCaption:b,formatDay:_,formatMonthDropdown:C,formatWeekNumber:k,formatWeekNumberHeader:j,formatWeekdayName:S,formatYearDropdown:U}=r,R=MS(e,a),{days:P,months:N,navStart:$,navEnd:O,previousMonth:D,nextMonth:E,goToMonth:F}=R,T=LS(P,e,a),{isSelected:I,select:L,selected:W}=BS(e,a)??{},{blur:q,focused:H,isFocusTarget:X,moveFocus:te,setFocused:G}=IS(e,R,T,I??(()=>!1),a),{labelDayButton:Y,labelGridcell:V,labelGrid:ae,labelMonthDropdown:de,labelNav:Q,labelWeekday:ye,labelWeekNumber:oe,labelWeekNumberHeader:le,labelYearDropdown:A}=n,z=v.useMemo(()=>oS(a,e.ISOWeek),[a,e.ISOWeek]),J=u!==void 0||m!==void 0,ne=v.useCallback(()=>{D&&(F(D),y==null||y(D))},[D,F,y]),fe=v.useCallback(()=>{E&&(F(E),x==null||x(E))},[F,E,x]),ke=v.useCallback((ge,We)=>Ce=>{Ce.preventDefault(),Ce.stopPropagation(),G(ge),L==null||L(ge.date,We,Ce),m==null||m(ge.date,We,Ce)},[L,m,G]),me=v.useCallback((ge,We)=>Ce=>{G(ge),h==null||h(ge.date,We,Ce)},[h,G]),Ie=v.useCallback((ge,We)=>Ce=>{q(),c==null||c(ge.date,We,Ce)},[q,c]),st=v.useCallback((ge,We)=>Ce=>{const Rr={ArrowLeft:["day",e.dir==="rtl"?"after":"before"],ArrowRight:["day",e.dir==="rtl"?"before":"after"],ArrowDown:["week","after"],ArrowUp:["week","before"],PageUp:[Ce.shiftKey?"year":"month","before"],PageDown:[Ce.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Rr[Ce.key]){Ce.preventDefault(),Ce.stopPropagation();const[Vt,oi]=Rr[Ce.key];te(Vt,oi)}d==null||d(ge.date,We,Ce)},[te,d,e.dir]),He=v.useCallback((ge,We)=>Ce=>{f==null||f(ge.date,We,Ce)},[f]),sr=v.useCallback((ge,We)=>Ce=>{w==null||w(ge.date,We,Ce)},[w]),qs=v.useCallback(ge=>We=>{const Ce=Number(We.target.value),Rr=a.setMonth(a.startOfMonth(ge),Ce);F(Rr)},[a,F]),Lt=v.useCallback(ge=>We=>{const Ce=Number(We.target.value),Rr=a.setYear(a.startOfMonth(ge),Ce);F(Rr)},[a,F]),{className:Je,style:Yt}=v.useMemo(()=>({className:[o[se.Root],e.className].filter(Boolean).join(" "),style:{...p==null?void 0:p[se.Root],...e.style}}),[o,e.className,e.style,p]),Bn=G4(e),Mu=v.useRef(null);bS(Mu,!!e.animate,{classNames:o,months:N,focused:H,dateLib:a});const Cx={dayPickerProps:e,selected:W,select:L,isSelected:I,months:N,nextMonth:E,previousMonth:D,goToMonth:F,getModifiers:T,components:t,classNames:o,styles:p,labels:n,formatters:r};return K.createElement(G0.Provider,{value:Cx},K.createElement(t.Root,{rootRef:e.animate?Mu:void 0,className:Je,style:Yt,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],...Bn},K.createElement(t.Months,{className:o[se.Months],style:p==null?void 0:p[se.Months]},!e.hideNavigation&&K.createElement(t.Nav,{className:o[se.Nav],style:p==null?void 0:p[se.Nav],"aria-label":Q(),onPreviousClick:ne,onNextClick:fe,previousMonth:D,nextMonth:E}),N.map((ge,We)=>{const Ce=aS(ge.date,$,O,r,a),Rr=lS($,O,r,a);return K.createElement(t.Month,{"data-animated-month":e.animate?"true":void 0,className:o[se.Month],style:p==null?void 0:p[se.Month],key:We,displayIndex:We,calendarMonth:ge},K.createElement(t.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:o[se.MonthCaption],style:p==null?void 0:p[se.MonthCaption],calendarMonth:ge,displayIndex:We},l!=null&&l.startsWith("dropdown")?K.createElement(t.DropdownNav,{className:o[se.Dropdowns],style:p==null?void 0:p[se.Dropdowns]},l==="dropdown"||l==="dropdown-months"?K.createElement(t.MonthsDropdown,{className:o[se.MonthsDropdown],"aria-label":de(),classNames:o,components:t,disabled:!!e.disableNavigation,onChange:qs(ge.date),options:Ce,style:p==null?void 0:p[se.Dropdown],value:a.getMonth(ge.date)}):K.createElement("span",{role:"status","aria-live":"polite"},C(ge.date,a)),l==="dropdown"||l==="dropdown-years"?K.createElement(t.YearsDropdown,{className:o[se.YearsDropdown],"aria-label":A(a.options),classNames:o,components:t,disabled:!!e.disableNavigation,onChange:Lt(ge.date),options:Rr,style:p==null?void 0:p[se.Dropdown],value:a.getYear(ge.date)}):K.createElement("span",{role:"status","aria-live":"polite"},U(ge.date,a))):K.createElement(t.CaptionLabel,{className:o[se.CaptionLabel],role:"status","aria-live":"polite"},b(ge.date,a.options,a))),K.createElement(t.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":ae(ge.date,a.options,a)||void 0,className:o[se.MonthGrid],style:p==null?void 0:p[se.MonthGrid]},!e.hideWeekdays&&K.createElement(t.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:o[se.Weekdays],style:p==null?void 0:p[se.Weekdays]},g&&K.createElement(t.WeekNumberHeader,{"aria-label":le(a.options),className:o[se.WeekNumberHeader],style:p==null?void 0:p[se.WeekNumberHeader],scope:"col"},j()),z.map((Vt,oi)=>K.createElement(t.Weekday,{"aria-label":ye(Vt,a.options,a),className:o[se.Weekday],key:oi,style:p==null?void 0:p[se.Weekday],scope:"col"},S(Vt,a.options,a)))),K.createElement(t.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:o[se.Weeks],style:p==null?void 0:p[se.Weeks]},ge.weeks.map((Vt,oi)=>K.createElement(t.Week,{className:o[se.Week],key:Vt.weekNumber,style:p==null?void 0:p[se.Week],week:Vt},g&&K.createElement(t.WeekNumber,{week:Vt,style:p==null?void 0:p[se.WeekNumber],"aria-label":oe(Vt.weekNumber,{locale:i}),className:o[se.WeekNumber],scope:"row",role:"rowheader"},k(Vt.weekNumber)),Vt.days.map(nt=>{const{date:nr}=nt,be=T(nt);if(be[Te.focused]=!be.hidden&&!!(H!=null&&H.isEqualTo(nt)),be[Zt.selected]=(I==null?void 0:I(nr))||be.selected,Eu(W)){const{from:sl,to:nl}=W;be[Zt.range_start]=!!(sl&&nl&&a.isSameDay(nr,sl)),be[Zt.range_end]=!!(sl&&nl&&a.isSameDay(nr,nl)),be[Zt.range_middle]=Sr(W,nr,!0,a)}const Ex=iS(be,p,e.modifiersStyles),Tx=v4(be,o,e.modifiersClassNames),Dx=!J&&!be.hidden?V(nr,be,a.options,a):void 0;return K.createElement(t.Day,{key:`${a.format(nr,"yyyy-MM-dd")}_${a.format(nt.displayMonth,"yyyy-MM")}`,day:nt,modifiers:be,className:Tx.join(" "),style:Ex,role:"gridcell","aria-selected":be.selected||void 0,"aria-label":Dx,"data-day":a.format(nr,"yyyy-MM-dd"),"data-month":nt.outside?a.format(nr,"yyyy-MM"):void 0,"data-selected":be.selected||void 0,"data-disabled":be.disabled||void 0,"data-hidden":be.hidden||void 0,"data-outside":nt.outside||void 0,"data-focused":be.focused||void 0,"data-today":be.today||void 0},!be.hidden&&J?K.createElement(t.DayButton,{className:o[se.DayButton],style:p==null?void 0:p[se.DayButton],type:"button",day:nt,modifiers:be,disabled:be.disabled||void 0,tabIndex:X(nt)?0:-1,"aria-label":Y(nr,be,a.options,a),onClick:ke(nt,be),onBlur:Ie(nt,be),onFocus:me(nt,be),onKeyDown:st(nt,be),onMouseEnter:He(nt,be),onMouseLeave:sr(nt,be)},_(nr,a.options,a)):!be.hidden&&_(nt.date,a.options,a))}))))))})),e.footer&&K.createElement(t.Footer,{className:o[se.Footer],style:p==null?void 0:p[se.Footer],role:"status","aria-live":"polite"},e.footer)))}const HS=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(""),[o,l]=v.useState(null),[u,c]=v.useState({}),[m,h]=v.useState([]),[d,f]=v.useState({monthly:!0,single_course:!0}),[w,x]=v.useState({in_person:!0,online:!0}),[y,g]=v.useState([]),[p,b]=v.useState(!1),[_,C]=v.useState(),[k,j]=v.useState(!1),[S,U]=v.useState({monthly:[],single_course:[]}),[R,P]=v.useState({lessonFormat:!0,area:!0,date:!0,price:!0,category:!0}),[N,$]=v.useState([]),O=Ht();v.useEffect(()=>{(async()=>{try{n(!0);const z=new Date().toISOString(),{data:J,error:ne}=await M.from("lessons").select(`
            *,
            instructor_profiles(
              id, 
              name, 
              profile_image_url, 
              instructor_specialties,
              is_verified,
              average_rating,
              instructor_bio
            ),
            lesson_slots!inner(*)
          `).eq("status","published").eq("lesson_slots.status","published").gte("lesson_slots.date_time_start",z);if(ne)throw console.error("Error fetching lessons:",ne),ne;let fe=J?J.map(me=>({...me,review_count:0})):[];J&&J.length>0&&console.log("Setting review counts to 0 - actual counts will be added in a future update"),console.log("Fetched published lessons:",(fe==null?void 0:fe.length)||0);const{data:{user:ke}}=await M.auth.getUser();if(ke){const{data:me,error:Ie}=await M.from("favorites").select("lesson_id").eq("user_id",ke.id);Ie&&console.error("Error fetching favorites:",Ie),me&&$(me.map(st=>st.lesson_id))}t(fe||[])}catch(z){console.error("Error fetching lessons:",z)}finally{n(!1)}})()},[]);const D=async A=>{try{const{data:{user:z}}=await M.auth.getUser();if(!z){O("/login");return}N.includes(A)?(await M.from("favorites").delete().eq("user_id",z.id).eq("lesson_id",A),$(N.filter(ne=>ne!==A))):(await M.from("favorites").insert({user_id:z.id,lesson_id:A,created_at:new Date().toISOString()}),$([...N,A]))}catch(z){console.error("Error updating favorites:",z)}},E=["","","","","","","","",""],F=[{id:"under1000",label:"1,000",min:0,max:1e3},{id:"1000to3000",label:"1,0003,000",min:1e3,max:3e3},{id:"3000to5000",label:"3,0005,000",min:3e3,max:5e3},{id:"5000to10000",label:"5,00010,000",min:5e3,max:1e4},{id:"over10000",label:"10,000",min:1e4,max:1/0}],T=[{id:"under5000",label:"5,000/",min:0,max:5e3},{id:"5000to10000",label:"5,00010,000/",min:5e3,max:1e4},{id:"10000to20000",label:"10,00020,000/",min:1e4,max:2e4},{id:"over20000",label:"20,000/",min:2e4,max:1/0}],I=A=>{P(z=>({...z,[A]:!z[A]}))},L=A=>{c(z=>({...z,[A]:!z[A]}))},W=A=>{const J=(A==="monthly"?T:F).map(ne=>ne.id);S[A].length===J.length?U(ne=>({...ne,[A]:[]})):U(ne=>({...ne,[A]:[...J]}))},q=e.filter(A=>{var ke;if(o&&A.category!==o)return!1;if(m.length>0){const me=A.sub_category?A.sub_category.split(","):[];if(!m.some(Ie=>me.includes(Ie)))return!1}const z=A.lesson_type==="monthly",J=A.lesson_type==="one_time"||A.lesson_type==="course";if(z&&!d.monthly||J&&!d.single_course)return!1;const ne=A.location_type==="in_person"||A.location_type==="hybrid"||A.location_type==="offline",fe=A.location_type==="online"||A.location_type==="hybrid";if(ne&&!w.in_person||fe&&!w.online||w.in_person&&y.length>0&&ne&&!y.some(me=>{var Ie;return(Ie=A.classroom_area)==null?void 0:Ie.includes(me)})||_!=null&&_.from&&(_!=null&&_.to)&&!((ke=A.lesson_slots)==null?void 0:ke.some(Ie=>{const st=new Date(Ie.date_time_start);return st>=_.from&&st<=_.to&&Ie.status==="published"})))return!1;if(z&&S.monthly.length>0){const me=A.price||0;if(!S.monthly.some(st=>{const He=T.find(sr=>sr.id===st);return He&&me>=He.min&&me<=He.max}))return!1}else if(J&&S.single_course.length>0){const me=A.price||0;if(!S.single_course.some(st=>{const He=F.find(sr=>sr.id===st);return He&&me>=He.min&&me<=He.max}))return!1}if(a){const me=a.toLowerCase();return A.lesson_title.toLowerCase().includes(me)||A.category&&A.category.toLowerCase().includes(me)||A.sub_category&&A.sub_category.toLowerCase().includes(me)||A.lesson_description&&A.lesson_description.toLowerCase().includes(me)}return!0}),[H,X]=v.useState("standard"),te=A=>{switch(H){case"rating":return[...A].sort((z,J)=>{var ne,fe;return(((ne=J.instructor_profiles)==null?void 0:ne.average_rating)||0)-(((fe=z.instructor_profiles)==null?void 0:fe.average_rating)||0)});case"reviews":return[...A].sort((z,J)=>(J.review_count||0)-(z.review_count||0));case"price_asc":return[...A].sort((z,J)=>(z.price||0)-(J.price||0));default:return[...A].sort((z,J)=>{var ke,me;const ne=z.is_featured?1:0,fe=J.is_featured?1:0;return fe!==ne?fe-ne:(((ke=J.instructor_profiles)==null?void 0:ke.average_rating)||0)-(((me=z.instructor_profiles)==null?void 0:me.average_rating)||0)})}},[G,Y]=v.useState(1),V=10,ae=te(q),de=G*V,Q=de-V,ye=ae.slice(Q,de),oe=Math.ceil(ae.length/V),le=A=>Y(A);return v.useEffect(()=>{Y(1)},[a,o,m,d,w,y,_,S,H]),s.jsxs("div",{children:[s.jsx(a2,{title:"",description:"",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(re,{variant:"outline",size:"sm",children:[s.jsx(Bg,{className:"h-4 w-4 mr-1"}),""]}),s.jsxs(re,{variant:"outline",size:"sm",onClick:()=>j(!k),children:[s.jsx(lt,{className:"h-4 w-4 mr-1"}),""]})]})}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-3",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 sticky top-4 space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-800",children:""}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Rs,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{id:"search",type:"text",className:"block w-full pl-10 pr-3 py-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"...",value:a,onChange:A=>i(A.target.value)})]})]}),s.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left mb-2",onClick:()=>I("lessonFormat"),children:[s.jsx("h4",{className:"font-medium text-gray-800",children:""}),R.lessonFormat?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),R.lessonFormat&&s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsxs("div",{className:"ml-2",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"type-monthly",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:d.monthly,onChange:A=>f(z=>({...z,monthly:A.target.checked}))}),s.jsx("label",{htmlFor:"type-monthly",className:"ml-2 text-sm text-gray-700",children:""})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"type-single-course",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:d.single_course,onChange:A=>f(z=>({...z,single_course:A.target.checked}))}),s.jsx("label",{htmlFor:"type-single-course",className:"ml-2 text-sm text-gray-700",children:""})]})]})]}),s.jsxs("div",{className:"ml-2",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"location-inperson",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:w.in_person,onChange:A=>{x(z=>({...z,in_person:A.target.checked})),b(A.target.checked)}}),s.jsx("label",{htmlFor:"location-inperson",className:"ml-2 text-sm text-gray-700",children:""})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"location-online",className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:w.online,onChange:A=>x(z=>({...z,online:A.target.checked}))}),s.jsx("label",{htmlFor:"location-online",className:"ml-2 text-sm text-gray-700",children:""})]})]})]})]})]}),w.in_person&&s.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left mb-2",onClick:()=>I("area"),children:[s.jsx("h4",{className:"font-medium text-gray-800",children:""}),R.area?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),R.area&&s.jsx("div",{className:"space-y-2 mt-2 ml-2",children:E.map(A=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`area-${A}`,className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:y.includes(A),onChange:z=>{z.target.checked?g(J=>[...J,A]):g(J=>J.filter(ne=>ne!==A))}}),s.jsx("label",{htmlFor:`area-${A}`,className:"ml-2 text-sm text-gray-700",children:A})]},A))})]}),s.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left mb-2",onClick:()=>I("date"),children:[s.jsx("h4",{className:"font-medium text-gray-800",children:""}),R.date?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),R.date&&s.jsx("div",{className:"mt-2 ml-2",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs(re,{variant:"outline",size:"sm",onClick:()=>j(!k),className:"w-full justify-start",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),_!=null&&_.from&&(_!=null&&_.to)?`${kh(_.from,"yyyy/MM/dd",{locale:Hl})} - ${kh(_.to,"yyyy/MM/dd",{locale:Hl})}`:""]}),k&&s.jsxs("div",{className:"p-2 border rounded-md bg-white shadow-md",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:""}),s.jsx(qS,{mode:"range",selected:_,onSelect:C,locale:Hl,numberOfMonths:1,className:"border-none shadow-none",styles:{caption:{color:"var(--primary)"},day_selected:{backgroundColor:"var(--primary)"},day_today:{color:"var(--primary)"}}}),s.jsxs("div",{className:"flex justify-end mt-2",children:[s.jsx(re,{variant:"outline",size:"sm",onClick:()=>{C(void 0),j(!1)},className:"mr-2",children:""}),s.jsx(re,{variant:"default",size:"sm",onClick:()=>j(!1),children:""})]})]})]})})]}),s.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left mb-2",onClick:()=>I("price"),children:[s.jsx("h4",{className:"font-medium text-gray-800",children:""}),R.price?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),R.price&&s.jsxs("div",{className:"space-y-4 mt-2 ml-2",children:[d.single_course&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700",children:""}),s.jsx("button",{className:"text-xs text-primary hover:underline",onClick:()=>W("single_course"),children:" / "})]}),s.jsx("div",{className:"space-y-2",children:F.map(A=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`price-${A.id}`,className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:S.single_course.includes(A.id),onChange:z=>{z.target.checked?U(J=>({...J,single_course:[...J.single_course,A.id]})):U(J=>({...J,single_course:J.single_course.filter(ne=>ne!==A.id)}))}}),s.jsx("label",{htmlFor:`price-${A.id}`,className:"ml-2 text-sm text-gray-700",children:A.label})]},A.id))})]}),d.monthly&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700",children:""}),s.jsx("button",{className:"text-xs text-primary hover:underline",onClick:()=>W("monthly"),children:" / "})]}),s.jsx("div",{className:"space-y-2",children:T.map(A=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`monthly-price-${A.id}`,className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:S.monthly.includes(A.id),onChange:z=>{z.target.checked?U(J=>({...J,monthly:[...J.monthly,A.id]})):U(J=>({...J,monthly:J.monthly.filter(ne=>ne!==A.id)}))}}),s.jsx("label",{htmlFor:`monthly-price-${A.id}`,className:"ml-2 text-sm text-gray-700",children:A.label})]},A.id))})]})]})]}),s.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left mb-2",onClick:()=>I("category"),children:[s.jsx("h4",{className:"font-medium text-gray-800",children:""}),R.category?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),R.category&&s.jsx("div",{className:"space-y-2 mt-2 ml-2",children:ja.map(A=>{var z;return s.jsxs("div",{children:[s.jsxs("button",{className:"flex items-center justify-between w-full text-left py-1",onClick:()=>{l(o===A.id?null:A.id),L(A.id)},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",id:`category-${A.id}`,name:"category",checked:o===A.id,onChange:()=>l(A.id),className:"h-4 w-4 text-primary border-gray-300 focus:ring-primary",onClick:J=>J.stopPropagation()}),s.jsxs("label",{htmlFor:`category-${A.id}`,className:"ml-2 text-sm text-gray-700 flex items-center",children:[s.jsx("span",{className:"mr-1",children:A.icon}),A.name]})]}),u[A.id]?s.jsx(Vr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Vs,{className:"h-4 w-4 text-gray-400"})]}),u[A.id]&&s.jsx("div",{className:"ml-6 space-y-1 mt-1 mb-2",children:(z=ds[A.id])==null?void 0:z.map(J=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`subcat-${A.id}-${J.id}`,className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary",checked:m.includes(J.id),onChange:ne=>{ne.target.checked?h(fe=>[...fe,J.id]):h(fe=>fe.filter(ke=>ke!==J.id))}}),s.jsx("label",{htmlFor:`subcat-${A.id}-${J.id}`,className:"ml-2 text-xs text-gray-600",children:J.name})]},`${A.id}-${J.id}`))})]},A.id)})})]}),s.jsx("div",{className:"border-t border-gray-100 pt-4",children:s.jsx(re,{variant:"outline",size:"sm",onClick:()=>{i(""),l(null),h([]),f({monthly:!0,single_course:!0}),x({in_person:!0,online:!0}),g([]),C(void 0),U({monthly:[],single_course:[]})},className:"w-full",children:""})})]})}),s.jsxs("div",{className:"col-span-12 md:col-span-9 lg:col-span-9",children:[s.jsxs("div",{className:"bg-white p-3 mb-4 border border-gray-100 rounded-lg shadow-sm flex flex-wrap justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:[ae.length>0?s.jsxs("span",{children:[Q+1,"",Math.min(de,ae.length),"",ae.length,""]}):s.jsx("span",{children:"0"}),d.single_course&&!d.monthly&&s.jsx("span",{className:"ml-3",children:""}),w.in_person&&!w.online&&s.jsx("span",{className:"ml-3",children:""})]}),s.jsx("div",{className:"flex mt-2 md:mt-0",children:s.jsxs("div",{className:"flex rounded-md overflow-hidden border border-gray-200",children:[s.jsx("button",{className:`px-3 py-1.5 text-sm ${H==="standard"?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>X("standard"),children:""}),s.jsx("button",{className:`px-3 py-1.5 text-sm border-l border-gray-200 ${H==="rating"?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>X("rating"),children:""}),s.jsx("button",{className:`px-3 py-1.5 text-sm border-l border-gray-200 ${H==="reviews"?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>X("reviews"),children:""}),s.jsx("button",{className:`px-3 py-1.5 text-sm border-l border-gray-200 ${H==="price_asc"?"bg-primary text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>X("price_asc"),children:""})]})})]}),r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"text-lg text-foreground/70 animate-pulse",children:"..."})]}):ae.length>0?s.jsxs("div",{className:"space-y-6",children:[ye.map(A=>{var z,J,ne,fe,ke,me,Ie,st,He,sr,qs;return s.jsx("div",{className:`bg-white rounded-lg shadow-sm border ${A.is_featured?"border-yellow-400 ring-1 ring-yellow-400":"border-gray-100"} hover:shadow-md transition-shadow`,children:s.jsxs("div",{className:"flex flex-col md:flex-row p-4",children:[s.jsx("div",{className:"md:w-1/4 mb-4 md:mb-0",children:s.jsxs("div",{className:"aspect-square overflow-hidden rounded-lg relative",children:[s.jsx("img",{src:((z=A.lesson_image_url)==null?void 0:z[0])||"https://placehold.jp/FF7F50/ffffff/400x400.png?text=",alt:A.lesson_title,className:"w-full h-full object-cover"}),A.is_featured&&s.jsx("div",{className:"absolute top-2 left-0 bg-gradient-to-r from-yellow-500 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-r-md shadow-md",children:""})]})}),s.jsxs("div",{className:"md:w-3/4 md:pl-6 flex flex-col",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900",children:A.lesson_title}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s.jsxs("span",{className:"inline-block",children:["",A.classroom_city||""]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-1 text-xs font-medium text-blue-800",children:A.category_name||((J=ja.find(Lt=>Lt.id===A.category))==null?void 0:J.name)||A.category||""}),A.sub_category&&s.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-2.5 py-1 text-xs font-medium text-purple-800",children:(()=>{const Lt=A.sub_category.split(",")[0],Je=ja.find(Yt=>Yt.id===A.category);if(Je&&ds[Je.id]){const Yt=ds[Je.id].find(Bn=>Bn.id===Lt);return Yt?Yt.name:Lt}return Lt})()}),s.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${A.lesson_type==="monthly"?"bg-green-100 text-green-800":A.lesson_type==="course"?"bg-orange-100 text-orange-800":"bg-indigo-100 text-indigo-800"}`,children:A.lesson_type==="monthly"?"":A.lesson_type==="course"?"":""}),s.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${A.location_type==="online"?"bg-teal-100 text-teal-800":A.location_type==="hybrid"?"bg-amber-100 text-amber-800":"bg-rose-100 text-rose-800"}`,children:A.location_type==="online"?"":A.location_type==="hybrid"?" / ":""})]}),s.jsxs("div",{className:"flex items-center mt-3",children:[s.jsxs("div",{className:"flex items-center",children:[Array(5).fill(0).map((Lt,Je)=>{var Yt;return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${Je<Math.round(((Yt=A.instructor_profiles)==null?void 0:Yt.average_rating)||5)?"text-yellow-500":"text-gray-300"}`,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},Je)}),s.jsx("span",{className:"ml-1 text-sm text-gray-700",children:((fe=(ne=A.instructor_profiles)==null?void 0:ne.average_rating)==null?void 0:fe.toFixed(1))||"5.0"}),s.jsx("span",{className:"mx-1 text-gray-400",children:"|"}),s.jsxs("span",{className:"text-sm text-gray-700",children:["",A.review_count||0,""]})]}),s.jsxs("div",{className:"ml-4 text-sm text-gray-700",children:[s.jsxs("span",{className:"font-semibold text-black",children:["",(ke=A.price)==null?void 0:ke.toLocaleString()]}),A.lesson_type==="monthly"&&s.jsx("span",{children:"/"})]})]}),s.jsxs("div",{className:"flex items-center mt-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 mr-2",children:(me=A.instructor_profiles)!=null&&me.profile_image_url?s.jsx("img",{src:A.instructor_profiles.profile_image_url,alt:A.instructor_profiles.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-primary/10 text-primary text-xs font-bold",children:((st=(Ie=A.instructor_profiles)==null?void 0:Ie.name)==null?void 0:st.charAt(0))||"?"})}),s.jsx("span",{className:"text-sm font-medium",children:((He=A.instructor_profiles)==null?void 0:He.name)||""}),((sr=A.instructor_profiles)==null?void 0:sr.is_verified)&&s.jsxs("span",{className:"ml-1 bg-blue-100 text-blue-800 text-xs px-1.5 rounded-full flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),""]})]}),s.jsx("p",{className:"text-sm text-gray-700 mt-3 line-clamp-2",children:A.lesson_catchphrase||((qs=A.lesson_description)==null?void 0:qs.substring(0,120))||""}),s.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center",children:[s.jsx("button",{onClick:()=>O(`/user/lessons/${A.id}`),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors text-sm font-medium",children:""}),s.jsxs("button",{onClick:Lt=>{Lt.stopPropagation(),D(A.id)},className:`flex items-center gap-1 px-4 py-2 rounded-md border ${N.includes(A.id)?"bg-pink-50 border-pink-200 text-pink-600":"bg-white border-gray-200 text-gray-700"} hover:bg-gray-50 transition-colors text-sm`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:N.includes(A.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),""]})]})]})]})},A.id)}),oe>1&&s.jsx("div",{className:"flex justify-center mt-8",children:s.jsxs("nav",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>le(Math.max(1,G-1)),disabled:G===1,className:`px-3 py-2 rounded ${G===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),Array.from({length:oe},(A,z)=>z===0||z===oe-1||z>=G-2&&z<=G+2?s.jsx("button",{onClick:()=>le(z+1),className:`px-4 py-2 rounded ${G===z+1?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:z+1},z+1):z===1&&G>3||z===oe-2&&G<oe-3?s.jsx("span",{className:"px-3 py-2",children:"..."},z+1):null),s.jsx("button",{onClick:()=>le(Math.min(oe,G+1)),disabled:G===oe,className:`px-3 py-2 rounded ${G===oe?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-50 rounded-lg py-12 px-4 mt-8",children:[s.jsx(yo,{className:"h-12 w-12 text-gray-300 mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),s.jsx("p",{className:"text-gray-500 text-center mt-2 mb-6",children:""}),s.jsx(re,{variant:"outline",onClick:()=>{i(""),l(null)},children:""})]})]})]})]})},YS=()=>{var P;const{id:e}=ti(),[t,r]=v.useState(null),[n,a]=v.useState(null),[i,o]=v.useState(!0),[l,u]=v.useState(!1),[c,m]=v.useState(null),[h,d]=v.useState({}),[f,w]=v.useState(0),[x,y]=v.useState([]),[g,p]=v.useState(null),[b,_]=v.useState(!0),C=async()=>{if(!(!e||!g))try{_(!0);const{data:N,error:$}=await M.from("lesson_slots").select("*").eq("lesson_id",e).eq("status","published").order("date_time_start",{ascending:!0});if($)throw $;if(y(N||[]),g&&N){const O=N.find(D=>D.id===g.id);O&&p(O)}}catch(N){console.error("Error fetching latest slot data:",N)}finally{_(!1)}};v.useEffect(()=>{(async()=>{try{o(!0),_(!0);const{data:{user:$}}=await M.auth.getUser();if(m($),!e)return;const{data:O,error:D}=await M.from("lessons").select("*").eq("id",e).single();if(D)throw D;r(O);const{data:E,error:F}=await M.from("lesson_slots").select("*").eq("lesson_id",e).eq("status","published").order("date_time_start",{ascending:!0});if(F)throw F;if(y(E||[]),E&&E.length>0&&p(E[0]),O!=null&&O.instructor_id){const{data:T,error:I}=await M.from("instructor_profiles").select("*").eq("id",O.instructor_id).single();if(I)throw I;const{count:L,error:W}=await M.from("reviews").select("*",{count:"exact",head:!0}).eq("instructor_id",O.instructor_id);W&&console.error("Error fetching review count:",W),a({...T,review_count:L||0})}if($){const{data:T}=await M.from("favorites").select("*").eq("user_id",$.id).eq("lesson_id",e).single();if(u(!!T),E&&E.length>0){const I={},{data:L}=await M.from("bookings").select("slot_id, status").eq("user_id",$.id).eq("lesson_id",e);L&&L.forEach(W=>{I[W.slot_id]=W.status}),d(I)}}}catch($){console.error("Error fetching lesson data:",$)}finally{o(!1),_(!1)}})()},[e]);const k=async()=>{if(!(!c||!e))try{l?await M.from("favorites").delete().eq("user_id",c.id).eq("lesson_id",e):await M.from("favorites").insert([{user_id:c.id,lesson_id:e}]),u(!l)}catch(N){console.error("Error updating favorites:",N)}},j=async()=>{var N,$,O;if(!(!c||!e||!g))try{console.log(":",c.id,e,g.id);const{data:D,error:E}=await M.from("lesson_slots").select("current_participants_count, capacity").eq("id",g.id).single();if(E)throw console.error(":",E),E;if(D&&D.current_participants_count>=D.capacity){alert(""),C();return}const{data:F,error:T}=await M.from("bookings").select("id, status").eq("user_id",c.id).eq("slot_id",g.id).maybeSingle();if(T)throw console.error(":",T),T;if(F)if(console.log(":",F),F.status==="cancelled"||F.status==="canceled"){console.log(":",F.id);const{error:G}=await M.from("bookings").update({status:"pending",payment_status:"pending",booking_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",F.id);if(G)throw console.error(":",G),G;d({...h,[g.id]:"pending"}),console.log(""),C(),alert(""),window.location.href="/user/bookings";return}else{d({...h,[g.id]:F.status}),alert("");return}const{data:I,error:L}=await M.from("user_profiles").select("id").eq("id",c.id).maybeSingle();if(L)throw console.error(":",L),L;if(!I){console.log("");const{error:G}=await M.from("user_profiles").insert([{id:c.id,email:c.email||"",name:((N=c.user_metadata)==null?void 0:N.name)||"",username:(($=c.user_metadata)==null?void 0:$.username)||((O=c.email)==null?void 0:O.split("@")[0])||"user"}]);if(G)throw console.error(":",G),G}console.log("");const{error:W}=await M.from("bookings").insert([{user_id:c.id,lesson_id:e,slot_id:g.id,booking_date:new Date().toISOString(),status:"pending",payment_status:"pending"}]);if(W)throw console.error(":",W),W;console.log("");const{data:q,error:H}=await M.from("chat_rooms").select("id").eq("user_id",c.id).eq("lesson_id",e).maybeSingle();if(H&&console.error(":",H),q)console.log(":",q.id);else{const{error:G}=await M.from("chat_rooms").insert([{lesson_id:e,instructor_id:t.instructor_id,user_id:c.id}]);G&&console.error(":",G)}d({...h,[g.id]:"pending"}),C(),console.log("");const{data:X,error:te}=await M.from("user_profiles").select("is_profile_completed").eq("id",c.id).single();if(!te&&X&&!X.is_profile_completed&&confirm("")){window.location.href="/user/profile";return}alert(""),window.location.href="/user/bookings"}catch(D){console.error("Error creating booking:",D),alert("")}},S=async()=>{if(!(!c||!e||!(t!=null&&t.instructor_id)))try{const{data:N,error:$}=await M.from("chat_rooms").select("id").eq("user_id",c.id).eq("lesson_id",e).maybeSingle();if($)throw console.error(":",$),$;if(N){window.location.href=`/user/chat/${N.id}`;return}const{data:O,error:D}=await M.from("chat_rooms").insert([{lesson_id:e,instructor_id:t.instructor_id,user_id:c.id}]).select().single();if(D)throw console.error(":",D),D;window.location.href=`/user/chat/${O.id}`}catch(N){console.error("Error handling chat:",N),alert("")}};if(i)return s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-gray-500 mb-6",children:""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:""})]})});const U={monthly:"",one_time:"",course:""},R={monthly:"bg-blue-100 text-blue-800",one_time:"bg-purple-100 text-purple-800",course:"bg-green-100 text-green-800"};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(ee,{to:"/user/lessons",className:"text-primary hover:underline flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),""]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border",children:[s.jsxs("div",{className:"relative h-[400px] bg-gray-200",children:[t.lesson_image_url&&t.lesson_image_url.length>0?s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("img",{src:t.lesson_image_url[f],alt:`${t.lesson_title} -  ${f+1}`,className:"w-full h-full object-cover"}),t.lesson_image_url.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>w(N=>N===0?t.lesson_image_url.length-1:N-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/30 text-white p-2 rounded-full hover:bg-black/50 focus:outline-none transition-colors","aria-label":"",children:s.jsx(zg,{size:24})}),s.jsx("button",{onClick:()=>w(N=>N===t.lesson_image_url.length-1?0:N+1),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/30 text-white p-2 rounded-full hover:bg-black/50 focus:outline-none transition-colors","aria-label":"",children:s.jsx(Dn,{size:24})}),s.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-bold",children:[f+1,"/",t.lesson_image_url.length]}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center items-center bg-black/30 py-2 px-4",children:s.jsx("div",{className:"flex space-x-2 items-center overflow-x-auto max-w-full",children:t.lesson_image_url.map((N,$)=>s.jsx("button",{onClick:()=>w($),className:`flex-shrink-0 transition-all duration-200 ${$===f?"border-2 border-white scale-110 z-10":"border border-white/50 opacity-70 hover:opacity-100"}`,"aria-label":` ${$+1} `,children:s.jsxs("div",{className:"relative w-16 h-12 overflow-hidden rounded",children:[s.jsx("img",{src:N,alt:` ${$+1}`,className:"w-full h-full object-cover"}),$===f&&s.jsx("div",{className:"absolute inset-0 bg-primary/20"})]})},$))})})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent pointer-events-none"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-6 text-white",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.lesson_type&&s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium shadow-sm ${R[t.lesson_type]||"bg-gray-100 text-gray-800"}`,children:U[t.lesson_type]||t.lesson_type}),s.jsx("span",{className:"bg-primary/10 text-white px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm",children:t.category}),t.sub_category&&s.jsx("span",{className:"bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm",children:t.sub_category})]}),s.jsx("h1",{className:"text-3xl font-bold mb-2 text-shadow",children:t.lesson_title}),t.lesson_catchphrase&&s.jsx("p",{className:"text-lg text-white/90 mb-2",children:t.lesson_catchphrase})]}),s.jsx("div",{className:"absolute top-4 right-4 flex space-x-2",children:s.jsx("button",{onClick:k,className:"p-3 bg-white/90 backdrop-blur-sm rounded-full shadow-md hover:bg-white transition-colors",children:s.jsx("svg",{className:`w-6 h-6 ${l?"text-red-500 fill-current":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})})]}),s.jsxs("div",{className:"p-8",children:[n&&s.jsxs("div",{className:"border-b pb-6 mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 overflow-hidden border-2 border-primary/20",children:n.profile_image_url?s.jsx("img",{src:n.profile_image_url,alt:n.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((P=n.name)==null?void 0:P.charAt(0))||"I"})}),n.is_verified&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white rounded-full p-1 border border-white",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:""}),s.jsxs("p",{className:"font-bold text-lg flex items-center",children:[n.name,n.average_rating>0&&s.jsxs("span",{className:"ml-2 flex items-center text-sm font-normal",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-0.5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),n.average_rating.toFixed(1),s.jsxs("span",{className:"text-gray-500 ml-1",children:["(",n.review_count||0,")"]})]})]}),n.business_name&&s.jsx("p",{className:"text-sm text-gray-600",children:n.business_name})]}),s.jsxs(ee,{to:`/user/instructors/${n.id}`,className:"bg-primary/10 text-primary hover:bg-primary/20 px-4 py-2 rounded-md text-sm font-medium flex items-center transition-colors",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),""]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row md:ml-auto gap-2 mt-2 md:mt-0",children:[n.instructor_specialties&&n.instructor_specialties.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.instructor_specialties.slice(0,3).map((N,$)=>s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium",children:N},$)),n.instructor_specialties.length>3&&s.jsxs("span",{className:"text-xs text-gray-500 px-1 py-1",children:["",n.instructor_specialties.length-3,""]})]}),s.jsxs("span",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm whitespace-nowrap",children:[": ",t.difficulty_level==="beginner"?"":t.difficulty_level==="intermediate"?"":t.difficulty_level==="advanced"?"":""]})]})]}),n.instructor_bio&&s.jsx("div",{className:"mt-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.jsx("p",{className:"line-clamp-2",children:n.instructor_bio})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),s.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),""]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_description})})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"m9 12 2 2 4-4"})]}),""]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_goals})})]}),t.lesson_outline&&s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),s.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),s.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),s.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),s.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),s.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),""]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.lesson_outline})})]}),t.materials_needed&&s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 text-primary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"})}),""]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:t.materials_needed})})]}),s.jsxs("section",{className:"mb-8 border-t pt-8",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),""]}),n&&s.jsxs("div",{className:"bg-white p-5 rounded-lg border mb-6",children:[n.instructor_bio&&s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:n.instructor_bio})}),n.instructor_specialties&&n.instructor_specialties.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:""}),s.jsx("div",{className:"flex flex-wrap gap-1",children:n.instructor_specialties.map((N,$)=>s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs font-medium",children:N},$))})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs(ee,{to:`/user/instructors/${n.id}`,className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:[s.jsx("span",{children:""}),s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5l7 7-7 7"})]})]})})]})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white p-6 rounded-xl border shadow-sm sticky top-6",children:[s.jsx("div",{className:"mb-6",children:t.lesson_type==="monthly"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),"",s.jsx("span",{className:"text-lg font-normal",children:"/"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:""})]}):t.lesson_type==="course"?s.jsx(s.Fragment,{children:t.discount_percentage?s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsxs("span",{className:"line-through text-gray-400 text-lg",children:[t.price.toLocaleString(),""]})," ",s.jsxs("span",{className:"text-3xl font-bold text-primary",children:[Math.round(t.price*(1-t.discount_percentage/100)).toLocaleString(),""]}),s.jsxs("span",{className:"ml-2 bg-red-100 text-red-600 px-2 py-0.5 rounded text-sm font-medium",children:[t.discount_percentage,"%OFF"]})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["",t.course_sessions||"?",""]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),""]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["",t.course_sessions||"?",""]})]})}):g?s.jsx(s.Fragment,{children:g.discount_percentage?s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsxs("span",{className:"line-through text-gray-400 text-lg",children:[g.price.toLocaleString(),""]})," ",s.jsxs("span",{className:"text-3xl font-bold text-primary",children:[Math.round(g.price*(1-g.discount_percentage/100)).toLocaleString(),""]}),s.jsxs("span",{className:"ml-2 bg-red-100 text-red-600 px-2 py-0.5 rounded text-sm font-medium",children:[g.discount_percentage,"%OFF"]})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"1"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[g.price.toLocaleString(),""]}),s.jsx("p",{className:"text-sm text-gray-500",children:"1"})]})}):s.jsx(s.Fragment,{children:t.discount_percentage?s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsxs("span",{className:"line-through text-gray-400 text-lg",children:[t.price.toLocaleString(),""]})," ",s.jsxs("span",{className:"text-3xl font-bold text-primary",children:[Math.round(t.price*(1-t.discount_percentage/100)).toLocaleString(),""]}),s.jsxs("span",{className:"ml-2 bg-red-100 text-red-600 px-2 py-0.5 rounded text-sm font-medium",children:[t.discount_percentage,"%OFF"]})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"1"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-3xl font-bold mb-1 text-primary",children:[t.price.toLocaleString(),""]}),s.jsx("p",{className:"text-sm text-gray-500",children:"1"})]})})}),x.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:""}),s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto pr-1",children:x.map(N=>s.jsxs("button",{className:`p-3 rounded-lg border ${(g==null?void 0:g.id)===N.id?"border-primary bg-primary/5 ring-1 ring-primary":"border-gray-200 hover:bg-gray-50"} text-left`,onClick:()=>p(N),children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:new Date(N.date_time_start).toLocaleDateString()}),s.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(N.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",new Date(N.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("div",{className:"text-right",children:N.discount_percentage>0?s.jsxs("div",{children:[s.jsxs("span",{className:"line-through text-gray-400 text-xs",children:[N.price.toLocaleString(),""]}),s.jsxs("p",{className:"text-primary font-bold text-sm",children:[Math.round(N.price*(1-N.discount_percentage/100)).toLocaleString(),""]})]}):s.jsxs("p",{className:"text-primary font-bold text-sm",children:[N.price.toLocaleString(),""]})})]}),s.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[s.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${N.current_participants_count>=N.capacity?"bg-red-100 text-red-800":N.current_participants_count>=N.capacity*.8?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[N.current_participants_count>=N.capacity?"":N.current_participants_count>=N.capacity*.8?"":"","(",N.current_participants_count,"/",N.capacity,")"]}),h[N.id]&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:h[N.id]==="pending"?"":h[N.id]==="confirmed"?"":h[N.id]==="cancelled"||h[N.id]==="canceled"?"":h[N.id]})]})]},N.id))})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[g&&s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:""}),s.jsxs("p",{className:"text-gray-700",children:[new Date(g.date_time_start).toLocaleDateString()," ",new Date(g.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",new Date(g.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Math.round((new Date(g.date_time_end).getTime()-new Date(g.date_time_start).getTime())/6e4),""]}),g.booking_deadline&&s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[": ",new Date(g.booking_deadline).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),s.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:""}),s.jsx("p",{className:"text-gray-700",children:t.location_type==="online"?"":t.location_type==="offline"?"":""}),s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:t.location_name}),(g==null?void 0:g.venue_details)&&s.jsx("p",{className:"text-sm text-gray-600 mt-1 bg-gray-50 p-2 rounded",children:g.venue_details})]})]}),g&&t.lesson_type!=="monthly"&&s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:""}),s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("p",{className:"text-gray-700",children:[g.current_participants_count," / ",g.capacity,""]}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${g.current_participants_count>=g.capacity?"bg-red-100 text-red-800":g.current_participants_count>=g.capacity*.8?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:g.current_participants_count>=g.capacity?"":g.current_participants_count>=g.capacity*.8?"":""})]}),t.lesson_type!=="monthly"&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:s.jsx("div",{className:`h-2 rounded-full ${g.current_participants_count/g.capacity>.8?"bg-yellow-500":"bg-primary"}`,style:{width:`${Math.min(100,g.current_participants_count/g.capacity*100)}%`}})})]})]}),(g==null?void 0:g.notes)&&s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-500 mt-0.5 mr-3 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),s.jsx("polyline",{points:"16 17 21 12 16 7"}),s.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:""}),s.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-line",children:g.notes})]})]})]}),s.jsxs("div",{className:"mt-6",children:[g&&h[g.id]?h[g.id]==="canceled"||h[g.id]==="cancelled"?s.jsxs("div",{children:[s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg text-center mb-4 border border-yellow-200",children:s.jsx("p",{className:"font-medium mb-1 text-yellow-700",children:""})}),s.jsx("button",{onClick:j,disabled:g.current_participants_count>=g.capacity,className:`w-full py-3 rounded-md font-medium transition-colors mb-3 ${g.current_participants_count>=g.capacity?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90"}`,children:g.current_participants_count>=g.capacity?"":""}),s.jsxs("button",{onClick:S,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),""]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center mb-4 border border-blue-200",children:[s.jsx("p",{className:"font-medium mb-1 text-blue-700",children:h[g.id]==="pending"?"":h[g.id]==="confirmed"?"":""}),s.jsxs("p",{className:"text-sm text-blue-600",children:["",s.jsx(ee,{to:"/user/bookings",className:"text-primary font-medium hover:underline",children:""})]})]}),s.jsxs("button",{onClick:S,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),""]})]}):s.jsxs("div",{children:[s.jsx("button",{onClick:j,disabled:!g||g.current_participants_count>=g.capacity,className:`w-full py-3 rounded-md font-medium transition-colors mb-3 ${g?g.current_participants_count>=g.capacity?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary text-white hover:bg-primary/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g?g.current_participants_count>=g.capacity?"":"":""}),s.jsxs("button",{onClick:S,className:"w-full py-3 rounded-md font-medium border border-primary text-primary hover:bg-primary/10 transition-colors flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),""]})]}),g&&g.current_participants_count>=g.capacity&&!h[g.id]&&s.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:""})]})]})})]})]})]})]})},VS=()=>{var h;const{id:e}=ti(),[t,r]=v.useState(null),[n,a]=v.useState([]),[i,o]=v.useState([]),[l,u]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{if(u(!0),!e)return;const{data:f,error:w}=await M.from("instructor_profiles").select("*").eq("id",e).single();if(w)throw w;const{count:x,error:y}=await M.from("reviews").select("*",{count:"exact",head:!0}).eq("instructor_id",e);if(y)throw y;const{data:g,error:p}=await M.from("reviews").select("rating").eq("instructor_id",e);if(p)throw p;const b=g.length>0?g.reduce((U,R)=>U+R.rating,0)/g.length:0;r({...f,review_count:x||0,average_rating:b});const{data:_,error:C}=await M.from("reviews").select(`
            *,
            user:user_profiles!reviews_user_id_fkey(name, profile_image_url)
          `).eq("instructor_id",e).order("created_at",{ascending:!1}).limit(10);if(C)throw C;a(_||[]);const k=new Date,{data:j,error:S}=await M.from("lessons").select("*").eq("instructor_id",e).eq("status","published").gte("date_time_start",k.toISOString()).order("date_time_start",{ascending:!0}).limit(6);if(S)throw S;o(j||[])}catch(f){console.error("Error fetching instructor data:",f)}finally{u(!1)}})()},[e]),l)return s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});if(!t)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-gray-500 mb-6",children:""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:""})]})});const c=n.reduce((d,f)=>(f.rating>=1&&f.rating<=5&&d[Math.floor(f.rating)-1]++,d),[0,0,0,0,0]),m=n.length;return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>window.history.back(),className:"text-primary hover:underline flex items-center",children:[s.jsx(zg,{className:"w-5 h-5 mr-1"}),""]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:[s.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[t.background_image_url?s.jsx("img",{src:t.background_image_url,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary/10 to-primary/30"}),s.jsx("div",{className:"absolute bottom-0 left-8 transform translate-y-1/2",children:s.jsx("div",{className:"w-32 h-32 rounded-full bg-white p-1 shadow-md",children:s.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 overflow-hidden",children:t.profile_image_url?s.jsx("img",{src:t.profile_image_url,alt:t.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-4xl",children:((h=t.name)==null?void 0:h.charAt(0))||"I"})})})})]}),s.jsxs("div",{className:"pt-20 pb-8 px-8",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mr-2",children:t.name}),t.is_verified&&s.jsxs("span",{className:"inline-flex items-center bg-blue-500 text-white rounded-full px-2 py-0.5 text-xs",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),""]})]}),t.business_name&&s.jsx("p",{className:"text-gray-600 mb-4",children:t.business_name}),t.average_rating>0&&s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(d=>s.jsx("svg",{className:`w-5 h-5 ${d<=Math.round(t.average_rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},d))}),s.jsx("p",{className:"ml-2 text-sm font-medium text-gray-900",children:t.average_rating.toFixed(1)}),s.jsx("span",{className:"w-1 h-1 mx-2 bg-gray-500 rounded-full"}),s.jsxs("p",{className:"text-sm font-medium text-gray-500",children:[t.review_count,""]})]}),t.instructor_bio&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:""}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_bio})]}),t.instructor_specialties&&t.instructor_specialties.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:""}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.instructor_specialties.map((d,f)=>s.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:d},f))})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6 border-b pb-2",children:""}),t.instructor_experience&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:""}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_experience})]}),t.instructor_education&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:""}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_education})]}),t.instructor_certifications&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:""}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.instructor_certifications})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6 border-b pb-2",children:""}),t.review_count>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-8",children:[s.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-center",children:[s.jsx("p",{className:"text-5xl font-bold text-gray-900",children:t.average_rating.toFixed(1)}),s.jsx("div",{className:"flex items-center mt-2",children:[1,2,3,4,5].map(d=>s.jsx("svg",{className:`w-5 h-5 ${d<=Math.round(t.average_rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},d))}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.review_count,""]})]}),s.jsx("div",{className:"flex-1",children:[5,4,3,2,1].map(d=>{const f=c[d-1],w=m>0?f/m*100:0;return s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 w-4",children:d}),s.jsx("svg",{className:"w-4 h-4 text-yellow-400 ml-1 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),s.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-2 bg-primary rounded-full",style:{width:`${w}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 ml-2 w-10",children:f})]},d)})})]}),s.jsx("div",{className:"space-y-6",children:n.map(d=>{var f,w,x,y;return s.jsx("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mr-3",children:s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden",children:(f=d.user)!=null&&f.profile_image_url?s.jsx("img",{src:d.user.profile_image_url,alt:d.user.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((x=(w=d.user)==null?void 0:w.name)==null?void 0:x.charAt(0))||"U"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("h3",{className:"text-sm font-medium",children:((y=d.user)==null?void 0:y.name)||""}),s.jsx("span",{className:"mx-2 text-gray-300",children:""}),s.jsx("time",{className:"text-xs text-gray-500",children:new Date(d.created_at).toLocaleDateString("ja-JP")})]}),s.jsx("div",{className:"flex items-center mb-2",children:[1,2,3,4,5].map(g=>s.jsx("svg",{className:`w-4 h-4 ${g<=d.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},g))}),s.jsx("p",{className:"text-gray-700",children:d.comment})]})]})},d.id)})})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:""})})]})})]}),s.jsx("div",{children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border sticky top-8",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:""}),i.length>0?s.jsxs("div",{className:"space-y-4",children:[i.map(d=>{var f;return s.jsx(ee,{to:`/user/lessons/${d.id}`,className:"block",children:s.jsxs("div",{className:"border rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"h-32 bg-gray-200 relative",children:[(f=d.lesson_image_url)!=null&&f[0]?s.jsx("img",{src:d.lesson_image_url[0],alt:d.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:""}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:s.jsx("p",{className:"text-white font-medium truncate",children:d.lesson_title})})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[s.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs",children:d.category}),d.difficulty_level&&s.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-full text-xs",children:d.difficulty_level==="beginner"?"":d.difficulty_level==="intermediate"?"":d.difficulty_level==="advanced"?"":""})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-gray-500",children:new Date(d.date_time_start).toLocaleDateString("ja-JP")}),s.jsxs("p",{className:"font-medium text-primary",children:[d.price.toLocaleString(),""]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[s.jsxs("span",{children:[d.current_participants_count,"/",d.capacity,""]}),s.jsx("div",{className:"ml-2 flex-1 h-1.5 bg-gray-200 rounded-full",children:s.jsx("div",{className:"h-1.5 bg-primary rounded-full",style:{width:`${d.current_participants_count/d.capacity*100}%`}})})]})]})]})},d.id)}),s.jsx(ee,{to:`/user/lessons?instructor=${e}`,className:"block text-center text-primary font-medium hover:underline py-2",children:""})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:""}),s.jsx(ee,{to:"/user/lessons",className:"block mt-4 text-primary hover:underline font-medium",children:""})]})]})})})]})]})},GS=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState("upcoming");v.useEffect(()=>{o()},[]);const o=async()=>{try{n(!0),console.log(" : ");const{data:{user:d}}=await M.auth.getUser();if(console.log(" :",d?`ID: ${d.id}`:""),!d){console.error(" : ");return}console.log(" ...");const{data:f,error:w}=await M.from("bookings").select(`
          *,
          slot:lesson_slots!slot_id(
            id,
            date_time_start,
            date_time_end
          ),
          lesson:lessons!lesson_id(
            id, 
            lesson_title, 
            price, 
            category, 
            lesson_image_url,
            instructor_id
          )
        `).eq("user_id",d.id).order("created_at",{ascending:!1});if(console.log(" :",f),!f||f.length===0){console.log(" "),t([]),n(!1);return}const x=f.map(C=>{var k;return(k=C.lesson)==null?void 0:k.instructor_id}).filter(C=>C);console.log(" ID:",x);const{data:y,error:g}=await M.from("instructor_profiles").select("id, name, profile_image_url").in("id",x.length>0?x:["no-id-found"]);if(g&&console.error(" :",g),console.log(" :",y),w)throw console.error(" :",w),w;console.log(" :",f?`${f.length}`:"");let p=f.map(C=>{const k=y==null?void 0:y.find(S=>{var U;return S.id===((U=C.lesson)==null?void 0:U.instructor_id)});console.log(` ID:${C.id} :`,k?`${k.name}(ID:${k.id})`:"");const j=C.status==="cancelled"?"canceled":C.status;return console.log(` ID:${C.id} : ${C.status}  ${j}`),{...C,status:j,instructor:k||null,chat_room:null}});console.log(" :",p),console.log(" ...");const{data:b,error:_}=await M.from("chat_rooms").select("*").eq("user_id",d.id);_?console.error(" :",_):b&&(console.log(" :",b?`${b.length}`:""),p=p.map(C=>{const k=b.find(j=>j.lesson_id===C.lesson_id);return console.log(` (${C.id}):`,k?`ID: ${k.id}`:""),{...C,chat_room:k||null}})),console.log(" :",p),t(p)}catch(d){console.error(" :",d)}finally{n(!1),console.log(" : ")}},l=d=>{switch(d){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"canceled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=d=>{switch(d){case"pending":return"bg-yellow-50 text-yellow-600";case"paid":return"bg-green-50 text-green-600";case"refunded":return"bg-red-50 text-red-600";default:return"bg-gray-50 text-gray-600"}},c=async(d,f)=>{try{console.log(" :",d);const{error:w}=await M.from("bookings").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",d);if(w)throw console.error(" :",w),w;console.log(" :",d);const{data:x,error:y}=await M.from("lesson_slots").select("current_participants_count").eq("id",f).single();y?console.error(" :",y):x&&(console.log(" :",x),t(g=>g.map(p=>{var b;return((b=p.slot)==null?void 0:b.id)===f?{...p,slot:{...p.slot,current_participants_count:x.current_participants_count}}:p}))),alert(""),await o()}catch(w){console.error("Error canceling booking:",w),alert("")}},m=d=>{if(!d)return!1;const f=new Date(d),w=new Date;return console.log(` : =${f.toISOString()}, =${w.toISOString()}, =${f>w}`),f>w};console.log("  - :",a),console.log(" :",e);const h=e.filter(d=>{var x,y;if(!d.slot||!d.slot.date_time_start)return console.log(" ID:",d.id,""),a==="upcoming";const f=m(d.slot.date_time_start),w=d.status==="canceled";if(console.log(` ID: ${d.id}:`),console.log(`    : ${((x=d.lesson)==null?void 0:x.lesson_title)||""}`),console.log(`    : ${(y=d.slot)!=null&&y.date_time_start?new Date(d.slot.date_time_start).toLocaleString():""}`),console.log(`    : ${d.status}, ?: ${f}, ?: ${w}`),a==="upcoming"){const g=f;return console.log(`    : ${g}`),g}else{const g=!f;return console.log(`    : ${g}`),g}});return console.log(` : ${h.length}`),r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),s.jsxs("div",{className:"flex border-b mb-6",children:[s.jsxs("button",{className:`pb-2 px-4 font-medium ${a==="upcoming"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{console.log(" : "),i("upcoming")},children:["",e.filter(d=>d.slot&&d.slot.date_time_start&&m(d.slot.date_time_start)).length>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full",children:e.filter(d=>d.slot&&d.slot.date_time_start&&m(d.slot.date_time_start)).length})]}),s.jsxs("button",{className:`pb-2 px-4 font-medium ${a==="past"?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{console.log(" : "),i("past")},children:["",e.filter(d=>d.slot&&d.slot.date_time_start&&!m(d.slot.date_time_start)).length>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.filter(d=>d.slot&&d.slot.date_time_start&&!m(d.slot.date_time_start)).length})]})]}),h.length>0?s.jsx("div",{className:"space-y-6",children:h.map(d=>{var f,w,x,y,g,p,b,_,C,k,j,S;return s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"md:flex",children:[s.jsxs("div",{className:"md:w-1/4 h-48 md:h-auto bg-gray-200 relative",children:[(f=d.lesson)!=null&&f.lesson_image_url&&d.lesson.lesson_image_url[0]?s.jsx("img",{src:d.lesson.lesson_image_url[0],alt:((w=d.lesson)==null?void 0:w.lesson_title)||"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:""})}),s.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white px-2 py-1 rounded text-xs",children:((x=d.lesson)==null?void 0:x.category)||""})]}),s.jsxs("div",{className:"p-6 md:w-3/4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-3",children:((y=d.lesson)==null?void 0:y.lesson_title)||""}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2",children:(g=d.instructor)!=null&&g.profile_image_url?s.jsx("img",{src:d.instructor.profile_image_url,alt:d.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((b=(p=d.instructor)==null?void 0:p.name)==null?void 0:b.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:((_=d.instructor)==null?void 0:_.name)||""})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("div",{className:"flex space-x-2 mb-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${l(d.status)}`,children:d.status==="pending"?"":d.status==="confirmed"?"":d.status==="canceled"?"":d.status==="completed"?"":d.status}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${u(d.payment_status)}`,children:d.payment_status==="pending"?"":d.payment_status==="paid"?"":""})]}),s.jsx("p",{className:"text-lg font-semibold mb-2",children:(C=d.lesson)!=null&&C.price?`${d.lesson.price.toLocaleString()}`:""})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),s.jsx("p",{className:"text-gray-700",children:(k=d.slot)!=null&&k.date_time_start?s.jsxs(s.Fragment,{children:[new Date(d.slot.date_time_start).toLocaleDateString()," ",new Date(d.slot.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),d.slot.date_time_end?s.jsxs(s.Fragment,{children:["  ",new Date(d.slot.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):null]}):""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),s.jsx("p",{className:"text-gray-700",children:new Date(d.booking_date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex flex-wrap justify-between mt-4",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{to:(j=d.lesson)!=null&&j.id?`/user/lessons/${d.lesson.id}`:`/user/lessons/${d.lesson_id}`,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors text-sm",children:""}),d.chat_room&&s.jsx(ee,{to:`/user/chat/${d.chat_room.id}`,className:"bg-primary/10 text-primary px-4 py-2 rounded-md hover:bg-primary/20 transition-colors text-sm",children:""})]}),a==="upcoming"&&(d.status==="canceled"?s.jsx(ee,{to:(S=d.lesson)!=null&&S.id?`/user/lessons/${d.lesson.id}`:`/user/lessons/${d.lesson_id}`,className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary/90 transition-colors text-sm",children:""}):d.status==="pending"||d.status==="confirmed"?s.jsx("button",{onClick:()=>c(d.id,d.slot.id),className:"text-red-600 hover:text-red-800 hover:underline text-sm",children:""}):null)]})]})]})]})},d.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:a==="upcoming"?"":""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:""})]})]})},JS=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(null);v.useEffect(()=>{(async()=>{try{const{data:{user:u}}=await M.auth.getUser();i(u)}catch(u){console.error("Error fetching current user:",u)}})()},[]),v.useEffect(()=>{if(!a)return;(async()=>{try{n(!0);const{data:c,error:m}=await M.from("chat_rooms").select(`
            *,
            lesson:lesson_id(lesson_title),
            instructor:instructor_id(
              id,
              profile_image_url,
              name
            )
          `).eq("user_id",a.id).order("created_at",{ascending:!1});if(m)throw m;const h=await Promise.all(c.map(async d=>{const{data:f,error:w}=await M.from("chat_messages").select("*").eq("chat_room_id",d.id).order("created_at",{ascending:!1}).limit(1);if(w)throw w;const{count:x,error:y}=await M.from("chat_messages").select("*",{count:"exact",head:!0}).eq("chat_room_id",d.id).eq("is_read",!1).neq("sender_id",a.id);if(y)throw y;return{...d,last_message:f[0]||null,unread_count:x||0}}));h.sort((d,f)=>{const w=d.last_message?new Date(d.last_message.created_at).getTime():new Date(d.created_at).getTime();return(f.last_message?new Date(f.last_message.created_at).getTime():new Date(f.created_at).getTime())-w}),t(h)}catch(c){console.error("Error fetching chat rooms:",c)}finally{n(!1)}})();const u=M.channel("chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},c=>{t(m=>m.map(h=>{if(h.id===c.new.chat_room_id){const d={message:c.new.message||"",created_at:c.new.created_at||"",is_read:!!c.new.is_read,sender_id:c.new.sender_id||""};return{...h,last_message:d,unread_count:c.new.sender_id!==(a==null?void 0:a.id)?h.unread_count+1:h.unread_count}}return h}))}).subscribe();return()=>{M.removeChannel(u)}},[a==null?void 0:a.id]);const o=l=>{const u=new Date(l),c=new Date,m=new Date(u.getFullYear(),u.getMonth(),u.getDate()),h=new Date(c.getFullYear(),c.getMonth(),c.getDate()),d=Math.floor((h.getTime()-m.getTime())/(24*60*60*1e3));return d===0?u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d===1?" "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d===2?" "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d<7?["","","","","","",""][u.getDay()]+"":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(u)};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(l=>{var u,c,m,h,d,f;return s.jsx("li",{children:s.jsx(ee,{to:`/user/chat/${l.id}`,className:"block hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex p-4",children:[s.jsx("div",{className:"mr-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden",children:(u=l.instructor)!=null&&u.profile_image_url?s.jsx("img",{src:l.instructor.profile_image_url,alt:l.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((m=(c=l.instructor)==null?void 0:c.name)==null?void 0:m.charAt(0))||"I"})}),l.unread_count>0&&s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs",children:l.unread_count})})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:(h=l.instructor)==null?void 0:h.name}),l.last_message&&s.jsx("p",{className:"text-xs text-gray-500",children:o(l.last_message.created_at)})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-1 truncate",children:(d=l.lesson)==null?void 0:d.lesson_title}),s.jsx("p",{className:`text-sm truncate ${l.unread_count>0&&((f=l.last_message)==null?void 0:f.sender_id)!==(a==null?void 0:a.id)?"font-medium text-gray-900":"text-gray-500"}`,children:l.last_message?(l.last_message.sender_id===(a==null?void 0:a.id)?": ":"")+l.last_message.message:""})]})]})})},l.id)})})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:""}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:""})]})]})},KS=()=>{var p,b,_,C,k;const{id:e}=ti(),[t,r]=v.useState([]),[n,a]=v.useState(""),[i,o]=v.useState(!0),[l,u]=v.useState(!1),[c,m]=v.useState(null),[h,d]=v.useState(null),f=v.useRef(null);v.useEffect(()=>{(async()=>{try{const{data:{user:S}}=await M.auth.getUser();d(S)}catch(S){console.error("Error fetching current user:",S)}})()},[]),v.useEffect(()=>{if(!e||!h)return;(async()=>{try{o(!0);const{data:R,error:P}=await M.from("chat_rooms").select(`
            *,
            lesson:lesson_id(id, lesson_title),
            instructor:instructor_profiles!instructor_id(id, name, profile_image_url)
          `).eq("id",e).eq("user_id",h.id).single();if(P)throw P;m(R);const{data:N,error:$}=await M.from("chat_messages").select("*").eq("chat_room_id",e).order("created_at",{ascending:!0});if($)throw $;if(r(N||[]),N&&N.length>0){const O=N.filter(D=>!D.is_read&&D.sender_id!==h.id);if(O.length>0){console.log(`Marking ${O.length} messages as read in room ${e}`);const D=O.map(F=>F.id),{error:E}=await M.from("chat_messages").update({is_read:!0}).in("id",D);E?console.error("Error marking messages as read:",E):console.log("Messages marked as read successfully")}}}catch(R){console.error("Error fetching chat room:",R)}finally{o(!1),setTimeout(()=>w(),100)}})();const S=`chat_room_${e}_${Date.now()}`,U=M.channel(S).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`chat_room_id=eq.${e}`},async R=>{const P=R.new;r(N=>[...N.filter(O=>!(O.id.startsWith("temp-")&&O.sender_id===P.sender_id)),P]),P.sender_id!==h.id&&await M.from("chat_messages").update({is_read:!0}).eq("id",P.id)}).subscribe();return()=>{M.removeChannel(U)}},[e,h==null?void 0:h.id]);const w=()=>{var j;(j=f.current)==null||j.scrollIntoView({behavior:"smooth"})},x=async j=>{if(j.preventDefault(),!(!n.trim()||!e||!h))try{u(!0);const S=n.trim(),U={id:`temp-${Date.now()}`,chat_room_id:e,sender_id:h.id,message:S,is_read:!1,created_at:new Date().toISOString()};r(P=>[...P,U]),a(""),setTimeout(()=>w(),100);const{error:R}=await M.from("chat_messages").insert({chat_room_id:e,sender_id:h.id,message:S,is_read:!1});if(R)throw R;window.location.reload()}catch(S){console.error("Error sending message:",S),r(U=>U.filter(R=>!R.id.startsWith("temp-")))}finally{u(!1)}},y=j=>{const S=new Date(j),U=new Date;if(S.toDateString()===U.toDateString())return` ${S.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`;{const P=new Date(U);return P.setDate(U.getDate()-1),S.toDateString()===P.toDateString()?` ${S.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`:`${S.toLocaleDateString("ja-JP")} ${S.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}`}},g=()=>{const j=[];let S="";return t.forEach(U=>{const R=new Date(U.created_at).toDateString();R!==S?(S=R,j.push({date:R,messages:[U]})):j[j.length-1].messages.push(U)}),j};return i?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):c?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs(ee,{to:"/user/chat",className:"text-primary hover:underline flex items-center mb-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),""]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden mr-4",children:(p=c.instructor)!=null&&p.profile_image_url?s.jsx("img",{src:c.instructor.profile_image_url,alt:c.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white",children:((_=(b=c.instructor)==null?void 0:b.name)==null?void 0:_.charAt(0))||"I"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold",children:(C=c.instructor)==null?void 0:C.name}),s.jsx("p",{className:"text-sm text-gray-600",children:(k=c.lesson)==null?void 0:k.lesson_title})]}),s.jsx("div",{className:"ml-auto",children:s.jsx(ee,{to:`/user/lessons/${c.lesson_id}`,className:"text-sm text-primary hover:underline",children:""})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"h-[60vh] overflow-y-auto p-4 bg-gray-50",children:[g().map((j,S)=>s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-gray-200 px-3 py-1 rounded-full text-xs text-gray-600",children:new Date(j.date).toLocaleDateString()})}),j.messages.map(U=>{var P,N,$;const R=U.sender_id===(h==null?void 0:h.id);return s.jsxs("div",{className:`mb-4 flex ${R?"justify-end":"justify-start"}`,children:[!R&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2 flex-shrink-0",children:(P=c.instructor)!=null&&P.profile_image_url?s.jsx("img",{src:c.instructor.profile_image_url,alt:c.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:(($=(N=c.instructor)==null?void 0:N.name)==null?void 0:$.charAt(0))||"I"})}),s.jsxs("div",{className:`max-w-[70%] ${R?"order-1":"order-2"}`,children:[s.jsx("div",{className:`px-4 py-2 rounded-lg ${R?"bg-primary text-white rounded-tr-none":"bg-gray-200 text-gray-800 rounded-tl-none"}`,children:s.jsx("p",{className:"whitespace-pre-wrap break-words",children:U.message})}),s.jsxs("p",{className:`text-xs text-gray-500 mt-1 ${R?"text-right":"text-left"}`,children:[y(U.created_at),R&&s.jsx("span",{className:"ml-1",children:U.is_read?"  ":""})]})]})]},U.id)})]},S)),s.jsx("div",{ref:f})]}),s.jsx("div",{className:"p-4 border-t",children:s.jsxs("form",{onSubmit:x,className:"flex",children:[s.jsx("input",{type:"text",value:n,onChange:j=>a(j.target.value),placeholder:"...",className:"flex-1 border rounded-l-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50",disabled:l}),s.jsx("button",{type:"submit",disabled:!n.trim()||l,className:`px-4 py-2 bg-primary text-white rounded-r-md ${!n.trim()||l?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:l?"...":""})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),s.jsx("p",{className:"text-gray-500 mb-6",children:""}),s.jsx(ee,{to:"/user/chat",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors",children:""})]})})},QS=()=>{const{toast:e}=$r(),[t,r]=v.useState(null),[n,a]=v.useState(!0),[i,o]=v.useState(!1),[l,u]=v.useState({name:"",email:"",username:"",birth_date:"",gender:"",phone_number:"",user_interests:[],user_goals:"",user_skill_level:"beginner",profile_image_url:""}),[c,m]=v.useState(""),[h,d]=v.useState("");v.useEffect(()=>{(async()=>{try{a(!0);const{data:{user:_}}=await M.auth.getUser();if(!_)return;const{data:C,error:k}=await M.from("user_profiles").select("*").eq("id",_.id).single();if(k)throw k;r(C),u({name:C.name||"",email:C.email||"",username:C.username||"",birth_date:C.birth_date||"",gender:C.gender||"",phone_number:C.phone_number||"",user_interests:C.user_interests||[],user_goals:C.user_goals||"",user_skill_level:C.user_skill_level||"beginner",profile_image_url:C.profile_image_url||""})}catch(_){console.error("Error fetching profile:",_)}finally{a(!1)}})(),localStorage.getItem("profileUpdated")==="true"&&(e({title:"",description:"",variant:"default"}),localStorage.removeItem("profileUpdated"))},[e]);const f=p=>{const{name:b,value:_}=p.target;u(C=>({...C,[b]:_}))},w=p=>{const{value:b,checked:_}=p.target;u(C=>({...C,user_interests:_?[...C.user_interests,b]:C.user_interests.filter(k=>k!==b)}))},x=async p=>{p.preventDefault();try{o(!0),m(""),d("");const{data:{user:b}}=await M.auth.getUser();if(!b)throw new Error("");const{error:_}=await M.from("user_profiles").update({name:l.name,birth_date:l.birth_date,gender:l.gender,phone_number:l.phone_number,user_interests:l.user_interests,user_goals:l.user_goals,user_skill_level:l.user_skill_level,is_profile_completed:!0,updated_at:new Date().toISOString()}).eq("id",b.id);if(_)throw _;r(C=>({...C,...l,is_profile_completed:!0,updated_at:new Date().toISOString()})),m(""),localStorage.setItem("profileUpdated","true"),window.location.reload()}catch(b){console.error("Error updating profile:",b),d(b.message||"")}finally{o(!1)}},y=async p=>{const b=p.target.files;if(!(!b||b.length===0))try{o(!0);const{data:{user:_}}=await M.auth.getUser();if(!_)throw new Error("");const C=b[0],k=C.name.split(".").pop(),S=`profile_images/${`${_.id}_${Date.now()}.${k}`}`,{error:U}=await M.storage.from("user_uploads").upload(S,C);if(U)throw U;const{data:{publicUrl:R}}=M.storage.from("user_uploads").getPublicUrl(S),{error:P}=await M.from("user_profiles").update({profile_image_url:R,updated_at:new Date().toISOString()}).eq("id",_.id);if(P)throw P;u(N=>({...N,profile_image_url:R})),r(N=>({...N,profile_image_url:R,updated_at:new Date().toISOString()})),m(""),e({title:"",description:"",variant:"default"})}catch(_){console.error("Error uploading image:",_),d(_.message||"")}finally{o(!1)}},g=async()=>{try{const{error:p}=await M.auth.signOut();if(p)throw p;window.location.href="/login"}catch(p){console.error("Error signing out:",p)}};return n?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),c&&s.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:c}),h&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:h}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:gap-12",children:[s.jsx("div",{className:"md:w-1/3 mb-8 md:mb-0",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4 relative w-32 h-32 mx-auto",children:[l.profile_image_url?s.jsx("img",{src:l.profile_image_url,alt:"",className:"w-full h-full object-cover rounded-full"}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-5xl",children:l.name?l.name.charAt(0).toUpperCase():"U"})}),s.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full cursor-pointer",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("input",{type:"file",id:"profile-image",className:"hidden",accept:"image/*",onChange:y,disabled:i})]})]}),s.jsx("h2",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)||""}),s.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email}),s.jsx("button",{onClick:g,className:"mt-6 text-red-600 hover:text-red-800 text-sm hover:underline",type:"button",children:""})]})}),s.jsx("div",{className:"md:w-2/3",children:s.jsxs("form",{onSubmit:x,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"email",name:"email",value:l.email,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"tel",name:"phone_number",value:l.phone_number,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"date",name:"birth_date",value:l.birth_date,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("select",{name:"gender",value:l.gender,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"male",children:""}),s.jsx("option",{value:"female",children:""}),s.jsx("option",{value:"other",children:""}),s.jsx("option",{value:"prefer_not_to_say",children:""})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("select",{name:"user_skill_level",value:l.user_skill_level,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:""}),s.jsx("option",{value:"intermediate",children:""}),s.jsx("option",{value:"advanced",children:""})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"user_goals",value:l.user_goals,onChange:f,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:""}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["","","","","","","","","","","",""].map(p=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`interest-${p}`,value:p,checked:l.user_interests.includes(p),onChange:w,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),s.jsx("label",{htmlFor:`interest-${p}`,className:"ml-2 text-sm text-gray-700",children:p})]},p))})]})]}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{type:"submit",disabled:i,className:`w-full md:w-auto px-6 py-3 bg-primary text-white rounded-md font-medium ${i?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:i?"...":""})})]})})]})})})]})},XS=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0);v.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:o}}=await M.auth.getUser();if(!o)return;const{data:l,error:u}=await M.from("favorites").select(`
            *,
            lesson:lesson_id(
              id, 
              lesson_title,  
              date_time_start, 
              date_time_end, 
              price, 
              category, 
              sub_category, 
              lesson_image_url,
              instructor_id,
              status
            )
          `).eq("user_id",o.id).order("created_at",{ascending:!1});if(u)throw u;if(!l||l.length===0){t([]);return}const c=l.map(w=>w.lesson.instructor_id),{data:m,error:h}=await M.from("instructor_profiles").select("id, name, profile_image_url").in("id",c);if(h)throw console.error("Error fetching instructor profiles:",h),h;const d=(m||[]).reduce((w,x)=>(w[x.id]=x,w),{}),f=l.map(w=>{const x=w.lesson.instructor_id;return{...w,instructor:d[x]||null}});t(f)}catch(o){console.error("Error fetching favorites:",o)}finally{n(!1)}})()},[]);const a=async i=>{try{const{error:o}=await M.from("favorites").delete().eq("id",i);if(o)throw o;t(e.filter(l=>l.id!==i))}catch(o){console.error("Error removing favorite:",o)}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>{var o,l,u,c;return s.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[i.lesson.lesson_image_url&&i.lesson.lesson_image_url[0]?s.jsx("img",{src:i.lesson.lesson_image_url[0],alt:i.lesson.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:""})}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[s.jsx("div",{className:"bg-primary text-white px-2 py-1 rounded text-xs",children:i.lesson.category}),i.lesson.status!=="published"&&s.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:i.lesson.status==="draft"?"":i.lesson.status==="canceled"?"":""})]}),s.jsx("button",{onClick:()=>a(i.id),className:"absolute top-2 left-2 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors",children:s.jsx("svg",{className:"w-4 h-4 text-red-500 fill-current",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:i.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 overflow-hidden mr-2",children:(o=i.instructor)!=null&&o.profile_image_url?s.jsx("img",{src:i.instructor.profile_image_url,alt:i.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((u=(l=i.instructor)==null?void 0:l.name)==null?void 0:u.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:(c=i.instructor)==null?void 0:c.name})]}),s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"text-sm text-gray-500",children:new Date(i.lesson.date_time_start).toLocaleDateString()}),s.jsxs("span",{className:"text-sm font-semibold",children:[i.lesson.price.toLocaleString(),""]})]}),s.jsx(ee,{to:`/user/lessons/${i.lesson.id}`,className:"block w-full bg-primary text-white py-2 rounded-md hover:bg-primary/90 transition-colors text-center",children:""})]})]},i.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:""})]})]})},ZS=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState({bookingId:"",lessonId:"",instructorId:"",rating:5,comment:""}),[o,l]=v.useState(!1),[u,c]=v.useState(!1);v.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:f}}=await M.auth.getUser();if(!f)return;const{data:w,error:x}=await M.from("bookings").select(`
            *,
            lesson:lesson_id(
              id, 
              lesson_title, 
              date_time_start, 
              date_time_end, 
              price, 
              category, 
              lesson_image_url,
              instructor_id
            ),
            instructor_profiles!inner(id, name, profile_image_url),
            reviews!left(id, rating, comment)
          `).eq("user_id",f.id).eq("status","completed").order("created_at",{ascending:!1});if(x)throw x;const y=w.map(g=>{var p;return{...g,instructor:g.instructor_profiles||null,review:((p=g.reviews)==null?void 0:p[0])||null}});t(y)}catch(f){console.error("Error fetching history:",f)}finally{n(!1)}})()},[]);const m=d=>{var f,w;i({bookingId:d.id,lessonId:d.lesson_id,instructorId:d.lesson.instructor_id,rating:((f=d.review)==null?void 0:f.rating)||5,comment:((w=d.review)==null?void 0:w.comment)||""}),l(!0)},h=async d=>{var f;d.preventDefault();try{c(!0);const{data:{user:w}}=await M.auth.getUser();if(!w)throw new Error("");const x=(f=e.find(y=>y.id===a.bookingId))==null?void 0:f.review;if(x){const{error:y}=await M.from("reviews").update({rating:a.rating,comment:a.comment,updated_at:new Date().toISOString()}).eq("id",x.id);if(y)throw y}else{const{error:y}=await M.from("reviews").insert({lesson_id:a.lessonId,user_id:w.id,instructor_id:a.instructorId,rating:a.rating,comment:a.comment});if(y)throw y}t(e.map(y=>{var g;return y.id===a.bookingId?{...y,review:{id:((g=y.review)==null?void 0:g.id)||"temp-id",rating:a.rating,comment:a.comment}}:y})),l(!1)}catch(w){console.error("Error submitting review:",w)}finally{c(!1)}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),e.length>0?s.jsx("div",{className:"space-y-6",children:e.map(d=>{var f,w,x,y;return s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsxs("div",{className:"md:flex",children:[s.jsxs("div",{className:"md:w-1/4 h-48 md:h-auto bg-gray-200 relative",children:[d.lesson.lesson_image_url&&d.lesson.lesson_image_url[0]?s.jsx("img",{src:d.lesson.lesson_image_url[0],alt:d.lesson.lesson_title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:""})}),s.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white px-2 py-1 rounded text-xs",children:d.lesson.category})]}),s.jsxs("div",{className:"p-6 md:w-3/4",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-3",children:d.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 overflow-hidden mr-2",children:(f=d.instructor)!=null&&f.profile_image_url?s.jsx("img",{src:d.instructor.profile_image_url,alt:d.instructor.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-white text-xs",children:((x=(w=d.instructor)==null?void 0:w.name)==null?void 0:x.charAt(0))||"I"})}),s.jsx("span",{className:"text-sm text-gray-700",children:(y=d.instructor)==null?void 0:y.name})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium mb-2",children:""}),s.jsxs("p",{className:"text-lg font-semibold mb-2",children:[d.lesson.price.toLocaleString(),""]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),s.jsxs("p",{className:"text-gray-700",children:[new Date(d.lesson.date_time_start).toLocaleDateString()," ",new Date(d.lesson.date_time_start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",new Date(d.lesson.date_time_end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),s.jsx("p",{className:"text-gray-700",children:new Date(d.booking_date).toLocaleDateString()})]})]}),d.review?s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("p",{className:"font-medium text-gray-800 mr-2",children:""}),s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(g=>s.jsx("svg",{className:`w-4 h-4 ${g<=d.review.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},g))})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:d.review.comment}),s.jsx("button",{onClick:()=>m(d),className:"text-primary hover:text-primary/80 text-sm mt-2",children:""})]}):s.jsx("button",{onClick:()=>m(d),className:"bg-primary/10 text-primary px-4 py-2 rounded-md hover:bg-primary/20 transition-colors text-sm mb-4",children:""}),s.jsx("div",{className:"flex",children:s.jsx(ee,{to:`/user/lessons/${d.lesson_id}`,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors text-sm",children:""})})]})]})]})},d.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:""}),s.jsx(ee,{to:"/user/lessons",className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/90 transition-colors inline-block",children:""})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 mx-4",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:""}),s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(d=>s.jsx("button",{type:"button",onClick:()=>i({...a,rating:d}),className:"focus:outline-none",children:s.jsx("svg",{className:`w-8 h-8 ${d<=a.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},d))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("textarea",{value:a.comment,onChange:d=>i({...a,comment:d.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:u,children:""}),s.jsx("button",{type:"submit",disabled:u,className:`px-4 py-2 bg-primary text-white rounded-md ${u?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:u?"...":""})]})]})]})})]})},e3=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),a=Ht();v.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:u}}=await M.auth.getUser();if(!u)return;const{data:c,error:m}=await M.from("notifications").select("*").eq("user_id",u.id).order("created_at",{ascending:!1});if(m)throw m;t(c||[]);const h=c.filter(d=>!d.is_read).map(d=>d.id);h.length>0&&(await M.from("notifications").update({is_read:!0}).in("id",h),t(c.map(d=>({...d,is_read:!0}))))}catch(u){console.error("Error fetching notifications:",u)}finally{n(!1)}})()},[]);const i=l=>{const u=new Date(l),c=new Date,m=new Date(u.getFullYear(),u.getMonth(),u.getDate()),h=new Date(c.getFullYear(),c.getMonth(),c.getDate()),d=Math.floor((h.getTime()-m.getTime())/(24*60*60*1e3));return d===0?u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d===1?" "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d===2?" "+u.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):d<7?["","","","","","",""][u.getDay()]+"":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(u)},o=l=>{if(l.notification_type&&l.target_id)switch(l.notification_type){case"booking":case"booking_confirmation":case"booking_cancellation":a("/user/bookings");break;case"chat_message":a(`/user/chat/${l.target_id}`);break;case"lesson_update":a(`/user/lessons/${l.target_id}`);break;case"favorite":a("/user/favorites");break;case"profile":a("/user/profile");break}};return r?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),e.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(l=>s.jsx("li",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>o(l),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 pt-1",children:s.jsx("div",{className:`w-3 h-3 rounded-full ${l.is_read?"bg-gray-300":"bg-primary"}`})}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("p",{className:`font-medium ${l.is_read?"text-gray-700":"text-gray-900"}`,children:l.title}),s.jsx("p",{className:"text-sm text-gray-500",children:i(l.created_at)})]}),s.jsx("p",{className:`mt-1 ${l.is_read?"text-gray-500":"text-gray-700"}`,children:l.message}),l.notification_type&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:l.notification_type==="booking"?"":l.notification_type==="booking_confirmation"?"":l.notification_type==="booking_cancellation"?"":l.notification_type==="chat_message"?"":l.notification_type==="lesson_update"?"":l.notification_type==="favorite"?"":l.notification_type==="profile"?"":""})})]})]})},l.id))})}):s.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-500",children:""})})]})},t3=()=>{const[e,t]=v.useState(null),[r,n]=v.useState(!0),[a,i]=v.useState(!1),[o,l]=v.useState(!1),[u,c]=v.useState(!0);v.useEffect(()=>{(async()=>{const{data:{user:w}}=await M.auth.getUser();if(w){const{data:x}=await M.from("instructor_profiles").select("*").eq("id",w.id).single();t(x),c((x==null?void 0:x.is_profile_completed)||!1);const y=new Date().toISOString(),{data:g}=await M.from("premium_subscriptions").select("*").eq("instructor_id",w.id).eq("status","active").lt("start_date",y).gt("end_date",y).maybeSingle();i(!!g)}n(!1)})();const f=()=>{l(window.scrollY>500)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]);const m=()=>{window.scrollTo({top:0,behavior:"smooth"})},h=[{label:"",href:"/instructor",icon:s.jsx(xu,{className:"w-5 h-5"})},{label:"",href:"/instructor/lessons",icon:s.jsx(Ug,{className:"w-5 h-5"})},{label:"",href:"/instructor/bookings",icon:s.jsx(lt,{className:"w-5 h-5"})},{label:"",href:"/instructor/chat",icon:s.jsx(vu,{className:"w-5 h-5"})},{label:"",href:"/instructor/premium",isPremium:a,icon:s.jsx(Nr,{className:"w-5 h-5"})}];return r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background",children:[s.jsxs("div",{className:"w-16 h-16 relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-primary/30 rounded-full"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-transparent border-t-primary rounded-full animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg text-foreground/70 animate-pulse",children:"..."})]}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsx(E0,{userType:"instructor",navItems:h,profileHref:"/instructor/profile",notificationsHref:"/instructor/notifications",user:e,isPremium:a}),a&&s.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-amber-50 dark:from-amber-900/20 dark:to-amber-800/10 border-b border-amber-200 dark:border-amber-800/30",children:s.jsxs("div",{className:"container mx-auto px-4 py-2 text-sm text-amber-800 dark:text-amber-300 flex items-center justify-center",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2 text-amber-500"}),s.jsx("span",{children:""})]})}),!u&&s.jsx("div",{className:"bg-gradient-to-r from-red-100 to-red-50 dark:from-red-900/20 dark:to-red-800/10 border-b border-red-200 dark:border-red-800/30",children:s.jsxs("div",{className:"container mx-auto px-4 py-3 text-sm text-red-800 dark:text-red-300 flex items-center justify-center",children:[s.jsx(Qc,{className:"h-4 w-4 mr-2 text-red-500"}),s.jsx("span",{children:""}),s.jsx("a",{href:"/instructor/profile",className:"ml-2 font-medium underline hover:text-red-600",children:""})]})}),s.jsx("main",{className:"flex-1",children:s.jsx("div",{className:"page-container pb-16",children:s.jsx(cg,{})})}),o&&s.jsx(re,{variant:"default",size:"icon",rounded:"full",className:"fixed bottom-6 right-6 z-50 shadow-lg",onClick:m,"aria-label":"",children:s.jsx(Vr,{className:"h-5 w-5"})}),s.jsx("footer",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white py-12 border-t border-gray-700/50",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 gradient-heading",children:""}),s.jsx("p",{className:"text-gray-300 mb-4",children:""}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Instagram",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})}),s.jsx("a",{href:"#",className:"text-white hover:text-primary transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("a",{href:"/instructor",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/lessons",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/bookings",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/profile",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/chat",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/premium",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/user",className:"text-gray-300 hover:text-primary transition-colors",children:""}),s.jsx("a",{href:"/instructor/notifications",className:"text-gray-300 hover:text-primary transition-colors",children:""})]}),s.jsxs("div",{className:"mt-6 bg-gradient-to-r from-primary/20 to-secondary/20 p-3 rounded-md",children:[s.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:""}),s.jsx("p",{className:"text-gray-300 text-sm",children:""}),s.jsx(re,{size:"sm",variant:"subtle",asChild:!0,className:"mt-2 text-xs",children:s.jsx("a",{href:"/instructor/premium",children:""})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),s.jsx("p",{className:"text-gray-300 mb-2",children:""}),s.jsx("a",{href:"mailto:instructor-support@kitasetsu-manabu.jp",className:"text-primary hover:text-primary/80 transition-colors font-medium",children:"instructor-support@kitasetsu-manabu.jp"}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:""}),s.jsxs("p",{className:"text-gray-300",children:["",s.jsx("br",{}),"",s.jsx("br",{}),"000-0000"]})]}),s.jsx(re,{variant:"outline",size:"sm",className:"mt-6 text-xs bg-white/10 hover:bg-white/20 border-white/20",asChild:!0,children:s.jsx("a",{href:"/instructor/faq",children:""})})]})]}),s.jsxs("div",{className:"border-t border-gray-700/50 mt-10 pt-8 text-center text-gray-400",children:[s.jsxs("p",{children:[" ",new Date().getFullYear(),"  All rights reserved."]}),s.jsxs("div",{className:"mt-2 text-sm space-x-4",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-primary",children:""})]})]})]})}),s.jsx(Su,{})]})},r3=()=>{const[e,t]=v.useState(null),[r,n]=v.useState({totalLessons:0,totalBookings:0,upcomingLessons:0,totalRating:0,reviewCount:0,pendingMessages:0}),[a,i]=v.useState([]),[o,l]=v.useState([]),[u,c]=v.useState(!0),[m,h]=v.useState(!1);return v.useEffect(()=>{(async()=>{c(!0);try{const{data:{user:f}}=await M.auth.getUser();if(!f)return;const{data:w}=await M.from("instructor_profiles").select("*").eq("id",f.id).single();w&&t(w);const x=new Date().toISOString(),{data:y}=await M.from("premium_subscriptions").select("*").eq("instructor_id",f.id).eq("status","active").lt("start_date",x).gt("end_date",x).maybeSingle();h(!!y);const{data:g}=await M.from("lessons").select(`
            *,
            lesson_slots(date_time_start, date_time_end, booking_deadline, status)
          `).eq("instructor_id",f.id).eq("status","published").order("created_at",{ascending:!1}).limit(10);if(g){const P=g.filter(N=>N.lesson_slots.some($=>$.status==="published"&&new Date($.date_time_start)>new Date(x)));P.sort((N,$)=>{const O=N.lesson_slots.find(E=>E.status==="published"&&new Date(E.date_time_start)>new Date(x)),D=$.lesson_slots.find(E=>E.status==="published"&&new Date(E.date_time_start)>new Date(x));return O?D?new Date(O.date_time_start).getTime()-new Date(D.date_time_start).getTime():-1:1}),i(P.slice(0,5))}const{data:p}=await M.from("bookings").select(`
            *,
            lesson:lessons(id, lesson_title, instructor_id, lesson_slots(date_time_start, date_time_end, status)),
            user:user_profiles(name, profile_image_url)
          `).order("created_at",{ascending:!1}).limit(20),b=p==null?void 0:p.filter(P=>{var N;return((N=P.lesson)==null?void 0:N.instructor_id)===f.id}).slice(0,5);b&&b.length>0&&l(b);const{count:_}=await M.from("lessons").select("*",{count:"exact"}).eq("instructor_id",f.id),{count:C}=await M.from("bookings").select("bookings.id",{count:"exact"}).eq("lesson.instructor_id",f.id).not("status","eq","canceled");let k=0;g&&(k=g.filter(P=>P.lesson_slots.some(N=>N.status==="published"&&new Date(N.date_time_start)>new Date(x))).length);const{data:j}=await M.from("reviews").select("rating").eq("instructor_id",f.id);let S=0,U=0;j&&j.length>0&&(U=j.length,S=j.reduce((P,N)=>P+N.rating,0)/U);const{count:R}=await M.from("chat_messages").select("*",{count:"exact"}).eq("chat_room.instructor_id",f.id).neq("sender_id",f.id).eq("is_read",!1);n({totalLessons:_||0,totalBookings:C||0,upcomingLessons:k||0,totalRating:S,reviewCount:U,pendingMessages:R||0})}catch(f){console.error("Error fetching instructor data:",f)}finally{c(!1)}})()},[]),u?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsx("section",{className:"bg-gradient-to-r from-primary/90 to-primary rounded-xl p-8 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold",children:["",(e==null?void 0:e.name)||""," "]}),s.jsx("p",{className:"mt-2 text-white/90",children:""})]}),s.jsxs("div",{className:"hidden sm:flex space-x-3",children:[s.jsx(re,{asChild:!0,variant:"outline",className:"bg-white/10 text-white border-white/20 hover:bg-white/20",children:s.jsx(ee,{to:"/instructor/lessons",children:""})}),s.jsx(re,{asChild:!0,className:"bg-white text-primary hover:bg-white/90",children:s.jsxs(ee,{to:"/instructor/lessons/create",children:[s.jsx(Bi,{className:"w-4 h-4 mr-2"}),""]})})]})]})}),!m&&s.jsx("section",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Nr,{className:"w-8 h-8 text-yellow-500 mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsx("p",{className:"text-gray-600",children:"0"})]})]}),s.jsx(re,{asChild:!0,children:s.jsx(ee,{to:"/instructor/premium",children:""})})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-3 mr-4",children:s.jsx(Wg,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:""}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.totalLessons})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-3 mr-4",children:s.jsx(fs,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:""}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.totalBookings})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-blue-100 p-3 mr-4",children:s.jsx(sb,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:""}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.upcomingLessons})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-yellow-100 p-3 mr-4",children:s.jsx(Ho,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:""}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r.reviewCount>0?`${r.totalRating.toFixed(1)} (${r.reviewCount})`:""})]})]})})]}),s.jsxs("div",{className:"flex sm:hidden space-x-3",children:[s.jsx(re,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsx(ee,{to:"/instructor/lessons",children:""})}),s.jsx(re,{asChild:!0,className:"flex-1",children:s.jsxs(ee,{to:"/instructor/lessons/create",children:[s.jsx(Bi,{className:"w-4 h-4 mr-2"}),""]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsxs(ee,{to:"/instructor/lessons",className:"text-primary text-sm flex items-center hover:underline",children:["",s.jsx(Dn,{className:"h-4 w-4 ml-1"})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:a.length>0?a.map(d=>s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs(ee,{to:`/instructor/lessons/${d.id}/edit`,className:"block",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:d.lesson_title}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-400"}),d.lesson_slots.find(f=>f.status==="published"&&new Date(f.date_time_start)>new Date)?Et(d.lesson_slots.find(f=>f.status==="published"&&new Date(f.date_time_start)>new Date).date_time_start):""]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(mt,{className:"h-4 w-4 mr-1 text-gray-400"}),d.lesson_slots.find(f=>f.status==="published"&&new Date(f.date_time_start)>new Date)?new Date(d.lesson_slots.find(f=>f.status==="published"&&new Date(f.date_time_start)>new Date).date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):""]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(fs,{className:"h-4 w-4 mr-1 text-gray-400"}),d.current_participants_count,"/",d.capacity]})]})]})},d.id)):s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("p",{children:""}),s.jsx(re,{asChild:!0,className:"mt-4",children:s.jsx(ee,{to:"/instructor/lessons/create",children:""})})]})})]}),s.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsxs(ee,{to:"/instructor/bookings",className:"text-primary text-sm flex items-center hover:underline",children:["",s.jsx(Dn,{className:"h-4 w-4 ml-1"})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:o.length>0?o.map(d=>{var f,w;return s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsx(ee,{to:"/instructor/bookings",className:"block",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:d.user.profile_image_url||"/placeholder-avatar.jpg",alt:d.user.name,className:"w-10 h-10 rounded-full mr-3 object-cover"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:d.user.name}),s.jsx("p",{className:"text-sm text-gray-600",children:((f=d.lesson)==null?void 0:f.lesson_title)||""})]}),s.jsxs("div",{className:"ml-auto text-right",children:[s.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${d.status==="confirmed"?"bg-green-100 text-green-800":d.status==="pending"?"bg-yellow-100 text-yellow-800":d.status==="canceled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:d.status==="confirmed"?"":d.status==="pending"?"":d.status==="canceled"?"":d.status==="completed"?"":d.status}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Et(d.created_at)}),((w=d.lesson)==null?void 0:w.lesson_slots)&&d.lesson.lesson_slots.length>0&&s.jsx("p",{className:"text-xs text-primary mt-1",children:new Date(d.lesson.lesson_slots[0].date_time_start).toLocaleDateString()})]})]})})},d.id)}):s.jsx("div",{className:"p-8 text-center text-gray-500",children:s.jsx("p",{children:""})})})]})]}),s.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-3 gap-5",children:[s.jsx(ee,{to:"/instructor/chat",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-blue-100 p-4 mr-4",children:s.jsx(vn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),r.pendingMessages>0&&s.jsxs("p",{className:"text-sm text-primary",children:[r.pendingMessages,""]})]})]})}),s.jsx(ee,{to:"/instructor/profile",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-4 mr-4",children:s.jsx(vo,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsx("p",{className:"text-sm text-gray-500",children:""})]})]})}),s.jsx(ee,{to:"/instructor/lessons/create",className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-4 mr-4",children:s.jsx(Bi,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsx("p",{className:"text-sm text-gray-500",children:""})]})]})})]})]})},s3=()=>{const{toast:e}=$r(),[t,r]=v.useState(null),[n,a]=v.useState(!0),[i,o]=v.useState(!1),[l,u]=v.useState({name:"",email:"",username:"",birth_date:"",gender:"",phone_number:"",instructor_specialties:[],instructor_bio:"",instructor_experience:"",instructor_education:"",instructor_certifications:"",instructor_availability:"",profile_image_url:""}),[c,m]=v.useState(""),[h,d]=v.useState("");v.useEffect(()=>{(async()=>{try{a(!0);const{data:{user:_}}=await M.auth.getUser();if(!_)return;const{data:C,error:k}=await M.from("instructor_profiles").select("*").eq("id",_.id).single();if(k&&k.code!=="PGRST116")throw k;const j=C||{};r(j),u({name:j.name||"",email:j.email||"",username:j.username||"",birth_date:j.birth_date||"",gender:j.gender||"",phone_number:j.phone_number||"",instructor_specialties:j.instructor_specialties||[],instructor_bio:j.instructor_bio||"",instructor_experience:j.instructor_experience||"",instructor_education:j.instructor_education||"",instructor_certifications:j.instructor_certifications||"",instructor_availability:j.instructor_availability||"",profile_image_url:j.profile_image_url||""})}catch(_){console.error("Error fetching profile:",_)}finally{a(!1)}})(),localStorage.getItem("profileUpdated")==="true"&&(e({title:"",description:"",variant:"default"}),localStorage.removeItem("profileUpdated"))},[e]);const f=p=>{const{name:b,value:_}=p.target;u(C=>({...C,[b]:_}))},w=p=>{const{value:b,checked:_}=p.target;u(C=>({...C,instructor_specialties:_?[...C.instructor_specialties,b]:C.instructor_specialties.filter(k=>k!==b)}))},x=async p=>{p.preventDefault();try{o(!0),m(""),d("");const{data:{user:b}}=await M.auth.getUser();if(!b)throw new Error("");const{error:_}=await M.from("instructor_profiles").select("id").eq("id",b.id).single();let C;if(_&&_.code==="PGRST116"){const k={id:b.id,name:l.name,email:l.email||b.email,username:l.username,birth_date:l.birth_date,gender:l.gender,phone_number:l.phone_number,instructor_specialties:l.instructor_specialties,instructor_bio:l.instructor_bio,instructor_experience:l.instructor_experience,instructor_education:l.instructor_education,instructor_certifications:l.instructor_certifications,instructor_availability:l.instructor_availability,profile_image_url:l.profile_image_url,is_profile_completed:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:j}=await M.from("instructor_profiles").insert(k);C=j}else{const k={name:l.name,email:l.email||b.email,username:l.username,birth_date:l.birth_date,gender:l.gender,phone_number:l.phone_number,instructor_specialties:l.instructor_specialties,instructor_bio:l.instructor_bio,instructor_experience:l.instructor_experience,instructor_education:l.instructor_education,instructor_certifications:l.instructor_certifications,instructor_availability:l.instructor_availability,is_profile_completed:!0,updated_at:new Date().toISOString()},{error:j}=await M.from("instructor_profiles").update(k).eq("id",b.id);C=j}if(C)throw C;m(""),localStorage.setItem("profileUpdated","true"),window.location.reload()}catch(b){console.error("Error updating profile:",b),d(b.message||"")}finally{o(!1)}},y=async p=>{const b=p.target.files;if(!(!b||b.length===0))try{o(!0);const{data:{user:_}}=await M.auth.getUser();if(!_)throw new Error("");const C=b[0],k=C.name.split(".").pop(),S=`instructor_profile_images/${`${_.id}_${Date.now()}.${k}`}`,{error:U}=await M.storage.from("user_uploads").upload(S,C);if(U)throw U;const{data:{publicUrl:R}}=M.storage.from("user_uploads").getPublicUrl(S),{error:P}=await M.from("instructor_profiles").select("id").eq("id",_.id).single();let N;if(P&&P.code==="PGRST116"){const $={id:_.id,name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||_.email,profile_image_url:R,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:O}=await M.from("instructor_profiles").insert($);N=O}else{const $={profile_image_url:R,updated_at:new Date().toISOString()},{error:O}=await M.from("instructor_profiles").update($).eq("id",_.id);N=O}if(N)throw N;u($=>({...$,profile_image_url:R})),r($=>({...$,profile_image_url:R,updated_at:new Date().toISOString()})),m(""),e({title:"",description:"",variant:"default"})}catch(_){console.error("Error uploading image:",_),d(_.message||"")}finally{o(!1)}},g=async()=>{try{const{error:p}=await M.auth.signOut();if(p)throw p;window.location.href="/login"}catch(p){console.error("Error signing out:",p)}};return n?s.jsx("div",{className:"flex justify-center items-center min-h-[70vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),c&&s.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:c}),h&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:h}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:gap-12",children:[s.jsx("div",{className:"md:w-1/3 mb-8 md:mb-0",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4 relative w-32 h-32 mx-auto",children:[l.profile_image_url?s.jsx("img",{src:l.profile_image_url,alt:"",className:"w-full h-full object-cover rounded-full"}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-5xl",children:l.name?l.name.charAt(0).toUpperCase():"I"})}),s.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full cursor-pointer",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("input",{type:"file",id:"profile-image",className:"hidden",accept:"image/*",onChange:y,disabled:i})]})]}),s.jsx("h2",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)||""}),s.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email}),s.jsx("button",{onClick:g,className:"mt-6 text-red-600 hover:text-red-800 text-sm hover:underline",type:"button",children:""})]})}),s.jsx("div",{className:"md:w-2/3",children:s.jsxs("form",{onSubmit:x,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,required:!0,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"email",name:"email",value:l.email,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"tel",name:"phone_number",value:l.phone_number,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"date",name:"birth_date",value:l.birth_date,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("select",{name:"gender",value:l.gender,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"male",children:""}),s.jsx("option",{value:"female",children:""}),s.jsx("option",{value:"other",children:""}),s.jsx("option",{value:"prefer_not_to_say",children:""})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"instructor_bio",value:l.instructor_bio,onChange:f,required:!0,rows:4,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"instructor_experience",value:l.instructor_experience,onChange:f,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"instructor_education",value:l.instructor_education,onChange:f,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"instructor_certifications",value:l.instructor_certifications,onChange:f,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"instructor_availability",value:l.instructor_availability,onChange:f,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"18"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["","","","","","","","","","","",""].map(p=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`specialty-${p}`,value:p,checked:l.instructor_specialties.includes(p),onChange:w,className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),s.jsx("label",{htmlFor:`specialty-${p}`,className:"ml-2 text-sm text-gray-700",children:p})]},p))})]})]}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{type:"submit",disabled:i,className:`w-full md:w-auto px-6 py-3 bg-primary text-white rounded-md font-medium ${i?"opacity-50 cursor-not-allowed":"hover:bg-primary/90"} transition-colors`,children:i?"...":""})})]})})]})})})]})};var n3=Jh.useId||(()=>{}),a3=0;function ix(e){const[t,r]=v.useState(n3());return Ha(()=>{r(n=>n??String(a3++))},[e]),t?`radix-${t}`:""}var i3=v.createContext(void 0);function ox(e){const t=v.useContext(i3);return e||t||"ltr"}var Gl="rovingFocusGroup.onEntryFocus",o3={bubbles:!1,cancelable:!0},tl="RovingFocusGroup",[ud,lx,l3]=ug(tl),[c3,cx]=zo(tl,[l3]),[d3,u3]=c3(tl),dx=v.forwardRef((e,t)=>s.jsx(ud.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(ud.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(m3,{...e,ref:t})})}));dx.displayName=tl;var m3=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:m=!1,...h}=e,d=v.useRef(null),f=hs(t,d),w=ox(i),[x=null,y]=uu({prop:o,defaultProp:l,onChange:u}),[g,p]=v.useState(!1),b=fr(c),_=lx(r),C=v.useRef(!1),[k,j]=v.useState(0);return v.useEffect(()=>{const S=d.current;if(S)return S.addEventListener(Gl,b),()=>S.removeEventListener(Gl,b)},[b]),s.jsx(d3,{scope:r,orientation:n,dir:w,loop:a,currentTabStopId:x,onItemFocus:v.useCallback(S=>y(S),[y]),onItemShiftTab:v.useCallback(()=>p(!0),[]),onFocusableItemAdd:v.useCallback(()=>j(S=>S+1),[]),onFocusableItemRemove:v.useCallback(()=>j(S=>S-1),[]),children:s.jsx(dt.div,{tabIndex:g||k===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Ue(e.onMouseDown,()=>{C.current=!0}),onFocus:Ue(e.onFocus,S=>{const U=!C.current;if(S.target===S.currentTarget&&U&&!g){const R=new CustomEvent(Gl,o3);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const P=_().filter(E=>E.focusable),N=P.find(E=>E.active),$=P.find(E=>E.id===x),D=[N,$,...P].filter(Boolean).map(E=>E.ref.current);hx(D,m)}}C.current=!1}),onBlur:Ue(e.onBlur,()=>p(!1))})})}),ux="RovingFocusGroupItem",mx=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=e,l=ix(),u=i||l,c=u3(ux,r),m=c.currentTabStopId===u,h=lx(r),{onFocusableItemAdd:d,onFocusableItemRemove:f}=c;return v.useEffect(()=>{if(n)return d(),()=>f()},[n,d,f]),s.jsx(ud.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(dt.span,{tabIndex:m?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ue(e.onMouseDown,w=>{n?c.onItemFocus(u):w.preventDefault()}),onFocus:Ue(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:Ue(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){c.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=p3(w,c.orientation,c.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let g=h().filter(p=>p.focusable).map(p=>p.ref.current);if(x==="last")g.reverse();else if(x==="prev"||x==="next"){x==="prev"&&g.reverse();const p=g.indexOf(w.currentTarget);g=c.loop?g3(g,p+1):g.slice(p+1)}setTimeout(()=>hx(g))}})})})});mx.displayName=ux;var h3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function f3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function p3(e,t,r){const n=f3(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return h3[n]}function hx(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function g3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var x3=dx,y3=mx,Tu="Tabs",[v3,G3]=zo(Tu,[cx]),fx=cx(),[w3,Du]=v3(Tu),px=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:u="automatic",...c}=e,m=ox(l),[h,d]=uu({prop:n,onChange:a,defaultProp:i});return s.jsx(w3,{scope:r,baseId:ix(),value:h,onValueChange:d,orientation:o,dir:m,activationMode:u,children:s.jsx(dt.div,{dir:m,"data-orientation":o,...c,ref:t})})});px.displayName=Tu;var gx="TabsList",xx=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=Du(gx,r),o=fx(r);return s.jsx(x3,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(dt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});xx.displayName=gx;var yx="TabsTrigger",vx=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=Du(yx,r),l=fx(r),u=_x(o.baseId,n),c=jx(o.baseId,n),m=n===o.value;return s.jsx(y3,{asChild:!0,...l,focusable:!a,active:m,children:s.jsx(dt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":c,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Ue(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Ue(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Ue(e.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!a&&h&&o.onValueChange(n)})})})});vx.displayName=yx;var wx="TabsContent",bx=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=Du(wx,r),u=_x(l.baseId,n),c=jx(l.baseId,n),m=n===l.value,h=v.useRef(m);return v.useEffect(()=>{const d=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(d)},[]),s.jsx(du,{present:a||m,children:({present:d})=>s.jsx(dt.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!d,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:d&&i})})});bx.displayName=wx;function _x(e,t){return`${e}-trigger-${t}`}function jx(e,t){return`${e}-content-${t}`}var b3=px,Nx=xx,kx=vx,Sx=bx;const rl=b3,ii=v.forwardRef(({className:e,...t},r)=>s.jsx(Nx,{ref:r,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ii.displayName=Nx.displayName;const Dt=v.forwardRef(({className:e,...t},r)=>s.jsx(kx,{ref:r,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Dt.displayName=kx.displayName;const Pt=v.forwardRef(({className:e,...t},r)=>s.jsx(Sx,{ref:r,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Pt.displayName=Sx.displayName;const _3=()=>{const e=Ws(),[t,r]=v.useState([]),[n,a]=v.useState(!0),[i,o]=v.useState(""),[l,u]=v.useState("all"),[c,m]=v.useState("all"),[h,d]=v.useState([]),[f,w]=v.useState("published"),[x,y]=v.useState(null);v.useEffect(()=>{var U;const S=new URLSearchParams(window.location.search).get("message");if(S){y(S),window.history.replaceState({},document.title,window.location.pathname);const R=setTimeout(()=>{y(null)},5e3);return()=>clearTimeout(R)}else if((U=e.state)!=null&&U.message){y(e.state.message);const R=setTimeout(()=>{y(null)},5e3);return()=>clearTimeout(R)}},[e.state]),v.useEffect(()=>{g()},[f,c]);const g=async()=>{a(!0),console.log("Fetching lessons with tab:",f,"and status filter:",c);try{const{data:{user:j}}=await M.auth.getUser();if(!j){a(!1);return}let S=M.from("lessons").select(`
          *,
          lesson_slots(*)
        `).eq("instructor_id",j.id);if(f==="published"){c==="all"&&(S=S.not("status","eq","draft")),S=S.order("updated_at",{ascending:!1});const{data:N,error:$}=await S;if($){console.error("Error fetching lessons:",$);return}if(N){console.log("Found lessons with slots:",N.length,N);const O=N.filter(E=>E.lesson_slots&&E.lesson_slots.length>0);r(O);const D=[...new Set(O.map(E=>E.category))].filter(Boolean);d(D)}return}else if(f==="drafts"){const{data:N,error:$}=await M.from("lessons").select("*").eq("instructor_id",j.id).eq("status","draft").order("updated_at",{ascending:!1});if($){console.error("Error fetching lessons:",$);return}if(N){r(N);const O=[...new Set(N.map(D=>D.category))].filter(Boolean);d(O)}return}let U=M.from("lessons").select("*").eq("instructor_id",j.id);f!=="drafts"&&c!=="all"&&(U=U.eq("status",c));const{data:R,error:P}=await U;if(P){console.error("Error fetching lessons:",P);return}if(R){console.log("Found lessons:",R.length,R),r(R);const N=[...new Set(R.map($=>$.category))].filter(Boolean);d(N)}}catch(j){console.error("Error:",j)}finally{a(!1)}},p=t.filter(j=>{const S=j.lesson_title.toLowerCase().includes(i.toLowerCase())||j.lesson_description&&j.lesson_description.toLowerCase().includes(i.toLowerCase()),U=l==="all"||j.category===l;return S&&U});console.log("Filtered lessons:",p.length);const b=async(j,S)=>{try{const{data:U,error:R}=await M.from("lesson_slots").select("current_participants_count").eq("lesson_id",j);if(R){console.error("Error fetching lesson slots:",R),alert("");return}const P=U.reduce(($,O)=>$+(O.current_participants_count||0),0);if(S==="cancelled"&&P>0){alert("");return}const{error:N}=await M.from("lessons").update({status:S,updated_at:new Date().toISOString()}).eq("id",j);if(N){console.error("Error updating lesson status:",N),alert("");return}r(t.map($=>$.id===j?{...$,status:S}:$)),alert(S==="published"?"":S==="cancelled"?"":"")}catch(U){console.error("Error:",U),alert("")}},_=async(j,S,U)=>{try{if(S==="cancelled"&&U>0){alert("");return}const{error:R}=await M.from("lesson_slots").update({status:S,updated_at:new Date().toISOString()}).eq("id",j);if(R){console.error("Error updating slot status:",R),alert("");return}r(t.map(P=>{var N;return{...P,lesson_slots:(N=P.lesson_slots)==null?void 0:N.map($=>$.id===j?{...$,status:S}:$)}})),alert(S==="published"?"":S==="cancelled"?"":S==="completed"?"":"")}catch(R){console.error("Error:",R),alert("")}},C=async(j,S)=>{try{if(S===void 0){const{data:N,error:$}=await M.from("lesson_slots").select("current_participants_count").eq("lesson_id",j);if($){console.error("Error fetching lesson slots:",$),alert("");return}S=N.reduce((O,D)=>O+(D.current_participants_count||0),0)}if(S>0){alert("");return}if(!window.confirm(""))return;const{data:U,error:R}=await M.from("bookings").select("id").eq("lesson_id",j);if(R){console.error("Error checking bookings:",R),alert("");return}if(U&&U.length>0){alert("");return}const{error:P}=await M.from("lessons").delete().eq("id",j);if(P){console.error("Error deleting lesson:",P),alert("");return}r(t.filter(N=>N.id!==j)),alert("")}catch(U){console.error("Error:",U),alert("")}},k=async(j,S,U)=>{if(S>0){alert("");return}if(window.confirm(""))try{const{data:R,error:P}=await M.from("bookings").select("id").eq("slot_id",j);if(P){console.error("Error checking bookings:",P),alert("");return}if(R&&R.length>0){alert("");return}const{error:N}=await M.from("lesson_slots").delete().eq("id",j);if(N){console.error("Error deleting slot:",N),alert("");return}r(t.map($=>{var O;return $.id===U?{...$,lesson_slots:(O=$.lesson_slots)==null?void 0:O.filter(D=>D.id!==j)}:$})),alert("")}catch(R){console.error("Error:",R),alert("")}};return v.useEffect(()=>{var U;const S=new URLSearchParams(window.location.search).get("message");S?(wt({title:"",description:S,variant:"default"}),window.history.replaceState({},document.title,window.location.pathname)):(U=e.state)!=null&&U.message&&(wt({title:"",description:e.state.message,variant:"default"}),window.history.replaceState({},document.title,window.location.pathname))},[e.state,e.search]),s.jsxs("div",{className:"space-y-6",children:[x&&s.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 flex items-start",children:[s.jsx(yo,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5"}),s.jsx("div",{children:s.jsx("p",{className:"font-medium",children:x})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),s.jsx(re,{asChild:!0,children:s.jsxs(ee,{to:"/instructor/lessons/create",children:[s.jsx(Bi,{className:"w-4 h-4 mr-2"}),""]})})]}),s.jsxs(rl,{defaultValue:"published",onValueChange:w,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsxs(ii,{children:[s.jsx(Dt,{value:"published",children:""}),s.jsx(Dt,{value:"drafts",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"...",className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 w-full sm:w-auto",value:i,onChange:j=>o(j.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Bg,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsxs("select",{className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 appearance-none bg-white",value:l,onChange:j=>u(j.target.value),children:[s.jsx("option",{value:"all",children:""}),h.map(j=>s.jsx("option",{value:j,children:j},j))]})]}),f!=="drafts"&&s.jsxs("select",{className:"px-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 appearance-none bg-white",value:c,onChange:j=>m(j.target.value),children:[s.jsx("option",{value:"all",children:""}),s.jsx("option",{value:"published",children:""}),s.jsx("option",{value:"cancelled",children:""})]})]})]}),s.jsx(Pt,{value:"published",className:"space-y-4",children:n?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):p.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(j=>s.jsxs(s.Fragment,{children:[s.jsx("tr",{className:"bg-gray-50",children:s.jsx("td",{className:"px-6 py-4",colSpan:5,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ee,{to:`/instructor/lessons/${j.id}/edit`,className:"font-medium text-gray-900 hover:text-primary text-lg",children:j.lesson_title}),s.jsxs("p",{className:"text-sm text-gray-500",children:[j.category,"  : ",j.capacity,"  : ",j.price,""]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(ee,{to:`/instructor/lessons/${j.id}/edit`,className:"text-gray-400 hover:text-primary",children:s.jsx(nh,{className:"h-5 w-5"})}),j.status==="published"?s.jsx("button",{onClick:()=>b(j.id,"cancelled"),className:"text-gray-400 hover:text-red-500",title:"",children:s.jsx(rh,{className:"h-5 w-5"})}):j.status==="cancelled"||j.status==="draft"?s.jsx("button",{onClick:()=>b(j.id,"published"),className:"text-gray-400 hover:text-green-500",children:s.jsx(Ol,{className:"h-5 w-5"})}):null,s.jsx("button",{onClick:()=>C(j.id),className:"text-gray-400 hover:text-red-500",title:"",children:s.jsx($l,{className:"h-5 w-5"})})]})]})})},`lesson-${j.id}`),j.lesson_slots&&j.lesson_slots.length>0?j.lesson_slots.map(S=>{const U=new Date,R=new Date(S.date_time_start),P=new Date(S.date_time_end),N=P<U,$=R<=U&&U<=P;return s.jsxs("tr",{className:`hover:bg-gray-50 ${N?"bg-gray-50":$?"bg-green-50":"bg-blue-50"}`,children:[s.jsx("td",{className:"px-6 py-3"}),s.jsx("td",{className:"px-6 py-3",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium",children:Et(S.date_time_start)}),N&&s.jsx("span",{className:"ml-2 text-xs text-gray-500 bg-gray-200 px-1.5 py-0.5 rounded",children:""}),$&&s.jsx("span",{className:"ml-2 text-xs text-green-700 bg-green-200 px-1.5 py-0.5 rounded",children:""})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(mt,{className:"h-4 w-4 mr-1 text-gray-500"}),s.jsxs("span",{className:"text-sm",children:[R.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),"  ",P.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]})]})}),s.jsxs("td",{className:"px-6 py-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(fs,{className:"h-4 w-4 mr-1 text-gray-500"}),s.jsxs("span",{className:"text-sm font-medium",children:[S.current_participants_count||0,"/",S.capacity,""]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1 max-w-[100px]",children:s.jsx("div",{className:"bg-primary h-1.5 rounded-full",style:{width:`${(S.current_participants_count||0)/S.capacity*100}%`}})})]}),s.jsx("td",{className:"px-6 py-3",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                                    ${S.status==="published"?"bg-green-100 text-green-800":S.status==="draft"?"bg-gray-100 text-gray-800":S.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-200 text-gray-800"}`,children:S.status==="published"?"":S.status==="draft"?"":S.status==="cancelled"?"":""})}),s.jsx("td",{className:"px-6 py-3",children:s.jsxs("div",{className:"flex space-x-2",children:[S.status==="published"?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>_(S.id,"cancelled",S.current_participants_count||0),className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-gray-100",disabled:S.current_participants_count>0,title:S.current_participants_count>0?"":"",children:s.jsx(rh,{className:"h-4 w-4"})}),N&&s.jsx("button",{onClick:()=>_(S.id,"completed",S.current_participants_count||0),className:"text-gray-400 hover:text-green-500 p-1 rounded-full hover:bg-gray-100",title:"",children:s.jsx("span",{className:"text-xs font-medium",children:""})})]}):S.status==="cancelled"||S.status==="draft"?s.jsx("button",{onClick:()=>_(S.id,"published",S.current_participants_count||0),className:"text-gray-400 hover:text-green-500 p-1 rounded-full hover:bg-gray-100",title:"",children:s.jsx(Ol,{className:"h-4 w-4"})}):null,s.jsx("button",{onClick:()=>k(S.id,S.current_participants_count||0,j.id),className:`text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-gray-100 ${S.current_participants_count>0?"cursor-not-allowed opacity-50":""}`,title:S.current_participants_count>0?"":"",disabled:S.current_participants_count>0,children:s.jsx($l,{className:"h-4 w-4"})})]})})]},`slot-${S.id}`)}):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-3 text-center text-sm text-gray-500",children:""})},`no-slots-${j.id}`)]}))})]})})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:""}),s.jsx(re,{asChild:!0,children:s.jsx(ee,{to:"/instructor/lessons/create",children:""})})]})}),s.jsx(Pt,{value:"drafts",className:"space-y-4",children:n?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):p.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(j=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx(ee,{to:`/instructor/lessons/${j.id}/edit`,className:"font-medium text-gray-900 hover:text-primary",children:j.lesson_title||"()"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:j.category||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:Et(j.updated_at)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(ee,{to:`/instructor/lessons/${j.id}/edit`,className:"text-gray-400 hover:text-primary",children:s.jsx(nh,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>b(j.id,"published"),className:"text-gray-400 hover:text-green-500",children:s.jsx(Ol,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>C(j.id),className:"text-gray-400 hover:text-red-500",title:"",children:s.jsx($l,{className:"h-5 w-5"})})]})})]},j.id))})]})})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:""}),s.jsx(re,{asChild:!0,children:s.jsx(ee,{to:"/instructor/lessons/create",children:""})})]})})]})]})},Ze=[];for(let e=0;e<256;++e)Ze.push((e+256).toString(16).slice(1));function j3(e,t=0){return(Ze[e[t+0]]+Ze[e[t+1]]+Ze[e[t+2]]+Ze[e[t+3]]+"-"+Ze[e[t+4]]+Ze[e[t+5]]+"-"+Ze[e[t+6]]+Ze[e[t+7]]+"-"+Ze[e[t+8]]+Ze[e[t+9]]+"-"+Ze[e[t+10]]+Ze[e[t+11]]+Ze[e[t+12]]+Ze[e[t+13]]+Ze[e[t+14]]+Ze[e[t+15]]).toLowerCase()}let Jl;const N3=new Uint8Array(16);function k3(){if(!Jl){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Jl=crypto.getRandomValues.bind(crypto)}return Jl(N3)}const S3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rh={randomUUID:S3};function C3(e,t,r){var a;if(Rh.randomUUID&&!e)return Rh.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??k3();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,j3(n)}const E3=()=>{const e=Ht(),[t,r]=v.useState("basic"),[n,a]=v.useState(!1),[i,o]=v.useState(!1),[l,u]=v.useState([]),[c,m]=v.useState({lesson_title:"",lesson_catchphrase:"",lesson_description:"",category:"",sub_categories:[],difficulty_level:"beginner",price:"",duration:60,capacity:10,location_name:"",location_type:"online",classroom_area:"",lesson_type:"one_time",is_free_trial:!1,lesson_image_url:[],date_time_start:"",date_time_end:"",status:"draft",materials_needed:"",lesson_goals:"",lesson_outline:"",target_audience:[],monthly_plans:[],course_sessions:1,default_start_time:"10:00",deadline_days:"",deadline_time:"18:00",discount:"",selected_dates:[],selected_weekdays:[],calendarMonth:new Date().getMonth(),calendarYear:new Date().getFullYear(),notes:"",venue_details:"",lesson_slots:[]}),[h,d]=v.useState([]),[f,w]=v.useState({}),[x,y]=v.useState(null),[g,p]=v.useState({start_time:"",end_time:"",capacity:10,price:0,discount:0,deadline_days:1,deadline_time:"18:00",notes:"",venue_details:""});v.useEffect(()=>{if(c.monthly_plans.length===0&&m(P=>({...P,monthly_plans:[{name:"",price:"",frequency:"",lesson_duration:"60",description:""}]})),!c.date_time_start){const P=new Date,N=P.getFullYear(),$=String(P.getMonth()+1).padStart(2,"0"),O=String(P.getDate()).padStart(2,"0"),D=String(P.getHours()).padStart(2,"0"),E=String(P.getMinutes()).padStart(2,"0"),F=`${N}-${$}-${O}T${D}:${E}`;m(T=>({...T,date_time_start:F}))}},[]);const b=P=>{const{name:N,value:$}=P.target;if(N==="location_type"&&$==="in_person"){m({...c,[N]:"offline"});return}if(N==="date_time_start"&&$){const O=new Date($),D=c.duration,E=new Date(O.getTime()+D*60*1e3),F=E.getFullYear(),T=String(E.getMonth()+1).padStart(2,"0"),I=String(E.getDate()).padStart(2,"0"),L=String(E.getHours()).padStart(2,"0"),W=String(E.getMinutes()).padStart(2,"0"),q=`${F}-${T}-${I}T${L}:${W}`;m(H=>({...H,[N]:$,date_time_end:q}))}else if(N==="duration"&&c.date_time_start){const O=new Date(c.date_time_start),D=parseInt($,10),E=new Date(O.getTime()+D*60*1e3),F=E.getFullYear(),T=String(E.getMonth()+1).padStart(2,"0"),I=String(E.getDate()).padStart(2,"0"),L=String(E.getHours()).padStart(2,"0"),W=String(E.getMinutes()).padStart(2,"0"),q=`${F}-${T}-${I}T${L}:${W}`;m(H=>({...H,[N]:parseInt($,10),date_time_end:q}))}else m({...c,[N]:$});if(N==="category"){m(D=>({...D,[N]:$,sub_categories:[]}));const O=$;O&&ds[O]?d(ds[O]):d([])}f[N]&&w({...f,[N]:""})},_=P=>{m(N=>{const $=N.sub_categories.includes(P)?N.sub_categories.filter(O=>O!==P):[...N.sub_categories,P];return{...N,sub_categories:$}})},C=async P=>{const N=P.target.files;if(!(!N||N.length===0))try{o(!0);const{data:{user:$}}=await M.auth.getUser();if(!$)throw new Error("");await M.storage.createBucket("user_uploads",{public:!0});const O=N[0],D=O.name.split(".").pop(),F=`lesson_images/${`${$.id}_${Date.now()}.${D}`}`,{error:T}=await M.storage.from("user_uploads").upload(F,O);if(T)throw T;const{data:{publicUrl:I}}=M.storage.from("user_uploads").getPublicUrl(F);if(c.lesson_image_url.length>=3)throw new Error("3");const L=[...c.lesson_image_url,I];m({...c,lesson_image_url:L});const W=[...l,URL.createObjectURL(O)];u(W)}catch($){console.error("Error uploading image:",$),wt({variant:"destructive",title:"",description:$.message||""})}finally{o(!1)}},k=P=>{const N=[...c.lesson_image_url];N.splice(P,1);const $=[...l];$.splice(P,1),m({...c,lesson_image_url:N}),u($)},j=()=>{const P={};return c.lesson_title.trim()?c.lesson_title.length>25&&(P.lesson_title="25"):P.lesson_title="",c.lesson_catchphrase.trim()?c.lesson_catchphrase.length>50&&(P.lesson_catchphrase="50"):P.lesson_catchphrase="",c.lesson_description.trim()?c.lesson_description.length>500&&(P.lesson_description="500"):P.lesson_description="",c.category.trim()||(P.category=""),c.location_name.trim()||(P.location_name=""),(c.location_type==="in_person"||c.location_type==="hybrid")&&!c.classroom_area&&(P.classroom_area=""),c.lesson_type!=="monthly"?c.price.toString().trim()?(isNaN(Number(c.price))||Number(c.price)<0)&&(P.price=""):P.price="":c.monthly_plans.length===0?P.monthly_plans="1":c.monthly_plans.some($=>!$.name.trim()||!$.price.trim()||!$.frequency.trim()||!$.lesson_duration.trim())&&(P.monthly_plans=""),c.lesson_type!=="monthly"&&(c.duration<=0&&(P.duration=""),c.capacity<=0&&(P.capacity="")),c.lesson_type==="course"&&c.course_sessions<1&&(P.course_sessions=""),c.selected_dates&&c.selected_dates.length>0?(c.default_start_time||(P.default_start_time=""),c.duration<=0&&(P.duration=""),c.deadline_days!==""&&Number(c.deadline_days)<0&&(P.deadline_days=""),c.deadline_time||(P.deadline_time="")):(c.date_time_start.trim()||(P.date_time_start=""),c.date_time_end.trim()?new Date(c.date_time_end)<=new Date(c.date_time_start)&&(P.date_time_end=""):P.date_time_end=""),c.discount!==""&&(Number(c.discount)<0||Number(c.discount)>100)&&(P.discount="0100%"),c.price!==""&&Number(c.price)<0&&(P.price="0"),Number(c.capacity)<=0&&(P.capacity="1"),Number(c.duration)<=0&&(P.duration="1"),c.lesson_type==="course"&&Number(c.course_sessions)<=0&&(P.course_sessions="1"),w(P),Object.keys(P).length===0},S=async()=>{if(!c.lesson_title.trim()){w({lesson_title:""}),r("basic");return}await R("draft")},U=async()=>{if(!j()){f.lesson_title||f.lesson_description||f.category?r("basic"):f.location_name||f.classroom_area||f.price||f.duration||f.capacity||f.monthly_plans||f.course_sessions?r("details"):(f.date_time_start||f.date_time_end||f.default_start_time||f.deadline_days||f.deadline_time)&&r("schedule");return}await R("published")},R=async P=>{var N,$;try{a(!0);const{data:{user:O}}=await M.auth.getUser();if(!O)throw new Error("");const D=C3(),E=new Date().toISOString(),F=await _0(O.id),T=c.sub_categories.length>0&&((N=h.find(Y=>Y.id===c.sub_categories[0]))==null?void 0:N.name)||"";let I=c.location_type;I==="in_person"&&(I="offline");const L=c.lesson_type==="monthly"&&c.monthly_plans.length>0?c.monthly_plans.map(Y=>({name:Y.name||"",price:parseInt(Y.price,10)||0,frequency:Y.frequency||"",lesson_duration:parseInt(Y.lesson_duration,10)||60,description:Y.description||""})):null,W=c.lesson_type==="monthly"?0:Number(c.price)||0,q=Number(c.capacity)||10,H=Number(c.duration)||60,X=c.discount!==""?Math.max(0,Math.min(100,Number(c.discount)||0)):null,te={id:D,instructor_id:O.id,lesson_title:c.lesson_title,lesson_catchphrase:c.lesson_catchphrase||null,lesson_description:c.lesson_description||null,category:c.category,sub_category:T,difficulty_level:c.difficulty_level||"beginner",location_name:c.location_name,location_type:I,classroom_area:c.location_type==="in_person"||c.location_type==="hybrid"?c.classroom_area:null,lesson_type:c.lesson_type||"one_time",is_free_trial:c.is_free_trial||!1,lesson_image_url:c.lesson_image_url.length>0?c.lesson_image_url:null,status:P,materials_needed:c.materials_needed||null,lesson_goals:c.lesson_goals||null,lesson_outline:c.lesson_outline||null,target_audience:c.target_audience.length>0?c.target_audience:null,created_at:E,updated_at:E,price:W,discount_percentage:X,notes:c.notes||null,venue_details:c.venue_details||null,is_featured:F&&P==="published"};c.lesson_type==="monthly"?(te.monthly_plans=L,te.duration=null,te.capacity=null):(te.duration=Math.max(1,H),te.capacity=Math.max(1,q),te.monthly_plans=null,c.lesson_type==="course"?te.course_sessions=Math.max(1,Number(c.course_sessions)||1):te.course_sessions=null);const{error:G}=await M.from("lessons").insert(te);if(G)throw G;if((($=c.selected_dates)==null?void 0:$.length)>0){const Y=c.selected_dates.map(ae=>{const de=c.lesson_slots.findIndex(Je=>Je.date===ae),Q=de>=0?c.lesson_slots[de]:null,ye=(Q==null?void 0:Q.start_time)||c.default_start_time||"10:00",[oe,le,A]=ae.split("-").map(Je=>parseInt(Je,10)),[z,J]=ye.split(":").map(Je=>parseInt(Je,10)),ne=new Date(Date.UTC(oe,le-1,A,z,J,0));let fe;if(Q!=null&&Q.end_time){const[Je,Yt]=Q.end_time.split(":").map(Bn=>parseInt(Bn,10));fe=new Date(Date.UTC(oe,le-1,A,Je,Yt,0))}else fe=new Date(ne),fe.setUTCMinutes(fe.getUTCMinutes()+(c.duration||60));const ke=Math.max(0,Number((Q==null?void 0:Q.deadline_days)??c.deadline_days??1)),me=(Q==null?void 0:Q.deadline_time)||c.deadline_time||"18:00",[Ie,st]=me.split(":").map(Je=>parseInt(Je,10)),He=new Date(ne);He.setUTCDate(He.getUTCDate()-ke),He.setUTCHours(Ie,st,0,0);const sr=Math.max(1,((Q==null?void 0:Q.capacity)??c.capacity)||10),qs=c.is_free_trial?0:Math.max(0,((Q==null?void 0:Q.price)??Number(c.price))||0),Lt=((Q==null?void 0:Q.discount)??c.discount)!==""&&((Q==null?void 0:Q.discount)??c.discount)!==null?Math.max(0,Math.min(100,((Q==null?void 0:Q.discount)??c.discount)||0)):null;return{lesson_id:D,date_time_start:ne.toISOString(),date_time_end:fe.toISOString(),booking_deadline:He.toISOString(),capacity:sr,current_participants_count:0,price:qs,discount_percentage:Lt,venue_details:(Q==null?void 0:Q.venue_details)||c.venue_details||null,notes:(Q==null?void 0:Q.notes)||c.notes||null,status:"published",is_free_trial:c.is_free_trial||!1}}),{error:V}=await M.from("lesson_slots").insert(Y);if(V)throw V}wt({title:"",description:P==="published"?"":"",variant:"default"}),setTimeout(()=>{window.location.href=`/instructor/lessons?status=${P}&message=${encodeURIComponent(P==="published"?"":"")}`},300)}catch(O){console.error("Error saving lesson:",O),wt({variant:"destructive",title:"",description:": "+O.message})}finally{a(!1)}};return s.jsxs("div",{className:"pb-12",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-gray-500 hover:text-gray-700",children:[s.jsx(gu,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:""})]})}),s.jsxs("div",{className:"flex flex-col justify-between gap-4 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),s.jsxs("div",{className:"flex space-x-3 mt-2",children:[s.jsx(re,{variant:"outline",onClick:S,disabled:n,children:""}),s.jsx(re,{onClick:U,disabled:n||i,children:n?"...":""})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:s.jsxs(rl,{defaultValue:"basic",value:t,onValueChange:r,children:[s.jsx("div",{className:"border-b",children:s.jsxs(ii,{className:"w-full justify-start rounded-none bg-transparent border-b",children:[s.jsx(Dt,{value:"basic",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""}),s.jsx(Dt,{value:"details",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""}),s.jsx(Dt,{value:"schedule",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx(Pt,{value:"basic",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_title",value:c.lesson_title,onChange:b,maxLength:25,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.lesson_title?"border-red-500":""}`,placeholder:""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"25"}),f.lesson_title&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.lesson_title})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_catchphrase",value:c.lesson_catchphrase,onChange:b,maxLength:50,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.lesson_catchphrase?"border-red-500":""}`,placeholder:"3"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"50"}),f.lesson_catchphrase&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.lesson_catchphrase})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"lesson_description",value:c.lesson_description,onChange:b,rows:5,maxLength:500,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.lesson_description?"border-red-500":""}`,placeholder:""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"500"}),f.lesson_description&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.lesson_description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3"}),s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.lesson_image_url.length<3&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 w-full flex flex-col items-center justify-center ${i?"opacity-50":"hover:border-primary/50 hover:bg-gray-50"}`,children:s.jsxs("div",{className:"relative cursor-pointer",children:[s.jsx("input",{type:"file",id:"lesson-image",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:C,disabled:i}),s.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(Yg,{className:`h-8 w-8 ${i?"text-gray-400":"text-primary"}`}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-700",children:i?"...":""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF 5MB"})]})]})})}),c.lesson_image_url.length>0?c.lesson_image_url.map((P,N)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:l[N]||P,alt:` ${N+1}`,className:"w-full h-48 object-cover rounded-md"}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[s.jsxs("span",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[N+1,"/",c.lesson_image_url.length]}),s.jsx("button",{type:"button",onClick:()=>k(N),className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},N)):s.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 rounded-md border text-gray-400 col-span-3",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Hg,{className:"h-10 w-10"}),s.jsx("p",{className:"mt-2 text-sm",children:""})]})})]}),s.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[c.lesson_image_url.length,"/3 "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:c.category,onChange:b,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.category?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:""}),ja.map(P=>s.jsxs("option",{value:P.id,children:[P.icon," ",P.name]},P.id))]}),f.category&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.category})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.category?s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:h.map(P=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`subcategory-${P.id}`,checked:c.sub_categories.includes(P.id),onChange:()=>_(P.id),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsx("label",{htmlFor:`subcategory-${P.id}`,className:"ml-2 text-sm text-gray-700",children:P.name})]},P.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("select",{name:"difficulty_level",value:c.difficulty_level,onChange:b,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:""}),s.jsx("option",{value:"intermediate",children:""}),s.jsx("option",{value:"advanced",children:""}),s.jsx("option",{value:"all",children:""})]})]})]})}),s.jsx(Pt,{value:"details",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="online"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,location_type:"online"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"online",checked:c.location_type==="online",onChange:()=>m({...c,location_type:"online"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"ZoomGoogle MeetSkype"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="in_person"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,location_type:"in_person"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"in_person",checked:c.location_type==="in_person",onChange:()=>m({...c,location_type:"in_person"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.location_type==="hybrid"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,location_type:"hybrid"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"hybrid",checked:c.location_type==="hybrid",onChange:()=>m({...c,location_type:"hybrid"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]})]})]}),(c.location_type==="in_person"||c.location_type==="hybrid")&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"classroom_area",value:c.classroom_area||"",onChange:b,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.classroom_area?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),f.classroom_area&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.classroom_area})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yu,{className:"absolute left-3 top-3 text-gray-400 h-4 w-4"}),s.jsx("textarea",{name:"location_name",value:c.location_name,onChange:b,rows:3,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.location_name?"border-red-500":""}`,placeholder:c.location_type==="online"?"ZoomGoogle MeetSkypeURL":c.location_type==="in_person"?"":""})]}),f.location_name&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.location_name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="monthly"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,lesson_type:"monthly"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"monthly",checked:c.lesson_type==="monthly",onChange:()=>m({...c,lesson_type:"monthly"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""}),c.lesson_type==="monthly"&&s.jsx("div",{className:"mt-3 border-t pt-3",children:s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"checkbox",id:"is_free_trial",checked:c.is_free_trial,onChange:P=>m({...c,is_free_trial:P.target.checked}),className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("label",{htmlFor:"is_free_trial",className:"ml-2 text-sm text-gray-700",children:""})]})]})})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="one_time"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,lesson_type:"one_time"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"one_time",checked:c.lesson_type==="one_time",onChange:()=>m({...c,lesson_type:"one_time"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"11"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${c.lesson_type==="course"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>m({...c,lesson_type:"course"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"course",checked:c.lesson_type==="course",onChange:()=>m({...c,lesson_type:"course"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.lesson_type!=="monthly"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:c.price,onChange:b,min:"0",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.price?"border-red-500":""}`,placeholder:"3000"})]}),f.price&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.price}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:c.lesson_type==="course"?"":"1"})]}),c.lesson_type==="course"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("input",{type:"number",name:"course_sessions",value:c.course_sessions,onChange:b,min:"1",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.course_sessions?"border-red-500":""}`,placeholder:"5"}),s.jsx("span",{className:"ml-2",children:""})]}),f.course_sessions&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.course_sessions})]}),c.lesson_type==="monthly"&&s.jsxs("div",{className:"col-span-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),c.monthly_plans.length===0&&s.jsx("div",{className:"mb-4 p-4 border rounded-lg bg-yellow-50 text-yellow-800",children:s.jsx("p",{children:"1"})}),c.monthly_plans.map((P,N)=>s.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"text-base font-semibold",children:["",N+1]}),s.jsx("button",{type:"button",onClick:()=>{const $=[...c.monthly_plans];$.splice(N,1),m({...c,monthly_plans:$})},className:"px-3 py-1 bg-red-50 text-red-500 rounded-md hover:bg-red-100",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:P.price,onChange:$=>{const O=[...c.monthly_plans];O[N].price=$.target.value,O[N].name=`${N+1}`,m({...c,monthly_plans:O})},min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"10000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"text",value:P.frequency,onChange:$=>{const O=[...c.monthly_plans];O[N].frequency=$.target.value,m({...c,monthly_plans:O})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:P.lesson_duration,onChange:$=>{const O=[...c.monthly_plans];O[N].lesson_duration=$.target.value,m({...c,monthly_plans:O})},min:"15",step:"15",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"60"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:P.description,onChange:$=>{const O=[...c.monthly_plans];O[N].description=$.target.value,m({...c,monthly_plans:O})},rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"4"})]})]},N)),s.jsx("button",{type:"button",onClick:()=>{const P=c.monthly_plans.length+1;m({...c,monthly_plans:[...c.monthly_plans,{name:`${P}`,price:"",frequency:"",lesson_duration:"60",description:""}]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20",children:""}),f.monthly_plans&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:f.monthly_plans})]}),c.lesson_type!=="monthly"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"duration",value:c.duration,onChange:b,min:"15",step:"15",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.duration?"border-red-500":""}`,placeholder:"60"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"1"}),f.duration&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.duration})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"capacity",value:c.capacity,onChange:b,min:"1",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.capacity?"border-red-500":""}`,placeholder:"10"})]}),f.capacity&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.capacity})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"materials_needed",value:c.materials_needed,onChange:b,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"lesson_goals",value:c.lesson_goals,onChange:b,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"lesson_outline",value:c.lesson_outline,onChange:b,rows:5,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"1. 102. 203. 204. 10"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:""}),c.target_audience.map((P,N)=>s.jsxs("div",{className:"mb-2 flex items-center",children:[s.jsx("input",{type:"text",value:P,onChange:$=>{const O=[...c.target_audience];O[N]=$.target.value,m({...c,target_audience:O})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:`${N===0?"":N===1?"IT":""}`}),s.jsx("button",{type:"button",onClick:()=>{const $=[...c.target_audience];$.splice(N,1),m({...c,target_audience:$})},className:"ml-2 text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},N)),s.jsxs("button",{type:"button",onClick:()=>{m({...c,target_audience:[...c.target_audience,""]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),""]})]})]})}),s.jsx(Pt,{value:"schedule",children:s.jsxs("div",{className:"space-y-6",children:[c.lesson_type==="monthly"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsx("h3",{className:"font-medium text-blue-800",children:""})]}),s.jsxs("p",{className:"mt-2 ml-7 text-sm text-blue-700",children:["",c.is_free_trial?"0":""]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"time",name:"default_start_time",value:c.default_start_time||"10:00",onChange:P=>m({...c,default_start_time:P.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"duration",value:c.duration,onChange:b,min:"15",step:"15",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.duration?"border-red-500":""}`,placeholder:"60"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"capacity",value:c.capacity,onChange:b,min:"1",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.capacity?"border-red-500":""}`,placeholder:"10"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:c.is_free_trial?0:c.price,onChange:b,min:"0",disabled:c.is_free_trial,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${f.price?"border-red-500":""} ${c.is_free_trial?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"3000"})]}),c.is_free_trial&&s.jsx("p",{className:"mt-1 text-xs text-orange-500",children:"0"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"deadline_days",value:c.deadline_days??1,onChange:P=>m({...c,deadline_days:parseInt(P.target.value,10)||""}),min:"0",className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"time",name:"deadline_time",value:c.deadline_time||"18:00",onChange:P=>m({...c,deadline_time:P.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"%OFF"}),s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),s.jsx("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),s.jsx("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]}),s.jsx("input",{type:"number",name:"discount",value:c.discount??0,onChange:P=>m({...c,discount:parseInt(P.target.value,10)||""}),min:"0",max:"100",className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"10"})]})]}),s.jsxs("div",{className:"md:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("div",{className:"relative",children:s.jsx("textarea",{name:"notes",value:c.notes||"",onChange:b,rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(va,{className:"h-5 w-5 text-blue-500 mr-2"}),s.jsx("p",{className:"text-sm text-blue-700",children:"1"})]})}),s.jsxs("div",{className:"border rounded-lg",children:[s.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 border-b",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("select",{value:c.calendarMonth||new Date().getMonth(),onChange:P=>m({...c,calendarMonth:parseInt(P.target.value,10)}),className:"px-3 py-1 border rounded text-sm",children:Array.from({length:12},(P,N)=>s.jsx("option",{value:N,children:new Date(new Date().getFullYear(),N,1).toLocaleString("ja-JP",{month:"long"})},N))}),s.jsx("select",{value:c.calendarYear||new Date().getFullYear(),onChange:P=>m({...c,calendarYear:parseInt(P.target.value,10)}),className:"px-3 py-1 border rounded text-sm",children:Array.from({length:3},(P,N)=>s.jsxs("option",{value:new Date().getFullYear()+N,children:[new Date().getFullYear()+N,""]},N))})]}),s.jsx("div",{className:"flex items-center",children:s.jsx("button",{type:"button",onClick:()=>{var P;m({...c,selected_dates:((P=c.selected_dates)==null?void 0:P.filter(N=>{const $=new Date(N);return $.getMonth()!==(c.calendarMonth||new Date().getMonth())||$.getFullYear()!==(c.calendarYear||new Date().getFullYear())}))||[]})},className:"px-3 py-1 bg-red-50 text-red-600 rounded hover:bg-red-100 text-xs",children:""})})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"grid grid-cols-7 mb-2 text-center text-sm font-medium",children:[s.jsx("div",{className:"text-red-500",children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{className:"text-blue-500",children:""})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 aspect-square",children:(()=>{var T;const P=c.calendarYear||new Date().getFullYear(),N=c.calendarMonth||new Date().getMonth(),$=new Date(P,N,1),D=new Date(P,N+1,0).getDate(),E=$.getDay(),F=[];for(let I=0;I<E;I++)F.push(s.jsx("div",{className:"h-full rounded-md border border-transparent"},`empty-${I}`));for(let I=1;I<=D;I++){const L=new Date(P,N,I),W=L.getFullYear(),q=String(L.getMonth()+1).padStart(2,"0"),H=String(L.getDate()).padStart(2,"0"),X=`${W}-${q}-${H}`,te=(T=c.selected_dates)==null?void 0:T.includes(X),G=L<new Date(new Date().setHours(0,0,0,0));F.push(s.jsx("div",{onClick:()=>{if(!G){const Y=c.selected_dates||[];if(te){const V=Y.filter(ae=>ae!==X);m({...c,selected_dates:V})}else{const V=[...Y,X];if(c.lesson_slots.findIndex(de=>de.date===X)===-1){const de=c.default_start_time||"10:00",[Q,ye]=de.split(":").map(J=>parseInt(J,10)),oe=Math.floor(Q+(c.duration||60)/60),le=(ye+(c.duration||60)%60)%60,A=`${String(oe).padStart(2,"0")}:${String(le).padStart(2,"0")}`,z={date:X,start_time:de,end_time:A,capacity:c.capacity||10,price:c.is_free_trial?0:parseInt(c.price,10)||0,discount:c.discount||0,deadline_days:c.deadline_days||1,deadline_time:c.deadline_time||"18:00",notes:c.notes||"",venue_details:c.venue_details||"",is_free_trial:c.is_free_trial};m({...c,selected_dates:V,lesson_slots:[...c.lesson_slots,z]})}else m({...c,selected_dates:V})}}},className:`h-10 flex items-center justify-center rounded-md cursor-pointer border ${G?"bg-gray-100 text-gray-400 cursor-not-allowed":te?"bg-primary/10 border-primary text-primary font-medium":"hover:bg-gray-50 border-gray-200"}`,children:I},`day-${I}`))}return F})()})]}),s.jsxs("div",{className:"p-3 border-t bg-gray-50",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:":"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["","","","","","",""].map((P,N)=>{var $;return s.jsxs("label",{className:"flex items-center space-x-2 border px-2 py-1 rounded-full cursor-pointer hover:bg-gray-100 text-sm",children:[s.jsx("input",{type:"checkbox",checked:(($=c.selected_weekdays)==null?void 0:$.includes(N))||!1,onChange:()=>{const O=c.calendarYear||new Date().getFullYear(),D=c.calendarMonth||new Date().getMonth(),E=c.selected_weekdays||[];let F;E.includes(N)?F=E.filter(W=>W!==N):F=[...E,N];const T=new Date(O,D+1,0),I=c.selected_dates||[],L=[...c.lesson_slots];for(let W=1;W<=T.getDate();W++){const q=new Date(O,D,W),H=q.getDay(),X=q.getFullYear(),te=String(q.getMonth()+1).padStart(2,"0"),G=String(q.getDate()).padStart(2,"0"),Y=`${X}-${te}-${G}`;if(!(q<new Date(new Date().setHours(0,0,0,0)))&&H===N)if(F.includes(N)){if(!I.includes(Y)&&(I.push(Y),L.findIndex(de=>de.date===Y)===-1)){const de=c.default_start_time||"10:00",[Q,ye]=de.split(":").map(J=>parseInt(J,10)),oe=Math.floor(Q+(c.duration||60)/60),le=(ye+(c.duration||60)%60)%60,A=`${String(oe).padStart(2,"0")}:${String(le).padStart(2,"0")}`,z={date:Y,start_time:de,end_time:A,capacity:c.capacity||10,price:c.is_free_trial?0:parseInt(c.price,10)||0,discount:c.discount||0,deadline_days:c.deadline_days||1,deadline_time:c.deadline_time||"18:00",notes:c.notes||"",venue_details:c.venue_details||"",is_free_trial:c.is_free_trial};L.push(z)}}else{const ae=I.indexOf(Y);ae!==-1&&I.splice(ae,1)}}m({...c,selected_weekdays:F,selected_dates:I,lesson_slots:L})},className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("span",{className:N===0?"text-red-500":N===6?"text-blue-500":"",children:P})]},P)})})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[s.jsxs("div",{className:"flex justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:""}),s.jsx(re,{type:"button",size:"sm",onClick:()=>{if(!c.selected_dates||c.selected_dates.length===0){alert("");return}if(confirm("")){const P=c.lesson_slots.map(N=>{const $=c.default_start_time||"10:00",[O,D]=$.split(":").map(I=>parseInt(I,10)),E=Math.floor(O+(c.duration||60)/60),F=(D+(c.duration||60)%60)%60,T=`${String(E).padStart(2,"0")}:${String(F).padStart(2,"0")}`;return{...N,start_time:$,end_time:T,capacity:c.capacity||10,price:c.is_free_trial?0:parseInt(c.price,10)||0,discount:c.discount||0,deadline_days:c.deadline_days||1,deadline_time:c.deadline_time||"18:00",notes:c.notes||"",venue_details:c.venue_details||""}});m({...c,lesson_slots:P}),alert("")}},className:"bg-primary hover:bg-primary/90",children:""})]}),!c.selected_dates||c.selected_dates.length===0?s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-yellow-700 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),""]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[": ",c.selected_dates.length,""]}),s.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg divide-y",children:c.selected_dates.sort().map((P,N)=>{const $=c.lesson_slots.findIndex(V=>V.date===P),O=$>=0?c.lesson_slots[$]:null,D=(O==null?void 0:O.start_time)||c.default_start_time||"10:00",E=(O==null?void 0:O.end_time)||(()=>{const[V,ae]=D.split(":").map(ye=>parseInt(ye,10)),de=Math.floor(V+(c.duration||60)/60),Q=(ae+(c.duration||60)%60)%60;return`${String(de).padStart(2,"0")}:${String(Q).padStart(2,"0")}`})(),F=(O==null?void 0:O.capacity)||c.capacity||10,T=(O==null?void 0:O.price)||parseInt(c.price,10)||0,I=(O==null?void 0:O.discount)||c.discount||0,L=(O==null?void 0:O.deadline_days)||c.deadline_days||1,W=(O==null?void 0:O.deadline_time)||c.deadline_time||"18:00",q=new Date(`${P}T${D}`),H=new Date(q);H.setDate(H.getDate()-L);const[X,te]=W.split(":");H.setHours(parseInt(X),parseInt(te),0,0);const G=I>0?Math.round(T*(1-I/100)):T,Y=x===P;return s.jsx("div",{className:"p-4 hover:bg-gray-50",children:Y?s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[s.jsxs("h4",{className:"font-medium mb-3",children:[new Date(P).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"})," ",""]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:g.start_time,onChange:V=>p({...g,start_time:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:g.end_time,onChange:V=>p({...g,end_time:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:g.capacity,onChange:V=>p({...g,capacity:parseInt(V.target.value,10)}),min:"1",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:c.is_free_trial?0:g.price,onChange:V=>p({...g,price:parseInt(V.target.value,10)}),min:"0",disabled:c.is_free_trial,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${c.is_free_trial?"bg-gray-100 cursor-not-allowed":""}`}),c.is_free_trial&&s.jsx("p",{className:"mt-1 text-xs text-orange-500",children:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"%"}),s.jsx("input",{type:"number",value:g.discount,onChange:V=>p({...g,discount:parseInt(V.target.value,10)}),min:"0",max:"100",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:g.deadline_days,onChange:V=>p({...g,deadline_days:parseInt(V.target.value,10)}),min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:g.deadline_time,onChange:V=>p({...g,deadline_time:V.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:g.notes,onChange:V=>p({...g,notes:V.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:g.venue_details,onChange:V=>p({...g,venue_details:V.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>y(null),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:""}),s.jsx("button",{type:"button",onClick:()=>{const V=[...c.lesson_slots];$>=0?V[$]={...V[$],...g,price:c.is_free_trial?0:g.price}:V.push({date:P,...g,price:c.is_free_trial?0:g.price}),m({...c,lesson_slots:V}),y(null)},className:"px-4 py-2 text-white bg-primary rounded-md hover:bg-primary/90",children:""})]})]}):s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:new Date(P).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"})}),s.jsxs("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),D]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),E]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),H.toLocaleDateString("ja-JP")," ",W]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),F,""]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),c.is_free_trial?s.jsxs("span",{children:[s.jsx("span",{className:"text-orange-600 font-medium",children:"0"})," ",s.jsx("span",{className:"bg-orange-100 text-orange-600 px-1.5 py-0.5 rounded text-xs font-medium",children:""})]}):I>0?s.jsxs("span",{children:[s.jsxs("span",{className:"line-through text-gray-400",children:[T.toLocaleString(),""]})," ",s.jsxs("span",{className:"text-red-600 font-medium",children:[G.toLocaleString(),""]})," ",s.jsxs("span",{className:"bg-red-100 text-red-600 px-1.5 py-0.5 rounded text-xs font-medium",children:[I,"%OFF"]})]}):s.jsxs("span",{children:[T.toLocaleString(),""]})]}),((O==null?void 0:O.notes)||(O==null?void 0:O.venue_details))&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-dashed border-gray-200",children:[(O==null?void 0:O.venue_details)&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium block",children:":"}),s.jsx("span",{className:"text-gray-600 text-sm",children:O.venue_details})]}),(O==null?void 0:O.notes)&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium block",children:":"}),s.jsx("span",{className:"text-gray-600 text-sm",children:O.notes})]})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>{y(P),p({start_time:D,end_time:E,capacity:F,price:T,discount:I,deadline_days:L,deadline_time:W,notes:(O==null?void 0:O.notes)||c.notes||"",venue_details:(O==null?void 0:O.venue_details)||c.venue_details||""})},className:"text-primary hover:text-primary/80",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),s.jsx("button",{type:"button",onClick:()=>{const V=c.selected_dates.filter(de=>de!==P),ae=c.lesson_slots.filter(de=>de.date!==P);m({...c,selected_dates:V,lesson_slots:ae})},className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})},N)})})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsxs("div",{className:"flex",children:[s.jsx(va,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:""}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"15"}),s.jsx("li",{children:""}),s.jsx("li",{children:""})]})]})]})})]})]})})]})]})})}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsx(re,{variant:"outline",onClick:()=>{const P=["basic","details","schedule"],N=P.indexOf(t);N>0&&r(P[N-1])},disabled:t==="basic",children:""}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(re,{variant:"outline",onClick:S,disabled:n,children:""}),t==="schedule"?s.jsx(re,{onClick:U,disabled:n||i,children:n?"...":""}):s.jsx(re,{onClick:()=>{const P=["basic","details","schedule"],N=P.indexOf(t);N<P.length-1&&r(P[N+1])},disabled:t==="schedule",children:""})]})]})]})},T3=()=>{const{id:e}=ti(),t=Ht(),[r,n]=v.useState("basic"),[a,i]=v.useState(!0),[o,l]=v.useState(!1),[u,c]=v.useState(!1),[m,h]=v.useState([]),[d,f]=v.useState({lesson_title:"",lesson_catchphrase:"",lesson_description:"",category:"",sub_categories:[],difficulty_level:"beginner",price:"",duration:60,capacity:10,location_name:"",location_type:"online",classroom_area:"",lesson_type:"one_time",is_free_trial:!1,lesson_image_url:[],status:"draft",materials_needed:"",lesson_goals:"",lesson_outline:"",target_audience:[],monthly_plans:[],course_sessions:1,default_start_time:"10:00",deadline_days:1,deadline_time:"18:00",discount:0,selected_dates:[],selected_weekdays:[],calendarMonth:new Date().getMonth(),calendarYear:new Date().getFullYear(),notes:"",venue_details:"",lesson_slots:[]}),[w,x]=v.useState([]),[y,g]=v.useState({}),[p,b]=v.useState(null),[_,C]=v.useState({start_time:"",end_time:"",capacity:10,price:0,discount:0,deadline_days:1,deadline_time:"18:00",notes:"",venue_details:""});v.useEffect(()=>{(async()=>{if(e)try{const{data:E,error:F}=await M.from("lessons").select("*").eq("id",e).maybeSingle();if(F)throw F;if(!E)throw new Error("");const{data:T,error:I}=await M.from("lesson_slots").select("*").eq("lesson_id",e);if(I)throw I;let L="",W="";E.date_time_start&&(L=new Date(E.date_time_start).toISOString().slice(0,16)),E.date_time_end&&(W=new Date(E.date_time_end).toISOString().slice(0,16));let q=[];if(E.category&&E.sub_category){const Y=ds[E.category];if(Y&&(x(Y),E.sub_category)){const V=Y.find(ae=>ae.name===E.sub_category);V&&(q=[V.id])}}let H=[],X=[];if(T&&Array.isArray(T)&&T.length>0)H=T.map(Y=>{const V=new Date(Y.date_time_start),ae=V.getFullYear(),de=String(V.getMonth()+1).padStart(2,"0"),Q=String(V.getDate()).padStart(2,"0"),ye=`${ae}-${de}-${Q}`,oe=String(V.getHours()).padStart(2,"0"),le=String(V.getMinutes()).padStart(2,"0"),A=`${oe}:${le}`,z=new Date(Y.date_time_end),J=String(z.getHours()).padStart(2,"0"),ne=String(z.getMinutes()).padStart(2,"0"),fe=`${J}:${ne}`;let ke=1,me="18:00";if(Y.booking_deadline){const Ie=new Date(Y.booking_deadline),He=new Date(Y.date_time_start).getTime()-Ie.getTime();ke=Math.ceil(He/864e5),me=`${String(Ie.getHours()).padStart(2,"0")}:${String(Ie.getMinutes()).padStart(2,"0")}`}return X.includes(ye)||X.push(ye),{date:ye,start_time:A,end_time:fe,capacity:Y.capacity||E.capacity||10,price:Y.price||E.price||0,discount:Y.discount_percentage||0,deadline_days:ke,deadline_time:me,notes:Y.notes||"",venue_details:Y.venue_details||"",is_free_trial:Y.is_free_trial||!1}});else if(E.date_time_start){console.log("Creating default slot from date_time_start:",E.date_time_start);try{const Y=new Date(E.date_time_start),V=Y.getFullYear(),ae=String(Y.getMonth()+1).padStart(2,"0"),de=String(Y.getDate()).padStart(2,"0"),Q=`${V}-${ae}-${de}`,ye=String(Y.getHours()).padStart(2,"0"),oe=String(Y.getMinutes()).padStart(2,"0"),le=`${ye}:${oe}`,A=new Date(E.date_time_end||Y.getTime()+(E.duration||60)*60*1e3),z=String(A.getHours()).padStart(2,"0"),J=String(A.getMinutes()).padStart(2,"0"),ne=`${z}:${J}`;X=[Q],H=[{date:Q,start_time:le,end_time:ne,capacity:E.capacity||10,price:E.is_free_trial?0:E.price||0,discount:E.discount_percentage||0,deadline_days:1,deadline_time:"18:00",notes:"",venue_details:"",is_free_trial:E.is_free_trial||!1}],console.log("Created default slot:",H[0])}catch(Y){console.error("Failed to create default slot from date_time_start:",Y)}}console.log("Selected dates after extraction:",X),console.log("Lesson slots after synchronization:",H);let te=new Date().getMonth(),G=new Date().getFullYear();if(X.length>0)try{const Y=new Date(X[0]);te=Y.getMonth(),G=Y.getFullYear(),console.log("Setting calendar to:",G,te)}catch(Y){console.error("Failed to parse date for calendar:",Y)}f(Y=>({...Y,lesson_title:E.lesson_title||"",lesson_catchphrase:E.lesson_catchphrase||"",lesson_description:E.lesson_description||"",category:E.category||"",sub_categories:q,difficulty_level:E.difficulty_level||"beginner",price:E.price?E.price.toString():"",duration:E.duration||60,capacity:E.capacity||10,location_name:E.location_name||"",location_type:E.location_type||"online",classroom_area:E.classroom_area||"",lesson_type:E.lesson_type||"one_time",is_free_trial:E.is_free_trial||!1,lesson_image_url:E.lesson_image_url||[],date_time_start:L,date_time_end:W,status:E.status||"draft",materials_needed:E.materials_needed||"",lesson_goals:E.lesson_goals||"",lesson_outline:E.lesson_outline||"",target_audience:E.target_audience||[],monthly_plans:E.monthly_plans||[],course_sessions:E.course_sessions||1,default_start_time:E.default_start_time||"10:00",deadline_days:E.deadline_days||1,deadline_time:E.deadline_time||"18:00",discount:E.discount_percentage||0,selected_dates:X,selected_weekdays:E.selected_weekdays||[],calendarMonth:te,calendarYear:G,notes:E.notes||"",venue_details:E.venue_details||"",lesson_slots:H})),h(E.lesson_image_url||[])}catch(E){console.error("Error fetching lesson:",E),wt({variant:"destructive",title:"",description:""})}finally{i(!1)}})()},[e]),v.useEffect(()=>{if(d.lesson_type==="monthly"&&d.monthly_plans.length===0&&f(D=>({...D,monthly_plans:[{name:"",price:"",frequency:"",lesson_duration:"60",description:""}]})),!d.date_time_start){const D=new Date,E=D.getFullYear(),F=String(D.getMonth()+1).padStart(2,"0"),T=String(D.getDate()).padStart(2,"0"),I=String(D.getHours()).padStart(2,"0"),L=String(D.getMinutes()).padStart(2,"0"),W=`${E}-${F}-${T}T${I}:${L}`;f(q=>({...q,date_time_start:W}))}},[d.lesson_type,d.date_time_start]);const k=D=>{const{name:E,value:F}=D.target;if(E==="date_time_start"&&F){const T=new Date(F),I=d.duration,L=new Date(T.getTime()+I*60*1e3),W=L.getFullYear(),q=String(L.getMonth()+1).padStart(2,"0"),H=String(L.getDate()).padStart(2,"0"),X=String(L.getHours()).padStart(2,"0"),te=String(L.getMinutes()).padStart(2,"0"),G=`${W}-${q}-${H}T${X}:${te}`;f(Y=>({...Y,[E]:F,date_time_end:G}))}else if(E==="duration"&&d.date_time_start){const T=new Date(d.date_time_start),I=parseInt(F,10),L=new Date(T.getTime()+I*60*1e3),W=L.getFullYear(),q=String(L.getMonth()+1).padStart(2,"0"),H=String(L.getDate()).padStart(2,"0"),X=String(L.getHours()).padStart(2,"0"),te=String(L.getMinutes()).padStart(2,"0"),G=`${W}-${q}-${H}T${X}:${te}`;f(Y=>({...Y,[E]:parseInt(F,10),date_time_end:G}))}else f({...d,[E]:F});if(E==="category"){f(I=>({...I,[E]:F,sub_categories:[]}));const T=F;T&&ds[T]?x(ds[T]):x([])}y[E]&&g({...y,[E]:""})},j=D=>{f(E=>{const F=E.sub_categories.includes(D)?E.sub_categories.filter(T=>T!==D):[...E.sub_categories,D];return{...E,sub_categories:F}})},S=async D=>{const E=D.target.files;if(!(!E||E.length===0))try{c(!0);const{data:{user:F}}=await M.auth.getUser();if(!F)throw new Error("");const{data:T}=await M.storage.listBuckets();T.find(Y=>Y.name==="user_uploads")||await M.storage.createBucket("user_uploads",{public:!0});const I=E[0],L=I.name.split(".").pop(),q=`lesson_images/${`${F.id}_${Date.now()}.${L}`}`,{error:H}=await M.storage.from("user_uploads").upload(q,I);if(H)throw H;const{data:{publicUrl:X}}=M.storage.from("user_uploads").getPublicUrl(q);if(d.lesson_image_url.length>=3)throw new Error("3");const te=[...d.lesson_image_url,X];f({...d,lesson_image_url:te});const G=[...m,URL.createObjectURL(I)];h(G)}catch(F){console.error("Error uploading image:",F),wt({variant:"destructive",title:"",description:F.message||""})}finally{c(!1)}},U=D=>{const E=[...d.lesson_image_url];E.splice(D,1);const F=[...m];F.splice(D,1),f({...d,lesson_image_url:E}),h(F)},R=()=>{const D={};return d.lesson_title.trim()||(D.lesson_title=""),d.category.trim()||(D.category=""),d.lesson_type!=="monthly"?((!d.price.toString().trim()||isNaN(Number(d.price))||Number(d.price)<0)&&(D.price=""),d.duration<=0&&(D.duration=""),d.capacity<=0&&(D.capacity="")):d.monthly_plans.length===0?D.monthly_plans="1":d.monthly_plans.some(F=>!F.name||!F.price||!F.frequency||!F.lesson_duration)&&(D.monthly_plans=""),d.lesson_type==="course"&&d.course_sessions<1&&(D.course_sessions=""),d.location_name.trim()||(D.location_name=""),(d.location_type==="in_person"||d.location_type==="hybrid")&&!d.classroom_area&&(D.classroom_area=""),(d.discount<0||d.discount>100)&&(D.discount="0100%"),d.status==="published"&&(!d.selected_dates||d.selected_dates.length===0)&&(D.selected_dates="1"),g(D),Object.keys(D).length===0},P=async()=>{if(!d.lesson_title.trim()){g({lesson_title:""}),n("basic");return}await O("draft")},N=async()=>{if(!R()){y.lesson_title||y.lesson_description||y.category?n("basic"):y.price||y.duration||y.capacity||y.location_name||y.classroom_area||y.monthly_plans||y.course_sessions?n("details"):(y.date_time_start||y.date_time_end||y.selected_dates||y.default_start_time||y.deadline_days||y.deadline_time)&&n("schedule");return}await O("published")},$=(D,E,F,T)=>{const I=F.lesson_slots.findIndex(le=>le.date===D),L=I>=0?F.lesson_slots[I]:null,W=(L==null?void 0:L.start_time)||F.default_start_time||"10:00",[q,H]=W.split(":").map(le=>parseInt(le,10)),[X,te,G]=D.split("-").map(le=>parseInt(le,10)),Y=new Date(Date.UTC(X,te-1,G,q,H,0));let V;if(L!=null&&L.end_time){const[le,A]=L.end_time.split(":").map(z=>parseInt(z,10));V=new Date(Date.UTC(X,te-1,G,le,A,0))}else V=new Date(Y),V.setMinutes(V.getMinutes()+(F.duration||60));const ae=(L==null?void 0:L.deadline_days)??F.deadline_days??1,de=(L==null?void 0:L.deadline_time)||F.deadline_time||"18:00",[Q,ye]=de.split(":").map(le=>parseInt(le,10)),oe=new Date(Y);return oe.setDate(oe.getDate()-ae),oe.setHours(Q,ye,0,0),{lesson_id:E,date_time_start:Y.toISOString(),date_time_end:V.toISOString(),booking_deadline:oe.toISOString(),capacity:((L==null?void 0:L.capacity)??F.capacity)||10,current_participants_count:0,price:F.is_free_trial?0:((L==null?void 0:L.price)??Number(F.price))||0,discount_percentage:((L==null?void 0:L.discount)??F.discount)||null,venue_details:(L==null?void 0:L.venue_details)||F.venue_details||null,notes:(L==null?void 0:L.notes)||F.notes||null,status:T||F.status||"published",is_free_trial:F.is_free_trial||!1}},O=async D=>{var E;if(e)try{l(!0);const{data:{user:F}}=await M.auth.getUser();if(!F)throw new Error("");const T=await _0(F.id),I=new Date().toISOString(),L=d.sub_categories.length>0&&((E=w.find(H=>H.id===d.sub_categories[0]))==null?void 0:E.name)||"",W={lesson_title:d.lesson_title,lesson_catchphrase:d.lesson_catchphrase||null,lesson_description:d.lesson_description||null,category:d.category,sub_category:L,difficulty_level:d.difficulty_level||"beginner",location_name:d.location_name,location_type:d.location_type||"online",classroom_area:d.location_type==="in_person"||d.location_type==="hybrid"?d.classroom_area:null,lesson_type:d.lesson_type||"one_time",is_free_trial:d.is_free_trial||!1,lesson_image_url:d.lesson_image_url||[],status:D,materials_needed:d.materials_needed||null,lesson_goals:d.lesson_goals||null,lesson_outline:d.lesson_outline||null,target_audience:d.target_audience.length>0?d.target_audience:null,updated_at:I,price:d.lesson_type==="monthly"?0:Number(d.price)||0,discount_percentage:d.discount||null,is_featured:T&&D==="published"};d.lesson_type==="monthly"?(W.monthly_plans=d.monthly_plans.length>0?d.monthly_plans:null,W.duration=null,W.capacity=null):(W.duration=d.duration||60,W.capacity=d.capacity||10,W.monthly_plans=null,d.lesson_type==="course"?W.course_sessions=d.course_sessions||1:W.course_sessions=null),W.notes=d.notes||null,W.venue_details=d.venue_details||null,console.log("Updating lesson with data:",W);const{error:q}=await M.from("lessons").update(W).eq("id",e);if(q)throw q;if(d.selected_dates&&d.selected_dates.length>0){const{data:H,error:X}=await M.from("lesson_slots").select("id, date_time_start").eq("lesson_id",e);if(X)throw X;const te=H.map(ae=>ae.id);if(te.length>0){const{data:ae,error:de}=await M.from("bookings").select("slot_id").in("slot_id",te);if(de)throw de;if(ae&&ae.length>0){const Q=ae.map(z=>z.slot_id),ye=te.filter(z=>!Q.includes(z));if(ye.length>0){const{error:z}=await M.from("lesson_slots").delete().in("id",ye);if(z)throw z}const oe=new Set(Q),le=[],A=[];d.selected_dates.forEach(z=>{const J=$(z,e,d,D),ne=H.find(fe=>{const ke=new Date(fe.date_time_start);return`${ke.getFullYear()}-${String(ke.getMonth()+1).padStart(2,"0")}-${String(ke.getDate()).padStart(2,"0")}`===z&&oe.has(fe.id)});ne?le.push({id:ne.id,...J}):A.push(J)});for(const z of le){const{error:J}=await M.from("lesson_slots").update(z).eq("id",z.id);if(J)throw J}if(A.length>0){const{error:z}=await M.from("lesson_slots").insert(A);if(z)throw z}wt({title:"",description:D==="published"?"":"",variant:"default"}),setTimeout(()=>{window.location.href=`/instructor/lessons?status=${D}&message=${encodeURIComponent(D==="published"?"":"")}`},300);return}}console.log("Deleting existing lesson slots for lesson ID:",e);const{error:G}=await M.from("lesson_slots").delete().eq("lesson_id",e);if(G)throw G;const Y=d.selected_dates.map(ae=>$(ae,e,d,D));console.log("Inserting new lesson slots:",Y);const{error:V}=await M.from("lesson_slots").insert(Y);if(V)throw V}wt({title:"",description:D==="published"?"":"",variant:"default"}),setTimeout(()=>{window.location.href=`/instructor/lessons?status=${D}&message=${encodeURIComponent(D==="published"?"":"")}`},300)}catch(F){console.error("Error saving lesson:",F),F.code==="23503"&&F.message.includes("bookings_slot_id_fkey")?wt({variant:"destructive",title:"",description:""}):wt({variant:"destructive",title:"",description:": "+F.message})}finally{l(!1)}};return a?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"pb-12",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-500 hover:text-gray-700",children:[s.jsx(gu,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:""})]})}),s.jsxs("div",{className:"flex flex-col justify-between gap-4 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),s.jsxs("div",{className:"flex space-x-3 mt-2",children:[s.jsx(re,{variant:"outline",onClick:P,disabled:o,children:""}),s.jsx(re,{onClick:N,disabled:o||u,children:o?"...":""})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:s.jsxs(rl,{defaultValue:"basic",value:r,onValueChange:n,children:[s.jsx("div",{className:"border-b",children:s.jsxs(ii,{className:"w-full justify-start rounded-none bg-transparent border-b",children:[s.jsx(Dt,{value:"basic",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""}),s.jsx(Dt,{value:"details",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""}),s.jsx(Dt,{value:"schedule",className:"data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none border-b-2 border-transparent",children:""})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx(Pt,{value:"basic",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_title",value:d.lesson_title,onChange:k,maxLength:25,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.lesson_title?"border-red-500":""}`,placeholder:""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"25"}),y.lesson_title&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.lesson_title})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"lesson_catchphrase",value:d.lesson_catchphrase,onChange:k,maxLength:50,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.lesson_catchphrase?"border-red-500":""}`,placeholder:"3"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"50"}),y.lesson_catchphrase&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.lesson_catchphrase})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"lesson_description",value:d.lesson_description,onChange:k,rows:5,maxLength:500,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.lesson_description?"border-red-500":""}`,placeholder:""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"500"}),y.lesson_description&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.lesson_description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3"}),s.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.lesson_image_url.length<3&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 w-full flex flex-col items-center justify-center ${u?"opacity-50":"hover:border-primary/50 hover:bg-gray-50"}`,children:s.jsxs("div",{className:"relative cursor-pointer",children:[s.jsx("input",{type:"file",id:"lesson-image",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:S,disabled:u}),s.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(Yg,{className:`h-8 w-8 ${u?"text-gray-400":"text-primary"}`}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-700",children:u?"...":""}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG, GIF 5MB"})]})]})})}),d.lesson_image_url.length>0?d.lesson_image_url.map((D,E)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:m[E]||D,alt:` ${E+1}`,className:"w-full h-48 object-cover rounded-md"}),s.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[s.jsxs("span",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[E+1,"/",d.lesson_image_url.length]}),s.jsx("button",{type:"button",onClick:()=>U(E),className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},E)):s.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 rounded-md border text-gray-400 col-span-3",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Hg,{className:"h-10 w-10"}),s.jsx("p",{className:"mt-2 text-sm",children:""})]})})]}),s.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[d.lesson_image_url.length,"/3 "]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:d.category,onChange:k,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.category?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:""}),ja.map(D=>s.jsxs("option",{value:D.id,children:[D.icon," ",D.name]},D.id))]}),y.category&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.category})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),d.category?s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:w.map(D=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`subcategory-${D.id}`,checked:d.sub_categories.includes(D.id),onChange:()=>j(D.id),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsx("label",{htmlFor:`subcategory-${D.id}`,className:"ml-2 text-sm text-gray-700",children:D.name})]},D.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("select",{name:"difficulty_level",value:d.difficulty_level,onChange:k,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",children:[s.jsx("option",{value:"beginner",children:""}),s.jsx("option",{value:"intermediate",children:""}),s.jsx("option",{value:"advanced",children:""}),s.jsx("option",{value:"all",children:""})]})]})]})}),s.jsxs(Pt,{value:"details",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.location_type==="online"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,location_type:"online"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"online",checked:d.location_type==="online",onChange:()=>f({...d,location_type:"online"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"ZoomGoogle MeetSkype"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.location_type==="in_person"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,location_type:"in_person"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"in_person",checked:d.location_type==="in_person",onChange:()=>f({...d,location_type:"in_person"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.location_type==="hybrid"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,location_type:"hybrid"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"location_type",value:"hybrid",checked:d.location_type==="hybrid",onChange:()=>f({...d,location_type:"hybrid"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]})]})]}),(d.location_type==="in_person"||d.location_type==="hybrid")&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"classroom_area",value:d.classroom_area||"",onChange:k,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.classroom_area?"border-red-500":""}`,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),y.classroom_area&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.classroom_area})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yu,{className:"absolute left-3 top-3 text-gray-400 h-4 w-4"}),s.jsx("textarea",{name:"location_name",value:d.location_name,onChange:k,rows:3,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.location_name?"border-red-500":""}`,placeholder:d.location_type==="online"?"ZoomGoogle MeetSkypeURL":d.location_type==="in_person"?"":""})]}),y.location_name&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.location_name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.lesson_type==="monthly"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,lesson_type:"monthly"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"monthly",checked:d.lesson_type==="monthly",onChange:()=>f({...d,lesson_type:"monthly"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""}),d.lesson_type==="monthly"&&s.jsx("div",{className:"mt-3 border-t pt-3",children:s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("input",{type:"checkbox",id:"is_free_trial",checked:d.is_free_trial,onChange:D=>f({...d,is_free_trial:D.target.checked}),className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("label",{htmlFor:"is_free_trial",className:"ml-2 text-sm text-gray-700",children:""})]})]})})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.lesson_type==="one_time"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,lesson_type:"one_time"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"one_time",checked:d.lesson_type==="one_time",onChange:()=>f({...d,lesson_type:"one_time"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"11"})]}),s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition ${d.lesson_type==="course"?"border-primary bg-primary/5 ring-2 ring-primary/20":"hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>f({...d,lesson_type:"course"}),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"lesson_type",value:"course",checked:d.lesson_type==="course",onChange:()=>f({...d,lesson_type:"course"}),className:"h-4 w-4 text-primary"}),s.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:""})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:""})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.lesson_type!=="monthly"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:d.price,onChange:k,min:"0",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.price?"border-red-500":""}`,placeholder:"3000"})]}),y.price&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.price}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:d.lesson_type==="course"?"":"1"})]}),d.lesson_type==="course"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("input",{type:"number",name:"course_sessions",value:d.course_sessions,onChange:k,min:"1",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.course_sessions?"border-red-500":""}`,placeholder:"5"}),s.jsx("span",{className:"ml-2",children:""})]}),y.course_sessions&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.course_sessions})]}),d.lesson_type==="monthly"&&s.jsxs("div",{className:"col-span-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),d.monthly_plans.length===0&&s.jsx("div",{className:"mb-4 p-4 border rounded-lg bg-yellow-50 text-yellow-800",children:s.jsx("p",{children:"1"})}),d.monthly_plans.map((D,E)=>s.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"text-base font-semibold",children:["",E+1]}),s.jsx("button",{type:"button",onClick:()=>{const F=[...d.monthly_plans];F.splice(E,1),f({...d,monthly_plans:F})},className:"px-3 py-1 bg-red-50 text-red-500 rounded-md hover:bg-red-100",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:D.price,onChange:F=>{const T=[...d.monthly_plans];T[E].price=F.target.value,T[E].name=`${E+1}`,f({...d,monthly_plans:T})},min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"10000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"text",value:D.frequency,onChange:F=>{const T=[...d.monthly_plans];T[E].frequency=F.target.value,f({...d,monthly_plans:T})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:D.lesson_duration,onChange:F=>{const T=[...d.monthly_plans];T[E].lesson_duration=F.target.value,f({...d,monthly_plans:T})},min:"15",step:"15",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"60"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:D.description,onChange:F=>{const T=[...d.monthly_plans];T[E].description=F.target.value,f({...d,monthly_plans:T})},rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"4"})]})]},E)),s.jsx("button",{type:"button",onClick:()=>{const D=d.monthly_plans.length+1;f({...d,monthly_plans:[...d.monthly_plans,{name:`${D}`,price:"",frequency:"",lesson_duration:"60",description:""}]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20",children:""}),y.monthly_plans&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:y.monthly_plans})]}),d.lesson_type!=="monthly"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"duration",value:d.duration,onChange:k,min:"15",step:"15",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.duration?"border-red-500":""}`,placeholder:"60"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"1"}),y.duration&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.duration})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"capacity",value:d.capacity,onChange:k,min:"1",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.capacity?"border-red-500":""}`,placeholder:"10"})]}),y.capacity&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.capacity})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"materials_needed",value:d.materials_needed,onChange:k,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"lesson_goals",value:d.lesson_goals,onChange:k,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{name:"lesson_outline",value:d.lesson_outline,onChange:k,rows:5,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"1. 102. 203. 204. 10"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:""}),d.target_audience.map((D,E)=>s.jsxs("div",{className:"mb-2 flex items-center",children:[s.jsx("input",{type:"text",value:D,onChange:F=>{const T=[...d.target_audience];T[E]=F.target.value,f({...d,target_audience:T})},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:`${E===0?"":E===1?"IT":""}`}),s.jsx("button",{type:"button",onClick:()=>{const F=[...d.target_audience];F.splice(E,1),f({...d,target_audience:F})},className:"ml-2 text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},E)),s.jsxs("button",{type:"button",onClick:()=>{f({...d,target_audience:[...d.target_audience,""]})},className:"mt-2 px-4 py-2 bg-primary/10 text-primary rounded-md hover:bg-primary/20 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),""]})]})]}),s.jsxs(Pt,{value:"schedule",children:[s.jsxs("div",{className:"space-y-6",children:[d.lesson_type==="monthly"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(va,{className:"h-5 w-5 text-blue-500 mr-2"}),s.jsx("h3",{className:"font-medium text-blue-800",children:""})]}),s.jsxs("p",{className:"mt-2 ml-7 text-sm text-blue-700",children:["",d.is_free_trial?"0":""]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold",children:""}),s.jsx(re,{type:"button",size:"sm",onClick:()=>{if(!d.selected_dates||d.selected_dates.length===0){alert("");return}if(confirm("")){const D=d.lesson_slots.map(E=>{const F=d.default_start_time||"10:00",[T,I]=F.split(":").map(H=>parseInt(H,10)),L=Math.floor(T+(d.duration||60)/60),W=(I+(d.duration||60)%60)%60,q=`${String(L).padStart(2,"0")}:${String(W).padStart(2,"0")}`;return{...E,start_time:F,end_time:q,capacity:d.capacity||10,price:d.is_free_trial?0:Number(d.price)||0,discount:d.discount||0,deadline_days:d.deadline_days||1,deadline_time:d.deadline_time||"18:00",notes:d.notes||"",venue_details:d.venue_details||""}});f({...d,lesson_slots:D}),alert("")}},className:"bg-primary hover:bg-primary/90",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"time",name:"default_start_time",value:d.default_start_time||"10:00",onChange:D=>f({...d,default_start_time:D.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"duration",value:d.duration,onChange:k,min:"15",step:"15",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.duration?"border-red-500":""}`,placeholder:"60"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"capacity",value:d.capacity,onChange:k,min:"1",className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.capacity?"border-red-500":""}`,placeholder:"10"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"price",value:d.is_free_trial?0:d.price,onChange:k,min:"0",disabled:d.is_free_trial,className:`w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${y.price?"border-red-500":""} ${d.is_free_trial?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"3000"})]}),d.is_free_trial&&s.jsx("p",{className:"mt-1 text-xs text-orange-500",children:"0"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"number",name:"deadline_days",value:d.deadline_days??1,onChange:D=>f({...d,deadline_days:parseInt(D.target.value,10)||1}),min:"0",className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"time",name:"deadline_time",value:d.deadline_time||"18:00",onChange:D=>f({...d,deadline_time:D.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"%OFF"}),s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),s.jsx("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),s.jsx("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]}),s.jsx("input",{type:"number",name:"discount",value:d.discount??0,onChange:D=>f({...d,discount:parseInt(D.target.value,10)||0}),min:"0",max:"100",className:"w-full pl-9 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"10"})]})]}),s.jsxs("div",{className:"md:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("div",{className:"relative",children:s.jsx("textarea",{name:"notes",value:d.notes||"",onChange:k,rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(va,{className:"h-5 w-5 text-blue-500 mr-2"}),s.jsx("p",{className:"text-sm text-blue-700",children:"1"})]})}),s.jsxs("div",{className:"border rounded-lg",children:[s.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 border-b",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("select",{value:d.calendarMonth||new Date().getMonth(),onChange:D=>f({...d,calendarMonth:parseInt(D.target.value,10)}),className:"px-3 py-1 border rounded text-sm",children:Array.from({length:12},(D,E)=>s.jsx("option",{value:E,children:new Date(new Date().getFullYear(),E,1).toLocaleString("ja-JP",{month:"long"})},E))}),s.jsx("select",{value:d.calendarYear||new Date().getFullYear(),onChange:D=>f({...d,calendarYear:parseInt(D.target.value,10)}),className:"px-3 py-1 border rounded text-sm",children:Array.from({length:3},(D,E)=>s.jsxs("option",{value:new Date().getFullYear()+E,children:[new Date().getFullYear()+E,""]},E))})]}),s.jsx("div",{className:"flex items-center",children:s.jsx("button",{type:"button",onClick:()=>{var D;f({...d,selected_dates:((D=d.selected_dates)==null?void 0:D.filter(E=>{const F=new Date(E);return F.getMonth()!==(d.calendarMonth||new Date().getMonth())||F.getFullYear()!==(d.calendarYear||new Date().getFullYear())}))||[]})},className:"px-3 py-1 bg-red-50 text-red-600 rounded hover:bg-red-100 text-xs",children:""})})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"grid grid-cols-7 mb-2 text-center text-sm font-medium",children:[s.jsx("div",{className:"text-red-500",children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{children:""}),s.jsx("div",{className:"text-blue-500",children:""})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 aspect-square",children:(()=>{var q;const D=d.calendarYear||new Date().getFullYear(),E=d.calendarMonth||new Date().getMonth(),F=new Date(D,E,1),I=new Date(D,E+1,0).getDate(),L=F.getDay(),W=[];for(let H=0;H<L;H++)W.push(s.jsx("div",{className:"h-full rounded-md border border-transparent"},`empty-${H}`));for(let H=1;H<=I;H++){const X=new Date(D,E,H),te=X.getFullYear(),G=String(X.getMonth()+1).padStart(2,"0"),Y=String(X.getDate()).padStart(2,"0"),V=`${te}-${G}-${Y}`,ae=(q=d.selected_dates)==null?void 0:q.includes(V),de=X<new Date(new Date().setHours(0,0,0,0));W.push(s.jsx("div",{onClick:()=>{if(!de){const Q=d.selected_dates||[];if(ae){const ye=Q.filter(oe=>oe!==V);f({...d,selected_dates:ye})}else{const ye=[...Q,V];if(d.lesson_slots.findIndex(le=>le.date===V)===-1){const le=d.default_start_time||"10:00",[A,z]=le.split(":").map(me=>parseInt(me,10)),J=Math.floor(A+(d.duration||60)/60),ne=(z+(d.duration||60)%60)%60,fe=`${String(J).padStart(2,"0")}:${String(ne).padStart(2,"0")}`,ke={date:V,start_time:le,end_time:fe,capacity:d.capacity||10,price:d.is_free_trial?0:parseInt(d.price,10)||0,discount:d.discount||0,deadline_days:d.deadline_days||1,deadline_time:d.deadline_time||"18:00",notes:d.notes||"",venue_details:d.venue_details||"",is_free_trial:d.is_free_trial};f({...d,selected_dates:ye,lesson_slots:[...d.lesson_slots,ke]})}else f({...d,selected_dates:ye})}}},className:`h-10 flex items-center justify-center rounded-md cursor-pointer border ${de?"bg-gray-100 text-gray-400 cursor-not-allowed":ae?"bg-primary/10 border-primary text-primary font-medium":"hover:bg-gray-50 border-gray-200"}`,children:H},`day-${H}`))}return W})()})]}),s.jsxs("div",{className:"p-3 border-t bg-gray-50",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:":"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["","","","","","",""].map((D,E)=>{var F;return s.jsxs("label",{className:"flex items-center space-x-2 border px-2 py-1 rounded-full cursor-pointer hover:bg-gray-100 text-sm",children:[s.jsx("input",{type:"checkbox",checked:((F=d.selected_weekdays)==null?void 0:F.includes(E))||!1,onChange:()=>{const T=d.calendarYear||new Date().getFullYear(),I=d.calendarMonth||new Date().getMonth(),L=d.selected_weekdays||[];let W;L.includes(E)?W=L.filter(te=>te!==E):W=[...L,E];const q=new Date(T,I+1,0),H=d.selected_dates||[],X=[...d.lesson_slots];for(let te=1;te<=q.getDate();te++){const G=new Date(T,I,te),Y=G.getDay(),V=G.getFullYear(),ae=String(G.getMonth()+1).padStart(2,"0"),de=String(G.getDate()).padStart(2,"0"),Q=`${V}-${ae}-${de}`;if(!(G<new Date(new Date().setHours(0,0,0,0)))&&Y===E)if(W.includes(E)){if(!H.includes(Q)&&(H.push(Q),X.findIndex(le=>le.date===Q)===-1)){const le=d.default_start_time||"10:00",[A,z]=le.split(":").map(me=>parseInt(me,10)),J=Math.floor(A+(d.duration||60)/60),ne=(z+(d.duration||60)%60)%60,fe=`${String(J).padStart(2,"0")}:${String(ne).padStart(2,"0")}`,ke={date:Q,start_time:le,end_time:fe,capacity:d.capacity||10,price:d.is_free_trial?0:parseInt(d.price,10)||0,discount:d.discount||0,deadline_days:d.deadline_days||1,deadline_time:d.deadline_time||"18:00",notes:d.notes||"",venue_details:d.venue_details||"",is_free_trial:d.is_free_trial};X.push(ke)}}else{const oe=H.indexOf(Q);oe!==-1&&H.splice(oe,1)}}f({...d,selected_weekdays:W,selected_dates:H,lesson_slots:X})},className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary"}),s.jsx("span",{className:E===0?"text-red-500":E===6?"text-blue-500":"",children:D})]},D)})})]})]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[s.jsx("div",{className:"mb-3",children:s.jsx("h3",{className:"text-lg font-semibold",children:""})}),!d.selected_dates||d.selected_dates.length===0?s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-yellow-700 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),""]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[": ",d.selected_dates.length,""]}),s.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg divide-y",children:d.selected_dates.sort().map((D,E)=>{const F=d.lesson_slots.findIndex(Q=>Q.date===D),T=F>=0?d.lesson_slots[F]:null,I=(T==null?void 0:T.start_time)||d.default_start_time||"10:00",L=(T==null?void 0:T.end_time)||(()=>{const[Q,ye]=I.split(":").map(A=>parseInt(A,10)),oe=Math.floor(Q+(d.duration||60)/60),le=(ye+(d.duration||60)%60)%60;return`${String(oe).padStart(2,"0")}:${String(le).padStart(2,"0")}`})(),W=(T==null?void 0:T.capacity)||d.capacity||10,q=(T==null?void 0:T.price)||Number(d.price)||0,H=(T==null?void 0:T.discount)||d.discount||0,X=(T==null?void 0:T.deadline_days)||d.deadline_days||1,te=(T==null?void 0:T.deadline_time)||d.deadline_time||"18:00",G=new Date(`${D}T${I}`),Y=new Date(G);Y.setDate(Y.getDate()-X);const[V,ae]=te.split(":");Y.setHours(parseInt(V,10),parseInt(ae,10),0,0);const de=H>0?Math.round(q*(1-H/100)):q;return s.jsx("div",{className:"p-4 hover:bg-gray-50",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:new Date(D).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"})}),s.jsxs("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),I]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),L]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),Y.toLocaleDateString("ja-JP")," ",te]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),W,""]}),s.jsxs("p",{children:[s.jsx("span",{className:"inline-block w-20 font-medium",children:":"}),d.is_free_trial?s.jsxs("span",{children:[s.jsx("span",{className:"text-orange-600 font-medium",children:"0"})," ",s.jsx("span",{className:"bg-orange-100 text-orange-600 px-1.5 py-0.5 rounded text-xs font-medium",children:""})]}):H>0?s.jsxs("span",{children:[s.jsxs("span",{className:"line-through text-gray-400",children:[q.toLocaleString(),""]})," ",s.jsxs("span",{className:"text-red-600 font-medium",children:[de.toLocaleString(),""]})," ",s.jsxs("span",{className:"bg-red-100 text-red-600 px-1.5 py-0.5 rounded text-xs font-medium",children:[H,"%OFF"]})]}):s.jsxs("span",{children:[q.toLocaleString(),""]})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>{b(D),C({start_time:I,end_time:L,capacity:W,price:q,discount:H,deadline_days:X,deadline_time:te,notes:(T==null?void 0:T.notes)||d.notes||"",venue_details:(T==null?void 0:T.venue_details)||d.venue_details||""})},className:"text-primary hover:text-primary/80",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),s.jsx("button",{type:"button",onClick:()=>{const Q=d.selected_dates.filter(oe=>oe!==D),ye=d.lesson_slots.filter(oe=>oe.date!==D);f({...d,selected_dates:Q,lesson_slots:ye})},className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})},E)})})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsxs("div",{className:"flex",children:[s.jsx(va,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:""}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"15"}),s.jsx("li",{children:""}),s.jsx("li",{children:""})]})]})]})})]})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:""}),s.jsx("button",{type:"button",onClick:()=>b(null),className:"text-gray-500 hover:text-gray-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:_.start_time,onChange:D=>C({..._,start_time:D.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:_.end_time,onChange:D=>C({..._,end_time:D.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:_.capacity,onChange:D=>C({..._,capacity:parseInt(D.target.value,10)||1}),min:"1",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:_.price,onChange:D=>C({..._,price:parseInt(D.target.value,10)||0}),min:"0",disabled:d.is_free_trial,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 ${d.is_free_trial?"bg-gray-100 cursor-not-allowed":""}`}),d.is_free_trial&&s.jsx("p",{className:"mt-1 text-xs text-orange-500",children:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"%OFF"}),s.jsx("input",{type:"number",value:_.discount,onChange:D=>C({..._,discount:parseInt(D.target.value,10)||0}),min:"0",max:"100",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"number",value:_.deadline_days,onChange:D=>C({..._,deadline_days:parseInt(D.target.value,10)||1}),min:"0",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"time",value:_.deadline_time,onChange:D=>C({..._,deadline_time:D.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("textarea",{value:_.notes,onChange:D=>C({..._,notes:D.target.value}),rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:""})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(re,{variant:"outline",onClick:()=>b(null),children:""}),s.jsx(re,{onClick:()=>{const D=[...d.lesson_slots],E=D.findIndex(F=>F.date===p);E!==-1?D[E]={...D[E],start_time:_.start_time,end_time:_.end_time,capacity:_.capacity,price:d.is_free_trial?0:_.price,discount:_.discount,deadline_days:_.deadline_days,deadline_time:_.deadline_time,notes:_.notes,venue_details:_.venue_details,is_free_trial:d.is_free_trial}:(D.push({}),D[D.length-1]={date:p,start_time:_.start_time,end_time:_.end_time,capacity:_.capacity,price:d.is_free_trial?0:_.price,discount:_.discount,deadline_days:_.deadline_days,deadline_time:_.deadline_time,notes:_.notes,venue_details:_.venue_details,is_free_trial:d.is_free_trial}),f({...d,lesson_slots:D}),b(null)},children:""})]})]})})]})]})})}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsx(re,{variant:"outline",onClick:()=>{const D=["basic","details","schedule"],E=D.indexOf(r);E>0&&n(D[E-1])},disabled:r==="basic",children:""}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(re,{variant:"outline",onClick:P,disabled:o,children:""}),r==="schedule"?s.jsx(re,{onClick:N,disabled:o||u,children:o?"...":""}):s.jsx(re,{onClick:()=>{const D=["basic","details","schedule"],E=D.indexOf(r);E<D.length-1&&n(D[E+1])},disabled:r==="schedule",children:""})]})]})]})},D3=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(""),[o,l]=v.useState("upcoming"),[u,c]=v.useState(!1);v.useEffect(()=>{m()},[o]);const m=async()=>{try{n(!0);const{data:{user:x}}=await M.auth.getUser();if(!x){n(!1);return}let y=M.from("bookings").select(`
            *,
            user:user_profiles(name, profile_image_url),
            lesson:lessons!lesson_id(
              lesson_title,
              price,
              status,
              instructor_id
            ),
            slot:lesson_slots!slot_id(
              date_time_start,
              date_time_end
            )
          `).filter("lesson.instructor_id","eq",x.id);const g=new Date().toISOString();o==="upcoming"?y=y.in("status",["pending","confirmed"]).gt("slot.date_time_start",g).order("date_time_start",{ascending:!0,foreignTable:"slot"}):o==="pending"?y=y.eq("status","pending").order("created_at",{ascending:!1}):o==="past"?y=y.in("status",["confirmed","completed","cancelled"]).lt("slot.date_time_start",g).order("date_time_start",{ascending:!1,foreignTable:"slot"}):o==="cancelled"&&(y=y.eq("status","cancelled").order("updated_at",{ascending:!1}));const{data:p,error:b}=await y;if(b){console.error("Error fetching bookings:",b);return}const _=(p||[]).filter(C=>C.lesson);t(_)}catch(x){console.error("Error:",x)}finally{n(!1)}},h=async(x,y,g)=>{try{c(!0);const{error:p}=await M.from("bookings").update({status:y,updated_at:new Date().toISOString()}).eq("id",x);if(p)throw p;t(C=>C.map(k=>k.id===x?{...k,status:y}:k));const{data:b,error:_}=await M.from("lesson_slots").select("current_participants_count").eq("id",g).single();_?console.error("Error fetching updated slot data:",_):b&&t(C=>C.map(k=>{var j;return((j=k.slot)==null?void 0:j.id)===g?{...k,slot:{...k.slot,current_participants_count:b.current_participants_count}}:k})),wt({description:y==="confirmed"?"":""}),o==="pending"&&m()}catch(p){console.error("Error updating booking status:",p),wt({variant:"destructive",title:"",description:p.message||""})}finally{c(!1)}},d=e.filter(x=>x.user.name.toLowerCase().includes(a.toLowerCase())||x.lesson.lesson_title.toLowerCase().includes(a.toLowerCase())),f=x=>{switch(x){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},w=x=>{switch(x){case"confirmed":return"";case"pending":return"";case"cancelled":return"";case"completed":return"";default:return x}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),s.jsxs(rl,{defaultValue:"upcoming",value:o,onValueChange:l,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsxs(ii,{children:[s.jsx(Dt,{value:"upcoming",children:""}),s.jsx(Dt,{value:"pending",children:""}),s.jsx(Dt,{value:"past",children:""}),s.jsx(Dt,{value:"cancelled",children:""})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Rs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"...",className:"pl-9 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 w-full sm:w-64",value:a,onChange:x=>i(x.target.value)})]})]}),s.jsx(Pt,{value:"upcoming",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(x=>{var y,g;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x.user.profile_image_url||"/placeholder-avatar.jpg",alt:x.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:x.user.name})})]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((y=x.lesson)==null?void 0:y.lesson_title)||""}),s.jsx("div",{className:"text-sm text-gray-500",children:((g=x.lesson)==null?void 0:g.status)==="cancelled"&&"()"})]}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:x.slot?Et(x.slot.date_time_start):""})]}),x.slot?s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(mt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(x.slot.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(x.slot.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]}):null]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(x.status)}`,children:w(x.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[x.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{var p;return h(x.id,"confirmed",((p=x.slot)==null?void 0:p.id)||"")},disabled:u,className:"text-gray-400 hover:text-green-500",children:s.jsx(yo,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>{var p;return h(x.id,"cancelled",((p=x.slot)==null?void 0:p.id)||"")},disabled:u,className:"text-gray-400 hover:text-red-500",children:s.jsx(Il,{className:"h-5 w-5"})})]}),s.jsx(ee,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(vn,{className:"h-5 w-5"})})]})})]},x.id)})})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:""})})}),s.jsx(Pt,{value:"pending",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-100",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{className:"font-medium",children:""}),s.jsx("p",{className:"mt-1",children:""})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x.user.profile_image_url||"/placeholder-avatar.jpg",alt:x.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:x.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.lesson.lesson_title})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:x.slot?Et(x.slot.date_time_start):""})]}),x.slot?s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(mt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(x.slot.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(x.slot.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]}):null]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-500",children:Et(x.created_at)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{var y;return h(x.id,"confirmed",((y=x.slot)==null?void 0:y.id)||"")},disabled:u,className:"text-green-500 hover:text-green-700",children:s.jsx(yo,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>{var y;return h(x.id,"cancelled",((y=x.slot)==null?void 0:y.id)||"")},disabled:u,className:"text-red-500 hover:text-red-700",children:s.jsx(Il,{className:"h-5 w-5"})}),s.jsx(ee,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(vn,{className:"h-5 w-5"})})]})})]},x.id))})]})})})]}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:""})})}),s.jsx(Pt,{value:"past",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x.user.profile_image_url||"/placeholder-avatar.jpg",alt:x.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:x.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.lesson.lesson_title})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:x.slot?Et(x.slot.date_time_start):""})]}),x.slot?s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(mt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsxs("span",{className:"text-sm",children:[new Date(x.slot.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(x.slot.date_time_end).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})]})]}):null]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(x.status)}`,children:w(x.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(ee,{to:"/instructor/chat",className:"text-gray-400 hover:text-blue-500",children:s.jsx(vn,{className:"h-5 w-5"})})})]},x.id))})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:""})})}),s.jsx(Pt,{value:"cancelled",className:"space-y-4",children:r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d.length>0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700 text-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""}),s.jsx("th",{className:"px-6 py-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x.user.profile_image_url||"/placeholder-avatar.jpg",alt:x.user.name})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:x.user.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.lesson.lesson_title})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"h-4 w-4 mr-1 text-gray-400"}),s.jsx("span",{className:"text-sm",children:x.slot?Et(x.slot.date_time_start):""})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Il,{className:"h-4 w-4 mr-1 text-red-400"}),s.jsx("span",{className:"text-sm",children:Et(x.updated_at)})]})})]},x.id))})]})})}):s.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border",children:s.jsx("p",{className:"text-gray-500",children:""})})})]})]})},Pu=v.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));Pu.displayName="Input";const P3=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(""),[o,l]=v.useState(null);v.useEffect(()=>{(async()=>{try{const{data:{user:d}}=await M.auth.getUser();l(d)}catch(d){console.error("Error fetching current user:",d)}})()},[]),v.useEffect(()=>{if(o){u();const h=M.channel("instructor_chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},d=>{const f=d.new.chat_room_id;t(w=>{const x=w.findIndex(p=>p.id===f);if(x===-1)return w;const y=[...w],g=y[x];return y[x]={...g,last_message:d.new.message,last_message_at:d.new.created_at,unread_count:d.new.sender_id!==o.id?(g.unread_count||0)+1:g.unread_count||0},y.splice(x,1),y.unshift(y[x]),y})}).subscribe();return()=>{M.removeChannel(h)}}},[o]);const u=async()=>{try{if(n(!0),!o){n(!1);return}const{data:h,error:d}=await M.from("chat_rooms").select(`
          *,
          user:user_id(
            id, 
            profile_image_url,
            name
          )
        `).eq("instructor_id",o.id).order("created_at",{ascending:!1});if(d){console.error("Error fetching chat rooms:",d);return}const f=await Promise.all((h||[]).map(async w=>{var b,_,C,k;const{data:x,error:y}=await M.from("chat_messages").select("*").eq("chat_room_id",w.id).order("created_at",{ascending:!1}).limit(1);if(y)return console.error("Error fetching messages:",y),w;const{count:g,error:p}=await M.from("chat_messages").select("*",{count:"exact",head:!0}).eq("chat_room_id",w.id).eq("is_read",!1).neq("sender_id",o.id);return p?(console.error("Error counting unread messages:",p),{...w,last_message:((b=x==null?void 0:x[0])==null?void 0:b.message)||"",last_message_at:((_=x==null?void 0:x[0])==null?void 0:_.created_at)||w.created_at,unread_count:0}):{...w,last_message:((C=x==null?void 0:x[0])==null?void 0:C.message)||"",last_message_at:((k=x==null?void 0:x[0])==null?void 0:k.created_at)||w.created_at,unread_count:g||0}}));f.sort((w,x)=>{const y=new Date(w.last_message_at||w.created_at).getTime();return new Date(x.last_message_at||x.created_at).getTime()-y}),t(f)}catch(h){console.error("Error:",h)}finally{n(!1)}},c=e.filter(h=>h.user.name.toLowerCase().includes(a.toLowerCase())||h.last_message&&h.last_message.toLowerCase().includes(a.toLowerCase())),m=h=>{const d=new Date(h),f=new Date,w=new Date(d.getFullYear(),d.getMonth(),d.getDate()),x=new Date(f.getFullYear(),f.getMonth(),f.getDate()),y=Math.floor((x.getTime()-w.getTime())/(24*60*60*1e3));return y===0?d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):y===1?" "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):y===2?" "+d.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):y<7?["","","","","","",""][d.getDay()]+"":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(d)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx(Pu,{placeholder:"...",className:"pl-9 pr-4",value:a,onChange:h=>i(h.target.value)})]})}),r?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):c.length>0?s.jsx("div",{className:"divide-y divide-gray-100",children:c.map(h=>s.jsx(ee,{to:`/instructor/chat/${h.id}`,className:"block hover:bg-gray-50",children:s.jsxs("div",{className:"p-4 flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:h.user.profile_image_url||"/placeholder-avatar.jpg",alt:h.user.name,className:"h-12 w-12 rounded-full object-cover"}),h.unread_count>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h.unread_count})]}),s.jsxs("div",{className:"flex-1 min-w-0 ml-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-sm font-medium text-gray-900 truncate",children:h.user.name}),s.jsx("p",{className:"text-xs text-gray-500",children:m(h.last_message_at)})]}),s.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:h.last_message||""})]}),s.jsx(Dn,{className:"h-5 w-5 text-gray-400 ml-2"})]})},h.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(vn,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:""}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a?"":""})]})]})]})},M3=()=>{const{id:e}=ti(),t=v.useRef(null),[r,n]=v.useState([]),[a,i]=v.useState(""),[o,l]=v.useState(!0),[u,c]=v.useState(!1),[m,h]=v.useState(!1),[d,f]=v.useState(!0),[w,x]=v.useState(null),[y,g]=v.useState(null),[p,b]=v.useState([]),[_,C]=v.useState(0),k=20;v.useEffect(()=>{(async()=>{try{const{data:{user:I}}=await M.auth.getUser();I&&g(I.id)}catch(I){console.error("Error fetching current user:",I)}})()},[]),v.useEffect(()=>{if(e&&y){j(),U();const T=`chat_messages_${e}_${Date.now()}`,I=M.channel(T).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`chat_room_id=eq.${e}`},L=>{const W=L.new;n(q=>[...q.filter(X=>!(X.id.startsWith("temp-")&&X.sender_id===W.sender_id)),W]),W.sender_id!==y&&R(W.id)}).subscribe();return()=>{M.removeChannel(I)}}},[e,y]);const j=async()=>{if(!(!e||!y))try{l(!0);const{data:T,error:I}=await M.from("chat_rooms").select(`
          *,
          user:user_profiles!chat_rooms_user_id_fkey(id, name, profile_image_url)
        `).eq("id",e).single();if(I){console.error("Error fetching chat room:",I);return}T&&T.user&&x(T.user),S();const{data:L,error:W}=await M.from("chat_messages").select("id").eq("chat_room_id",e).neq("sender_id",y).eq("is_read",!1);if(W)console.error("Error fetching unread messages:",W);else if(L&&L.length>0){console.log(`Marking ${L.length} messages as read in room ${e} for instructor`);const q=L.map(X=>X.id),{error:H}=await M.from("chat_messages").update({is_read:!0}).in("id",q);H?console.error("Error marking messages as read:",H):console.log("Messages marked as read successfully")}}catch(T){console.error("Error fetching chat data:",T)}finally{l(!1),setTimeout(()=>N(),100)}},S=async(T=!1)=>{if(e)try{const I=T?_+1:0;T&&h(!0);const{data:L,error:W}=await M.from("chat_messages").select("*").eq("chat_room_id",e).order("created_at",{ascending:!0}).range(I*k,(I+1)*k-1);if(W){console.error("Error fetching messages:",W);return}f(L.length===k),C(I),n(T?q=>[...q,...L]:L||[])}catch(I){console.error("Error:",I)}finally{l(!1),h(!1),T||setTimeout(()=>N(),100)}},U=async()=>{if(!(!e||!y))try{const{data:T}=await M.from("chat_rooms").select("user_id").eq("id",e).single();if(!T)return;const{data:I,error:L}=await M.from("bookings").select(`
          id,
          lesson:lessons(id, lesson_title, date_time_start)
        `).eq("user_id",T.user_id).eq("lesson.instructor_id",y).order("lesson.date_time_start",{ascending:!1}).limit(3);if(L){console.error("Error fetching related bookings:",L);return}const W=(I||[]).map(q=>({id:q.id,lesson:Array.isArray(q.lesson)?q.lesson[0]:q.lesson}));b(W)}catch(T){console.error("Error:",T)}},R=async T=>{await M.from("chat_messages").update({is_read:!0}).eq("id",T)},P=async()=>{if(!(!e||!a.trim()||!y))try{c(!0);const T=a.trim(),I={id:`temp-${Date.now()}`,chat_room_id:e,sender_id:y,message:T,is_read:!1,created_at:new Date().toISOString()};n(W=>[...W,I]),i(""),setTimeout(()=>N(),100);const{error:L}=await M.from("chat_messages").insert({chat_room_id:e,sender_id:y,message:T,is_read:!1});if(L){console.error("Error sending message:",L),n(W=>W.filter(q=>!q.id.startsWith("temp-")));return}window.location.reload()}catch(T){console.error("Error:",T),n(I=>I.filter(L=>!L.id.startsWith("temp-")))}finally{c(!1)}},N=()=>{var T;(T=t.current)==null||T.scrollIntoView({behavior:"smooth"})},$=()=>{const T={};return r.forEach(I=>{const L=new Date(I.created_at).toLocaleDateString("ja-JP");T[L]||(T[L]=[]),T[L].push(I)}),T},O=T=>{const I=new Date(T),L=new Date,W=new Date(L);return W.setDate(W.getDate()-1),I.toDateString()===L.toDateString()?"":I.toDateString()===W.toDateString()?"":Et(T)},D=T=>new Date(T).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),E=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),P())};if(o)return s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});const F=$();return s.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)]",children:[s.jsx("div",{className:"flex justify-between items-center bg-white p-4 border-b",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ee,{to:"/instructor/chat",className:"mr-4 text-gray-500 hover:text-gray-700",children:s.jsx(gu,{className:"h-5 w-5"})}),w&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:w.profile_image_url||"/placeholder-avatar.jpg",alt:w.name,className:"h-10 w-10 rounded-full object-cover"}),s.jsx("div",{className:"ml-3",children:s.jsx("h2",{className:"text-sm font-medium text-gray-900",children:w.name})})]})]})}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:[d&&s.jsx("div",{className:"text-center mb-4",children:s.jsx(re,{variant:"outline",size:"sm",onClick:()=>S(!0),disabled:m,children:m?"...":""})}),Object.keys(F).map(T=>s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center my-4",children:s.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:O(T)})}),F[T].map(I=>s.jsxs("div",{className:`flex mb-4 ${I.sender_id===y?"justify-end":"justify-start"}`,children:[I.sender_id!==y&&w&&s.jsx("img",{src:w.profile_image_url||"/placeholder-avatar.jpg",alt:w.name,className:"h-8 w-8 rounded-full object-cover mr-2 self-end"}),s.jsxs("div",{className:"flex flex-col max-w-[70%]",children:[s.jsx("div",{className:`rounded-2xl p-3 inline-block ${I.sender_id===y?"bg-primary text-white rounded-tr-none":"bg-white border rounded-tl-none"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:I.message})}),s.jsxs("span",{className:`text-xs text-gray-500 mt-1 ${I.sender_id===y?"text-right":"text-left"}`,children:[D(I.created_at),I.sender_id===y&&s.jsx("span",{className:"ml-1",children:I.is_read?"":""})]})]}),I.sender_id===y&&s.jsx("div",{className:"h-8 w-8 ml-2"})]},I.id))]},T)),s.jsx("div",{ref:t})]}),p.length>0&&s.jsxs("div",{className:"w-72 border-l bg-white p-4 overflow-y-auto hidden md:block",children:[s.jsx("h3",{className:"font-medium text-sm text-gray-900 mb-3",children:""}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-2",children:""}),p.map(T=>s.jsxs("div",{className:"bg-gray-50 rounded-md p-3 text-sm",children:[s.jsx("p",{className:"font-medium text-gray-900",children:T.lesson.lesson_title}),s.jsxs("div",{className:"flex items-center mt-1 text-gray-500 text-xs",children:[s.jsx(lt,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:Et(T.lesson.date_time_start)})]}),s.jsxs("div",{className:"flex items-center mt-1 text-gray-500 text-xs",children:[s.jsx(mt,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:new Date(T.lesson.date_time_start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]})]},T.id))]})})]})]}),s.jsx("div",{className:"bg-white border-t p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Pu,{value:a,onChange:T=>i(T.target.value),onKeyDown:E,placeholder:"...",className:"flex-1",disabled:u}),s.jsx(re,{onClick:P,disabled:!a.trim()||u,className:"ml-2",children:s.jsx(tb,{className:"h-4 w-4"})})]})})]})},O3=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0);v.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const{data:{user:u}}=await M.auth.getUser();if(!u){n(!1);return}const{data:c,error:m}=await M.from("notifications").select("*").eq("user_id",u.id).order("created_at",{ascending:!1});if(m){console.error("Error fetching notifications:",m);return}t(c||[]);const h=(c==null?void 0:c.filter(d=>!d.is_read).map(d=>d.id))||[];h.length>0&&await M.from("notifications").update({is_read:!0}).in("id",h)}catch(u){console.error("Error:",u)}finally{n(!1)}},i=u=>{if(!u)return s.jsx(ya,{className:"h-6 w-6 text-gray-500"});switch(u){case"booking_request":case"booking_confirmed":case"booking_cancelled":return s.jsx(Wg,{className:"h-6 w-6 text-blue-500"});case"message":return s.jsx(vn,{className:"h-6 w-6 text-green-500"});case"review":return s.jsx(Ho,{className:"h-6 w-6 text-yellow-500"});case"favorite":return s.jsx(qg,{className:"h-6 w-6 text-red-500"});case"payment":return s.jsx(Ya,{className:"h-6 w-6 text-emerald-500"});case"new_student":return s.jsx(vo,{className:"h-6 w-6 text-purple-500"});default:return s.jsx(ya,{className:"h-6 w-6 text-gray-500"})}},o=u=>{switch(u.type||""){case"booking_request":case"booking_confirmed":case"booking_cancelled":return"/instructor/bookings";case"message":return u.entity_id?`/instructor/chat/${u.entity_id}`:"/instructor/chat";case"review":return"/instructor/lessons";case"payment":return"/instructor/bookings";default:return"#"}},l=u=>{const c=new Date(u),m=new Date,h=new Date(c.getFullYear(),c.getMonth(),c.getDate()),d=new Date(m.getFullYear(),m.getMonth(),m.getDate()),f=Math.floor((d.getTime()-h.getTime())/(24*60*60*1e3));return f===0?c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):f===1?" "+c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):f===2?" "+c.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}):f<7?["","","","","","",""][c.getDay()]+"":new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric"}).format(c)};return r?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:""}),e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(ya,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:""}),s.jsx("p",{className:"mt-2 text-gray-500",children:""})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border divide-y",children:e.map(u=>s.jsx(ee,{to:o(u),className:`block p-4 hover:bg-gray-50 ${u.is_read?"":"bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-full p-2",children:i(u.type)}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h3",{className:`text-sm font-medium ${u.is_read?"text-gray-900":"text-blue-800"}`,children:u.title}),s.jsx("span",{className:"text-xs text-gray-500",children:l(u.created_at)})]}),s.jsx("p",{className:`mt-1 text-sm ${u.is_read?"text-gray-600":"text-blue-700"}`,children:u.message})]}),!u.is_read&&s.jsx("div",{className:"ml-3 bg-blue-500 rounded-full w-2 h-2"})]})},u.id))})]})},$3=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(!1),{toast:u}=$r(),c=Ht();v.useEffect(()=>{(async()=>{t(!0);try{const{data:{user:f}}=await M.auth.getUser();if(!f)return;const w=new Date().toISOString(),{data:x}=await M.from("premium_subscriptions").select("*").eq("instructor_id",f.id).eq("status","active").lt("start_date",w).gt("end_date",w).maybeSingle();n(!!x),i(x)}catch(f){console.error("Error checking premium status:",f)}finally{t(!1)}})()},[]);const m=async()=>{l(!0);try{const{data:{user:d}}=await M.auth.getUser();if(!d){u({title:"",description:"",variant:"destructive"});return}const f=new Date,w=new Date;w.setMonth(w.getMonth()+1);const{data:x,error:y}=await M.from("premium_subscriptions").insert([{instructor_id:d.id,start_date:f.toISOString(),end_date:w.toISOString(),status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(y)throw y;await M.from("lessons").update({is_featured:!0}).eq("instructor_id",d.id).eq("status","published"),u({title:"",description:""}),n(!0),i(x)}catch(d){u({title:"",description:d.message||"",variant:"destructive"})}finally{l(!1)}},h=async()=>{l(!0);try{if(!a)return;const{error:d}=await M.from("premium_subscriptions").update({status:"canceled",updated_at:new Date().toISOString()}).eq("id",a.id);if(d)throw d;await M.from("lessons").update({is_featured:!1}).eq("instructor_id",a.instructor_id),u({title:"",description:""}),c(0)}catch(d){u({title:"",description:d.message||"",variant:"destructive"})}finally{l(!1)}};return e?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx(Nr,{className:"w-16 h-16 text-yellow-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:""}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:""})]}),r?s.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl p-8 border border-yellow-200 mb-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Nr,{className:"w-8 h-8 text-yellow-500 mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:""}),s.jsx("p",{className:"font-medium",children:Et(a==null?void 0:a.end_date)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:""})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:" 010%"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:""})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),s.jsxs("p",{className:"mb-3",children:[s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:od(1e4)}),s.jsx("span",{className:"text-gray-500",children:" / "})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:" - "}),s.jsx(re,{variant:"outline",className:"w-full",onClick:h,disabled:o,children:o?"...":""})]})]}),s.jsxs("div",{className:"bg-yellow-100 rounded-lg p-4 flex items-start",children:[s.jsx(J1,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-yellow-700",children:" "})]})]}):s.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 mb-10",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary/90 to-primary p-8 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:""}),s.jsx("p",{className:"mt-2 text-white/90",children:""})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xl font-bold",children:od(1e4)}),s.jsx("p",{className:"text-sm text-white/90",children:"/ "})]})]})}),s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:""}),s.jsxs("ul",{className:"space-y-4 mb-8",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:" 0"}),s.jsx("p",{className:"text-gray-600",children:"10%500/"})]})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Ys,{className:"h-5 w-5 text-primary mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-8",children:[s.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600 mb-2",children:"20 10,000"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:": 500  20 = 10,000"}),s.jsx("li",{children:": 10,000  10%  10 = 10,000"}),s.jsxs("li",{children:["",s.jsx("span",{className:"font-medium text-primary",children:": 10,000"})]})]})]}),s.jsx(re,{className:"w-full py-6",onClick:m,disabled:o,children:o?"...":""}),s.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:" - "})]})]}),s.jsx("div",{className:"space-y-8",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:""}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:""})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:" "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:"500/ 10% "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-100",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:"1.  2. 010% 3. "})]})]})]})})]})},I3=()=>s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h1",{className:"text-9xl font-bold text-primary",children:"404"}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:""}),s.jsx("p",{className:"mt-2 text-lg text-gray-600 max-w-md mx-auto",children:""}),s.jsx("div",{className:"mt-10",children:s.jsx(re,{asChild:!0,children:s.jsx(ee,{to:"/",children:""})})})]});function L3(){var o;const[e,t]=v.useState(null),[r,n]=v.useState(!0),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const{data:c,error:m}=await M.auth.getSession();if(m){console.error("Error fetching session:",m.message),i(m.message);return}if(c.session){const{data:h,error:d}=await M.auth.getUser();d?(console.error("Error fetching user:",d.message),i(d.message)):t(h.user||null)}else console.log("No active session found"),t(null)}catch(c){console.error("Unexpected error fetching user:",c),i("")}finally{n(!1)}})();const{data:u}=M.auth.onAuthStateChange((c,m)=>{console.log("Auth state changed:",c),c==="SIGNED_IN"||c==="TOKEN_REFRESHED"?t((m==null?void 0:m.user)||null):c==="SIGNED_OUT"&&t(null)});return()=>{u&&u.subscription&&u.subscription.unsubscribe()}},[]),v.useEffect(()=>{const l=()=>{(async()=>{try{const{data:c}=await M.auth.getUser();t(c.user||null)}catch(c){console.error("Session restore error:",c)}})()};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]),r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white",children:[s.jsxs("div",{className:"relative w-16 h-16",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),s.jsx("p",{className:"mt-4 text-lg font-medium text-foreground/70 animate-pulse",children:"..."})]}):a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white",children:[s.jsx("div",{className:"text-red-500 mb-4",children:""}),s.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-md",onClick:()=>window.location.href="/login",children:""})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Qw,{children:[s.jsx(we,{path:"/login",element:s.jsx(e2,{})}),s.jsx(we,{path:"/register",element:s.jsx(t2,{})}),s.jsx(we,{path:"/reset-password",element:s.jsx(r2,{})}),s.jsx(we,{path:"/update-password",element:s.jsx(s2,{})}),s.jsxs(we,{path:"/user",element:s.jsx(Rt,{user:e,userType:"user",children:s.jsx(n2,{})}),children:[s.jsx(we,{index:!0,element:s.jsx(u2,{})}),s.jsx(we,{path:"lessons",element:s.jsx(HS,{})}),s.jsx(we,{path:"lessons/:id",element:s.jsx(YS,{})}),s.jsx(we,{path:"instructors/:id",element:s.jsx(VS,{})}),s.jsx(we,{path:"bookings",element:s.jsx(GS,{})}),s.jsx(we,{path:"chat",element:s.jsx(JS,{})}),s.jsx(we,{path:"chat/:id",element:s.jsx(KS,{})}),s.jsx(we,{path:"profile",element:s.jsx(QS,{})}),s.jsx(we,{path:"favorites",element:s.jsx(XS,{})}),s.jsx(we,{path:"history",element:s.jsx(ZS,{})}),s.jsx(we,{path:"notifications",element:s.jsx(e3,{})})]}),s.jsxs(we,{path:"/instructor",element:s.jsx(Rt,{user:e,userType:"instructor",children:s.jsx(t3,{})}),children:[s.jsx(we,{index:!0,element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(r3,{})})}),s.jsx(we,{path:"profile",element:s.jsx(Rt,{user:e,userType:"instructor",allowIncompleteProfile:!0,children:s.jsx(s3,{})})}),s.jsx(we,{path:"lessons",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(_3,{})})}),s.jsx(we,{path:"lessons/create",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(E3,{})})}),s.jsx(we,{path:"lessons/:id/edit",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(T3,{})})}),s.jsx(we,{path:"bookings",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(D3,{})})}),s.jsx(we,{path:"chat",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(P3,{})})}),s.jsx(we,{path:"chat/:id",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx(M3,{})})}),s.jsx(we,{path:"notifications",element:s.jsx(Rt,{user:e,userType:"instructor",allowIncompleteProfile:!0,children:s.jsx(O3,{})})}),s.jsx(we,{path:"premium",element:s.jsx(Rt,{user:e,userType:"instructor",requireProfileCompletion:!0,children:s.jsx($3,{})})})]}),s.jsx(we,{path:"/",element:e?((o=e.user_metadata)==null?void 0:o.user_type)==="instructor"?s.jsx(br,{to:"/instructor",replace:!0}):s.jsx(br,{to:"/user",replace:!0}):s.jsx(br,{to:"/login",replace:!0})}),s.jsx(we,{path:"*",element:s.jsx(I3,{})})]}),s.jsx(Su,{})]})}Kl.createRoot(document.getElementById("root")).render(s.jsx(K.StrictMode,{children:s.jsx(n1,{children:s.jsx(L3,{})})}));export{Ah as g};
